<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ws="ws-component">
   <head>
      <title>RecordSet stress test</title>
      <script type="text/javascript">
         window.wsConfig = {
            WSRootPath: '/sbis3-ws/ws/',
            wsRoot: '/sbis3-ws/ws/',
            WSTheme: 'wi_scheme',
            resourceRoot: '/components',
            nostyle: true,
            globalConfigSupport: false
         };
         window.WSTheme = 'wi_scheme';
      </script>
      <script type="text/javascript" src="/components/contents.js"></script>
      <script type="text/javascript" src="/sbis3-ws/ws/ext/requirejs/require.js"></script>
      <script type="text/javascript" src="/sbis3-ws/ws/ext/requirejs/config.js"></script>
      <script type="text/javascript" src="/sbis3-ws/ws/lib/core.js"></script>
      <script type="text/javascript" src="/tests/performance/test.js"></script>
      <link rel="stylesheet" type="text/css" href="/tests/performance/test.css"/>
   </head>
   <body onload="doTest()">
      <script type="text/javascript">
         function doTest() {
            require([
               'js!SBIS3.CONTROLS.Data.Collection.RecordSet'
            ], function (RecordSet) {
               test.log('RecordSet stress test');
               test.startCounter('total');

               test.startCounter('createData');
               var data = test.createData();
               test.finishCounter('createData');

               test.startCounter('traverseData');
               var recordset = new RecordSet({
                     rawData: data
                  }),
                  count = recordset.getCount(),
                  i,
                  enumerator,
                  record,
                  name,
                  value;
               for (i = 0; i < count; i++) {
                  record = recordset.at(i);
                  enumerator = record.getEnumerator();
                  while ((name = enumerator.getNext())) {
                     value = record.get(name);
                     //test.log([name, value]);
                  }
               }
               test.finishCounter('traverseData');

               test.finishCounter('total');
            });
         }
      </script>
   </body>
</html>