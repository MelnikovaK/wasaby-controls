<div class="ws-Suggest">
    <Controls.Container.Search
            on:deactivated="_deactivated()"
            on:itemClick="_select()"
            on:searchStart="_searchStart()"
            on:searchEnd="_searchEnd()">
        <div>
            <Controls.Container.Input.Search>
                <Controls.Input.resources.InputRender.InputRender
                        name="suggestText"
                        size="{{ _options.size }}"
                        viewModel="{{_simpleViewModel}}"
                        trim="{{_options.trim}}"
                        selectOnClick="{{_options.selectOnClick}}"
                        inputCharRegExp="{{_options.inputCharRegExp}}"
                        constraint="{{_options.constraint}}"
                        value="{{_options.value}}"
                        tagStyle="{{_options.tagStyle}}"
                        placeholder="{{_options.placeholder}}"
                        validationErrors="{{_options.validationErrors}}"
                        on:valueChanged="_changeValueHandler()"
                        attr:class="ws-Suggest__inputRender">
                    <ws:content>
                        <ws:partial template="tmpl!Controls/Input/resources/input"/>
                    </ws:content>
                    <ws:afterFieldWrapper>
                        <div if="{{_searching || _options.value}}" class="ws-Suggest__afterFieldWrapper">
                            <div if="{{_searching}}" class="ws-Suggest__loader"></div>
                            <div if="{{_options.value}}" class="ws-Suggest__clear icon-size icon-Close" on:click="_clearClick()"></div>
                        </div>
                    </ws:afterFieldWrapper>
                </Controls.Input.resources.InputRender.InputRender>
            </Controls.Container.Input.Search>

            <ws:if data="{{_isOpen}}">
                <div class="ws-Suggest__suggestionsContainer">
                    <ws:partial template="{{_options.suggestTemplate}}"/>
                    <ws:partial if="{{_options.emptyTemplate && !_searchResult.hasMore}}" template="{{_options.emptyTemplate}}"/>
                    <ws:partial if="{{_options.footerTemplate && _searchResult.hasMore}}" template="{{_options.footerTemplate}}" on:click="_showAllClick()"/>
                </div>
            </ws:if>
        </div>
    </Controls.Container.Search>

    <Controls.Popup.Opener.Stack name="stackOpener">
        <ws:popupOptions template="Controls/Input/resources/Suggest/Dialog">
            <ws:templateOptions template="{{_options.suggestTemplate}}" searchValue="{{_searchValue}}"/>
            <ws:eventHandlers onResult="{{_select}}"/>
        </ws:popupOptions>
    </Controls.Popup.Opener.Stack>
</div>
