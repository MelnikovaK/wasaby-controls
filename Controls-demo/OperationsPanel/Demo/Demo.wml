<div class="demo-Grid__container">
    <Layout.Browser.Tabs
       attr:class="demo-BrowserTabs"
       bind:tabsSelectedKey = "_selectedKey">
        <ws:items>
            <ws:Array>
                <ws:Object id="{{0}}" title="Список">
                    <!--TODO: пока нельзя вынести itemTemplate в отдельный файл, иначе туда не долетают изменившиеся опции.
                    Выписана ошибка: https://online.sbis.ru/opendoc.html?guid=3dd62d85-1529-4b6a-92f4-30fd82d79794 -->
                    <ws:itemTemplate>
                        <ws:if data="{{itemTemplate.type === 'topArea'}}">
                            <span>
                                <Controls.buttons:Button attr:class="demo-TopArea__button" style="primary" caption="+ Сотрудник"/>
                                <Controls.buttons:Button attr:class="demo-TopArea__button" icon="icon-24 icon-CreateFolder" viewMode="link"/>
                            </span>
                        </ws:if>
                        <ws:else>
                            <Layout.Browser source="{{_viewSource}}"
                                            keyProperty="{{_keyProperty}}"
                                            nodeProperty="{{_nodeProperty}}"
                                            parentProperty="{{_parentProperty}}"
                                            filterButtonSource="{{_filterButtonSource}}"
                                            on:selectedKeysChanged="_selectionChangeHandler()"
                                            on:excludedKeysChanged="_selectionChangeHandler()"
                                            bind:operationsPanelExpanded="_expanded"
                                            bind:selectedKeys="_selectedKeys"
                                            bind:excludedKeys="_excludedKeys">
                                <ws:search>
                                    <Controls.Input.Search bind:value="value"/>
                                </ws:search>
                                <ws:filterButton>
                                    <Controls.Filter.Button templateName="tmpl!Engine-demo/Browser/resources/filterButtonEngineTemplate"/>
                                </ws:filterButton>
                                <ws:operationsPanel>
                                    <Controls.Operations.Panel
                                       parentProperty="parent"
                                       nodeProperty="@parent"
                                       keyProperty="id"
                                       source="{{_panelSource}}"
                                       on:itemClick="_panelItemClick()">
                                        <ws:rightTemplate>
                                            <Controls.buttons:Button
                                               caption="Доп. операции"
                                               on:click="_onClickAddBlock()"
                                               icon="icon-small icon-Settings"
                                               viewMode="link"
                                               style="secondary"
                                            />
                                        </ws:rightTemplate>
                                    </Controls.Operations.Panel>
                                </ws:operationsPanel>
                                <ws:actions>
                                    <Controls.lists:Remover name="remover"
                                                           nodeProperty="Раздел@"
                                                           parentProperty="Раздел"
                                                           on:beforeItemsRemove="_beforeItemsRemove()"
                                                           on:afterItemsRemove="_afterItemsRemove()"/>
                                    <Controls.lists:Mover name="dialogMover" on:afterItemsMove="_afterItemsMove()">
                                        <ws:moveDialogTemplate>
                                            <Controls.List.Mover.MoveDialog
                                               root="{{null}}"
                                               columns="{{_moveDialogColumns}}"
                                               filter="{{_moveDialogFilter}}"
                                               multiSelectVisibility="visible"
                                               parentProperty="Раздел"
                                               showRoot="{{true}}"
                                               source="{{_moverSource}}"
                                               searchParam="department"
                                               displayProperty="department"
                                               hasChildrenProperty="Раздел$"
                                               nodeProperty="Раздел@"/>
                                        </ws:moveDialogTemplate>
                                    </Controls.lists:Mover>
                                </ws:actions>
                                <ws:content>
                                    <Controls.treeGrid:View
                                       name="list"
                                       attr:class="demo-Grid__control"
                                       itemsReadyCallback="{{_itemsReadyCallback}}"
                                       itemActions="{{_itemActions}}"
                                       itemActionVisibilityCallback="{{_itemActionVisibilityCallback}}"
                                       on:itemActionsClick="_itemActionsClick()"
                                       columns="{{_gridColumns}}"
                                    />
                                </ws:content>
                            </Layout.Browser>
                        </ws:else>
                    </ws:itemTemplate>
                </ws:Object>
            </ws:Array>
        </ws:items>
    </Layout.Browser.Tabs>
    <Controls.Popup.Opener.Confirmation name="popupOpener"/>
    <Controls.Popup.Opener.Dialog name="operationsResultOpener" modal="{{true}}" template="Controls/Operations/ReportDialog">
    </Controls.Popup.Opener.Dialog>
</div>
