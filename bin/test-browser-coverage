#!/bin/sh
# Run unit testing via browser

node -v
npm install
cd ../
node node_modules/nyc/bin/nyc instrument sbis3-controls sbis3-controls-covered
cd sbis3-controls/

#mv sbis3-controls sbis3-controls-origin
#mv sbis3-controls-covered sbis3-controls
#cp -nR sbis3-controls-origin/* sbis3-controls

#node depencyCollector
#node node_modules/ws-unit-testing/queue test-server test-browser-coverage

#rm -rf components
#mv components-origin components
#rm -rf Controls
#mv Controls-origin Controls

#node coverageUnusedFiles

#mkdir artifacts/components
#mv artifacts/coverageComponents.json artifacts/components/coverage.json
#mkdir artifacts/controls
#mv artifacts/coverageControls.json artifacts/controls/coverage.json
#mkdir artifacts/all
#mv artifacts/coverageAll.json artifacts/all/coverage.json

#node node_modules/nyc/bin/nyc report --reporter=cobertura --report-dir=cobertura --temp-directory=artifacts/all
#node node_modules/nyc/bin/nyc report --reporter=html --report-dir=coverage-report --temp-directory=artifacts/all
#node node_modules/nyc/bin/nyc report --reporter=html --report-dir=coverage-controls-report --temp-directory=artifacts/controls
#node node_modules/nyc/bin/nyc report --reporter=html --report-dir=coverage-components-report --temp-directory=artifacts/components