#!/bin/sh
# Run unit testing via browser

node -v
npm install

node node_modules/nyc/bin/nyc instrument ./components ./components-covered
node node_modules/nyc/bin/nyc instrument ./Controls ./Controls-covered

mv components components-origin
mv components-covered components
mv Controls Controls-origin
mv Controls-covered Controls

#node depencyCollector
node node_modules/ws-unit-testing/queue test-server test-browser-coverage

#rm -rf components
#mv components-origin components
#rm -rf Controls
#mv Controls-origin Controls

#node coverageUnusedFiles

#node node_modules/istanbul/lib/cli report --dir "coverage-report" --include "**/coverage.json" html
#node node_modules/nyc/bin/nyc report --reporter=html --report-dir=coverage-report
#node node_modules/istanbul/lib/cli report --dir "cobertura" --include "**/coverage.json" cobertura
#node node_modules/nyc/bin/nyc report --reporter=cobertura --report-dir=cobertura
#node node_modules/istanbul/lib/cli report --dir "coverage-controls-report" --include "**/coverageControls.json" html
#node node_modules/nyc/bin/nyc report --reporter=html --report-dir=coverage-controls-report
#node node_modules/istanbul/lib/cli report --dir "coverage-components-report" --include "**/coverageComponents.json" html
#node node_modules/nyc/bin/nyc report --reporter=html --report-dir=coverage-components-report
