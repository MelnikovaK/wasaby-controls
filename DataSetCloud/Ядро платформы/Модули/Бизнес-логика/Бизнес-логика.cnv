<?xml version="1.0" encoding="WINDOWS-1251"?>
<converter_library version="1.02">

  <converter abstract="0" call_once="1" for_new_db="0" last_changed="Абрамов В.И." name="РасширениеПорядковыхНомеров" python_extension="1" responsible="Абрамов В.И.">
    <callback event="29">
      <body>if context['sequence'].startswith( 'in$' ):
   SqlQuery( 'update "' + context['table'] + '" set "' + context['column'] + '" = "' + context['column'] + '" * 1000' )
   max_num = SqlQueryScalar( 'select max("' + context['column'] + '") from "' + context['table'] + '"' )
   if max_num is not None:
      SqlQuery( 'alter sequence "' + context['sequence'] + '" restart with ' + str(max_num+10000) )</body>
      <comment>При увеличениии для порядковых номеров инкремента с 1 до 1000 умножает существующие значения в таблице на 1000 и корректирует начальное значение последовательности.</comment>
    </callback>
  </converter>

</converter_library>
