.controls-FieldLink__picker {
   max-height: @controls-FieldLink-picker-max-height;
   min-height: @controls-FieldLink-picker-min-height;
   border: @controls-FieldLink-border @gray-ccc-color;
   margin-top: 0;
   overflow: auto;
}

.controls-FieldLink__picker:not(.controls-Suggest__picker) {
   padding: @controls-FieldLink-linkContainer-padding;
   border-top: none;

   .controls-FieldLink__item {
      /* Учитываем бордер пикера */
      width: calc(50% ~'-' 2px);
      display: inline-flex;
      align-items: center;
      margin: 0;
      padding: 0;

      &:after {
         content: none;
      }

      .controls-FieldLink__item-cross {
         position: static;
         padding: 0;
      }

      .controls-FieldLink__item-caption {
         .text-overflow();
         height: @controls-FieldLink-linkItem-line-height;
      }
   }

   &.controls-popup-revert-vertical {
      border-top: @controls-FieldLink-border @gray-ccc-color;
      border-bottom: none;
   }
}

.controls-FieldLink__item {
   cursor: @controls-FieldLink-linkItem-cursor;
   display: inline-block;
   margin: @controls-FieldLink-linkItem-margin;
   position: @controls-FieldLink-linkItem-position;
   padding: @controls-FieldLink-linkItem-padding;
   line-height: @controls-FieldLink-linkItem-line-height;

   .controls-FieldLink__item-caption {
      position: relative;
      height: @controls-FieldLink-linkItem-caption-height;
   }

   .controls-FieldLink__item-cross {
      position: absolute;
      right: @controls-FieldLink-linkItem-cross-right;
      top: @controls-FieldLink-linkItem-cross-top;
      padding: @controls-FieldLink-linkItem-cross-padding;
      cursor: @link-cursor;
      z-index: 1;
   }
   &:after {
      position: absolute;
      right: 0;
      top: 0;
      content: ',';
   }
   &:last-child:after {
      content: '';
   }
}

.controls-FieldLink__picker,
.controls-FieldLink {
   &.controls-FieldLink__itemsEdited {
      .controls-FieldLink__item:hover {
         text-decoration: @link-hover-text-decoration;
         cursor: @link-cursor;
      }
   }
   &.controls-FieldLink__itemsBold {
      .controls-FieldLink__item-caption {
         font-weight: bold;
      }
   }
   &.controls-FieldLink__hideSelector {
      .controls-FieldLink__showSelector {
         display: none;
      }
   }

   &.ws-disabled {
      .controls-FieldLink__item-cross {
         display: none;
      }
   }
}

.controls-FieldLink {
   justify-content: space-between;
   border-color: @controls-FieldLink-border-color;
   position: relative;
   white-space: nowrap;

   &.controls-Picker__show,
   &.ws-has-focus,
   &:hover {
      border: @controls-FieldLink-border;
      border-color: @controls-FieldLink-border-color-focus-hover;
   }

   &.controls-Picker__show {
      background: @controls-FieldLink-picker-show-color;
   }

   .controls-TextBox__fieldWrapper {
      margin-right: @controls-FieldLink-fieldWrapper-margin;
      display: inline-block;
      order: 1;

      .controls-TextBox__field {
         width: 0;
      }
   }

   .controls-TextBox__beforeFieldWrapper {
      order: 0;
      max-width: calc(100% ~'-' 20px);
      overflow: hidden;

      .controls-FieldLink__showAllLinks {
         position: relative;
         width: 20px;
         line-height: @controls-FieldLink-showAllLinks-lineHeight;
         padding: @controls-FieldLink-showAllLinks-padding;
         float: left;
      }

      .controls-FieldLink__linksWrapper {
         height: 100%;
         display: inline-block;
         float: right;

         .controls-FieldLinkItemsCollection {
            display: inline-flex;

            .controls-FieldLink__item {
               .text-overflow();
            }
         }
      }

      .controls-FieldLink__copyShowAll {
         float: left;
         position: relative;
         top: -22px;
         width: 16px;
         line-height: @controls-FieldLink-showAllLinks-lineHeight;
         margin-right: -22px;
         text-align: center;
         background-color: @white-color;
         color: @link-text-color;
         padding: @controls-FieldLink-showAllLinks-padding;
      }
   }

   .controls-TextBox__afterFieldWrapper {
      order: 2;
      display: inline-flex;
      align-items: center;
      height: @controls-FieldLink-afterField-height;
      width: auto;

      > * {
         padding: @controls-FieldLink-afterField-padding;
      }
      .controls-FieldLink__dropAllLinks:not(:hover) {
         color: @controls-FieldLink-link-color !important;
      }
   }
   &.ws-validation-error {
      .controls-TextBox__afterFieldWrapper {
         background-color: @text-box-error-bg;
      }
   }

   &.ws-disabled {

      &.controls-TextBox {
         border-color: @text-box-border-color;
      }

      .controls-TextBox__afterFieldWrapper {
         display: none;
      }

      .controls-TextBox__beforeFieldWrapper {
         max-width: 100%;
      }

      .controls-TextBox__field {
         &::-webkit-input-placeholder { opacity: 0 }
         &:-moz-placeholder {  opacity: 0 }
         &::-moz-placeholder {  opacity: 0 }
         &:-ms-input-placeholder {  opacity: 0 }
      }

      .controls-FieldLink__item {
         padding: @controls-FieldLink-disabled-item-padding;
      }
   }

   &.controls-FieldLink__dynamicInputWidth {
      .controls-TextBox__fieldWrapper {
         display: flex;

         .controls-TextBox__field {
            width: 100%;
         }
      }
   }

   .controls-FieldLink__Link {
      display: inline;
      line-height: 20px;
   }
}

.controls-Link.controls-FieldLink__Link {

   &:not(.controls-FieldLink-Link__filterButton) {
      color: @controls-FieldLink-link-color;
      text-decoration: underline;

      &:hover {
         color: @controls-FieldLink-link-color-hover !important;
      }
   }

   &.controls-FieldLink-Link__filterButton {
      color: #0055bb;
      text-decoration: none;

      &:hover {
         color: #0055bb;
         text-decoration: underline;
      }
   }
}

.ws-is-firefox {
   .controls-FieldLink.controls-TextBox {
      .controls-TextBox__beforeFieldWrapper, .controls-TextBox__fieldWrapper {
         margin-top: -1px;
      }
      .controls-FieldLink__item-cross {
         top: -1px;
      }
   }
}

.ws-is-mobile-chrome-ios, .ws-is-mobile-safari {
   .controls-FieldLink__picker {
      &.controls-popup-revert-vertical {
         &:not(.controls-Suggest__picker) {
            border-top: none;
         }
         border-bottom: @controls-FieldLink-border @gray-ccc-color;
      }
   }
}