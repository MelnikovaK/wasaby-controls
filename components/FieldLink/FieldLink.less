/*
   <div class="controls-FieldLink">
      <div class="controls-TextBox__wrapper">
         <div class="controls-FieldLink__beforeFieldWrapper">
            <div class="controls-FieldLink__showAllLinks">...</div>
            <div class="controls-FieldLink__itemsCollection">
               <div class="controls-FieldLink__item">
                  <div class="controls-FieldLink__item-caption"> -caption- </div>
                  <div class="controls-FieldLink__item-cross"></div>
               </div>
            </div>
         </div>
         <div class="controls-FieldLink__fieldWrapper">
            <input class="controls-TextBox__field"/>
            <div class="controls-TextBox__placeholder"> -placeholder- </div>
         </div>
         <div class="controls-FieldLink__afterFieldWrapper">
            <div class="controls-FieldLink__dropAllLinks"> ✕ </div>
            <div class="controls-FieldLink__showSelector"> ≡ </div>
         </div>
      </div>
   </div>
*/

/* ------------------------------------------------------------------------------------------------------------------
   ------------------------------------ controls-FieldLink__beforeFieldWrapper --------------------------------------
   ------------------------------------------------------------------------------------------------------------------ */
.controls-FieldLink__beforeFieldWrapper {
   .inline-flexbox();
   .flex-shrink(0);
   .flex-grow(1);
   overflow: hidden;
}
// todo Нужно переделать верстку и расчёты поля связи в соответствии с демо: http://jsfiddle.net/alex111089/q0ztd41n/
// тогда будет полноценная flex-верстка и данные стили можно будет убрать
.controls-FieldLink__beforeFieldWrapper-enabled {
   max-width: ~'calc(100% - '@fieldLink-linkItem-cross-width~')';
}
.controls-FieldLink__beforeFieldWrapper-disabled {
   max-width: 100%;
}
// Cross-browser display last selected items (fix IE)
// bug: https://codepen.io/anon/pen/JrGQQx
// fix: http://jsfiddle.net/m9tf291j/
.controls-FieldLink__itemsCollection {
   .inline-flexbox();
   .justify-content(flex-end);
   width: 100%;
   height: 100%;
   min-width: 0;
}
.ws-is-ie {
   .controls-FieldLink__itemsCollection {
      .flex-direction(row-reverse);
      .justify-content();
   }
}
.controls-FieldLink__item {
   .flex-shrink(0);
   .inline-flexbox();
   .align-items(center);
   cursor: default;
}
.controls-FieldLink__item-single {
   .flex-shrink();
   max-width: 100%;
}
.controls-FieldLink__item-inField {
   .box-sizing();
   padding: 0 @default-padding 0 0;
   height: 100%;
}
.controls-FieldLink__item-caption {
   .text-overflow();
   .flex-shrink();
   display: inline-block;
   max-width: 100%;
}
.controls-FieldLink__item-caption__normal {
   font-size: @default-text-size;
}
.controls-FieldLink__item-caption__underlined:hover {
   text-decoration: underline;
   cursor: pointer;
}
.controls-FieldLink__item-caption__bold {
   font-weight: bold;
}
.controls-FieldLink__item-caption__big {
   font-size: @large-text-size;
   font-weight: bold;
   color: @accent-color;
   height: @fieldLink-item-big-height;
}
/* ------------------------------------------------------------------------------------------------------------------
   --------------------------------------- controls-FieldLink__fieldWrapper -----------------------------------------
   ------------------------------------------------------------------------------------------------------------------ */
.controls-FieldLink__fieldWrapper { // Placeholder has position:absolute and this is container for positing him
   .flex-shrink(1);
   .flexbox();
   position: relative;
   width: 100%;
   height: 100%;
   text-decoration: inherit;
}
/* ------------------------------------------------------------------------------------------------------------------
   ------------------------------------ controls-FieldLink__afterfieldWrapper ---------------------------------------
   ------------------------------------------------------------------------------------------------------------------ */
.controls-FieldLink__afterFieldWrapper {
   .align-items(center);
   width: auto;
}
.controls-FieldLink__dropAllLinks {
   color: @fieldLink-button-color;
}
.controls-FieldLink__dropAllLinks, .controls-FieldLink__showSelector {
   margin-right: @default-padding;
}
.controls-FieldLink__button {
   .icon-size-without-important(@fieldLink-icon-size);
   cursor: pointer;
}
.controls-FieldLink__showSelector-button {
   color: @fieldLink-showSelector-button-color;
   &:hover {
      color: @fieldLink-showSelector-button-color-hover;
   }
}
.controls-FieldLink__showAllLinks {
   position: relative;
   line-height: @text-box-line-height;
   cursor: pointer;
   color: @link-text-color;
   .flex-shrink(0);
   &:hover {
      text-decoration: underline;
      color: @link-hover-text-color;
   }
}
.controls-FieldLink_showAllLinks-enabled {
   padding-right: @default-padding;
}
.controls-FieldLink__showAllLinks-disabled {
   background: @default-bg-color;
   &:after {
      content: '';
      position: absolute;
      right: -@fieldLink-showAll-shadow-width;
      width: @fieldLink-showAll-shadow-width;
      top: 0;
      bottom: 0;
      .horizontal-gradient(@default-bg-color, rgba(255, 255, 255, 0));
      background-color: transparent;
   }
}
/* ------------------------------------------------------------------------------------------------------------------
   ----------------------------------------- controls-FieldLink__picker ---------------------------------------------
   ------------------------------------------------------------------------------------------------------------------ */
.controls-FieldLink__picker {
   max-height: @fieldLink-picker-max-height;
   min-height: @fieldLink-picker-min-height;
   border: @fieldLink-border @gray-ccc-color;
   box-sizing: border-box;
   margin-top: 0;
   overflow: auto;
   padding: @fieldLink-linkContainer-padding;
   border-top: none;
   .flexbox();
   .flex-wrap(wrap);
}
.controls-FieldLink__item-inPicker {
   width: 50%;
   line-height: @fieldLink-linkItem-line-height;
   height: auto;
}
// todo Обсудить вложенность, побороть можно, но сложно
.controls-FieldLink__withPicker.controls-Picker__show {
   background: @fieldLink-picker-show-color;
   color: @fieldLink-picker-show-field-color
}
// todo Обсудить вложенность, побороть можно, но сложно
.controls-FieldLink__picker.controls-popup-revert-vertical {
   border-top: @fieldLink-border @gray-ccc-color;
   border-bottom: none;
}
// todo нужно удалить этот модификатор
.controls-FieldLink__hiddenIfEmpty.ws-disabled:not(.controls-FieldLink__selected) {
   display: none;
}