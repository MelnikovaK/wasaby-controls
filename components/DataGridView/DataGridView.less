.column-ellipsis(){
   .controls-DataGridView__columnValue {
      .text-overflow();
   }
   .controls-TreeView__folderTitle {
      .text-overflow();
   }
   .text-overflow();
}

.controls-DataGridView {
   .controls-ListView__item {
      &:extend(.controls-ListView .controls-ListView__item all);
   }

   &:not(.controls-ListView__disableHover) {
      .controls-ListView__hoveredItem:not(.controls-editInPlace) {
         background: @background-color_DataGridView-item_hovered;

         .controls-DataGridView__th {
            background-color: @background-color_DataGridView-item_hovered;
         }
         .controls-DataGridView__td {
            background-color: @background-color_DataGridView-item_hovered;
         }
      }
   }

   &.controls-DataGridView__hasSeparator{
      &.controls-ListView__dataLoaded {
         .controls-DataGridView__tr {
            .controls-DataGridView__td {
               border-bottom-color: @data-grid-cell-separator-color;
            }
         }
         /* Т.к. редактирование по месту может в DOM'e занимать первые две строки,
            хотя визуально никак не отображаться, нам надо их обойти и отобразить у реальной строки */
         .controls-DataGridView__tr:first-child,
         .controls-editInPlace:first-child + .controls-DataGridView__tr,
         .controls-editInPlace:nth-child(2) + .controls-DataGridView__tr{
            .controls-DataGridView__td {
               border-top-color: @data-grid-edge-cell-separator-color;
            }
            &.controls-GroupBy {
               .controls-DataGridView__td {
                  border-top: none;
                  border-bottom: none;
               }
            }
         }
         .controls-DataGridView__tr:nth-last-child(1){
            .controls-DataGridView__td {
               border-bottom-color: @data-grid-edge-cell-separator-color;
            }
         }
         &.controls-DataGridView__resultsBottom {
            .controls-DataGridView__table {
               .controls-DataGridView__tr:nth-last-child(1){
                  .controls-DataGridView__td {
                     border-bottom-color: transparent;
                  }
               }
            }
            .controls-DataGridView__results {
               td {
                  border-width: 1px 0 0 0;
                  border-color: @data-grid-edge-cell-separator-color;
                  border-style: solid;
               }
            }
         }
      }
   }

   &.controls-DataGridView__markerRight{
      .controls-ListView__item__selected {
         .controls-DataGridView__td {
            &:first-child {
               background-image: none;
            }
            &:last-child {
               .marker(right top);
            }
         }
      }
      .controls-ItemsToolbar {
         right: 3px;
      }
   }

   &.controls-DataGridView__overflow-ellipsis{
      .controls-DataGridView__td{
         .column-ellipsis();
      }
   }

   &.ws-disabled {
      .controls-DataGridView__td__checkBox {
         cursor: default;
      }
   }

   &.controls-ListView__disabledWithoutClick.ws-disabled {
      .controls-DataGridView__td {
         cursor: default;
      }
   }

   .controls-DataGridView__th {
      &.controls-DataGrid__column__type-money{
         padding-right:@data-grid-money-header-cell-padding;
         &:last-child {
            padding-right: @data-grid-money-header-cell-padding-last;
         }
      }
   }
}


.controls-DataGridView__table {
   width: 100%;
   position: relative;
   border-spacing: 0;
   border-collapse: separate;
   border-width: 0;
   background: @data-grid-bg;
   table-layout: fixed;
}

.controls-DataGridView__tr {
   &.controls-ListView__item__multiSelected:not(.controls-ListView__hoveredItem) {
      .controls-DataGridView__td, .controls-DataGridView__thead .controls-DataGridView__th {
         &.controls-DataGridView__notScrolledCell {
            background-color: @data-grid-multiselect-notScrolledCell-Color;
         }
      }
   }
}

.controls-DataGridView__td, .controls-DataGridView__thead .controls-DataGridView__th {
   &.controls-DataGridView__th__topRow{
      text-align: center;
      &.controls-DataGridView__th__topRow-has_text{
         border-bottom: 1px solid transparent;
         padding-bottom: 3px;
         &:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: @data-grid-cell-padding-right;
            right: @data-grid-cell-padding-right;
            height: 1px;
            background: @data-grid-edge-cell-separator-color;
         }
      }
   }
   &.controls-DataGridView__notScrolledCell {
      background-color: @data-grid-partScroll-notScrolledCell-Color;
      border-left: none;
      border-right: none;
      z-index: 1;
      &.controls-DataGridView__th {
         background-color: @data-grid-partScroll-notScrolledCell-Color;
      }
   }
   &.controls-DataGridView-cell-verticalAlignTop {
      vertical-align: top;
   }
}

.controls-DataGridView__PartScroll__shown .controls-DataGridView__scrolledCell {
   cursor: pointer;
}

.controls-DataGridView__results {
   background: @data-grid-row-bg;
   font-weight: bold;
   font-size: @font-size_DataGridView-results;
   color: @data-grid-results-color;
}

.controls-DataGridView__results .controls-DataGridView__td{
   height: 21px;
   cursor: default;
   padding: @data-grid-results-cell-padding;
   line-height: @data-grid-results-cell-line-height; //По стандарту в строке итогов высота меньше чем в обычной ячейке
}

.controls-DataGridView__tbody, .controls-DataGridView__thead, .controls-DataGridView__tfoot{
   .controls-DataGridView__td__textAlignRight {
      text-align: right;
   }
}

.controls-DataGridView__tr {
   background: @data-grid-row-bg;
}


.controls-DataGridView__th {
   position: relative;
   font-weight: normal;
   cursor: default;
   text-align: left;
   height: @data-grid-header-cell-height;
   padding: @data-grid-header-cell-padding;
   color: @data-grid-header-cell-text-color;
   font-size: @data-grid-header-cell-font-size;
   background-color: @data-grid-header-cell-bg;

   .controls-ListView__itemCheckBox {
      .checkbox-border-size();
      &.controls-DataGridView__th__checkBox__checked{
         .checkbox-checked-size();
      }
   }
}

.controls-DataGridView__th-content{
   overflow: hidden;
   text-overflow: ellipsis;
}

.controls-DataGridView__td.controls-DataGridView__td__checkBox,
.controls-DataGridView__th.controls-DataGridView__td__checkBox {
   width: @data-grid-td-checkbox-width;
   padding: 0;
   /*У колонки с чекбоксом, не должно быть левого и правого бордера, иначе при table-layout: auto;
	ширина ячейки увеличивается на размер бордеров*/
   border-left-width: 0;
   border-right-width: 0;
   vertical-align: top;
   .controls-ListView__itemCheckBox {
      top: @data-grid-check-box-top;
      left: @data-grid-check-box-left;
   }
}

.controls-DataGridView__td {
   position: relative;
   cursor: pointer;
   text-align: left;
   height: @data-grid-cell-height;
   padding: @data-grid-cell-padding;
   color: inherit;
   background-color: @data-grid-cell-bg;
   border-collapse: separate;
   border-width: @data-grid-cell-border-width;
   border-style: solid;
   border-color: transparent;
   vertical-align: middle;
   box-sizing: border-box;
   line-height: @data-grid-cell-line-height;
}

.controls-DataGridView-cell-overflow-ellipsis{
   .column-ellipsis();
}

.controls-DataGridView-cell-verticalAlignMiddle{
   vertical-align: middle;
}

.controls-DataGridView-cell-verticalAlignBottom{
   vertical-align: bottom;
}

/* Отступы для классов .controls-ListView__padding-XS|S|M|L|XL */
.generate-padding-class-DGV(@i: 1) when (@i =< length(@controls-view-padding-variants)) {
   @val: extract(@controls-view-padding-variants, @i);
   .controls-ListView__padding-@{val} {
      .controls-DataGridView__td, .controls-DataGridView__th {
         &.controls-DataGridView__firstContentCell {
            padding-left: ~"@{controls-view-padding-@{val}}";
         }
         &:last-child {
            padding-right: ~"@{controls-view-padding-@{val}}";
         }
      }
   }
   .generate-padding-class-DGV(@i + 1);
}
.generate-padding-class-DGV();
/*Для строк идущих после группировки не должно быть верхних бордеров*/
.controls-DataGridView {
   &.controls-DataGridView__hasSeparator {
      .controls-DataGridView__table {
         .controls-GroupBy {
            +.controls-DataGridView__tr {
               .controls-DataGridView__td {
                  border-top-color: transparent
               }
            }
         }
      }
   }
}

/* СТИЛИ ДЛЯ ЧАСТИЧНОГО СКРОЛА */
.controls-DataGridView__PartScroll__container {
  position: absolute;
  height: @data-grid-partScroll-wrapper-height;
}

.controls-DataGridView__PartScroll__arrowLeft {
  position: relative;
  float: left;
  top: @data-grid-partScroll-arrowLeft-top-shift;
  z-index: @data-grid-partScroll-arrowLeft-zIndex;
  cursor: pointer;
}

.controls-DataGridView__PartScroll__arrowRight {
  position: relative;
  float: right;
  top: @data-grid-partScroll-arrowRight-top-shift;
  z-index: @data-grid-partScroll-arrowLeft-zIndex;
  left: @data-grid-partScroll-arrowRight-left-shift;
  cursor: pointer;
}

.controls-DataGridView__PartScroll__thumb {
  height: @data-grid-partScroll-thumb-height;
  width: @data-grid-partScroll-thumb-width;
  margin-left: @data-grid-partScroll-thumb-margin;
  z-index: @data-grid-partScroll-thumb-zIndex;
  border-radius: @data-grid-partScroll-thumb-border-radius;
  background-color: @data-grid-partScroll-thumb-color;
  position: absolute;
  cursor: pointer;
  top: @data-grid-partScroll-thumb-top-shift;
  &:hover, &.controls-DataGridView__PartScroll__thumb-clicked {
    height: @data-grid-partScroll-thumb-height-hover;
    top: @data-grid-partScroll-thumb-clicked-top-shift;
  }
}

.controls-DataGridView__with-partScroll {
  overflow-x: hidden;
}

.controls-DataGridView__scrollingNow {
   .controls-DataGridView__scrolledCell, .controls-DataGridView__PartScroll__thumb {
      will-change: transform;
   }
}
/****************************************/

.ws-sticky-header__header-container {
   >.controls-ListView.controls-DataGridView.controls-DataGridView__with-partScroll {
      overflow-y: hidden;
      background-clip: content-box;
      &.controls-DataGridView__PartScroll__shown {
         padding-bottom: @sticky-header-partScroll-padding;
      }
   }
}

.ws-sticky-header__header-container {
  .controls-DataGridView {
    &.controls-DataGridView__hasSeparator {
      &.controls-ListView__dataLoaded {
        .controls-DataGridView__table {
          border-width: 0;
        }
      }
    }
  }
}
.ws-sticky-header__wrapper-scrolled {
  &>.ws-sticky-header__header-container {
    &>.controls-DataGridView.controls-DataGridView__hasSeparator.controls-ListView__dataLoaded {
       .controls-DataGridView__table {
          border-width: @data-grid-table-separator-border-width;
       }
    }
  }
}

//TODO костыль по месту. Стандарт должен быть поправлен https://online.sbis.ru/opendoc.html?guid=95b1ae2e-d43f-4b41-a373-ceecc6b01fb8&des=
.controls-DataGridView__headSorting {
   &.controls-Link {
      .controls-Button__icon + .controls-Link__field {
         margin-left: 0;
      }
      font-size: @data-grid-header-cell-font-size;
      //выписал еще поручение https://online.sbis.ru/opendoc.html?guid=2a2781e5-bc7b-464f-b183-32317e0b85cc
      line-height: @data-grid-header-cell-sorting-icon-size;
      .controls-Button__icon {
         .icon-size(@font-size_DataGridView-headerIcon);
      }
   }
}

.controls-DataGridView__tableLayout-auto {
   >.controls-DataGridView__table {
      table-layout: auto;
   }
}

.controls-DataGridView__th, .controls-DataGridView__td {
   &.controls-DataGridView__firstContentCell {
      padding-left: @controls-view-padding-DEFAULT;
   }
   &:last-child {
      padding-right: @controls-view-padding-DEFAULT;
   }
}

.controls-ListView__hideCheckBoxes.controls-ListView__multiselect {
   .controls-DataGridView__colgroup {
      col:first-child {
         width: @data-grid-td-hidden-checkbox-width;
         min-width: @data-grid-td-hidden-checkbox-width;
      }
   }
   .controls-DataGridView__td__checkBox {
      width: @data-grid-td-hidden-checkbox-width;
      min-width: @data-grid-td-hidden-checkbox-width;
   }
}

.controls-ListView__multiselect {
   .controls-DataGridView__table {
      .controls-DataGridView__firstContentCell {
         padding-left: @data-grid-ms-first-content-cell-padding-left;
      }
   }
   
   &:not(.controls-ListView__hideCheckBoxes) > .controls-DataGridView__table {
      > .controls-DataGridView__colgroup {
         col:first-child {
            width: @data-grid-td-visible-checkbox-width;
            min-width: @data-grid-td-visible-checkbox-width;
         }
      }
      .controls-DataGridView__td__checkBox {
         width: @data-grid-td-visible-checkbox-width;
         min-width: @data-grid-td-visible-checkbox-width;
      }
   }
}
// Контейнер на который программно устанавливается минимальная высота. Используем пустой контейнер который не влияет
// на внешний вид, но влияет на высоту. min-height нельзя устанавливать на корневой контейнер компонента т.к.
// это внешний стиль который могут задавать прикладники. На таблицу его тоже устанавливать нельзя,
// он не применяется если в таблице нет тела, и если в ней есть 1 строка, то она растягивается на всю высоту таблицы.
.controls-DataGridView__minHeight {
   float: left;
}
.controls-DataGridView {
   &:after {
      content: "";
      display: block;
      height: 0;
      line-height: 0;
      clear: both;
      visibility: hidden;
   }
}
