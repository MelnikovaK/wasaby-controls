.controls-DropdownList {
   display: inline-block;
   min-height: @DropdownList-height;
   box-sizing: @DropdownList-box-sizing;
   line-height: @DropdownList-height;
   .controls-DropdownList__selectedItem {
      .flexbox();
      width: 100%;
      white-space: nowrap;
      font-size: 0;
      box-sizing: border-box;
      align-items: center;
      .controls-DropdownList__textWrapper{
        .flex-shrink(1);
        overflow: hidden;
        text-overflow: ellipsis;
        color: @DropdownList-linkStyleColor;
        cursor: pointer;
        &:hover{
          color: @DropdownList-linkStyleHoverColor;
          text-decoration: underline;
        }
        &.ws-disabled:hover{
          color: @DropdownList-linkStyleColor;
        }
      }

      &:hover {
        .controls-DropdownList__arrowIcon {
          color: @DropdownList-linkStyleHoverColor!important;
        }
      }
      * {
         font-size: @default-font-size;
      }
   }
   .controls-DropdownList__beforeCaptionWrapper {
      display: none;
      position: relative;
      top: @DropdownList-before-caption-wrapper-top;
      .flex-shrink(0);
   }
   .controls-DropdownList__afterCaptionWrapper {
      display: none;
      position: relative;
      top: @DropdownList-after-caption-wrapper-top;
      cursor: pointer;
      .flex-shrink(0);
   }
   &.controls-DropdownList__type-fastDataFilter {
     .controls-DropdownList__beforeCaptionWrapper {
       display: inline-block;
     }
     &.controls-DropdownList__withoutArrow{
       .controls-DropdownList__beforeCaptionWrapper{
         display: none;
       }
     }
     .controls-DropdownList__afterCaptionWrapper{
       display: inline-block;
     }
     &.controls-DropdownList__withoutCross, &.controls-DropdownList__hideCross, &.ws-disabled{
       .controls-DropdownList__afterCaptionWrapper{
         display: none;
       }
     }
      &.controls-DropdownList__defaultItem {
         .controls-DropdownList__selectedItem .controls-DropdownList__textWrapper {
            color: @DropdownList-linkStyleColor;
         }
      }
   }
   &.controls-DropdownList__type-filter {
      .controls-DropdownList__afterCaptionWrapper {
         display: block;
         .controls-DropdownList__crossIcon{
            color: @gray-ccc-color!important;
            cursor: pointer;
         }
      }
   }
   &.ws-disabled{
      color: #ccc;
      cursor: default !important;
     .controls-DropdownList__selectedItem .controls-DropdownList__textWrapper {
        color: @DropdownList-disabled-text;
        cursor: default !important;
        text-decoration: none;
      }
     .controls-DropdownList__selectedItem {
       .controls-DropdownList__beforeCaptionWrapper {
         .controls-DropdownList__arrowIcon {
           color: #ccc !important;
         }
       }
     }
   }

   &.ws-validation-error {
      outline: 1px solid @red-color;
      outline-offset: -1px;
      background-color: @text-box-error-bg;
   }

   &.controls-DropdownList__defaultItem{
     .controls-DropdownList__selectedItem .controls-DropdownList__textWrapper{
       color: @DropdownList-default-item-color;
       &:hover{
         text-decoration: underline;
       }
     }
   }
}

.controls-DropdownList, .controls-DropdownList__picker {
   .controls-DropdownList__icon {
      margin-right: 5px;
   }
}

.controls-DropdownList__picker {
   .controls-DropdownList__scrollContainer {
      background: @DropdownList-picker-bg;
      max-height: @DropdownList-picker-max-height - @DropdownList-footer-multisel-buttonsBlock-h;
      height: 100%;
      width: 100%; //Укажем явно для ie edge
      min-height: 0;
      .flex-shrink(1);
   }

   .controls-DropdownList__item, .controls-DropdownList__selectedItem * {
      font-size: @DropdownList-picker-menu-font-size;
      cursor: @DropdownList-cursor;
   }

   &.controls-DropdownList__equalsWidth.controls-FloatArea .controls-DropdownList__body {
      border-radius: @DropdownList-picker-list-border-radius-equal;
   }
   &.controls-DropdownList__type-fastDataFilter {
      &.controls-FloatArea {
         margin: @DropdownList-picker-fastdatafilter-offset;
      }
      &.controls-DropdownList__withoutCross {
         .controls-DropdownList__item.controls-DropdownList__item__selected {
            /* из-за display: block браузер растягивает контейнер на всю ширину, и чекбокс падает вниз,
               выписана задача на рефакторинг стилей
               https://online.sbis.ru/opendoc.html?guid=af8eda3e-27bf-40e3-adaf-96f97d7b1364&des=
               Задача в разработку 15.05.2017 Необходим рефакторинг стилей dropDownList Сейчас длинна селекторов запредельная, не темизирован, пол… */
            &.controls-DropdownList__multiselect .controls-DropdownList__itemTextWrapper-height {
               max-width: ~'calc(100% - 16px)';
            }
         }
      }
      .controls-DropdownList__body {
         max-width: 400px;
         border-width: 1px;
         border-color: @gray-ccc-color;
         border-radius: @DropdownList-picker-list-right-border-radius;
         margin-top: @DropdownList-picker-margin-top;
         .controls-DropdownList__close-picker {
            position: absolute;
            right: @DropdownList-picker-close-btn-right;
            top: @DropdownList-picker-close-btn-top;
            cursor: pointer;
            &:hover {
               color: #313E78!important;
            }
         }
         .controls-DropdownList__item {
            padding: @dropdown-list-item-padding;
            position: relative;
            .controls-DropdownList__itemTextWrapper {
               position: relative;
               overflow: hidden;
               &.controls-DropdownList__itemTextWrapper-height {
                  /*Этот класс для того, чтобы не сломать прикладные шаблоны
                    Для работы затемнения, нужно указать высоту контейнера*/
                  height: @DropdownList-picker-menu-item-height;
               }
               .controls-DropdownList__item-text {
                  float: left;
                  display: inline-block;
                  color: @dropdownlist-item-text-color;
               }
               .controls-DropdownList__item-text-shadow {
                  float: right;
                  width: 24px;
                  margin-left: -24px;
                  display: inline-block;
                  height: @DropdownList-picker-menu-item-height;
                  position: relative;
                  top: -@DropdownList-picker-menu-item-height;
                  background: linear-gradient(to left, @DropdownList-picker-menu-item-color, @DropdownList-picker-menu-item-color-blur);
               }
            }
            &:hover {
               .controls-DropdownList__item-text-shadow {
                  background: linear-gradient(to left, @DropdownList-picker-menu-item-hover, @DropdownList-picker-menu-item-hover-blur);
               }
            }
         }
      }

      .controls-DropdownList__multiselect.controls-DropdownList__item {
         padding-left: 0;
      }
   }
   &.controls-DropdownList__type-filter {
      &.controls-DropdownList__has-empty-value {
         .controls-ListView__defaultItem {
            display: none;
         }
      }
   }

   .controls-DropdownList__header {
      display: inline-block;
      width: 100%;
      box-sizing: border-box;
      position: relative;
      background: @DropdownList-header-bg;
      border: @DropdownList-picker-border;
      border-radius: @DropdownList-picker-head-border-radius;
      border-bottom: 0;
      z-index: 2;
      .controls-DropdownList {
         margin: @DropdownList-picker-head-margin !important;
         position: relative !important;
         padding: 0 !important;
         width: 100%;
      }
      .controls-DropdownList__arrowIcon:before {
         content: "\e673";
      }
   }

   .controls-DropdownList__pickerHead {
      font-weight: @DropdownList-picker-head-weight;
      color: @DropdownList-picker-head-color;
      padding: @DropdownList-picker-head-padding;
      cursor: default;
      width: 100%;
      box-sizing: border-box;
      .controls-DropdownList__pickerHead-text {
         font-size: @DropdownList-picker-menu-font-size;
      }
   }
   &.controls-DropdownList__type-title {
      .controls-DropdownList__body {
         margin-top: -1px;
      }
      .controls-DropdownList__pickerHead {
         background: @DropdownList-picker-title-type-header-bg;
      }
   }
   &.controls-DropdownList__type-duplicateHeader {
      .controls-DropdownList__body {
         padding-top: 0;
         margin-top: -1px;
      }
      .controls-DropdownList__header {
         padding-top: @DropdownList-picker-head-duplicate-type-top-padding;
      }
   }

   &.controls-DropdownList__type-customHeader {
      &.controls-popup-revert-horizontal {
         .flexbox();
         .flex-direction(column);
         .controls-DropdownList__header {
            .align-self(flex-end);
            .controls-DropdownList__selectedItem {
               padding: 0 4px;
            }
         }
      }
      .controls-DropdownList__header {
         width: auto;
      }
      .controls-DropdownList__body {
         margin-top: -1px;
      }
   }

   .controls-DropdownList__defaultItem {
      .controls-DropdownList__itemTextWrapper {
         color: #ccc;
      }
   }

   .controls-DropdownList__withoutArrow {
      .controls-DropdownList__textWrapper {
         padding-left: 4px;
      }
   }
   .controls-DropdownList__body {
      .flexbox();
      .flex-direction(column);
      z-index: 1;
      height: 100%;
      border: @DropdownList-picker-border;
      border-radius: @DropdownList-picker-list-border-radius;
      background: @DropdownList-picker-bg;
      padding: @DropdownList-picker-padding;
      box-sizing: border-box;
      max-height: @DropdownList-picker-max-height;
      .box-shadow(@menu-shadow);
   }
   &.controls-FloatArea {
      background: transparent;
      margin: @DropdownList-picker-offset;
      .flexbox();
      .flex-direction(column);
   }
   .controls-DropdownList__item {
      padding: @DropdownList-picker-menu-item-padding;
      line-height: @DropdownList-picker-menu-line-height;
      background: @DropdownList-picker-menu-item-color;
      margin: @DropdownList-picker-menu-item-margin;
      font-size: @DropdownList-picker-menu-font-size;
      .controls-DropdownList__itemTextWrapper {
         max-width: 100%;
         min-width: 0; //flex hack
         vertical-align: top;
         .controls-DropdownList__item-text {
            .text-overflow();
            color: @DropdownList-picker-menu-item-base-color;
         }
      }
      &.controls-DropdownList__child {
         padding: 3px 8px 2px 8px;
         .controls-DropdownList__itemTextWrapper {
            padding-left: 16px;
         }
      }
      &.controls-DropdownList__defaultItem {
         .controls-DropdownList__item-text {
            color: @DropdownList-picker-default-item-color;
         }
      }
      &:hover {
         background: @DropdownList-picker-menu-item-hover;
         .controls-DropdownList__itemCheckBox {
            visibility: visible;
         }
      }
   }

   &.controls-DropdownList__hideSelectedInList {
      .controls-DropdownList__item.controls-DropdownList__multiselect.controls-DropdownList__item__selected {
         display: block;
      }
      .controls-DropdownList__item.controls-DropdownList__item__selected {
         display: none;
      }
   }
   .controls-DropdownList__buttonsBlock {

      height: @DropdownList-footer-buttonsBlock-height;
      position: @DropdownList-footer-buttonsBlock-position;
      background: @DropdownList-picker-menu-item-color;
      .flex-shrink(0);

      .controls-DropdownListFooter_hasMore, .controls-DropdownListFooter_select {
         position: @DropdownList-footer-buttons-position;
      }
      .controls-DropdownListFooter_hasMore {
         left: @DropdownList-footer-hasMore-left;
         top: @DropdownList-footer-hasMore-top;
      }
      .controls-DropdownListFooter_select {
         right: @DropdownList-footer-select-right;
         top: @DropdownList-footer-select-top;
         &.controls-IconButton.controls-IconButton__round-border-24 {
            height: @DropdownList-footer-select-icon-container-size;
            width: @DropdownList-footer-select-icon-container-size;
            .controls-Button__icon {
               height: @DropdownList-footer-select-icon-size;
               width: @DropdownList-footer-select-icon-size;
               line-height: @DropdownList-footer-select-icon-size !important;
            }
         }
      }
   }
   .controls-DropdownList__multiselect {
      padding-left: @DropdownList-picker-menu-item-multiselect-padding;

      &.controls-DropdownList__item {
         font-size: 0;
         .flexbox();
         .controls-DropdownList__itemCheckBox {
            .flex-shrink(0);
         }
         * {
            font-size: @DropdownList-picker-menu-font-size;
         }
      }

      &.controls-DropdownList__item__selected .controls-DropdownList__itemCheckBox {
         .checkbox-checked-size(@check-box-icon-successful-size, @check-box-icon-successful-left, @check-box-icon-successful-top);
         visibility: visible;
      }
      &.controls-ListView__defaultItem.controls-DropdownList__item__selected,
      &.controls-ListView__defaultItem {
         font-weight: bold;
         & .controls-DropdownList__itemCheckBox {
            visibility: hidden;
         }
      }

      .controls-DropdownList__itemCheckBox {
         .checkbox(@check-box-icon-size);
         .checkbox-border-size(@check-box-icon-size, @check-box-icon-box-size, @default-border-width);
         &:after {
            color: @primary-color;
         }
         &:before {
            color: @check-box-icon-box-color;
         }
         cursor: pointer;
         display: inline-block;
         visibility: hidden;
         position: relative;
         bottom: @DropdownList-checkbox-bottom;
      }

      &.controls-DropdownList__buttonsBlock {
         height: @DropdownList-footer-multisel-buttonsBlock-h;
         .controls-DropdownListFooter_hasMore {
            top: @DropdownList-footer-hasMore-top-multiselect;
         }
         .controls-DropdownListFooter_hasMore {
            left: @DropdownList-footer-hasMore-left-multiselect;
         }
      }
   }
}

.ws-is-firefox {
   .controls-DropdownList__picker {
      .controls-DropdownList__header .controls-DropdownList {
         line-height: 25px;
      }
      .controls-DropdownList__body .controls-DropdownList__item .controls-DropdownList__itemTextWrapper {
         .controls-DropdownList__item-text {
            float: none;
         }
         .controls-DropdownList__item-text-shadow {
            top: -@DropdownList-picker-menu-item-height - 5px;
         }
      }
   }
   .controls-DropdownList__afterCaptionWrapper {
      top: @DropdownList-after-caption-top;
   }
}

.ws-is-ie, .ws-is-firefox {
  .controls-DropdownList .controls-DropdownList__selectedItem{
     .inline-flexbox();
  }
}

.ws-is-mobile-chrome-ios, .ws-is-mobile-safari, .ws-is-firefox {
   .controls-DropdownList__picker {
      .controls-DropdownList__multiselect {
         .controls-DropdownList__itemCheckBox {
            bottom: -1px;
         }
      }
   }
}

.ws-is-mobile-chrome-ios, .ws-is-mobile-safari {
   .controls-DropdownList__picker.controls-DropdownList__type-fastDataFilter .controls-DropdownList__body .controls-DropdownList__item {
      padding-top: 5px;
      padding-bottom: 8px;
   }
   .controls-DropdownList__picker .controls-DropdownList__item {
      &:hover {
         background: @DropdownList-picker-menu-item-color;
      }
      &:active {
         background: @DropdownList-picker-menu-item-hover;
      }
   }
}

//Пример баги в ios https://jsfiddle.net/zk5755vg/12/
.ws-is-mobile-chrome-ios, .ws-is-mobile-safari, .ws-is-sbis-desktop {
   .controls-DropdownList__picker {
      .controls-DropdownList__body {
         display: block; //С флексовым контейнером в safari не отображается список (height:0). Флекс нужен для правильного обрезания контейнера по высоте, на моб.платформе это не актуально
      }
   }
}