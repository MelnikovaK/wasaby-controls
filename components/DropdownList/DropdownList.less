.controls-DropdownList {
   display: inline-block;
   min-height: @DropdownList-height;
   box-sizing: border-box;
   line-height: @DropdownList-height;
   position: relative;
   .controls-DropdownList__selectedItem {
      .flexbox();
      width: 100%;
      white-space: nowrap;
      font-size: 0;
      box-sizing: border-box;
      align-items: center;
      .controls-DropdownList__textWrapper{
        .flex-shrink(1);
        overflow: hidden;
        text-overflow: ellipsis;
        color: @DropdownList-linkStyleColor;
        cursor: pointer;
        .controls-DropdownList__text {
           .flexbox();
           .controls-DropdownList__icon {
              .align-self(center);
           }
        }
      }

      &:hover {
        .controls-DropdownList__arrowIcon {
          color: @DropdownList-linkStyleHoverColor!important;
        }
      }
      * {
         font-size: @font-size_DropDownList;
      }
   }
   .controls-DropdownList__beforeCaptionWrapper {
      display: none;
      position: relative;
      top: @DropdownList-before-caption-wrapper-top;
      .flex-shrink(0);
   }
   .controls-DropdownList__afterCaptionWrapper {
      display: none;
      position: relative;
      top: @DropdownList-after-caption-wrapper-top;
      cursor: pointer;
      .flex-shrink(0);
   }
   &.controls-DropdownList__type-fastDataFilter {
     .controls-DropdownList__beforeCaptionWrapper {
       display: inline-block;
     }
     &.controls-DropdownList__hideCross{
       .controls-DropdownList__afterCaptionWrapper{
          display: none;
       }
     }
     &.controls-DropdownList__withoutArrow{
       .controls-DropdownList__beforeCaptionWrapper{
         display: none;
       }
     }
     .controls-DropdownList__afterCaptionWrapper{
       display: inline-block;
     }
      &.controls-DropdownList__defaultItem {
         .controls-DropdownList__selectedItem .controls-DropdownList__textWrapper {
            color: @DropdownList-linkStyleColor;
         }
      }
   }
   .controls-DropdownList__crossIcon {
      .icon-size(@size_DropDownList_filter_cross);
   }
   .controls-DropdownList__arrowIcon {
      .icon-size(@size_DropDownList_arrow);
      color: @color-DropDownList_arrowIcon;
   }
   &.controls-DropdownList__type-filter {
      .controls-DropdownList__afterCaptionWrapper {
         display: block;
         .controls-DropdownList__crossIcon{
            color: @gray-ccc-color!important;
            cursor: pointer;

         }
      }
   }
   &.controls-DropdownList__withoutCross, &.ws-disabled{
      .controls-DropdownList__afterCaptionWrapper{
         display: none;
      }
   }
   &.ws-disabled{
      color: @DropdownList-disabled-text;
      cursor: default !important;
     .controls-DropdownList__selectedItem {
        .controls-DropdownList__beforeCaptionWrapper {
           .controls-DropdownList__arrowIcon {
              color: @DropdownList-disabled-text !important;
           }
        }
        .controls-DropdownList__textWrapper {
           color: @DropdownList-disabled-text !important;
           cursor: default !important;
           text-decoration: none !important;
           .controls-DropdownList__text .controls-DropdownList__value {
              &:hover{
                 color: @DropdownList-disabled-text;
                 text-decoration: none;
              }
           }
        }
     }
   }

   &.ws-validation-error {
      .border-with-pseudo-element(@border-color_DropDownList_error);
      background-color: @background-color_InputRender_error;
   }

   &.controls-DropdownList__defaultItem{
     .controls-DropdownList__selectedItem .controls-DropdownList__textWrapper{
       color: @DropdownList-default-item-color;
       &:hover{
         text-decoration: underline;
       }
     }
   }
}

.controls-DropdownList, .controls-DropdownList__picker {
   .controls-DropdownList__icon {
      margin-right: 6px;
   }
}

.controls-DropdownList__picker {
   border-width: @border-width_DropDownList_picker;
   border-style: solid;
   border-color: @border-color_DropDownList_picker;
   .controls-DropdownList__scrollContainer {
      background: @DropdownList-picker-bg;
      max-height: @DropdownList-picker-max-height - @DropdownList-footer-multisel-buttonsBlock-h;
      height: 100%;
      width: 100%; //Укажем явно для ie edge
      min-height: 0;
      .flex-shrink(1);
   }

   .controls-DropdownList__item, .controls-DropdownList__selectedItem * {
      font-size: @DropdownList-picker-menu-font-size;
      cursor: pointer;
   }

   .controls-DropdownList__item.controls-DropdownList__item__selected {
      &:not(.controls-DropdownList__multiselect) {
         &:before {
            content: '';
            background: @DropdownList-picker-menu-selected-marker-bg;
            width: @DropdownList-picker-menu-selected-marker-width;
            height: @DropdownList-picker-menu-selected-marker-height;
            position: absolute;
            left: 0;
            top: @top_DropdownList_picker_marker;
         }
      }
   }

   &.controls-DropdownList__equalsWidth.controls-FloatArea .controls-DropdownList__body {
      border-radius: @DropdownList-picker-list-border-radius-equal;
   }
   &.controls-DropdownList__type-fastDataFilter {
      &.controls-FloatArea {
         margin: @DropdownList-picker-fastdatafilter-offset;
         &.controls-DropdownList__withoutArrow {
            margin-left: @DropdownList-picker-fdf-left;
         }

      }
      &.controls-DropdownList__withoutCross {
         .controls-DropdownList__item.controls-DropdownList__item__selected {
            /* из-за display: block браузер растягивает контейнер на всю ширину, и чекбокс падает вниз,
               выписана задача на рефакторинг стилей
               https://online.sbis.ru/opendoc.html?guid=af8eda3e-27bf-40e3-adaf-96f97d7b1364&des=
               Задача в разработку 15.05.2017 Необходим рефакторинг стилей dropDownList Сейчас длинна селекторов запредельная, не темизирован, пол… */
            &.controls-DropdownList__multiselect .controls-DropdownList__itemTextWrapper-height {
               max-width: ~'calc(100% - 16px)';
            }
         }
      }
      .controls-DropdownList__body {
         max-width: @DropdownList-picker-max-width;
         border-width: 1px;
         border-color: @gray-ccc-color;
         border-radius: @DropdownList-picker-list-right-border-radius;
         margin-top: @DropdownList-picker-margin-top;
         .controls-DropdownList__close-picker {
            position: absolute;
            right: @DropdownList-picker-close-btn-right;
            top: @DropdownList-picker-close-btn-top;
            cursor: pointer;
            color: @color_dropdownList_picker_close_cross;
            .icon-size(@size_dropdownList_picker_close_cross, @default-icon-medium-font);
            &:hover {
               color: @color_dropdownList_picker_close_cross_hover !important;;
            }
         }
         .controls-DropdownList__item {
            padding: @dropdown-list-item-padding;
            position: relative;
            .controls-DropdownList__itemTextWrapper {
               position: relative;
               overflow: hidden;
               &.controls-DropdownList__itemTextWrapper-height {
                  /*Этот класс для того, чтобы не сломать прикладные шаблоны
                    Для работы затемнения, нужно указать высоту контейнера*/
                  height: @DropdownList-picker-menu-item-height;
               }
               .controls-DropdownList__item-text {
                  display: inline-block;
                  color: @dropdownlist-item-text-color;
               }
               .controls-DropdownList__item-text-shadow {
                  float: right;
                  width: 24px;
                  margin-left: -24px;
                  display: inline-block;
                  height: @DropdownList-picker-menu-item-height;
                  position: relative;
                  top: -@DropdownList-picker-menu-item-height;
                  background: linear-gradient(to left, @DropdownList-picker-menu-item-color, @DropdownList-picker-menu-item-color-blur);
               }
            }
            &:hover {
               .controls-DropdownList__item-text-shadow {
                  background: linear-gradient(to left, @DropdownList-picker-menu-item-hover, @DropdownList-picker-menu-item-hover-blur);
               }
            }
         }
      }

      .controls-DropdownList__multiselect.controls-DropdownList__item {
         padding-left: 0;
      }
   }
   &.controls-DropdownList__type-filter {
      &.controls-DropdownList__has-empty-value {
         .controls-ListView__defaultItem {
            display: none;
         }
      }
   }

   .controls-DropdownList__header {
      display: inline-block;
      width: 100%;
      box-sizing: border-box;
      position: relative;
      background: @DropdownList-header-bg;
      border: @DropdownList-picker-border;
      border-radius: 0;
      border-bottom: 0;
      z-index: 2;
      .controls-DropdownList {
         margin: 0 !important;
         position: relative !important;
         padding: 0 !important;
         width: 100%;
         min-height: @DropdownList-picker-head-height;
         line-height: @DropdownList-picker-head-height;
      }
      .controls-DropdownList__arrowIcon:before {
         content: "\e673";
      }
   }

   .controls-DropdownList__pickerHead {
      font-weight: @DropdownList-picker-head-weight;
      color: @DropdownList-picker-head-color;
      padding: @DropdownList-picker-head-padding;
      cursor: default;
      width: 100%;
      box-sizing: border-box;
      .controls-DropdownList__pickerHead-text {
         font-size: @DropdownList-picker-menu-font-size;
      }
   }
   &.controls-DropdownList__type-title {
      &.controls-FloatArea {
         margin-top: @DropdownList-picker-title-type-margin-top;
      }
      .controls-DropdownList__body {
         margin-top: -1px;
      }
      .controls-DropdownList__pickerHead {
         background: @DropdownList-picker-title-type-header-bg;
      }
   }
   &.controls-DropdownList__type-duplicateHeader {
      .controls-DropdownList__body {
         padding-top: 0;
         margin-top: -1px;
      }
      .controls-DropdownList__header {
         padding-top: @DropdownList-picker-head-duplicate-type-top-padding;
      }
   }

   &.controls-DropdownList__type-customHeader {
      margin-top: -1px;
      margin-left: -2px;
      &.controls-popup-revert-horizontal {
         .flexbox();
         .flex-direction(column);
         .controls-DropdownList__header {
            .align-self(flex-end);
            .controls-DropdownList__selectedItem {
               padding: 0 4px;
            }
         }
      }
      .controls-DropdownList__header {
         width: auto;
      }
      .controls-DropdownList__body {
         margin-top: -1px;
      }
   }

   .controls-DropdownList__defaultItem {
      .controls-DropdownList__itemTextWrapper {
         color: @disabled-color;
      }
   }

   .controls-DropdownList__withoutArrow {
      .controls-DropdownList__textWrapper {
         padding-left: 4px;
      }
   }
   .controls-DropdownList__body {
      .flexbox();
      .flex-direction(column);
      z-index: 1;
      height: 100%;
      border: @DropdownList-picker-border;
      border-radius: @DropdownList-picker-list-border-radius;
      background: @DropdownList-picker-bg;
      padding: @DropdownList-picker-padding;
      box-sizing: border-box;
      max-height: @DropdownList-picker-max-height;
   }
   &.controls-FloatArea {
      background: transparent;
      margin: @DropdownList-picker-offset;
      .flexbox();
      .flex-direction(column);
      //.box-shadow(@shadow_Menu);
      .box-shadow(@shadow_DropDownList_picker);
   }
   .controls-DropdownList__item {
      padding: @DropdownList-picker-menu-item-padding;
      line-height: @DropdownList-picker-menu-line-height;
      background: @DropdownList-picker-menu-item-color;
      margin: 0;
      font-size: @DropdownList-picker-menu-font-size;
      position: relative;
      .controls-DropdownList__itemTextWrapper {
         max-width: 100%;
         min-width: 0; //flex hack
         vertical-align: top;
         .controls-DropdownList__item-text {
            .text-overflow();
            color: @DropdownList-picker-menu-item-base-color;
         }
      }
      &.controls-DropdownList__child {
         padding:  @padding_DropDownList_item_child;
         .controls-DropdownList__itemTextWrapper {
            padding-left: @padding_DropDownList_item_child_text;
         }
      }
      &.controls-DropdownList__defaultItem {
         .controls-DropdownList__item-text {
            color: @DropdownList-picker-default-item-color;
         }
      }
      &:hover {
         background: @DropdownList-picker-menu-item-hover;
         .controls-DropdownList__itemCheckBox {
            visibility: visible;
         }
      }
   }

   &.controls-DropdownList__hideSelectedInList {
      .controls-DropdownList__item.controls-DropdownList__multiselect.controls-DropdownList__item__selected {
         display: block;
      }
      .controls-DropdownList__item.controls-DropdownList__item__selected {
         display: none;
      }
   }
   .controls-DropdownList__buttonsBlock {

      height: @DropdownList-footer-buttonsBlock-height;
      position: relative;
      background: @DropdownList-picker-menu-item-color;
      .flex-shrink(0);

      .controls-DropdownListFooter_hasMore, .controls-DropdownListFooter_select {
         position: absolute;
      }
      .controls-DropdownListFooter_hasMore {
         left: @DropdownList-footer-hasMore-left;
         top: @DropdownList-footer-hasMore-top;
         &:hover {
            color: @DropdownList-footer-hasMore-hover-color;
         }
      }
      .controls-DropdownListFooter_select {
         right: @DropdownList-footer-select-right;
         top: @DropdownList-footer-select-top;
         &.controls-IconButton.controls-IconButton__round-border-24 {
            height: @DropdownList-footer-select-icon-container-size;
            width: @DropdownList-footer-select-icon-container-size;
            .controls-Button__icon {
               height: @DropdownList-footer-select-icon-size;
               width: @DropdownList-footer-select-icon-size;
               line-height: @DropdownList-footer-select-icon-size !important;
            }
         }
      }
   }
   .controls-DropdownList__multiselect {
      padding-left: 0;

      &.controls-DropdownList__item {
         font-size: 0;
         .flexbox();
         .controls-DropdownList__itemCheckBox {
            .flex-shrink(0);
         }
         * {
            font-size: @DropdownList-picker-menu-font-size;
         }
      }

      &.controls-DropdownList__item__selected .controls-DropdownList__itemCheckBox {
         .checkbox-checked-size();
         visibility: visible;
      }
      &.controls-ListView__defaultItem.controls-DropdownList__item__selected,
      &.controls-ListView__defaultItem {
         font-weight: bold;
         & .controls-DropdownList__itemCheckBox {
            visibility: hidden;
         }
      }

      .controls-DropdownList__itemCheckBox {
         .checkbox();
         .checkbox-border-size();
         &:after {
            color: @primary-color;
         }
         &:before {
            color: @check-box-icon-box-color;
         }
         cursor: pointer;
         display: inline-block;
         visibility: hidden;
         position: relative;
         bottom: @DropdownList-checkbox-bottom;
      }

      &.controls-DropdownList__buttonsBlock {
         height: @DropdownList-footer-multisel-buttonsBlock-h;
         .controls-DropdownListFooter_hasMore {
            top: @DropdownList-footer-hasMore-top-multiselect;
         }
         .controls-DropdownListFooter_hasMore {
            left: @DropdownList-footer-hasMore-left-multiselect;
         }
      }
   }
}

.ws-is-firefox {
   .controls-DropdownList__picker {
      .controls-DropdownList__multiselect {
         .controls-DropdownList__itemCheckBox {
            bottom: 0;
         }
      }
      .controls-DropdownList__header .controls-DropdownList {
         line-height: @DropdownList-picker-menu-height-ff;
      }
   }
   .controls-DropdownList__afterCaptionWrapper {
      top: @DropdownList-after-caption-top;
   }
}
.ws-is-mobile-chrome-ios, .ws-is-mobile-safari {
   .controls-DropdownList__picker .controls-DropdownList__item {
      &:hover {
         background: @DropdownList-picker-menu-item-color;
      }
      &:active {
         background: @DropdownList-picker-menu-item-hover;
      }
   }
}
.ws-is-ie, .ws-is-firefox {
   .controls-DropdownList .controls-DropdownList__selectedItem{
      .inline-flexbox();
   }
}
//Пример баги в ios https://jsfiddle.net/zk5755vg/12/
.ws-is-mobile-chrome-ios, .ws-is-mobile-safari, .ws-is-old-webkit, .ws-is-sbis-desktop{
   .controls-DropdownList__picker.controls-FloatArea {
      .controls-DropdownList__body {
         display: block; //С флексовым контейнером в safari не отображается список (height:0). Флекс нужен для правильного обрезания контейнера по высоте, на моб.платформе это не актуально
      }
   }
}

/* Слава ie, Microsoft'у слава */
.ws-is-ie10, .ws-is-ie11 {
   .controls-DropdownList__value {
      display: inline-block;
      -ms-flex-negative: 1;
   }
}

.controls-DropdownList__value {
   .align-self(baseline);
   overflow: hidden;
   text-overflow: ellipsis;
   &:hover{
      color: @DropdownList-linkStyleHoverColor;
      text-decoration: underline;
   }
}