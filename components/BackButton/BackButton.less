@import (reference) "../../themes/header";

.controls-BackButton {
   cursor: pointer;
   display: inline-block;
   line-height: @back-button-line-height;
   height: @back-button-height;
   white-space: nowrap;
   font-weight: 700;
   font-size: @back-button-font-size;

   .controls-BackButton__caption.controls-Link {
      font-style: normal;
      color: @back-button-text-color;
      text-align: left;
      // 3px - @back-button-margin-before.
      max-width: calc(~"100% - @{back-button-width-before} - 3px");
      line-height: normal;
      font-weight: @back-button-text-fontweight;
      font-size: @back-button-font-size;
   }

   &.controls-BackButton__show-arrow{
      &:hover {
         .controls-BackButton__arrow{
            display: inline-block;
            color: @icon-color-primary !important;
         }
      }
      &.controls-BackButton__hover-arrow{
         .controls-BackButton__arrow{
            margin-right: -@icon-width;
         }
      }
   }

   .controls-BackButton__arrow{
      display: none;
   }

   .controls-BackButton__caption.controls-Link{
      &.controls-Click__active {
         text-decoration: none;
         .controls-Button__text {
            text-decoration: none;
            color: @back-button-caption-hover-color;
         }
      }
   }
   &.controls-BackButton__empty {
      .controls-BackButton__caption {
         padding-left: 0;
         &Arrow:before {
            content: '';
            width: 0;
            margin: 0;
         }
      }
   }

}

.controls-BackButton__hover-arrow {
   position: relative;
}

.ws-is-mobile-platform{
   .controls-BackButton{
      &:hover {
         .controls-BackButton__caption {
            color: @back-button-caption-hover-color;
         }
      }
      &:active{
         .controls-BackButton__caption {
            color: @back-button-caption-active-color;
         }
      }
   }
}

.ws-is-desktop-platform {
   .controls-BackButton:hover {
      .controls-BackButton__caption.controls-Link:not(.ws-disabled):not(.controls-Click__active) {
         color: @back-button-caption-active-color;
         .controls-Button__text {
            text-decoration: none;
         }
      }
   }
}

.ws-is-mobile-safari, .ws-is-desktop-safari, .ws-is-mobile-chrome-ios{
   .controls-BackButton {
      .controls-BackButton__caption {
         max-width: calc(~"100% - 7px");
      }
   }
}


.back-button-before-fix(){
   .controls-BackButton {
      .controls-BackButton__caption {
         margin-left: -4px;
         &Arrow:before {
            display: inline-block;
            vertical-align: top;
            float: none;
         }
      }
   }
}

.has_path{
   .controls-BackButton__arrow {
      width: 20px;
      background: linear-gradient(to right, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%);
      right: 16px;
   }
}

.controls-BackButton__captionArrow:before {
   content: @back-arrow-orange;
   &:hover:before {
      color: @back-button-arrow-hover-color;
   }
   width: @back-button-width-before;
   color: @primary-color;
   font-weight: normal;
   float: left;
   margin: @back-button-margin-before;
   padding: @back-button-padding-before;
   line-height: @back-button-linheight-before;
}

// ALERT: Расположение этого кода в конце файла - важно! Сделано для того чтобы перебить селектор с такой же силой. Не нагородив при этом кучи каскада
// По правилам применяется селектор, который описан "позже". Т.е. самый последний
.controls-BackButton {
   &.controls-BackButton__orange {
      .controls-BackButton__caption {
         color: @header-color;
         &:not(.ws-disabled):not(.controls-Click__active):not(.controls-Link__disabledHover):hover {
            color: @primary-color;
         }
         &Arrow:before {
            content: @back-arrow-blue;
            color: @blue-dark-color;
         }
         &.controls-Link.controls-Click__active {
            .controls-Button__text {
               color: @primary-color;
            }
         }
      }
      &:hover {
         //Роман Валера скоро перепишет стили для кнопки назад, пока без таких каскадов никак
         .controls-BackButton__caption:not(.ws-disabled):not(.controls-Click__active):not(.controls-Link__disabledHover) {
            color: @primary-color;
            &Arrow:before {
               color: @primary-color;
            }
         }
      }
   }
 }

.controls-BackButton__captionArrow_header-blue-h2:before {
   .ws-backArrow_orange();
   .ws-backArrow_20();
   margin-right: @back-button-arrow-margin-right-1;
}
.controls-BackButton__captionArrow_header-orange-h2:before {
   .ws-backArrow_blue();
   .ws-backArrow_20();
   margin-right: @back-button-arrow-margin-right-1;
}
.controls-BackButton__captionArrow_header-blue-h3:before {
   .ws-backArrow_orange();
   .ws-backArrow_18();
   margin-right: @back-button-arrow-margin-right-2;
}
.controls-BackButton__captionArrow_header-orange-h3:before {
   .ws-backArrow_blue();
   .ws-backArrow_18();
   margin-right: @back-button-arrow-margin-right-2;
}
.controls-BackButton__captionArrow_header-blue-h6:before {
   .ws-backArrow_orange();
   .ws-backArrow_15();
   margin-right: @back-button-arrow-margin-right-2;
}
.controls-BackButton__captionArrow_header-orange-h6:before {
   .ws-backArrow_blue();
   .ws-backArrow_15();
   margin-right: @back-button-arrow-margin-right-2;
}
.ws-is-desktop-platform  .controls-BackButton_header-blue-h2 {
   &:hover {
      .controls-BackButton__caption:not(.ws-disabled):not(.controls-Click__active):not(.controls-Link__disabledHover) {
         .ws-header-blue-hover();
      }
   }
}
.ws-is-desktop-platform  .controls-BackButton_header-orange-h2 {
   &:hover {
      .controls-BackButton__caption:not(.ws-disabled):not(.controls-Click__active):not(.controls-Link__disabledHover) {
         .ws-header-orange-hover();
      }
   }
}
.ws-is-desktop-platform  .controls-BackButton_header-blue-h3 {
   &:hover {
      .controls-BackButton__caption:not(.ws-disabled):not(.controls-Click__active):not(.controls-Link__disabledHover) {
         .ws-header-blue-hover();
      }
   }
}
.ws-is-desktop-platform  .controls-BackButton_header-orange-h3 {
   &:hover {
      .controls-BackButton__caption:not(.ws-disabled):not(.controls-Click__active):not(.controls-Link__disabledHover) {
         .ws-header-orange-hover();
      }
   }
}
.ws-is-desktop-platform  .controls-BackButton_header-blue-h6 {
   &:hover {
      .controls-BackButton__caption:not(.ws-disabled):not(.controls-Click__active):not(.controls-Link__disabledHover) {
         .ws-header-blue-hover();
      }
   }
}
.ws-is-desktop-platform  .controls-BackButton_header-orange-h6 {
   &:hover {
      .controls-BackButton__caption:not(.ws-disabled):not(.controls-Click__active):not(.controls-Link__disabledHover) {
         .ws-header-orange-hover();
      }
   }
}
.controls-BackButton .controls-BackButton__caption_header-blue-h2 {
   &.controls-Link {
      .ws-header_h2();
      .ws-header_blue();
      max-width: calc(~"100% - @{back-arrow-width-20} - @{back-button-arrow-margin-right-1}");
   }
}
.controls-BackButton .controls-BackButton__caption_header-orange-h2 {
   &.controls-Link {
      .ws-header_h2();
      .ws-header_orange();
      max-width: calc(~"100% - @{back-arrow-width-20} - @{back-button-arrow-margin-right-1}");
   }
}
.controls-BackButton .controls-BackButton__caption_header-blue-h3 {
   &.controls-Link {
      .ws-header_h3();
      .ws-header_blue();
      max-width: calc(~"100% - @{back-arrow-width-18} - @{back-button-arrow-margin-right-2}");
   }
}
.controls-BackButton .controls-BackButton__caption_header-orange-h3 {
   &.controls-Link {
      .ws-header_h3();
      .ws-header_orange();
      max-width: calc(~"100% - @{back-arrow-width-18} - @{back-button-arrow-margin-right-2}");
   }
}
.controls-BackButton .controls-BackButton__caption_header-blue-h6 {
   &.controls-Link {
      .ws-header_h6();
      .ws-header_blue();
      max-width: calc(~"100% - @{back-arrow-width-15} - @{back-button-arrow-margin-right-2}");
   }
}
.controls-BackButton .controls-BackButton__caption_header-orange-h6 {
   &.controls-Link {
      .ws-header_h6();
      .ws-header_orange();
      max-width: calc(~"100% - @{back-arrow-width-15} - @{back-button-arrow-margin-right-2}");
   }
}