!function(){"use strict";var e,t,n,r=function(e){return function(){return e}},i,o,a,s,u,l,f,c,d,b={noop:function(){},noarg:function(e){return function(){return e()}},compose:function(e,t){return function(){return e(t.apply(null,arguments))}},constant:r,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(r){for(var i=new Array(arguments.length-1),e=1;e<arguments.length;e++)i[e-1]=arguments[e];return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];var n=i.concat(e);return r.apply(null,n)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:r(false),always:r(true)},m=b.never,h=b.always,p=function(){return g},g=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r,i={fold:function(e,t){return e()},is:m,isSome:m,isNone:h,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:n,orThunk:t,map:p,ap:p,each:function(){},bind:p,flatten:p,exists:m,forall:h,filter:p,equals:e,equals_:e,toArray:function(){return[]},toString:b.constant("none()")};if(Object.freeze)Object.freeze(i);return i}(),v=function(n){var e=function(){return n},t=function(){return o},r,i=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:h,isNone:m,getOr:e,getOrThunk:e,getOrDie:e,or:t,orThunk:t,map:function(e){return v(e(n))},ap:function(e){return e.fold(p,function(e){return v(e(n))})},each:function(e){e(n)},bind:i,flatten:e,exists:i,forall:i,filter:function(e){return e(n)?o:g},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(m,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},y,w={some:v,none:p,from:function(e){return null===e||void 0===e?g:v(e)}},x=void 0===(C=Array.prototype.indexOf)?function(e,t){return z(e,t)}:function(e,t){return C.call(e,t)},C,k,S,E=function(e,t){var n=x(e,t);return-1===n?w.none():w.some(n)},N=function(e,t){return x(e,t)>-1},_=function(e,t){return F(e,t).isSome()},T=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},R=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n.push(i)}return n},A=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},D=function(e,t){for(var n=0,r=e.length;n<r;n++){var i;t(e[n],n,e)}},P=function(e,t){for(var n=e.length-1;n>=0;n--){var r;t(e[n],n,e)}},B=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i],s;(t(a,i,e)?n:r).push(a)}return{pass:n,fail:r}},O=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(t(o,r,e))n.push(o)}return n},M=function(e,t){if(0===e.length)return[];else{for(var n=t(e[0]),r=[],i=[],o=0,a=e.length;o<a;o++){var s=e[o],u=t(s);if(u!==n)r.push(i),i=[];n=u,i.push(s)}if(0!==i.length)r.push(i);return r}},L=function(e,t,n){return P(e,function(e){n=t(n,e)}),n},I=function(e,t,n){return D(e,function(e){n=t(n,e)}),n},H=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return w.some(i)}return w.none()},F=function(e,t){for(var n=0,r=e.length;n<r;n++){var i;if(t(e[n],n,e))return w.some(n)}return w.none()},z=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},W=Array.prototype.push,U=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);W.apply(t,e[n])}return t},j=function(e,t){var n=A(e,t);return U(n)},V=function(e,t){for(var n=0,r=e.length;n<r;++n){var i;if(true!==t(e[n],n,e))return false}return true},$=function(e,n){return e.length===n.length&&V(e,function(e,t){return e===n[t]})},q=Array.prototype.slice,Y,K,X,G,J,Q,Z,ee={map:A,each:D,eachr:P,partition:B,filter:O,groupBy:M,indexOf:E,foldr:L,foldl:I,find:H,findIndex:F,flatten:U,bind:j,forall:V,exists:_,contains:N,equal:$,reverse:function(e){var t=q.call(e,0);return t.reverse(),t},chunk:R,difference:function(e,t){return O(e,function(e){return!N(t,e)})},mapToObject:function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n},pure:function(e){return[e]},sort:function(e,t){var n=q.call(e,0);return n.sort(t),n},range:T,head:function(e){return 0===e.length?w.none():w.some(e[0])},last:function(e){return 0===e.length?w.none():w.some(e[e.length-1])}},te="undefined"!==typeof window?window:Function("return this;")(),ne=function(e,t){for(var n=void 0!==t&&null!==t?t:te,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},re,ie=function(e,t){if(void 0===e[t]||null===e[t])e[t]={};return e[t]},oe=function(e,t){for(var n=void 0!==t?t:te,r=0;r<e.length;++r)n=ie(n,e[r]);return n},ae,se=ne,ue=function(e,t){var n=e.split(".");return ne(n,t)},le=oe,fe=function(e,t){var n=e.split(".");return oe(n,t)},ce=function(e,t){return ue(e,t)},de,me={getOrDie:function(e,t){var n=ce(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n}},he=function(){return me.getOrDie("URL")},pe,ge,ve={createObjectURL:function(e){return he().createObjectURL(e)},revokeObjectURL:function(e){he().revokeObjectURL(e)}},be=navigator,ye=be.userAgent,we,xe,Ce,ke,Se,Ee,Ne,_e,Te,Re,Ae,De,Pe,Be=function(e){return"matchMedia"in window?matchMedia(e).matches:false};if(we=false,Te=/Android/.test(ye),Ce=(Ce=!(xe=/WebKit/.test(ye))&&!we&&/MSIE/gi.test(ye)&&/Explorer/gi.test(be.appName))&&/MSIE (\w+)\./.exec(ye)[1],ke=+(ye.match(/Trident\/([0-9]+)\.[0-9]+/)||[])[1]+4||false,Ce=(Se=-1!==ye.indexOf("Edge/")&&!Ce&&!ke?12:false)||ke||Ce,Ee=!xe&&!ke&&/Gecko/.test(ye),Ne=-1!==ye.indexOf("Mac"),_e=/(iPad|iPhone)/.test(ye),Re="FormData"in window&&"FileReader"in window&&"URL"in window&&!!ve.createObjectURL,Ae=Be("only screen and (max-device-width: 480px)")&&(Te||_e),De=Be("only screen and (min-width: 800px)")&&(Te||_e),Pe=-1!==ye.indexOf("Windows Phone"),Se)xe=false;var Oe,Me={opera:we,webkit:xe,ie:Ce,gecko:Ee,mac:Ne,iOS:_e,android:Te,contentEditable:!_e||Re||parseInt(ye.match(/AppleWebKit\/(\d*)/)[1],10)>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==Ce,range:window.getSelection&&"Range"in window,documentMode:Ce&&!Se?document.documentMode||7:10,fileApi:Re,ceFalse:false===Ce||Ce>8,cacheSuffix:"",container:null,overrideViewPort:null,experimentalShadowDom:false,canHaveCSP:false===Ce||Ce>11,desktop:!Ae&&!De,windowsPhone:Pe},Le=function(){function n(e,t){return function(){e.apply(t,arguments)}}var e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=function(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,n(r,this),n(i,this))},t=o.immediateFn||"function"===typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function a(n){var r=this;if(null===this._state)return void this._deferreds.push(n);t(function(){var e=r._state?n.onFulfilled:n.onRejected,t;if(null===e)return void(r._state?n.resolve:n.reject)(r._value);try{t=e(r._value)}catch(e){return void n.reject(e)}n.resolve(t)})}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var t=e.then;if("function"===typeof t)return void l(n(t,e),n(r,this),n(i,this))}this._state=true,this._value=e,s.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=false,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)a.call(this,this._deferreds[e]);this._deferreds=null}function u(e,t,n,r){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=false;try{e(function(e){if(r)return;r=true,t(e)},function(e){if(r)return;r=true,n(e)})}catch(e){if(r)return;r=true,n(e)}}return o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(n,r){var i=this;return new o(function(e,t){a.call(i,new u(n,r,e,t))})},o.all=function(){var s=Array.prototype.slice.call(1===arguments.length&&e(arguments[0])?arguments[0]:arguments);return new o(function(r,i){if(0===s.length)return r([]);var o=s.length;function a(t,e){try{if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if("function"===typeof n)return void n.call(e,function(e){a(t,e)},i)}if(s[t]=e,0===--o)r(s)}catch(e){i(e)}}for(var e=0;e<s.length;e++)a(e,s[e])})},o.resolve=function(t){if(t&&"object"===typeof t&&t.constructor===o)return t;return new o(function(e){e(t)})},o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(i){return new o(function(e,t){for(var n=0,r=i.length;n<r;n++)i[n].then(e,t)})},o},Ie=window.Promise&&window.Promise.all?window.Promise:Le(),He,Fe=function(e,t){var n,r=window.requestAnimationFrame,i=["ms","moz","webkit"],o=function(e){window.setTimeout(e,0)};for(n=0;n<i.length&&!r;n++)r=window[i[n]+"RequestAnimationFrame"];if(!r)r=o;r(e,t)},ze=function(e,t){if("number"!==typeof t)t=0;return setTimeout(e,t)},We=function(e,t){if("number"!==typeof t)t=1;return setInterval(e,t)},Ue,je,Ve=function(t,n){var r,e;return(e=function(){var e=arguments;clearTimeout(r),r=ze(function(){t.apply(this,e)},n)}).stop=function(){clearTimeout(r)},e},$e={requestAnimationFrame:function(e,t){if(He)return void He.then(e);He=new Ie(function(e){if(!t)t=document.body;Fe(e,t)}).then(e)},setTimeout:ze,setInterval:We,setEditorTimeout:function(e,t,n){return ze(function(){if(!e.removed)t()},n)},setEditorInterval:function(e,t,n){var r;return r=We(function(){if(!e.removed)t();else clearInterval(r)},n)},debounce:Ve,throttle:Ve,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},qe="mce-data-",Ye=/^(?:mouse|contextmenu)|click/,Ke={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Xe=function(e){return e.isDefaultPrevented===Je||e.isDefaultPrevented===Ge},Ge=function(){return false},Je=function(){return true},Qe=function(e,t,n,r){if(e.addEventListener)e.addEventListener(t,n,r||false);else if(e.attachEvent)e.attachEvent("on"+t,n)},Ze=function(e,t,n,r){if(e.removeEventListener)e.removeEventListener(t,n,r||false);else if(e.detachEvent)e.detachEvent("on"+t,n)},et=function(e,t){var n,r=t;if((n=e.path)&&n.length>0)r=n[0];if(e.composedPath)if((n=e.composedPath())&&n.length>0)r=n[0];return r},tt=function(e,t){var n,r=t||{};for(n in e)if(!Ke[n])r[n]=e[n];if(!r.target)r.target=r.srcElement||document;if(Me.experimentalShadowDom)r.target=et(e,r.target);if(e&&Ye.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var i=r.target.ownerDocument||document,o=i.documentElement,a=i.body;r.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),r.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}if(r.preventDefault=function(){if(r.isDefaultPrevented=Je,e)if(e.preventDefault)e.preventDefault();else e.returnValue=false},r.stopPropagation=function(){if(r.isPropagationStopped=Je,e)if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=Je,r.stopPropagation()},false===Xe(r))r.isDefaultPrevented=Ge,r.isPropagationStopped=Ge,r.isImmediatePropagationStopped=Ge;if("undefined"===typeof r.metaKey)r.metaKey=false;return r},nt=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded)return void t(i);var o=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){if(!n.domLoaded)n.domLoaded=true,t(i)},s=function(){if(o())Ze(r,"readystatechange",s),a()},u=function(){try{r.documentElement.doScroll("left")}catch(e){return void $e.setTimeout(u)}a()};if(r.addEventListener&&!(Me.ie&&Me.ie<11))if(o())a();else Qe(e,"DOMContentLoaded",a);else if(Qe(r,"readystatechange",s),r.documentElement.doScroll&&e.self===e.top)u();Qe(e,"load",a)},rt=function(){var m=this,h={},p,g,v,b,y;g=qe+(+new Date).toString(32),b="onmouseenter"in document.documentElement,v="onfocusin"in document.documentElement,y={mouseenter:"mouseover",mouseleave:"mouseout"},p=1,m.domLoaded=false,m.events=h;var w=function(e,t){var n,r,i,o,a=h[t];if(n=a&&a[e.type])for(r=0,i=n.length;r<i;r++){if((o=n[r])&&false===o.func.call(o.scope,e))e.preventDefault();if(e.isImmediatePropagationStopped())return}};m.bind=function(e,t,n,r){var i,o,a,s,u,l,f,c=window,d=function(e){w(tt(e||c.event),i)};if(!e||3===e.nodeType||8===e.nodeType)return;if(!e[g])i=p++,e[g]=i,h[i]={};else i=e[g];r=r||e,a=(t=t.split(" ")).length;while(a--){if(l=d,u=f=false,"DOMContentLoaded"===(s=t[a]))s="ready";if(m.domLoaded&&"ready"===s&&"complete"===e.readyState){n.call(r,tt({type:s}));continue}if(!b)if(u=y[s])l=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else while(n&&n!==t)n=n.parentNode;if(!n)(e=tt(e||c.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,w(e,i)};if(!v&&("focusin"===s||"focusout"===s))f=true,u="focusin"===s?"focus":"blur",l=function(e){(e=tt(e||c.event)).type="focus"===e.type?"focusin":"focusout",w(e,i)};if(!(o=h[i][s]))if(h[i][s]=o=[{func:n,scope:r}],o.fakeName=u,o.capture=f,o.nativeHandler=l,"ready"===s)nt(e,l,m);else Qe(e,u||s,l,f);else if("ready"===s&&m.domLoaded)n({type:s});else o.push({func:n,scope:r})}return e=o=0,n},m.unbind=function(t,e,n){var r,i,o,a,s,u;if(!t||3===t.nodeType||8===t.nodeType)return m;if(r=t[g]){if(u=h[r],e){o=(e=e.split(" ")).length;while(o--)if(i=u[s=e[o]]){if(n){a=i.length;while(a--)if(i[a].func===n){var l=i.nativeHandler,f=i.fakeName,c=i.capture;(i=i.slice(0,a).concat(i.slice(a+1))).nativeHandler=l,i.fakeName=f,i.capture=c,u[s]=i}}if(!n||0===i.length)delete u[s],Ze(t,i.fakeName||s,i.nativeHandler,i.capture)}}else{for(s in u)i=u[s],Ze(t,i.fakeName||s,i.nativeHandler,i.capture);u={}}for(s in u)return m;delete h[r];try{delete t[g]}catch(e){t[g]=null}}return m},m.fire=function(e,t,n){var r;if(!e||3===e.nodeType||8===e.nodeType)return m;(n=tt(null,n)).type=t,n.target=e;do{if(r=e[g])w(n,r);e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped());return m},m.clean=function(e){var t,n,r=m.unbind;if(!e||3===e.nodeType||8===e.nodeType)return m;if(e[g])r(e);if(!e.getElementsByTagName)e=e.document;if(e&&e.getElementsByTagName){r(e),t=(n=e.getElementsByTagName("*")).length;while(t--)if((e=n[t])[g])r(e)}return m},m.destroy=function(){h={}},m.cancel=function(e){if(e)e.preventDefault(),e.stopImmediatePropagation();return false}},it,ot,at,st,ut,lt,ft,ct,dt,mt,ht,pt,gt,vt,bt,yt,wt,xt,Ct;(rt.Event=new rt).bind(window,"ready",function(){});var kt="sizzle"+-new Date,St=window.document,Et=0,Nt=0,_t=un(),Tt=un(),Rt=un(),At=function(e,t){if(e===t)ht=true;return 0},Dt=typeof void 0,Pt=1<<31,Bt={}.hasOwnProperty,Ot=[],Mt=Ot.pop,Lt=Ot.push,It=Ot.push,Ht=Ot.slice,Ft=Ot.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},zt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Wt="[\\x20\\t\\r\\n\\f]",Ut="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",jt="\\["+Wt+"*("+Ut+")(?:"+Wt+"*([*^$|!~]?=)"+Wt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Ut+"))|)"+Wt+"*\\]",Vt=":("+Ut+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+jt+")*)|"+".*"+")\\)|)",$t=new RegExp("^"+Wt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Wt+"+$","g"),qt=new RegExp("^"+Wt+"*,"+Wt+"*"),Yt=new RegExp("^"+Wt+"*([>+~]|"+Wt+")"+Wt+"*"),Kt=new RegExp("="+Wt+"*([^\\]'\"]*?)"+Wt+"*\\]","g"),Xt=new RegExp(Vt),Gt=new RegExp("^"+Ut+"$"),Jt={ID:new RegExp("^#("+Ut+")"),CLASS:new RegExp("^\\.("+Ut+")"),TAG:new RegExp("^("+Ut+"|[*])"),ATTR:new RegExp("^"+jt),PSEUDO:new RegExp("^"+Vt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Wt+"*(even|odd|(([+-]|)(\\d*)n|)"+Wt+"*(?:([+-]|)"+Wt+"*(\\d+)|))"+Wt+"*\\)|)","i"),bool:new RegExp("^(?:"+zt+")$","i"),needsContext:new RegExp("^"+Wt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Wt+"*((?:-\\d)?\\d*)"+Wt+"*\\)|)(?=[^-]|$)","i")},Qt=/^(?:input|select|textarea|button)$/i,Zt=/^h\d$/i,en=/^[^{]+\{\s*\[native \w/,tn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nn=/[+~]/,rn=/'|\\/g,on=new RegExp("\\\\([\\da-f]{1,6}"+Wt+"?|("+Wt+")|.)","ig"),an=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{It.apply(Ot=Ht.call(St.childNodes),St.childNodes),Ot[St.childNodes.length].nodeType}catch(e){It={apply:Ot.length?function(e,t){Lt.apply(e,Ht.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}var sn=function(e,t,n,r){var i,o,a,s,u,l,f,c,d,m;if((t?t.ownerDocument||t:St)!==gt)pt(t);if(n=n||[],!e||"string"!==typeof e)return n;if(1!==(s=(t=t||gt).nodeType)&&9!==s)return[];if(bt&&!r){if(i=tn.exec(e))if(a=i[1]){if(9===s)if((o=t.getElementById(a))&&o.parentNode){if(o.id===a)return n.push(o),n}else return n;else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&Ct(t,o)&&o.id===a)return n.push(o),n}else if(i[2])return It.apply(n,t.getElementsByTagName(e)),n;else if((a=i[3])&&ot.getElementsByClassName)return It.apply(n,t.getElementsByClassName(a)),n;if(ot.qsa&&(!yt||!yt.test(e))){if(c=f=kt,d=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){if(l=lt(e),f=t.getAttribute("id"))c=f.replace(rn,"\\$&");else t.setAttribute("id",c);c="[id='"+c+"'] ",u=l.length;while(u--)l[u]=c+gn(l[u]);d=nn.test(e)&&hn(t.parentNode)||t,m=l.join(",")}if(m)try{return It.apply(n,d.querySelectorAll(m)),n}catch(e){}finally{if(!f)t.removeAttribute("id")}}}return ct(e.replace($t,"$1"),t,n,r)};function un(){var n=[];function r(e,t){if(n.push(e+" ")>at.cacheLength)delete r[n.shift()];return r[e+" "]=t}return r}function ln(e){return e[kt]=true,e}function fn(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Pt)-(~e.sourceIndex||Pt);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function cn(n){return function(e){var t;return"input"===e.nodeName.toLowerCase()&&e.type===n}}function dn(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function mn(a){return ln(function(o){return o=+o,ln(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)if(e[n=r[i]])e[n]=!(t[n]=e[n])})})}function hn(e){return e&&typeof e.getElementsByTagName!==Dt&&e}for(it in ot=sn.support={},ut=sn.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:false},pt=sn.setDocument=function(e){var t,u=e?e.ownerDocument||e:St,n=u.defaultView;function r(e){try{return e.top}catch(e){}return null}if(u===gt||9!==u.nodeType||!u.documentElement)return gt;if(vt=(gt=u).documentElement,bt=!ut(u),n&&n!==r(n))if(n.addEventListener)n.addEventListener("unload",function(){pt()},false);else if(n.attachEvent)n.attachEvent("onunload",function(){pt()});return ot.attributes=true,ot.getElementsByTagName=true,ot.getElementsByClassName=en.test(u.getElementsByClassName),ot.getById=true,at.find.ID=function(e,t){if(typeof t.getElementById!==Dt&&bt){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},at.filter.ID=function(e){var t=e.replace(on,an);return function(e){return e.getAttribute("id")===t}},at.find.TAG=ot.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Dt)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])if(1===n.nodeType)r.push(n);return r}return o},at.find.CLASS=ot.getElementsByClassName&&function(e,t){if(bt)return t.getElementsByClassName(e)},wt=[],yt=[],ot.disconnectedMatch=true,yt=yt.length&&new RegExp(yt.join("|")),wt=wt.length&&new RegExp(wt.join("|")),t=en.test(vt.compareDocumentPosition),Ct=t||en.test(vt.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&1===r.nodeType&&(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return true;return false},At=t?function(e,t){if(e===t)return ht=true,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;if(n)return n;if(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!ot.sortDetached&&t.compareDocumentPosition(e)===n){if(e===u||e.ownerDocument===St&&Ct(St,e))return-1;if(t===u||t.ownerDocument===St&&Ct(St,t))return 1;return mt?Ft.call(mt,e)-Ft.call(mt,t):0}return 4&n?-1:1}:function(e,t){if(e===t)return ht=true,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===u?-1:t===u?1:i?-1:o?1:mt?Ft.call(mt,e)-Ft.call(mt,t):0;else if(i===o)return fn(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?fn(a[r],s[r]):a[r]===St?-1:s[r]===St?1:0},u},sn.matches=function(e,t){return sn(e,null,null,t)},sn.matchesSelector=function(e,t){if((e.ownerDocument||e)!==gt)pt(e);if(t=t.replace(Kt,"='$1']"),ot.matchesSelector&&bt&&(!wt||!wt.test(t))&&(!yt||!yt.test(t)))try{var n=xt.call(e,t);if(n||ot.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return sn(t,gt,null,[e]).length>0},sn.contains=function(e,t){if((e.ownerDocument||e)!==gt)pt(e);return Ct(e,t)},sn.attr=function(e,t){if((e.ownerDocument||e)!==gt)pt(e);var n=at.attrHandle[t.toLowerCase()],r=n&&Bt.call(at.attrHandle,t.toLowerCase())?n(e,t,!bt):void 0;return void 0!==r?r:ot.attributes||!bt?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},sn.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},sn.uniqueSort=function(e){var t,n=[],r=0,i=0;if(ht=!ot.detectDuplicates,mt=!ot.sortStable&&e.slice(0),e.sort(At),ht){while(t=e[i++])if(t===e[i])r=n.push(i);while(r--)e.splice(n[r],1)}return mt=null,e},st=sn.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)while(t=e[r++])n+=st(t);else if(1===i||9===i||11===i)if("string"===typeof e.textContent)return e.textContent;else for(e=e.firstChild;e;e=e.nextSibling)n+=st(e);else if(3===i||4===i)return e.nodeValue;return n},(at=sn.selectors={cacheLength:50,createPseudo:ln,match:Jt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){if(e[1]=e[1].replace(on,an),e[3]=(e[3]||e[4]||e[5]||"").replace(on,an),"~="===e[2])e[3]=" "+e[3]+" ";return e.slice(0,4)},CHILD:function(e){if(e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)){if(!e[3])sn.error(e[0]);e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])}else if(e[3])sn.error(e[0]);return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(Jt.CHILD.test(e[0]))return null;if(e[3])e[2]=e[4]||e[5]||"";else if(n&&Xt.test(n)&&(t=lt(n,true))&&(t=n.indexOf(")",n.length-t)-n.length))e[0]=e[0].slice(0,t),e[2]=n.slice(0,t);return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(on,an).toLowerCase();return"*"===e?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_t[e+" "];return t||(t=new RegExp("(^|"+Wt+")"+e+"("+Wt+"|$)"))&&_t(e,function(e){return t.test("string"===typeof e.className&&e.className||typeof e.getAttribute!==Dt&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=sn.attr(e,n);if(null==t)return"!="===r;if(!r)return true;return t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&t.indexOf(i)>-1:"$="===r?i&&t.slice(-i.length)===i:"~="===r?(" "+t+" ").indexOf(i)>-1:"|="===r?t===i||t.slice(0,i.length+1)===i+"-":false}},CHILD:function(m,e,t,h,p){var g="nth"!==m.slice(0,3),v="last"!==m.slice(-4),b="of-type"===e;return 1===h&&0===p?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=g!==v?"nextSibling":"previousSibling",f=e.parentNode,c=b&&e.nodeName.toLowerCase(),d=!n&&!b;if(f){if(g){while(l){o=e;while(o=o[l])if(b?o.nodeName.toLowerCase()===c:1===o.nodeType)return false;u=l="only"===m&&!u&&"nextSibling"}return true}if(u=[v?f.firstChild:f.lastChild],v&&d){s=(r=(i=f[kt]||(f[kt]={}))[m]||[])[0]===Et&&r[1],a=r[0]===Et&&r[2],o=s&&f.childNodes[s];while(o=++s&&o&&o[l]||(a=s=0)||u.pop())if(1===o.nodeType&&++a&&o===e){i[m]=[Et,s,a];break}}else if(d&&(r=(e[kt]||(e[kt]={}))[m])&&r[0]===Et)a=r[1];else while(o=++s&&o&&o[l]||(a=s=0)||u.pop())if((b?o.nodeName.toLowerCase()===c:1===o.nodeType)&&++a){if(d)(o[kt]||(o[kt]={}))[m]=[Et,a];if(o===e)break}return(a-=p)===h||a%h===0&&a/h>=0}}},PSEUDO:function(e,o){var t,a=at.pseudos[e]||at.setFilters[e.toLowerCase()]||sn.error("unsupported pseudo: "+e);if(a[kt])return a(o);if(a.length>1)return t=[e,e,"",o],at.setFilters.hasOwnProperty(e.toLowerCase())?ln(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=Ft.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)};return a}},pseudos:{not:ln(function(e){var r=[],i=[],s=ft(e.replace($t,"$1"));return s[kt]?ln(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)if(i=o[a])e[a]=!(t[a]=i)}):function(e,t,n){return r[0]=e,s(r,null,n,i),!i.pop()}}),has:ln(function(t){return function(e){return sn(t,e).length>0}}),contains:ln(function(t){return t=t.replace(on,an),function(e){return(e.textContent||e.innerText||st(e)).indexOf(t)>-1}}),lang:ln(function(n){if(!Gt.test(n||""))sn.error("unsupported lang: "+n);return n=n.replace(on,an).toLowerCase(),function(e){var t;do{if(t=bt?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return false}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===vt},focus:function(e){return e===gt.activeElement&&(!gt.hasFocus||gt.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return false===e.disabled},disabled:function(e){return true===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){if(e.parentNode)e.parentNode.selectedIndex;return true===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return false;return true},parent:function(e){return!at.pseudos.empty(e)},header:function(e){return Zt.test(e.nodeName)},input:function(e){return Qt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:mn(function(){return[0]}),last:mn(function(e,t){return[t-1]}),eq:mn(function(e,t,n){return[n<0?n+t:n]}),even:mn(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:mn(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:mn(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:mn(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=at.pseudos.eq,{radio:true,checkbox:true,file:true,password:true,image:true})at.pseudos[it]=cn(it);for(it in{submit:true,reset:true})at.pseudos[it]=dn(it);function pn(){}function gn(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function vn(a,e,t){var s=e.dir,u=t&&"parentNode"===s,l=Nt++;return e.first?function(e,t,n){while(e=e[s])if(1===e.nodeType||u)return a(e,t,n)}:function(e,t,n){var r,i,o=[Et,l];if(n){while(e=e[s])if(1===e.nodeType||u)if(a(e,t,n))return true}else while(e=e[s])if(1===e.nodeType||u)if((r=(i=e[kt]||(e[kt]={}))[s])&&r[0]===Et&&r[1]===l)return o[2]=r[2];else if((i[s]=o)[2]=a(e,t,n))return true}}function bn(i){return i.length>1?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return false;return true}:i[0]}function yn(e,t,n){for(var r=0,i=t.length;r<i;r++)sn(e,t[r],n);return n}function wn(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)if(o=e[s])if(!n||n(o,r,i))if(a.push(o),l)t.push(s);return a}function xn(m,h,p,g,v,e){if(g&&!g[kt])g=xn(g);if(v&&!v[kt])v=xn(v,e);return ln(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,f=e||yn(h||"*",n.nodeType?[n]:n,[]),c=m&&(e||!h)?wn(f,s,m,n,r):f,d=p?v||(e?m:l||g)?[]:t:c;if(p)p(c,d,n,r);if(g){i=wn(d,u),g(i,[],n,r),o=i.length;while(o--)if(a=i[o])d[u[o]]=!(c[u[o]]=a)}if(e){if(v||m){if(v){i=[],o=d.length;while(o--)if(a=d[o])i.push(c[o]=a);v(null,d=[],i,r)}o=d.length;while(o--)if((a=d[o])&&(i=v?Ft.call(e,a):s[o])>-1)e[i]=!(t[i]=a)}}else if(d=wn(d===t?d.splice(l,d.length):d),v)v(null,t,d,r);else It.apply(t,d)})}function Cn(e){for(var r,t,n,i=e.length,o=at.relative[e[0].type],a=o||at.relative[" "],s=o?1:0,u=vn(function(e){return e===r},a,true),l=vn(function(e){return Ft.call(r,e)>-1},a,true),f=[function(e,t,n){return!o&&(n||t!==dt)||((r=t).nodeType?u(e,t,n):l(e,t,n))}];s<i;s++)if(t=at.relative[e[s].type])f=[vn(bn(f),t)];else{if((t=at.filter[e[s].type].apply(null,e[s].matches))[kt]){for(n=++s;n<i;n++)if(at.relative[e[n].type])break;return xn(s>1&&bn(f),s>1&&gn(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($t,"$1"),t,s<n&&Cn(e.slice(s,n)),n<i&&Cn(e=e.slice(n)),n<i&&gn(e))}f.push(t)}return bn(f)}function kn(g,v){var b=v.length>0,y=g.length>0,e=function(e,t,n,r,i){var o,a,s,u=0,l="0",f=e&&[],c=[],d=dt,m=e||y&&at.find.TAG("*",i),h=Et+=null==d?1:Math.random()||.1,p=m.length;if(i)dt=t!==gt&&t;for(;l!==p&&null!=(o=m[l]);l++){if(y&&o){a=0;while(s=g[a++])if(s(o,t,n)){r.push(o);break}if(i)Et=h}if(b){if(o=!s&&o)u--;if(e)f.push(o)}}if(u+=l,b&&l!==u){a=0;while(s=v[a++])s(f,c,t,n);if(e){if(u>0)while(l--)if(!(f[l]||c[l]))c[l]=Mt.call(r);c=wn(c)}if(It.apply(r,c),i&&!e&&c.length>0&&u+v.length>1)sn.uniqueSort(r)}if(i)Et=h,dt=d;return f};return b?ln(e):e}pn.prototype=at.filters=at.pseudos,at.setFilters=new pn,lt=sn.tokenize=function(e,t){var n,r,i,o,a,s,u,l=Tt[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=at.preFilter;while(a){if(!n||(r=qt.exec(a))){if(r)a=a.slice(r[0].length)||a;s.push(i=[])}if(n=false,r=Yt.exec(a))n=r.shift(),i.push({value:n,type:r[0].replace($t," ")}),a=a.slice(n.length);for(o in at.filter)if((r=Jt[o].exec(a))&&(!u[o]||(r=u[o](r))))n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length);if(!n)break}return t?a.length:a?sn.error(e):Tt(e,s).slice(0)},ft=sn.compile=function(e,t){var n,r=[],i=[],o=Rt[e+" "];if(!o){if(!t)t=lt(e);n=t.length;while(n--)if((o=Cn(t[n]))[kt])r.push(o);else i.push(o);(o=Rt(e,kn(i,r))).selector=e}return o},ct=sn.select=function(e,t,n,r){var i,o,a,s,u,l="function"===typeof e&&e,f=!r&&lt(e=l.selector||e);if(n=n||[],1===f.length){if((o=f[0]=f[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&ot.getById&&9===t.nodeType&&bt&&at.relative[o[1].type]){if(!(t=(at.find.ID(a.matches[0].replace(on,an),t)||[])[0]))return n;else if(l)t=t.parentNode;e=e.slice(o.shift().value.length)}i=Jt.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],at.relative[s=a.type])break;if(u=at.find[s])if(r=u(a.matches[0].replace(on,an),nn.test(o[0].type)&&hn(t.parentNode)||t)){if(o.splice(i,1),!(e=r.length&&gn(o)))return It.apply(n,r),n;break}}}return(l||ft(e,f))(r,t,!bt,n,nn.test(e)&&hn(t.parentNode)||t),n},ot.sortStable=kt.split("").sort(At).join("")===kt,ot.detectDuplicates=!!ht,pt(),ot.sortDetached=true;var Sn=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},En,Nn=function(e,t,n){var r,i;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,i=e.length;r<i;r++)if(false===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r))if(false===t.call(n,e[r],r,e))return 0;return 1},_n,Tn,Rn,An,Dn=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},Pn,Bn,On={isArray:Sn,toArray:function(e){var t=e,n,r;if(!Sn(e))for(t=[],n=0,r=e.length;n<r;n++)t[n]=e[n];return t},each:Nn,map:function(n,r){var i=[];return Nn(n,function(e,t){i.push(r(e,t,n))}),i},filter:function(n,r){var i=[];return Nn(n,function(e,t){if(!r||r(e,t,n))i.push(e)}),i},indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var i=0;if(arguments.length<3)n=e[0];for(;i<e.length;i++)n=t.call(r,n,e[i],i);return n},findIndex:Dn,find:function(e,t,n){var r=Dn(e,t,n);if(-1!==r)return e[r];return},last:function(e){return e[e.length-1]}},Mn=/^\s*|\s*$/g,Ln=function(e){return null===e||void 0===e?"":(""+e).replace(Mn,"")},In=function(e,t){if(!t)return void 0!==e;if("array"===t&&On.isArray(e))return true;return typeof e===t},Hn=function(e,t,n){var r;if(t=t||",","string"===typeof(e=e||[]))e=e.split(t);n=n||{},r=e.length;while(r--)n[e[r]]={};return n},Fn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},zn=function(e,t,n){var r=this,i,o,a,s,u,l=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),a=e[3].match(/(^|\.)(\w+)$/i)[2],(o=r.createNS(e[3].replace(/\.\w+$/,""),n))[a])return;if("static"===e[2]){if(o[a]=t,this.onCreate)this.onCreate(e[2],e[3],o[a]);return}if(!t[a])t[a]=function(){},l=1;if(o[a]=t[a],r.extend(o[a].prototype,t),e[5]){if(i=r.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],u=o[a],l)o[a]=function(){return i[s].apply(this,arguments)};else o[a]=function(){return this.parent=i[s],u.apply(this,arguments)};o[a].prototype[a]=o[a],r.each(i,function(e,t){o[a].prototype[t]=i[t]}),r.each(t,function(e,t){if(i[t])o[a].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)};else if(t!==a)o[a].prototype[t]=e})}r.each(t.static,function(e,t){o[a][t]=e})},Wn=function(e,t){for(var n=[],r=2,i,o,a;r<arguments.length;r++)n[r-2]=arguments[r];var s=arguments,u;for(i=1,o=s.length;i<o;i++)for(a in t=s[i])if(t.hasOwnProperty(a))if(void 0!==(u=t[a]))e[a]=u;return e},Un=function(e,n,r,i){if(i=i||this,e){if(r)e=e[r];On.each(e,function(e,t){if(false===n.call(i,e,t,r))return false;Un(e,n,r,i)})}},jn=function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++){if(!t[r=e[n]])t[r]={};t=t[r]}return t},Vn=function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r;n++)if(!(t=t[e[n]]))break;return t},$n=function(e,t){if(!e||In(e,"array"))return e;return On.map(e.split(t||","),Ln)},qn=function(e){var t=Me.cacheSuffix;if(t)e+=(-1===e.indexOf("?")?"?":"&")+t;return e},Yn={trim:Ln,isArray:On.isArray,is:In,toArray:On.toArray,makeMap:Hn,each:On.each,map:On.map,grep:On.filter,inArray:On.indexOf,hasOwn:Fn,extend:Wn,create:zn,walk:Un,createNS:jn,resolve:Vn,explode:$n,_addCacheSuffix:qn},Kn=document,Xn=Array.prototype.push,Gn=Array.prototype.slice,Jn=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Qn=rt.Event,Zn=Yn.makeMap("children,contents,next,prev"),er=function(e){return"undefined"!==typeof e},tr=function(e){return"string"===typeof e},nr=function(e){return e&&e===e.window},rr=function(e,t){var n,r,i;i=(t=t||Kn).createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;while(r=i.firstChild)n.appendChild(r);return n},ir=function(e,t,n,r){var i;if(tr(t))t=rr(t,yr(e[0]));else if(t.length&&!t.nodeType){if(t=mr.makeArray(t),r)for(i=t.length-1;i>=0;i--)ir(e,t[i],n,r);else for(i=0;i<t.length;i++)ir(e,t[i],n,r);return e}if(t.nodeType){i=e.length;while(i--)n.call(e[i],t)}return e},or=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},ar=function(e,t,n){var r,i;return t=mr(t)[0],e.each(function(){var e=this;if(!n||r!==e.parentNode)r=e.parentNode,i=t.cloneNode(false),e.parentNode.insertBefore(i,e),i.appendChild(e);else i.appendChild(e)}),e},sr=Yn.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),ur=Yn.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),lr={for:"htmlFor",class:"className",readonly:"readOnly"},fr={float:"cssFloat"},cr={},dr={},mr=function(e,t){return new mr.fn.init(e,t)},hr=function(e,t){var n;if(t.indexOf)return t.indexOf(e);n=t.length;while(n--)if(t[n]===e)return n;return-1},pr=/^\s*|\s*$/g,gr=function(e){return null===e||void 0===e?"":(""+e).replace(pr,"")},vr=function(e,t){var n,r,i,o;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r))if(o=e[r],false===t.call(o,r,o))break}else for(i=0;i<n;i++)if(o=e[i],false===t.call(o,i,o))break;return e},br=function(e,n){var r=[];return vr(e,function(e,t){if(n(t,e))r.push(t)}),r},yr=function(e){if(!e)return Kn;if(9===e.nodeType)return e;return e.ownerDocument};mr.fn=mr.prototype={constructor:mr,selector:"",context:null,length:0,init:function(e,t){var n=this,r,i;if(!e)return n;if(e.nodeType)return n.context=n[0]=e,n.length=1,n;if(t&&t.nodeType)n.context=t;else{if(t)return mr(e).attr(t);n.context=t=document}if(tr(e)){if("<"===(n.selector=e).charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3)r=[null,e,null];else r=Jn.exec(e);if(r)if(r[1]){i=rr(e,yr(t)).firstChild;while(i)Xn.call(n,i),i=i.nextSibling}else{if(!(i=yr(t).getElementById(r[2])))return n;if(i.id!==r[2])return n.find(e);n.length=1,n[0]=i}else return mr(t).find(e)}else this.add(e,false);return n},toArray:function(){return Yn.toArray(this)},add:function(e,t){var n=this,r,i;if(tr(e))return n.add(mr(e));if(false!==t)for(r=mr.unique(n.toArray().concat(mr.makeArray(e))),n.length=r.length,i=0;i<r.length;i++)n[i]=r[i];else Xn.apply(n,mr.makeArray(e));return n},attr:function(t,n){var r=this,e;if("object"===typeof t)vr(t,function(e,t){r.attr(e,t)});else if(er(n))this.each(function(){var e;if(1===this.nodeType){if((e=cr[t])&&e.set)return void e.set(this,n);if(null===n)this.removeAttribute(t,2);else this.setAttribute(t,n,2)}});else{if(r[0]&&1===r[0].nodeType){if((e=cr[t])&&e.get)return e.get(r[0],t);if(ur[t])return r.prop(t)?t:void 0;if(null===(n=r[0].getAttribute(t,2)))n=void 0}return n}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"===typeof(e=lr[e]||e))vr(e,function(e,t){n.prop(e,t)});else if(er(t))this.each(function(){if(1===this.nodeType)this[e]=t});else{if(n[0]&&n[0].nodeType&&e in n[0])return n[0][e];return t}return n},css:function(t,n){var r=this,e,i,o=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"===typeof t)vr(t,function(e,t){r.css(e,t)});else if(er(n)){if(t=o(t),"number"===typeof n&&!sr[t])n=n.toString()+"px";r.each(function(){var e=this.style;if((i=dr[t])&&i.set)return void i.set(this,n);try{this.style[fr[t]||t]=n}catch(e){}if(null===n||""===n)if(e.removeProperty)e.removeProperty(a(t));else e.removeAttribute(t)})}else{if(e=r[0],(i=dr[t])&&i.get)return i.get(e);if(e.ownerDocument.defaultView)try{return e.ownerDocument.defaultView.getComputedStyle(e,null).getPropertyValue(a(t))}catch(e){return}else if(e.currentStyle)return e.currentStyle[o(t)]}return r},remove:function(){var e=this,t,n=this.length;while(n--)if(t=e[n],Qn.clean(t),t.parentNode)t.parentNode.removeChild(t);return this},empty:function(){var e=this,t,n=this.length;while(n--){t=e[n];while(t.firstChild)t.removeChild(t.firstChild)}return this},html:function(t){var n=this,r;if(er(t)){r=n.length;try{while(r--)n[r].innerHTML=t}catch(e){mr(n[r]).empty().append(t)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t=this,n;if(er(e)){n=t.length;while(n--)if("innerText"in t[n])t[n].innerText=e;else t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return ir(this,arguments,function(e){if(1===this.nodeType||this.host&&1===this.host.nodeType)this.appendChild(e)})},prepend:function(){return ir(this,arguments,function(e){if(1===this.nodeType||this.host&&1===this.host.nodeType)this.insertBefore(e,this.firstChild)},true)},before:function(){var e=this;if(e[0]&&e[0].parentNode)return ir(e,arguments,function(e){this.parentNode.insertBefore(e,this)});return e},after:function(){var e=this;if(e[0]&&e[0].parentNode)return ir(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},true);return e},appendTo:function(e){return mr(e).append(this),this},prependTo:function(e){return mr(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return ar(this,e)},wrapAll:function(e){return ar(this,e,true)},wrapInner:function(e){return this.each(function(){mr(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){mr(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(true))}),mr(e)},addClass:function(e){return this.toggleClass(e,true)},removeClass:function(e){return this.toggleClass(e,false)},toggleClass:function(i,o){var e=this;if("string"!==typeof i)return e;if(-1!==i.indexOf(" "))vr(i.split(" "),function(){e.toggleClass(this,o)});else e.each(function(e,t){var n,r;if((r=or(t,i))!==o)if(n=t.className,r)t.className=gr((" "+n+" ").replace(" "+i+" "," "));else t.className+=n?" "+i:i});return e},hasClass:function(e){return or(this[0],e)},each:function(e){return vr(this,e)},on:function(e,t){return this.each(function(){Qn.bind(this,e,t)})},off:function(e,t){return this.each(function(){Qn.unbind(this,e,t)})},trigger:function(e){return this.each(function(){if("object"===typeof e)Qn.fire(this,e.type,e);else Qn.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new mr(Gn.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)mr.find(e,this[t],r);return mr(r)},filter:function(n){if("function"===typeof n)return mr(br(this.toArray(),function(e,t){return n(t,e)}));return mr(mr.filter(n,this.toArray()))},closest:function(n){var r=[];if(n instanceof mr)n=n[0];return this.each(function(e,t){while(t){if("string"===typeof n&&mr(t).is(n)){r.push(t);break}else if(t===n){r.push(t);break}t=t.parentNode}}),mr(r)},offset:function(e){var t,n,r,i=0,o=0,a;if(!e){if(t=this[0])if(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect)i=(a=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,o=a.top+(r.scrollTop||n.body.scrollTop)-r.clientTop;return{left:i,top:o}}return this.css(e)},push:Xn,sort:[].sort,splice:[].splice},Yn.extend(mr,{extend:Yn.extend,makeArray:function(e){if(nr(e)||e.nodeType)return[e];return Yn.toArray(e)},inArray:hr,isArray:Yn.isArray,each:vr,trim:gr,grep:br,find:sn,expr:sn.selectors,unique:sn.uniqueSort,text:sn.getText,contains:sn.contains,filter:function(e,t,n){var r=t.length;if(n)e=":not("+e+")";while(r--)if(1!==t[r].nodeType)t.splice(r,1);if(1===t.length)t=mr.find.matchesSelector(t[0],e)?[t[0]]:[];else t=mr.find.matches(e,t);return t}});var wr=function(e,t,n){var r=[],i=e[t];if("string"!==typeof n&&n instanceof mr)n=n[0];while(i&&9!==i.nodeType){if(void 0!==n){if(i===n)break;if("string"===typeof n&&mr(i).is(n))break}if(1===i.nodeType)r.push(i);i=i[t]}return r},xr=function(e,t,n,r){var i=[];if(r instanceof mr)r=r[0];for(;e;e=e[t]){if(n&&e.nodeType!==n)continue;if(void 0!==r){if(e===r)break;if("string"===typeof r&&mr(e).is(r))break}i.push(e)}return i},Cr=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};vr({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return wr(e,"parentNode")},next:function(e){return Cr(e,"nextSibling",1)},prev:function(e){return Cr(e,"previousSibling",1)},children:function(e){return xr(e.firstChild,"nextSibling",1)},contents:function(e){return Yn.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(r,i){mr.fn[r]=function(t){var e,n=[];if(this.each(function(){var e=i.call(n,this,t,n);if(e)if(mr.isArray(e))n.push.apply(n,e);else n.push(e)}),this.length>1){if(!Zn[r])n=mr.unique(n);if(0===r.indexOf("parents"))n=n.reverse()}if(n=mr(n),t)return n.filter(t);return n}}),vr({parentsUntil:function(e,t){return wr(e,"parentNode",t)},nextUntil:function(e,t){return xr(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return xr(e,"previousSibling",1,t).slice(1)}},function(i,o){mr.fn[i]=function(t,e){var n,r=[];if(this.each(function(){var e=o.call(r,this,t,r);if(e)if(mr.isArray(e))r.push.apply(r,e);else r.push(e)}),this.length>1)if(r=mr.unique(r),0===i.indexOf("parents")||"prevUntil"===i)r=r.reverse();if(r=mr(r),e)return r.filter(e);return r}}),mr.fn.is=function(e){return!!e&&this.filter(e).length>0},mr.fn.init.prototype=mr.fn,mr.overrideDefaults=function(n){var r,i=function(e,t){if(r=r||n(),0===arguments.length)e=r.element;if(!t)t=r.context;return new i.fn.init(e,t)};return mr.extend(i,this),i};var kr=function(n,r,e){vr(e,function(e,t){n[e]=n[e]||{},n[e][r]=t})};if(Me.ie&&Me.ie<8)kr(cr,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647===t)return;return t},size:function(e){var t=e.size;if(20===t)return;return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0===t.length)return;return t}}),kr(cr,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}});if(Me.ie&&Me.ie<9)fr.float="styleFloat",kr(dr,"set",{opacity:function(e,t){var n=e.style;if(null===t||""===t)n.removeAttribute("filter");else n.zoom=1,n.filter="alpha(opacity="+100*t+")"}});mr.attrHooks=cr,mr.cssHooks=dr;var Sr,Er=function(e){var t=false,n;return function(){if(!t)t=true,n=e.apply(null,arguments);return n}},Nr=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}return},_r=function(e,t){var n=Nr(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return Ar(r(1),r(2))},Tr=function(e,t){var n=String(t).toLowerCase();if(0===e.length)return Rr();return _r(e,n)},Rr=function(){return Ar(0,0)},Ar=function(e,t){return{major:e,minor:t}},Dr={nu:Ar,detect:Tr,unknown:Rr},Pr="Edge",Br="Chrome",Or="IE",Mr="Opera",Lr="Firefox",Ir="Safari",Hr=function(e,t){return function(){return t===e}},Fr=function(){return zr({current:void 0,version:Dr.unknown()})},zr=function(e){var t=e.current,n;return{current:t,version:e.version,isEdge:Hr(Pr,t),isChrome:Hr(Br,t),isIE:Hr(Or,t),isOpera:Hr(Mr,t),isFirefox:Hr(Lr,t),isSafari:Hr(Ir,t)}},Wr={unknown:Fr,nu:zr,edge:b.constant(Pr),chrome:b.constant(Br),ie:b.constant(Or),opera:b.constant(Mr),firefox:b.constant(Lr),safari:b.constant(Ir)},Ur="Windows",jr="iOS",Vr="Android",$r="Linux",qr="OSX",Yr="Solaris",Kr="FreeBSD",Xr=function(e,t){return function(){return t===e}},Gr=function(){return Jr({current:void 0,version:Dr.unknown()})},Jr=function(e){var t=e.current,n;return{current:t,version:e.version,isWindows:Xr(Ur,t),isiOS:Xr(jr,t),isAndroid:Xr(Vr,t),isOSX:Xr(qr,t),isLinux:Xr($r,t),isSolaris:Xr(Yr,t),isFreeBSD:Xr(Kr,t)}},Qr={unknown:Gr,nu:Jr,windows:b.constant(Ur),ios:b.constant(jr),android:b.constant(Vr),linux:b.constant($r),osx:b.constant(qr),solaris:b.constant(Yr),freebsd:b.constant(Kr)};function Zr(e,t,n){var r=e.isiOS()&&true===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&true===/mobile/i.test(n),u=e.isiOS()||e.isAndroid(),l=u&&!s,f=t.isSafari()&&e.isiOS()&&false===/safari/i.test(n);return{isiPad:b.constant(r),isiPhone:b.constant(i),isTablet:b.constant(s),isPhone:b.constant(l),isTouch:b.constant(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:b.constant(f)}}var ei=function(e,t){var n=String(t).toLowerCase();return ee.find(e,function(e){return e.search(n)})},ti,ni,ri=function(e,n){return ei(e,n).map(function(e){var t=Dr.detect(e.versionRegexes,n);return{current:e.name,version:t}})},ii=function(e,n){return ei(e,n).map(function(e){var t=Dr.detect(e.versionRegexes,n);return{current:e.name,version:t}})},oi,ai,si,ui,li=function(e,t){return t+e},fi=function(e,t){return e+t},ci=function(e,t){return e.substring(t)},di=function(e,t){return e.substring(0,e.length-t)},mi,hi,pi,gi,vi=function(e,t){return e.substr(0,t)},bi=function(e,t){return e.substr(e.length-t,e.length)},yi=function(e){return""===e?w.none():w.some(e.substr(0,1))},wi=function(e){return""===e?w.none():w.some(e.substring(1))},xi=function(e,t,n){if(""===t)return true;if(e.length<t.length)return false;var r;return e.substr(n,n+t.length)===t},Ci,ki=function(e,t){return Ri(e,t)?ci(e,t.length):e},Si=function(e,t){return Ai(e,t)?di(e,t.length):e},Ei=function(e,t){return Ri(e,t)?e:li(e,t)},Ni=function(e,t){return Ai(e,t)?e:fi(e,t)},_i,Ti,Ri=function(e,t){return xi(e,t,0)},Ai=function(e,t){return xi(e,t,e.length-t.length)},Di,Pi,Bi,Oi=function(e,r){var i=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,t){var n=r[t];return i(n)?n:e})},Mi=Ri,Li=ki,Ii=Si,Hi=Ei,Fi=Ni,zi=Ai,Wi=function(e,t){return-1!==e.indexOf(t)},Ui=function(e){return e.replace(/^\s+|\s+$/g,"")},ji=function(e){return e.replace(/^\s+/g,"")},Vi=function(e){return e.replace(/\s+$/g,"")},$i=function(e){return yi(e).bind(function(t){return wi(e).map(function(e){return t.toUpperCase()+e})}).getOr(e)},qi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Yi=function(t){return function(e){return Wi(e,t)}},Ki=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){var t;return Wi(e,"edge/")&&Wi(e,"chrome")&&Wi(e,"safari")&&Wi(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,qi],search:function(e){return Wi(e,"chrome")&&!Wi(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Wi(e,"msie")||Wi(e,"trident")}},{name:"Opera",versionRegexes:[qi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Yi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Yi("firefox")},{name:"Safari",versionRegexes:[qi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Wi(e,"safari")||Wi(e,"mobile/"))&&Wi(e,"applewebkit")}}],Xi=[{name:"Windows",search:Yi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Wi(e,"iphone")||Wi(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Yi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Yi("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Yi("linux"),versionRegexes:[]},{name:"Solaris",search:Yi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Yi("freebsd"),versionRegexes:[]}],Gi={browsers:b.constant(Ki),oses:b.constant(Xi)},Ji,Qi=function(e){var t=Gi.browsers(),n=Gi.oses(),r=ri(t,e).fold(Wr.unknown,Wr.nu),i=ii(n,e).fold(Qr.unknown,Qr.nu),o;return{browser:r,os:i,deviceType:Zr(i,r,e)}},Zi,eo={detect:Er(function(){var e=navigator.userAgent;return Qi(e)})},to=function(e,t){var n,r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return io(r.childNodes[0])},no=function(e,t){var n,r=(t||document).createElement(e);return io(r)},ro=function(e,t){var n,r=(t||document).createTextNode(e);return io(r)},io=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:b.constant(e)}},oo,ao={fromHtml:to,fromTag:no,fromText:ro,fromDom:io,fromPoint:function(e,t,n){return w.from(e.dom().elementFromPoint(t,n)).map(io)}},so=2,uo=4,lo=8,fo=9,co=10,mo=11,ho=1,po=3,go=7,vo=5,bo=6,yo=12,wo=function(e){var t;return e.dom().nodeName.toLowerCase()},xo=function(e){return e.dom().nodeType},Co=function(e){return e.dom().nodeValue},ko=function(t){return function(e){return xo(e)===t}},So=function(e){return xo(e)===lo||"#comment"===wo(e)},Eo=ko(ho),No=ko(po),_o=ko(fo),To={name:wo,type:xo,value:Co,isElement:Eo,isText:No,isDocument:_o,isComment:So},Ro=function(e){if(null===e)return"null";var t=typeof e;if("object"===t&&Array.prototype.isPrototypeOf(e))return"array";if("object"===t&&String.prototype.isPrototypeOf(e))return"string";return t},Ao=function(t){return function(e){return Ro(e)===t}},Do={isString:Ao("string"),isObject:Ao("object"),isArray:Ao("array"),isNull:Ao("null"),isBoolean:Ao("boolean"),isUndefined:Ao("undefined"),isFunction:Ao("function"),isNumber:Ao("number")},Po=void 0===(Bo=Object.keys)?function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n))t.push(n);return t}:Bo,Bo,Oo,Mo=function(e,t){for(var n=Po(e),r=0,i=n.length;r<i;r++){var o=n[r],a;t(e[o],o,e)}},Lo=function(e,r){return Io(e,function(e,t,n){return{k:t,v:r(e,t,n)}})},Io=function(r,i){var o={};return Mo(r,function(e,t){var n=i(e,t,r);o[n.k]=n.v}),o},Ho,Fo=function(e,n){var r=[];return Mo(e,function(e,t){r.push(n(e,t))}),r},zo,Wo=function(e){return Fo(e,function(e){return e})},Uo,jo={bifilter:function(e,r){var i={},o={};return Mo(e,function(e,t){var n;(r(e,t)?i:o)[t]=e}),{t:i,f:o}},each:Mo,map:Lo,mapToArray:Fo,tupleMap:Io,find:function(e,t){for(var n=Po(e),r=0,i=n.length;r<i;r++){var o=n[r],a=e[o];if(t(a,o,e))return w.some(a)}return w.none()},keys:Po,values:Wo,size:function(e){return Wo(e).length}},Vo=function(e,t,n){if(Do.isString(n)||Do.isBoolean(n)||Do.isNumber(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},$o=function(e,t,n){Vo(e.dom(),t,n)},qo,Yo=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Ko=function(e,t){var n=e.dom();return n&&n.hasAttribute?n.hasAttribute(t):false},Xo,Go,Jo,Qo=function(e,t,n){if(Ko(e,n)&&!Ko(t,n))$o(t,n,Yo(e,n))},Zo,ea={clone:function(e){return ee.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:$o,setAll:function(e,t){var n=e.dom();jo.each(t,function(e,t){Vo(n,t,e)})},get:Yo,has:Ko,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},transfer:function(t,n,e){if(!To.isElement(t)||!To.isElement(n))return;ee.each(e,function(e){Qo(t,n,e)})}},ta=function(e){var t=To.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},na=Er(function(){return ra(ao.fromDom(document))}),ra=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return ao.fromDom(t)},ia={body:na,getBody:ra,inBody:ta},oa,aa=function(e){return void 0!==e.style},sa=function(e,t,n){if(!Do.isString(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);if(aa(e))e.style.setProperty(t,n)},ua=function(e,t){if(aa(e))e.style.removeProperty(t)},la=function(e,t,n){var r=e.dom();sa(r,t,n)},fa,ca,da=function(e,t){var n=e.dom(),r,i=window.getComputedStyle(n).getPropertyValue(t),o=""===i&&!ia.inBody(e)?ma(n,t):i;return null===o?void 0:o},ma=function(e,t){return aa(e)?e.style.getPropertyValue(t):""},ha=function(e,t){var n=e.dom(),r=ma(n,t);return w.from(r).filter(function(e){return e.length>0})},pa,ga,va,ba,ya,wa,xa=function(e,t,n){ha(e,n).each(function(e){if(ha(t,n).isNone())la(t,n,e)})},Ca,ka=function(e,t){var n=e.dom(),r=t.dom();if(aa(n)&&aa(r))r.style.cssText=n.style.cssText},Sa=la,Ea=function(e,t){var n=ea.get(e,"style"),r=t(e),i;return(void 0===n?ea.remove:ea.set)(e,"style",n),r},Na=function(e,t){var n=e.dom();jo.each(t,function(e,t){sa(n,t,e)})},_a=function(e,t){var n=e.dom();jo.each(t,function(e,t){e.fold(function(){ua(n,t)},function(e){sa(n,t,e)})})},Ta=function(e,t){var n=e.dom();if(ua(n,t),ea.has(e,"style")&&""===Ui(ea.get(e,"style")))ea.remove(e,"style")},Ra=da,Aa=ha,Da=function(e){var t={},n=e.dom();if(aa(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}return t},Pa=function(e,t,n){var r=ao.fromTag(e),i;return la(r,t,n),ha(r,t).isSome()},Ba=function(e){return e.dom().offsetWidth},Oa=function(t,n,e){if(!To.isElement(t)||!To.isElement(n))return;ee.each(e,function(e){xa(t,n,e)})};function Ma(){var t=arguments;return function(){for(var n=new Array(arguments.length),e=0;e<n.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var r={};return ee.each(t,function(e,t){r[e]=b.constant(n[t])}),r}}var La=function(e){return e.slice(0).sort()},Ia,Ha,Fa,za,Wa,Ua={sort:La,reqMessage:function(e,t){throw new Error("All required keys ("+La(e).join(", ")+") were not specified. Specified keys were: "+La(t).join(", ")+".")},unsuppMessage:function(e){throw new Error("Unsupported keys for object: "+La(e).join(", "))},validateStrArr:function(t,e){if(!Do.isArray(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");ee.each(e,function(e){if(!Do.isString(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+La(e).join(", ")+") were not.")},checkDupes:function(e){var n=La(e),t;ee.find(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})}};function ja(o,a){var s=o.concat(a);if(0===s.length)throw new Error("You must specify at least one required or optional field.");return Ua.validateStrArr("required",o),Ua.validateStrArr("optional",a),Ua.checkDupes(s),function(t){var n=jo.keys(t),e;if(!ee.forall(o,function(e){return ee.contains(n,e)}))Ua.reqMessage(o,n);var r=ee.filter(n,function(e){return!ee.contains(s,e)});if(r.length>0)Ua.unsuppMessage(r);var i={};return ee.each(o,function(e){i[e]=b.constant(t[e])}),ee.each(a,function(e){i[e]=b.constant(Object.prototype.hasOwnProperty.call(t,e)?w.some(t[e]):w.none())}),i}}var Va={immutable:Ma,immutableBag:ja},$a,qa=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n},Ya=function(){var e;return me.getOrDie("Node")},Ka=function(e,t,n){return 0!==(e.compareDocumentPosition(t)&n)},Xa,Ga,Ja=function(e,t){return Ka(e,t,Ya().DOCUMENT_POSITION_PRECEDING)},Qa=function(e,t){return Ka(e,t,Ya().DOCUMENT_POSITION_CONTAINED_BY)},Za=ho,es=fo,ts,ns=function(e){return e.nodeType!==Za&&e.nodeType!==es||0===e.childElementCount},rs,is,os={all:function(e,t){var n=void 0===t?document:t.dom();return ns(n)?[]:ee.map(n.querySelectorAll(e),ao.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==Za)return false;else if(void 0!==n.matches)return n.matches(t);else if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);else if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);else if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);else throw new Error("Browser lacks native selectors")},one:function(e,t){var n=void 0===t?document:t.dom();return ns(n)?w.none():w.from(n.querySelector(e)).map(ao.fromDom)}},as=function(e,t){return e.dom()===t.dom()},ss=function(e,t){return e.dom().isEqualNode(t.dom())},us=function(e,t){return ee.exists(t,b.curry(as,e))},ls=function(e,t){var n=e.dom(),r=t.dom();return n===r?false:n.contains(r)},fs=function(e,t){return Qa(e.dom(),t.dom())},cs,ds=eo.detect().browser.isIE()?fs:ls,ms={eq:as,isEqualNode:ss,member:us,contains:ds,is:os.is},hs=function(e){return ao.fromDom(e.dom().ownerDocument)},ps=function(e){var t=hs(e);return ao.fromDom(t.dom().documentElement)},gs=function(e){var t,n=e.dom().ownerDocument.defaultView;return ao.fromDom(n)},vs=function(e){var t=e.dom();return w.from(t.parentNode).map(ao.fromDom)},bs=function(n){return vs(n).bind(function(e){var t=Ns(e);return ee.findIndex(t,function(e){return ms.eq(n,e)})})},ys=function(e,t){var n=Do.isFunction(t)?t:b.constant(false),r=e.dom(),i=[];while(null!==r.parentNode&&void 0!==r.parentNode){var o=r.parentNode,a=ao.fromDom(o);if(i.push(a),true===n(a))break;else r=o}return i},ws=function(t){var e=function(e){return ee.filter(e,function(e){return!ms.eq(t,e)})};return vs(t).map(Ns).map(e).getOr([])},xs=function(e){var t=e.dom();return w.from(t.offsetParent).map(ao.fromDom)},Cs=function(e){var t=e.dom();return w.from(t.previousSibling).map(ao.fromDom)},ks=function(e){var t=e.dom();return w.from(t.nextSibling).map(ao.fromDom)},Ss=function(e){return ee.reverse(qa(e,Cs))},Es=function(e){return qa(e,ks)},Ns=function(e){var t=e.dom();return ee.map(t.childNodes,ao.fromDom)},_s=function(e,t){var n=e.dom().childNodes;return w.from(n[t]).map(ao.fromDom)},Ts=function(e){return _s(e,0)},Rs=function(e){return _s(e,e.dom().childNodes.length-1)},As=function(e){return e.dom().childNodes.length},Ds=function(e){return e.dom().hasChildNodes()},Ps=Va.immutable("element","offset"),Bs,Os={owner:hs,defaultView:gs,documentElement:ps,parent:vs,findIndex:bs,parents:ys,siblings:ws,prevSibling:Cs,offsetParent:xs,prevSiblings:Ss,nextSibling:ks,nextSiblings:Es,children:Ns,child:_s,firstChild:Ts,lastChild:Rs,childNodesCount:As,hasChildNodes:Ds,leaf:function(e,t){var n=Ns(e);return n.length>0&&t<n.length?Ps(n[t],0):Ps(e,t)}},Ms=eo.detect().browser,Ls=function(e){return ee.find(e,To.isElement)},Is=function(e){if(Ms.isFirefox()&&"table"===To.name(e))return Ls(Os.children(e)).filter(function(e){return"caption"===To.name(e)}).bind(function(i){return Ls(Os.nextSiblings(i)).map(function(e){var t=e.dom().offsetTop,n=i.dom().offsetTop,r=i.dom().offsetHeight;return t<=n?-r:0})}).getOr(0);else return 0},Hs,Fs=function(e,t,n){var r=0,i=0,o,a=e.ownerDocument,s;if(n=n?n:e,t){if(n===e&&t.getBoundingClientRect&&"static"===Ra(ao.fromDom(e),"position"))return{x:r=(s=t.getBoundingClientRect()).left+(a.documentElement.scrollLeft||e.scrollLeft)-a.documentElement.clientLeft,y:i=s.top+(a.documentElement.scrollTop||e.scrollTop)-a.documentElement.clientTop};o=t;while(o&&o!==n&&o.nodeType)r+=o.offsetLeft||0,i+=o.offsetTop||0,o=o.offsetParent;o=t.parentNode;while(o&&o!==n&&o.nodeType)r-=o.scrollLeft||0,i-=o.scrollTop||0,o=o.parentNode;i+=Is(ao.fromDom(t))}return{x:r,y:i}},zs=function(e){var n=w.none(),t=[],r=function(n){return zs(function(t){i(function(e){t(n(e))})})},i=function(e){if(a())u(e);else t.push(e)},o=function(e){n=w.some(e),s(t),t=[]},a=function(){return n.isSome()},s=function(e){ee.each(e,u)},u=function(t){n.each(function(e){setTimeout(function(){t(e)},0)})};return e(o),{get:i,map:r,isReady:a}},Ws,Us={nu:zs,pure:function(t){return zs(function(e){e(t)})}},js,Vs=function(n){return function(){var e=Array.prototype.slice.call(arguments),t=this;setTimeout(function(){n.apply(t,e)},0)}},$s=function(t){var e=function(e){t(Vs(e))},n,r,i,o;return{map:function(r){return $s(function(n){e(function(e){var t=r(e);n(t)})})},bind:function(n){return $s(function(t){e(function(e){n(e).get(t)})})},anonBind:function(n){return $s(function(t){e(function(e){n.get(t)})})},toLazy:function(){return Us.nu(e)},get:e}},qs,Ys={nu:$s,pure:function(t){return $s(function(e){e(t)})}},Ks,Xs=function(a,e){return e(function(n){var r=[],i=0,o=function(t){return function(e){if(r[t]=e,++i>=a.length)n(r)}};if(0===a.length)n([]);else ee.each(a,function(e,t){e.get(o(t))})})},Gs=function(e){return Xs(e,Ys.nu)},Js,Qs,Zs={par:Gs,mapM:function(e,t){var n=ee.map(e,t);return Gs(n)},compose:function(t,n){return function(e){return n(e).bind(t)}}},eu=function(n){var e,t=function(e){return eu(n)},r=function(e){return eu(n)},i=function(e){return eu(e(n))},o=function(e){e(n)},a=function(e){return e(n)},s=function(e,t){return t(n)},u=function(e){return e(n)},l=function(e){return e(n)},f=function(){return w.some(n)};return{is:function(e){return n===e},isValue:b.always,isError:b.never,getOr:b.constant(n),getOrThunk:b.constant(n),getOrDie:b.constant(n),or:t,orThunk:r,fold:s,map:i,each:o,bind:a,exists:u,forall:l,toOption:f}},tu=function(n){var e=function(e){return e()},t=function(){return b.die(n)()},r=function(e){return e},i=function(e){return e()},o=function(e){return tu(n)},a=function(e){return tu(n)},s=function(e,t){return e(n)};return{is:b.never,isValue:b.never,isError:b.always,getOr:b.identity,getOrThunk:e,getOrDie:t,or:r,orThunk:i,fold:s,map:o,each:b.noop,bind:a,exists:b.never,forall:b.always,toOption:w.none}},nu={value:eu,error:tu};function ru(m,e){var h=0,p={},g;g=(e=e||{}).maxLoadTime||5e3;var v=function(e){m.getElementsByTagName("head")[0].appendChild(e)},n=function(e,t,n){var i,r,o,a,s=function(){var e=a.passed,t=e.length;while(t--)e[t]();a.status=2,a.passed=[],a.failed=[]},u=function(){var e=a.failed,t=e.length;while(t--)e[t]();a.status=3,a.passed=[],a.failed=[]},l=function(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)},f=function(e,t){if(!e())if((new Date).getTime()-o<g)$e.setTimeout(t);else u()},c=function(){f(function(){var e=m.styleSheets,t,n=e.length,r;while(n--)if((r=(t=e[n]).ownerNode?t.ownerNode:t.owningElement)&&r.id===i.id)return s(),true},c)},d=function(){f(function(){try{var e=r.sheet.cssRules;return s(),!!e}catch(e){}},d)};if(e=Yn._addCacheSuffix(e),!p[e])a={passed:[],failed:[]},p[e]=a;else a=p[e];if(t)a.passed.push(t);if(n)a.failed.push(n);if(1===a.status)return;if(2===a.status)return void s();if(3===a.status)return void u();if(a.status=1,(i=m.createElement("link")).rel="stylesheet",i.type="text/css",i.id="u"+h++,i.async=false,i.defer=false,o=(new Date).getTime(),"onload"in i&&!l())i.onload=c,i.onerror=u;else{if(navigator.userAgent.indexOf("Firefox")>0)return(r=m.createElement("style")).textContent='@import "'+e+'"',d(),void v(r);c()}v(i),i.href=e},t=function(t){return Ys.nu(function(e){n(t,b.compose(e,b.constant(nu.value(t))),b.compose(e,b.constant(nu.error(t))))})},i=function(e){return e.fold(b.identity,b.identity)},r;return{load:n,loadAll:function(e,n,r){Zs.par(ee.map(e,t)).get(function(e){var t=ee.partition(e,function(e){return e.isValue()});if(t.fail.length>0)r(t.fail.map(i));else n(t.pass.map(i))})}}}function iu(e,s){var t=e,n=function(e,t,n,r){var i,o;if(e){if(!r&&e[t])return e[t];if(e!==s){if(i=e[n])return i;for(o=e.parentNode;o&&o!==s;o=o.parentNode)if(i=o[n])return i}}},r=function(e,t,n,r){var i,o,a;if(e){if(i=e[n],s&&i===s)return;if(i){if(!r)for(a=i[t];a;a=a[t])if(!a[t])return a;return i}if((o=e.parentNode)&&o!==s)return o}};this.current=function(){return t},this.next=function(e){return t=n(t,"firstChild","nextSibling",e)},this.prev=function(e){return t=n(t,"lastChild","previousSibling",e)},this.prev2=function(e){return t=r(t,"lastChild","previousSibling",e)}}var ou=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],au=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],su=["td","th"],uu=["thead","tbody","tfoot"],lu=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],fu,cu=["li","dd","dt"],du=["ul","ol","dl"],mu=function(t){var n;return function(e){return(n=n?n:ee.mapToObject(t,b.constant(true))).hasOwnProperty(To.name(e))}},hu=mu(["h1","h2","h3","h4","h5","h6"]),pu=mu(ou),gu=function(e){return To.isElement(e)&&!pu(e)},vu=function(e){return To.isElement(e)&&"br"===To.name(e)},bu=mu(lu),yu=mu(du),wu=mu(cu),xu=mu(au),Cu=mu(uu),ku=mu(su),Su=function(t){return function(e){return!!e&&e.nodeType===t}},Eu=Su(1),Nu=function(e){var r=e.toLowerCase().split(" ");return function(e){var t,n;if(e&&e.nodeType)for(n=e.nodeName.toLowerCase(),t=0;t<r.length;t++)if(n===r[t])return true;return false}},_u=function(r,e){var i=e.toLowerCase().split(" ");return function(e){var t,n;if(Eu(e))for(t=0;t<i.length;t++)if((n=e.ownerDocument.defaultView.getComputedStyle(e,null).getPropertyValue(r))===i[t])return true;return false}},Tu=function(t,n){return function(e){return Eu(e)&&e[t]===n}},Ru=function(t,e){return function(e){return Eu(e)&&e.hasAttribute(t)}},Au=function(t,n){return function(e){return Eu(e)&&e.getAttribute(t)===n}},Du=function(e){return Eu(e)&&e.hasAttribute("data-mce-bogus")},Pu=function(e){return Eu(e)&&"all"===e.getAttribute("data-mce-bogus")},Bu=function(e){return Eu(e)&&"TABLE"===e.tagName},Ou=function(t){return function(e){if(Eu(e)){if(e.contentEditable===t||Me.ie&&"inherit"===e.contentEditable&&{IMG:"false"}[e.nodeName]===t)return true;if(e.getAttribute("data-mce-contenteditable")===t)return true}return false}},Mu=Su(3),Lu=Su(8),Iu=Su(9),Hu=Nu("br"),Fu=Ou("true"),zu=Ou("false"),Wu={isText:Mu,isElement:Eu,isComment:Lu,isDocument:Iu,isBr:Hu,isContentEditableTrue:Fu,isContentEditableFalse:zu,matchNodeNames:Nu,hasPropValue:Tu,hasAttribute:Ru,hasAttributeValue:Au,matchStyleValues:_u,isBogus:Du,isBogusAll:Pu,isTable:Bu},Uu=function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n},ju=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Vu=function(e,t){var n,r=t.childNodes;if(Wu.isElement(t)&&ju(t))return;for(n=r.length-1;n>=0;n--)Vu(e,r[n]);if(false===Wu.isDocument(t)){if(Wu.isText(t)&&t.nodeValue.length>0){var i=Yn.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||i>0)return;if(0===i&&Uu(t))return}else if(Wu.isElement(t)){if(1===(r=t.childNodes).length&&ju(r[0]))t.parentNode.insertBefore(r[0],t);if(r.length||xu(ao.fromDom(t)))return}e.remove(t)}return t},$u={trimNode:Vu},qu=Yn.makeMap,Yu,Ku,Xu,Gu=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ju=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qu=/[<>&\"\']/g,Zu=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,el={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};Ku={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Xu={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var tl=function(e){var t;return(t=ao.fromTag("div").dom()).innerHTML=e,t.textContent||t.innerText||e},nl=function(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)if(r=String.fromCharCode(parseInt(e[n],t)),!Ku[r])i="&"+e[n+1]+";",o[r]=i,o[i]=r;return o}};Yu=nl("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,"+"5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,"+"5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,"+"5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,"+"68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,"+"6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,"+"6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,"+"75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,"+"7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,"+"7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,"+"sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,"+"st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,"+"t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,"+"tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,"+"u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,"+"81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,"+"8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,"+"8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,"+"8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,"+"8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,"+"nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,"+"rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,"+"Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,"+"80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,"+"811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var rl=function(e,t){return e.replace(t?Gu:Ju,function(e){return Ku[e]||e})},il,ol=function(e,t){return e.replace(t?Gu:Ju,function(e){if(e.length>1)return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";";return Ku[e]||"&#"+e.charCodeAt(0)+";"})},al=function(e,t,n){return n=n||Yu,e.replace(t?Gu:Ju,function(e){return Ku[e]||n[e]||e})},sl,ul,ll={encodeRaw:rl,encodeAllRaw:function(e){return(""+e).replace(Qu,function(e){return Ku[e]||e})},encodeNumeric:ol,encodeNamed:al,getEncodeFunc:function(e,t){var n=nl(t)||Yu,r=function(e,t){return e.replace(t?Gu:Ju,function(e){if(void 0!==Ku[e])return Ku[e];if(void 0!==n[e])return n[e];if(e.length>1)return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";";return"&#"+e.charCodeAt(0)+";"})},i=function(e,t){return al(e,t,n)},o=qu(e.replace(/\+/g,","));if(o.named&&o.numeric)return r;if(o.named){if(t)return i;return al}if(o.numeric)return ol;return rl},decode:function(e){return e.replace(Zu,function(e,t){if(t){if("x"===t.charAt(0).toLowerCase())t=parseInt(t.substr(1),16);else t=parseInt(t,10);if(t>65535)return t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t));return el[t]||String.fromCharCode(t)}return Xu[e]||Yu[e]||tl(e)})}},fl={},cl={},dl=Yn.makeMap,ml=Yn.each,hl=Yn.extend,pl=Yn.explode,gl=Yn.inArray,vl=function(e,t){return(e=Yn.trim(e))?e.split(t||" "):[]},bl=function(e){var s={},u,t,n,r,i,o,a=function(e,t,n){var r,i,o,a=function(e,t){var n={},r,i;for(r=0,i=e.length;r<i;r++)n[e[r]]=t||{};return n};if(t=t||"","string"===typeof(n=n||[]))n=vl(n);r=(e=vl(e)).length;while(r--)o={attributes:a(i=vl([u,t].join(" "))),attributesOrder:i,children:a(n,cl)},s[e[r]]=o},l=function(e,t){var n,r,i,o;n=(e=vl(e)).length,t=vl(t);while(n--)for(r=s[e[n]],i=0,o=t.length;i<o;i++)r.attributes[t[i]]={},r.attributesOrder.push(t[i])};if(fl[e])return fl[e];if(u="id accesskey class dir lang style tabindex title role",t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd "+"label map noscript object q s samp script select small span strong sub sup "+"textarea u var #text #comment","html4"!==e)u+=" contenteditable contextmenu draggable dropzone "+"hidden spellcheck translate",t+=" article aside details dialog figure header footer hgroup section nav",n+=" audio canvas command datalist mark meter output picture "+"progress time wbr video ruby bdi keygen";if("html5-strict"!==e)u+=" xml:lang",n=[n,o="acronym applet basefont big font strike tt"].join(" "),ml(vl(o),function(e){a(e,"",n)}),t=[t,i="center dir isindex noframes"].join(" "),r=[t,n].join(" "),ml(vl(i),function(e){a(e,"",r)});if(r=r||[t,n].join(" "),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus "+"onhashchange onload onmessage onoffline ononline onpagehide onpageshow "+"onpopstate onresize onscroll onstorage onunload",r),a("address dt dd div caption","",r),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),a("blockquote","cite",r),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",r),a("dl","","dt dd"),a("a","href target rel media hreflang type",n),a("q","cite",n),a("ins del","cite datetime",r),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",r),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),a("param","name value"),a("map","name",[r,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",r),a("th","colspan rowspan headers scope abbr",r),a("form","accept-charset action autocomplete enctype method name novalidate target",r),a("fieldset","disabled form name",[r,"legend"].join(" ")),a("label","form for",n),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate "+"formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?r:n),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[r,"li"].join(" ")),a("noscript","",r),"html4"!==e)a("wbr"),a("ruby","",[n,"rt rp"].join(" ")),a("figcaption","",r),a("mark rt rp summary bdi","",n),a("canvas","width height",r),a("video","src crossorigin poster preload autoplay mediagroup loop "+"muted controls width height buffered",[r,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls "+"buffered volume",[r,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[n,"option"].join(" ")),a("article section nav aside header footer","",r),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[r,"figcaption"].join(" ")),a("time","datetime",n),a("dialog","open",r),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",n),a("progress","value max",n),a("meter","value min max low high optimum",n),a("details","open",[r,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name");if("html5-strict"!==e)l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select","onchange"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink");if("html4"!==e)l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("iframe","sandbox seamless allowfullscreen");return ml(vl("a form meter progress dfn"),function(e){if(s[e])delete s[e].children[e]}),delete s.caption.children.table,delete s.script,fl[e]=s},yl=function(e,n){var r;if(e){if(r={},"string"===typeof e)e={"*":e};ml(e,function(e,t){r[t]=r[t.toUpperCase()]="map"===n?dl(e,/[, ]/):pl(e,/[, ]/)})}return r};function wl(o){var k={},s={},S=[],e,t,n,r,i,a,u,l,f,c,d,m,h,p={},g={},v=function(e,t,n){var r=o[e];if(!r){if(!(r=fl[e]))r=dl(t," ",dl(t.toUpperCase()," ")),r=hl(r,n),fl[e]=r}else r=dl(r,/[, ]/,dl(r.toUpperCase(),/[, ]/));return r};if(n=bl((o=o||{}).schema),false===o.verify_html)o.valid_elements="*[*]";e=yl(o.valid_styles),t=yl(o.invalid_styles,"map"),l=yl(o.valid_classes,"map"),r=v("whitespace_elements","pre script noscript style textarea video audio iframe object code"),i=v("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=v("short_ended_elements","area base basefont br col frame hr img input isindex link "+"meta param embed source wbr track"),u=v("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize "+"noshade nowrap readonly selected autoplay loop controls"),c=v("non_empty_elements","td th iframe video audio object "+"script pre code",a),d=v("move_caret_before_on_enter_elements","table",c),m=v("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form "+"blockquote center dir fieldset header footer article section hgroup aside nav figure"),f=v("block_elements","hr table tbody thead tfoot "+"th tr td li ol ul caption dl dt dd noscript menu isindex option "+"datalist select optgroup figcaption",m),h=v("text_inline_elements","span strong b em i font strike u var cite "+"dfn code mark q sup sub samp"),ml((o.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){g[e]=new RegExp("</"+e+"[^>]*>","gi")});var E=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},b=function(e){var t,n,r,i,o,a,s,u,l,f,c,d,m,h,p,g,v,b,y,w=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,x=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,C=/[*?+]/;if(e){if(e=vl(e,","),k["@"])g=k["@"].attributes,v=k["@"].attributesOrder;for(t=0,n=e.length;t<n;t++)if(o=w.exec(e[t])){if(h=o[1],l=o[2],p=o[3],u=o[5],a={attributes:d={},attributesOrder:m=[]},"#"===h)a.paddEmpty=true;if("-"===h)a.removeEmpty=true;if("!"===o[4])a.removeEmptyAttrs=true;if(g){for(b in g)d[b]=g[b];m.push.apply(m,v)}if(u)for(r=0,i=(u=vl(u,"|")).length;r<i;r++)if(o=x.exec(u[r])){if(s={},c=o[1],f=o[2].replace(/[\\:]:/g,":"),h=o[3],y=o[4],"!"===c)a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(f),s.required=true;if("-"===c){delete d[f],m.splice(gl(m,f),1);continue}if(h){if("="===h)a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:f,value:y}),s.defaultValue=y;if(":"===h)a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:f,value:y}),s.forcedValue=y;if("<"===h)s.validValues=dl(y,"?")}if(C.test(f))a.attributePatterns=a.attributePatterns||[],s.pattern=E(f),a.attributePatterns.push(s);else{if(!d[f])m.push(f);d[f]=s}}if(!g&&"@"===l)g=d,v=m;if(p)a.outputName=l,k[p]=a;if(C.test(l))a.pattern=E(l),S.push(a);else k[l]=a}}},y=function(e){k={},S=[],b(e),ml(n,function(e,t){s[t]=e.children})},w=function(e){var a=/^(~)?(.+)$/;if(e)fl.text_block_elements=fl.block_elements=null,ml(vl(e,","),function(e){var t=a.exec(e),n="~"===t[1],r=n?"span":"div",i=t[2];if(s[i]=s[r],p[i]=r,!n)f[i.toUpperCase()]={},f[i]={};if(!k[i]){var o=k[r];delete(o=hl({},o)).removeEmptyAttrs,delete o.removeEmpty,k[i]=o}ml(s,function(e,t){if(e[r])s[t]=e=hl({},s[t]),e[i]=e[r]})})},x=function(e){var i=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(fl[o.schema]=null,e)ml(vl(e,","),function(e){var t=i.exec(e),n,r;if(t){if(r=t[1])n=s[t[2]];else n=s[t[2]]={"#comment":{}};n=s[t[2]],ml(vl(t[3],"|"),function(e){if("-"===r)delete n[e];else n[e]={}})}})},C=function(e){var t=k[e],n;if(t)return t;n=S.length;while(n--)if((t=S[n]).pattern.test(e))return t},N,_,T,R,A,D,P,B,O,M,L,I,H,F,z,W;if(!o.valid_elements){if(ml(n,function(e,t){k[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},s[t]=e.children}),"html5"!==o.schema)ml(vl("strong/b em/i"),function(e){e=vl(e,"/"),k[e[1]].outputName=e[0]});ml(vl("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){if(k[e])k[e].removeEmpty=true}),ml(vl("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){k[e].paddEmpty=true}),ml(vl("span"),function(e){k[e].removeEmptyAttrs=true})}else y(o.valid_elements);if(w(o.custom_elements),x(o.valid_children),b(o.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),ml({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){if(k[t])k[t].parentsRequired=vl(e)}),o.invalid_elements)ml(pl(o.invalid_elements),function(e){if(k[e])delete k[e]});if(!C("span"))b("span[!data-mce-type|*]");return{children:s,elements:k,getValidStyles:function(){return e},getValidClasses:function(){return l},getBlockElements:function(){return f},getInvalidStyles:function(){return t},getShortEndedElements:function(){return a},getTextBlockElements:function(){return m},getTextInlineElements:function(){return h},getBoolAttrs:function(){return u},getElementRule:C,getSelfClosingElements:function(){return i},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return d},getWhiteSpaceElements:function(){return r},getSpecialElements:function(){return g},isValidChild:function(e,t){var n=s[e.toLowerCase()];return!!(n&&n[t.toLowerCase()])},isValid:function(e,t){var n,r,i=C(e);if(i)if(t){if(i.attributes[t])return true;if(n=i.attributePatterns){r=n.length;while(r--)if(n[r].pattern.test(e))return true}}else return true;return false},getCustomElements:function(){return p},addValidElements:b,setValidElements:y,addCustomElements:w,addValidChildren:x}}var xl=function(e,t,n,r){var i=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+i(t)+i(n)+i(r)};function Cl(g,e){var v=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,b=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,y=/\s*([^:]+):\s*([^;]+);?/g,w=/\s+$/,x,C={},t,s,u,k="\ufeff";if(g=g||{},e)s=e.getValidStyles(),u=e.getInvalidStyles();for(t=("\\\" \\' \\; \\: ; : "+k).split(" "),x=0;x<t.length;x++)C[t[x]]=k+x,C[k+x]=t[x];return{toHex:function(e){return e.replace(v,xl)},parse:function(e){var u={},t,n,r,i,s=g.url_converter,l=g.url_converter_scope||this,o=function(e,t,n){var r,i,o,a;if(!(r=u[e+"-top"+t]))return;if(!(i=u[e+"-right"+t]))return;if(!(o=u[e+"-bottom"+t]))return;if(!(a=u[e+"-left"+t]))return;var s=[r,i,o,a];x=s.length-1;while(x--)if(s[x]!==s[x+1])break;if(x>-1&&n)return;u[e+t]=-1===x?s[0]:s.join(" "),delete u[e+"-top"+t],delete u[e+"-right"+t],delete u[e+"-bottom"+t],delete u[e+"-left"+t]},a=function(e){var t=u[e],n;if(!t)return;n=(t=t.split(" ")).length;while(n--)if(t[n]!==t[0])return false;return u[e]=t[0],true},f=function(e,t,n,r){if(!a(t))return;if(!a(n))return;if(!a(r))return;u[e]=u[t]+" "+u[n]+" "+u[r],delete u[t],delete u[n],delete u[r]},c=function(e){return i=true,C[e]},d=function(e,t){if(i)e=e.replace(/\uFEFF[0-9]/g,function(e){return C[e]});if(!t)e=e.replace(/\\([\'\";:])/g,"$1");return e},m=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},h=function(e){return e.replace(/\\[0-9a-f]+/gi,m)},p=function(e,t,n,r,i,o){if(i=i||o)return"'"+(i=d(i)).replace(/\'/g,"\\'")+"'";if(t=d(t||n||r),!g.allow_script_urls){var a=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(a))return"";if(!g.allow_svg_data_urls&&/^data:image\/svg/i.test(a))return""}if(s)t=s.call(l,t,"style");return"url('"+t.replace(/\'/g,"\\'")+"')"};if(e){e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,c).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,c)});while(t=y.exec(e))if(y.lastIndex=t.index+t[0].length,n=t[1].replace(w,"").toLowerCase(),r=t[2].replace(w,""),n&&r){if(n=h(n),r=h(r),-1!==n.indexOf(k)||-1!==n.indexOf('"'))continue;if(!g.allow_script_urls&&("behavior"===n||/expression\s*\(|\/\*|\*\//.test(r)))continue;if("font-weight"===n&&"700"===r)r="bold";else if("color"===n||"background-color"===n)r=r.toLowerCase();r=(r=r.replace(v,xl)).replace(b,p),u[n]=i?d(r,true):r}if(o("border","",true),o("border","-width"),o("border","-color"),o("border","-style"),o("padding",""),o("margin",""),f("border","border-width","border-style","border-color"),"medium none"===u.border)delete u.border;if("none"===u["border-image"])delete u["border-image"]}return u},serialize:function(o,e){var a="",t,n,r=function(e){var t,n,r,i;if(t=s[e])for(n=0,r=t.length;n<r;n++)if(e=t[n],i=o[e])a+=(a.length>0?" ":"")+e+": "+i+";"},i=function(e,t){var n;if((n=u["*"])&&n[e])return false;if((n=u[t])&&n[e])return false;return true};if(e&&s)r("*"),r(e);else for(t in o)if((n=o[t])&&(!u||i(t,e)))a+=(a.length>0?" ":"")+t+": "+n+";";return a}}}var kl=Yn.each,Sl=Yn.is,El=Yn.grep,Nl=Me.ie,_l=/^([a-z0-9],?)+$/i,Tl=Nl?/^[ \t\r\n\uFEFF]*$/:/^[ \t\r\n]*$/,Rl=function(r,i){var e={},n=i.keep_values,t;if(t={set:function(e,t,n){if(i.url_converter)t=i.url_converter.call(i.url_converter_scope||r,t,n,e[0]);e.attr("data-mce-"+n,t).attr(n,t)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},e={style:{set:function(e,t){if(null!==t&&"object"===typeof t)return void e.css(t);if(n)e.attr("data-mce-style",t);e.attr("style",t)},get:function(e){var t=e.attr("data-mce-style")||e.attr("style");return t=r.serializeStyle(r.parseStyle(t),e[0].nodeName)}}},n)e.href=e.src=t;return e},Al=function(e,t){var n=t.attr("style");if(!(n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)))n=null;t.attr("data-mce-style",n)},Dl=function(e,t){var n=0,r,i;if(e)for(r=e.nodeType,e=e.previousSibling;e;e=e.previousSibling){if(i=e.nodeType,t&&3===i)if(i===r||!e.nodeValue.length)continue;n++,r=i}return n},Pl=function(e,t){var n=this,r;n.doc=e,n.win=window,n.files={},n.counter=0,n.stdMode=!Nl||e.documentMode>=8,n.boxModel=!Nl||"CSS1Compat"===e.compatMode||n.stdMode,n.styleSheetLoader=ru(e),n.boundEvents=[],n.settings=t=t||{},n.schema=t.schema?t.schema:wl({}),n.styles=Cl({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),n.fixDoc(e),n.events=t.ownEvents?new rt(t.proxy):rt.Event,n.attrHooks=Rl(n,t),r=n.schema.getBlockElements(),n.$=mr.overrideDefaults(function(){return{context:e,element:n.getRoot()}}),n.isBlock=function(e){if(!e)return false;var t=e.nodeType;if(t)return!!(1===t&&r[e.nodeName]);return!!r[e]}};Pl.prototype={$$:function(e){if("string"===typeof e)e=this.get(e);return this.$(e)},root:null,fixDoc:function(e){},clone:function(t,e){var n=this,r,i;if(!Nl||1!==t.nodeType||e)return t.cloneNode(e);if(i=n.doc,!e)return r=i.createElement(t.nodeName),kl(n.getAttribs(t),function(e){n.setAttrib(r,e.nodeName,n.getAttrib(t,e.nodeName))}),r;return r.firstChild},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return t=(e=!e?this.win:e).document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,r;return e=t.get(e),n=t.getPos(e),r=t.getSize(e),{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;if(e=t.get(e),n=t.getStyle(e,"width"),r=t.getStyle(e,"height"),-1===n.indexOf("px"))n=0;if(-1===r.indexOf("px"))r=0;return{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,false)},getParents:function(e,t,n,r){var i=this,o,a=[];if(e=i.get(e),r=void 0===r,n=n||("BODY"!==i.getRoot().nodeName?i.getRoot().parentNode:null),Sl(t,"string"))if("*"===(o=t))t=function(e){return 1===e.nodeType};else t=function(e){return i.is(e,o)};while(e){if(e===n||!e.nodeType||9===e.nodeType)break;if(!t||t(e))if(r)a.push(e);else return e;e=e.parentNode}return r?a:null},get:function(e){var t;if(e&&this.doc&&"string"===typeof e)if(t=e,(e=this.doc.getElementById(e))&&e.id!==t)return this.doc.getElementsByName(t)[1];return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){var n=this;return sn(e,n.get(t)||n.settings.root_element||n.doc,[])},is:function(e,t){var n;if(!e)return false;if(void 0===e.length){if("*"===t)return 1===e.nodeType;if(_l.test(t)){for(t=t.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),n=t.length-1;n>=0;n--)if(t[n]===e)return true;return false}}if(e.nodeType&&1!==e.nodeType)return false;var r=e.nodeType?[e]:e;return sn(t,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,n,r,i,o){var a=this;return this.run(e,function(e){var t;if(t=Sl(n,"string")?a.doc.createElement(n):n,a.setAttribs(t,r),i)if(i.nodeType)t.appendChild(i);else a.setHTML(t,i);return!o?e.appendChild(t):t})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i;for(i in r+="<"+e,t)if(t.hasOwnProperty(i)&&null!==t[i]&&"undefined"!==typeof t[i])r+=" "+i+'="'+this.encode(t[i])+'"';if("undefined"!==typeof n)return r+">"+n+"</"+e+">";return r+" />"},createFragment:function(e){var t,n,r=this.doc,i;if(i=r.createElement("div"),t=r.createDocumentFragment(),e)i.innerHTML=e;while(n=i.firstChild)t.appendChild(n);return t},remove:function(e,t){if(e=this.$$(e),t)e.each(function(){var e;while(e=this.firstChild)if(3===e.nodeType&&0===e.data.length)this.removeChild(e);else this.parentNode.insertBefore(e,this)}).remove();else e.remove();return e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){if(e=this.$$(e).css(t,n),this.settings.update_styles)Al(this,e)},getStyle:function(e,t,n){if(e=this.$$(e),n)return e.css(t);if("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})))t=Me.ie&&Me.ie<12?"styleFloat":"cssFloat";return e[0]&&e[0].style?e[0].style[t]:void 0},setStyles:function(e,t){if(e=this.$$(e).css(t),this.settings.update_styles)Al(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r=this,i,o,a=r.settings;if(""===n)n=null;if(i=(e=r.$$(e)).attr(t),!e.length)return;if((o=r.attrHooks[t])&&o.set)o.set(e,n,t);else e.attr(t,n);if(i!==n&&a.onSetAttrib)a.onSetAttrib({attrElm:e,attrName:t,attrValue:n})},setAttribs:function(e,t){var r=this;r.$$(e).each(function(e,n){kl(t,function(e,t){r.setAttrib(n,t,e)})})},getAttrib:function(e,t,n){var r=this,i,o;if((e=r.$$(e)).length)if((i=r.attrHooks[t])&&i.get)o=i.get(e,t);else o=e.attr(t);if("undefined"===typeof o)o=n||"";return o},getPos:function(e,t){return Fs(this.doc.body,this.get(e),t)},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this,n=t.doc,r,i;if(t!==Pl.DOM&&n===document){var o=Pl.DOM.addedStyles;if((o=o||[])[e])return;o[e]=true,Pl.DOM.addedStyles=o}if(!(i=n.getElementById("mceDefaultStyles")))if((i=n.createElement("style")).id="mceDefaultStyles",i.type="text/css",(r=n.getElementsByTagName("head")[0]).firstChild)r.insertBefore(i,r.firstChild);else r.appendChild(i);if(i.styleSheet)i.styleSheet.cssText+=e;else i.appendChild(n.createTextNode(e))},loadCSS:function(e){var n=this,r=n.doc,i;if(n!==Pl.DOM&&r===document)return void Pl.DOM.loadCSS(e);if(!e)e="";i=r.getElementsByTagName("head")[0],kl(e.split(","),function(e){var t;if(e=Yn._addCacheSuffix(e),n.files[e])return;if(n.files[e]=true,t=n.create("link",{rel:"stylesheet",href:e}),Nl&&r.documentMode&&r.recalc)t.onload=function(){if(r.recalc)r.recalc();t.onload=null};i.appendChild(t)})},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,false)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,n){this.$$(e).toggleClass(t,n).each(function(){if(""===this.className)mr(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"===this.$$(e).css("display")},uniqueId:function(e){return(!e?"mce_":e)+this.counter++},setHTML:function(e,n){if(e=this.$$(e),Nl)e.each(function(e,t){if(false===t.canHaveHTML)return;while(t.firstChild)t.removeChild(t.firstChild);try{t.innerHTML="<br>"+n,t.removeChild(t.firstChild)}catch(e){mr("<div></div>").html("<br>"+n).contents().slice(1).appendTo(t)}return n});else e.html(n)},getOuterHTML:function(e){return 1===(e=this.get(e)).nodeType&&"outerHTML"in e?e.outerHTML:mr("<div></div>").append(mr(e).clone()).html()},setOuterHTML:function(e,t){var n=this;n.$$(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}n.remove(mr(this).html(t),true)})},decode:ll.decode,encode:ll.encodeAllRaw,insertAfter:function(e,r){return r=this.get(r),this.run(e,function(e){var t,n;if(t=r.parentNode,n=r.nextSibling)t.insertBefore(e,n);else t.appendChild(e);return e})},replace:function(t,e,n){var r;return this.run(e,function(e){if(Sl(e,"array"))t=t.cloneNode(true);if(n)kl(El(e.childNodes),function(e){t.appendChild(e)});return e.parentNode.replaceChild(t,e)})},rename:function(t,e){var n=this,r;if(t.nodeName!==e.toUpperCase())r=n.create(e),kl(n.getAttribs(t),function(e){n.setAttrib(r,e.nodeName,n.getAttrib(t,e.nodeName))}),n.replace(r,t,1);return r||t},findCommonAncestor:function(e,t){var n=e,r;while(n){r=t;while(r&&n!==r)r=r.parentNode;if(n===r)break;n=n.parentNode}if(!n&&e.ownerDocument)return e.ownerDocument.documentElement;return n},toHex:function(e){return this.styles.toHex(Yn.trim(e))},run:function(e,n,r){var i=this,o;if("string"===typeof e)e=i.get(e);if(!e)return false;if(r=r||this,!e.nodeType&&(e.length||0===e.length))return o=[],kl(e,function(e,t){if(e){if("string"===typeof e)e=i.get(e);o.push(n.call(r,e,t))}}),o;return n.call(r,e)},getAttribs:function(e){var t;if(!(e=this.get(e)))return[];if(Nl){if(t=[],"OBJECT"===e.nodeName)return e.attributes;if("OPTION"===e.nodeName&&this.getAttrib(e,"selected"))t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(false).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n=this,r,i,o,a,s,u,l=0;if(e=e.firstChild){s=new iu(e,e.parentNode),t=t||(n.schema?n.schema.getNonEmptyElements():null),a=n.schema?n.schema.getWhiteSpaceElements():{};do{if(1===(o=e.nodeType)){var f=e.getAttribute("data-mce-bogus");if(f){e=s.next("all"===f);continue}if(u=e.nodeName.toLowerCase(),t&&t[u]){if("br"===u){l++,e=s.next();continue}return false}r=(i=n.getAttribs(e)).length;while(r--)if("name"===(u=i[r].nodeName)||"data-mce-bookmark"===u)return false}if(8===o)return false;if(3===o&&!Tl.test(e.nodeValue))return false;if(3===o&&e.parentNode&&a[e.parentNode.nodeName]&&Tl.test(e.nodeValue))return false;e=s.next()}while(e)}return l<=1},createRng:function(){return this.doc.createRange()},nodeIndex:Dl,split:function(e,t,n){var r=this,i=r.createRng(),o,a,s;if(e&&t){if(i.setStart(e.parentNode,r.nodeIndex(e)),i.setEnd(t.parentNode,r.nodeIndex(t)),o=i.extractContents(),(i=r.createRng()).setStart(t.parentNode,r.nodeIndex(t)+1),i.setEnd(e.parentNode,r.nodeIndex(e)+1),a=i.extractContents(),(s=e.parentNode).insertBefore($u.trimNode(r,o),e),n)s.insertBefore(n,e);else s.insertBefore(t,e);return s.insertBefore($u.trimNode(r,a),e),r.remove(e),n||t}},bind:function(e,t,n,r){var i=this;if(Yn.isArray(e)){var o=e.length;while(o--)e[o]=i.bind(e[o],t,n,r);return e}if(i.settings.collect&&(e===i.doc||e===i.win))i.boundEvents.push([e,t,n,r]);return i.events.bind(e,t,n,r||i)},unbind:function(e,t,n){var r=this,i;if(Yn.isArray(e)){i=e.length;while(i--)e[i]=r.unbind(e[i],t,n);return e}if(r.boundEvents&&(e===r.doc||e===r.win)){i=r.boundEvents.length;while(i--){var o=r.boundEvents[i];if(e===o[0]&&(!t||t===o[1])&&(!n||n===o[2]))this.events.unbind(o[0],o[1],o[2])}}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;if(!e||1!==e.nodeType)return null;if((t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t)return t;return"inherit"!==e.contentEditable?e.contentEditable:null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t;e=e.parentNode)if(null!==(n=this.getContentEditable(e)))break;return n},destroy:function(){var e=this;if(e.boundEvents){var t=e.boundEvents.length;while(t--){var n=e.boundEvents[t];this.events.unbind(n[0],n[1],n[2])}e.boundEvents=null}if(sn.setDocument)sn.setDocument();e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(e,t){while(e){if(t===e)return true;e=e.parentNode}return false},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e){if("string"===typeof i)i=function(e){return r.is(e,t)};for(e=e[n];e;e=e[n])if(i(e))return e}return null}},Pl.DOM=new Pl(document),Pl.nodeIndex=Dl;var Bl=Pl.DOM,Ol=Yn.each,Ml=Yn.grep,Ll=function(e){return"function"===typeof e},Il=function(){var o=0,s=1,u=2,l=3,f={},a=[],c={},d=[],m=0,h=function(e,t,n){var r=Bl,i,o,a=function(){if(r.remove(o),i)i.onreadystatechange=i.onload=i=null;t()},s=function(){if(Ll(n))n();else if("undefined"!==typeof console&&console.log)console.log("Failed to load script: "+e)};if(o=r.uniqueId(),(i=document.createElement("script")).id=o,i.type="text/javascript",i.src=Yn._addCacheSuffix(e),"onreadystatechange"in i)i.onreadystatechange=function(){if(/loaded|complete/.test(i.readyState))a()};else i.onload=a;i.onerror=s,(document.getElementsByTagName("head")[0]||document.body).appendChild(i)};this.isDone=function(e){return f[e]===u},this.markDone=function(e){f[e]=u},this.add=this.load=function(e,t,n,r){var i;if(void 0===f[e])a.push(e),f[e]=o;if(t){if(!c[e])c[e]=[];c[e].push({success:t,failure:r,scope:n||this})}},this.remove=function(e){delete f[e],delete c[e]},this.loadQueue=function(e,t,n){this.loadScripts(a,e,t,n)},this.loadScripts=function(n,e,t,r){var i,o=[],a=function(t,e){Ol(c[e],function(e){if(Ll(e[t]))e[t].call(e.scope)}),c[e]=void 0};d.push({success:e,failure:r,scope:t||this}),(i=function(){var e=Ml(n);if(n.length=0,Ol(e,function(e){if(f[e]===u)return void a("success",e);if(f[e]===l)return void a("failure",e);if(f[e]!==s)f[e]=s,m++,h(e,function(){f[e]=u,m--,a("success",e),i()},function(){f[e]=l,m--,o.push(e),a("failure",e),i()})}),!m){var t=d.slice(0);d.length=0,Ol(t,function(e){if(0===o.length){if(Ll(e.success))e.success.call(e.scope)}else if(Ll(e.failure))e.failure.call(e.scope,o)})}})()}};Il.ScriptLoader=new Il;var Hl=Yn.each,Fl=function(){var e=this;e.items=[],e.urls={},e.lookup={},e._listeners=[]};Fl.prototype={get:function(e){if(this.lookup[e])return this.lookup[e].instance;return},dependencies:function(e){var t;if(this.lookup[e])t=this.lookup[e].dependencies;return t||[]},requireLangPack:function(e,t){var n=Fl.language;if(n&&false!==Fl.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+n.substr(0,2)+","))n=n.substr(0,2);else if(-1===t.indexOf(","+n+","))return;Il.ScriptLoader.add(this.urls[e]+"/langs/"+n+".js")}},add:function(t,e,n){this.items.push(e),this.lookup[t]={instance:e,dependencies:n};var r=ee.partition(this._listeners,function(e){return e.name===t});return this._listeners=r.fail,Hl(r.pass,function(e){e.callback()}),e},remove:function(e){delete this.urls[e],delete this.lookup[e]},createUrl:function(e,t){if("object"===typeof t)return t;return{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(e,t){var n=this.urls[e];Hl(t,function(e){Il.ScriptLoader.add(n+"/"+e)})},load:function(t,n,r,i,e){var o=this,a=n,s=function(){var e=o.dependencies(t);if(Hl(e,function(e){var t=o.createUrl(n,e);o.load(t.resource,t,void 0,void 0)}),r)if(i)r.call(i);else r.call(Il)};if(o.urls[t])return;if("object"===typeof n)a=n.prefix+n.resource+n.suffix;if(0!==a.indexOf("/")&&-1===a.indexOf("://"))a=Fl.baseURL+"/"+a;if(o.urls[t]=a.substring(0,a.lastIndexOf("/")),o.lookup[t])s();else Il.ScriptLoader.add(a,s,i,e)},waitFor:function(e,t){if(this.lookup.hasOwnProperty(e))t();else this._listeners.push({name:e,callback:t})}},Fl.PluginManager=new Fl,Fl.ThemeManager=new Fl;var zl="\ufeff",Wl,Ul,jl=function(e){return e===zl},Vl=zl,$l=function(e){return e.replace(new RegExp(zl,"g"),"")},ql=Wu.isElement,Yl=Wu.isText,Kl=function(e){if(Yl(e))e=e.parentNode;return ql(e)&&e.hasAttribute("data-mce-caret")},Xl=function(e){return Yl(e)&&jl(e.data)},Gl=function(e){return Kl(e)||Xl(e)},Jl=function(e){return e.firstChild!==e.lastChild||!Wu.isBr(e.firstChild)},Ql=function(e,t){var n,r,i,o;if(i=(n=e.ownerDocument).createTextNode(Vl),o=e.parentNode,!t){if(r=e.nextSibling,Yl(r)){if(Gl(r))return r;if(rf(r))return r.splitText(1),r}if(e.nextSibling)o.insertBefore(i,e.nextSibling);else o.appendChild(i)}else{if(r=e.previousSibling,Yl(r)){if(Gl(r))return r;if(of(r))return r.splitText(r.data.length-1)}o.insertBefore(i,e)}return i},Zl=function(e){var t=e.container();return e&&Wu.isText(t)&&t.data.charAt(e.offset())===Vl},ef=function(e){var t=e.container();return e&&Wu.isText(t)&&t.data.charAt(e.offset()-1)===Vl},tf=function(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},nf=function(e,t,n){var r,i,o;if((i=(r=t.ownerDocument).createElement(e)).setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(tf()),o=t.parentNode,!n)if(t.nextSibling)o.insertBefore(i,t.nextSibling);else o.appendChild(i);else o.insertBefore(i,t);return i},rf=function(e){return Yl(e)&&e.data[0]===Vl},of=function(e){return Yl(e)&&e.data[e.data.length-1]===Vl},af=function(e){var t=e.getElementsByTagName("br"),n=t[t.length-1];if(Wu.isBogus(n))n.parentNode.removeChild(n)},sf=function(e){if(e&&e.hasAttribute("data-mce-caret"))return af(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e;return null},uf=function(e){return Kl(e.startContainer)},lf=Wu.isContentEditableTrue,ff=Wu.isContentEditableFalse,cf=Wu.isBr,df=Wu.isText,mf=Wu.matchNodeNames("script style textarea"),hf=Wu.matchNodeNames("img input textarea hr iframe video audio object"),pf=Wu.matchNodeNames("table"),gf=Gl,vf=function(e){if(gf(e))return false;if(df(e)){if(mf(e.parentNode))return false;return true}return hf(e)||cf(e)||pf(e)||ff(e)},bf=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(ff(e))return false;if(lf(e))return true}return true},yf=function(e){if(!ff(e))return false;return true!==On.reduce(e.getElementsByTagName("*"),function(e,t){return e||lf(t)},false)},wf=function(e){return hf(e)||yf(e)},xf=function(e,t){return vf(e)&&bf(e,t)},Cf=Math.round,kf=function(e){if(!e)return{left:0,top:0,bottom:0,right:0,width:0,height:0};return{left:Cf(e.left),top:Cf(e.top),bottom:Cf(e.bottom),right:Cf(e.right),width:Cf(e.width),height:Cf(e.height)}},Sf=function(e,t){if(e=kf(e),t)e.right=e.left;else e.left=e.left+e.width,e.right=e.left;return e.width=0,e},Ef=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},Nf=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},_f=function(e,t){if(e.bottom-e.height/2<t.top)return true;if(e.top>t.bottom)return false;return Nf(t.top-e.bottom,e,t)},Tf=function(e,t){if(e.top>t.bottom)return true;if(e.bottom<t.top)return false;return Nf(t.bottom-e.top,e,t)},Rf=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Af=function(e){var t=e.startContainer,n=e.startOffset;if(t.hasChildNodes()&&e.endOffset===n+1)return t.childNodes[n];return null},Df=function(e,t){if(1===e.nodeType&&e.hasChildNodes()){if(t>=e.childNodes.length)t=e.childNodes.length-1;e=e.childNodes[t]}return e},Pf=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ؚ"+"ً-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް"+"߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़"+"ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣ"+"ਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼"+"ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗ"+"ୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖ"+"ౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ"+"്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູ"+"ົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗ"+"ྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴ"+"ႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵"+"ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘ"+"ᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴"+"ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩ"+"ᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹"+"᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⳱"+"⵿ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱"+"ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼ"+"ꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁"+"ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Bf=function(e){return"string"===typeof e&&e.charCodeAt(0)>=768&&Pf.test(e)},Of=[].slice,Mf,Lf,If,Hf,Ff,zf=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Of.call(arguments);if(r.length-1>=e.length)return e.apply(this,r.slice(1));return function(){var e=r.concat([].slice.call(arguments));return zf.apply(this,e)}},Wf,Uf={constant:function(e){return function(){return e}},negate:function(t){return function(e){return!t(e)}},and:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Of.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return false;return true}},or:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Of.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return true;return false}},curry:zf,compose:function(t,n){return function(e){return t(n(e))}},noop:function(){}},jf=Wu.isElement,Vf=vf,$f=Wu.matchStyleValues("display","block table"),qf=Wu.matchStyleValues("float","left right"),Yf=Uf.and(jf,Vf,Uf.negate(qf)),Kf=Uf.negate(Wu.matchStyleValues("white-space","pre pre-line pre-wrap")),Xf=Wu.isText,Gf=Wu.isBr,Jf=Pl.nodeIndex,Qf=Df,Zf=function(e){return"createRange"in e?e.createRange():Pl.DOM.createRng()},ec=function(e){return e&&/[\r\n\t ]/.test(e)},tc=function(e){return!!e.setStart&&!!e.setEnd},nc=function(e){var t=e.startContainer,n=e.startOffset,r;if(ec(e.toString())&&Kf(t.parentNode)&&Wu.isText(t))if(r=t.data,ec(r[n-1])||ec(r[n+1]))return true;return false},rc=function(e){var t=e.ownerDocument,n=Zf(t),r=t.createTextNode(" "),i=e.parentNode,o;return i.insertBefore(r,e),n.setStart(r,0),n.setEnd(r,1),o=kf(n.getBoundingClientRect()),i.removeChild(r),o},ic=function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,i=e.endOffset;if(t===n&&Wu.isText(n)&&0===r&&1===i){var o=e.cloneRange();return o.setEndAfter(n),ac(o)}else return null},oc=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},ac=function(e){var t,n;if((n=e.getClientRects()).length>0)t=kf(n[0]);else t=kf(e.getBoundingClientRect());if(!tc(e)&&Gf(e)&&oc(t))return rc(e);if(oc(t)&&tc(e))return ic(e);return t},sc=function(e,t){var n=Sf(e,t);return n.width=1,n.right=n.left+1,n},uc=function(e){var r=[],t,n,i=function(e){if(0===e.height)return;if(r.length>0)if(Ef(e,r[r.length-1]))return;r.push(e)},o=function(e,t){var n=Zf(e.ownerDocument);if(t<e.data.length){if(Bf(e.data[t]))return r;if(Bf(e.data[t-1]))if(n.setStart(e,t),n.setEnd(e,t+1),!nc(n))return i(sc(ac(n),false)),r}if(t>0)if(n.setStart(e,t-1),n.setEnd(e,t),!nc(n))i(sc(ac(n),false));if(t<e.data.length)if(n.setStart(e,t),n.setEnd(e,t+1),!nc(n))i(sc(ac(n),true))};if(Xf(e.container()))return o(e.container(),e.offset()),r;if(jf(e.container()))if(e.isAtEnd()){if(n=Qf(e.container(),e.offset()),Xf(n))o(n,n.data.length);if(Yf(n)&&!Gf(n))i(sc(ac(n),false))}else{if(n=Qf(e.container(),e.offset()),Xf(n))o(n,0);if(Yf(n)&&e.isAtEnd())return i(sc(ac(n),false)),r;if(t=Qf(e.container(),e.offset()-1),Yf(t)&&!Gf(t))if($f(t)||$f(n)||!Yf(n))i(sc(ac(t),false));if(Yf(n))i(sc(ac(n),true))}return r},lc;function fc(t,n,e){var r=function(){if(Xf(t))return 0===n;return 0===n},i=function(){if(Xf(t))return n>=t.data.length;return n>=t.childNodes.length},o=function(){var e;return(e=Zf(t.ownerDocument)).setStart(t,n),e.setEnd(t,n),e},a=function(){if(!e)e=uc(fc(t,n));return e},s=function(){return a().length>0},u=function(e){return e&&t===e.container()&&n===e.offset()},l=function(e){return Qf(t,e?n-1:n)};return{container:Uf.constant(t),offset:Uf.constant(n),toRange:o,getClientRects:a,isVisible:s,isAtStart:r,isAtEnd:i,isEqual:u,getNode:l}}(lc=fc||(fc={})).fromRangeStart=function(e){return lc(e.startContainer,e.startOffset)},lc.fromRangeEnd=function(e){return lc(e.endContainer,e.endOffset)},lc.after=function(e){return lc(e.parentNode,Jf(e)+1)},lc.before=function(e){return lc(e.parentNode,Jf(e))},lc.isAtStart=function(e){return e?e.isAtStart():false},lc.isAtEnd=function(e){return e?e.isAtEnd():false},lc.isTextPosition=function(e){return e?Wu.isText(e.container()):false};var cc=fc,dc=Wu.isElement,mc=Wu.isText,hc=function(e){var t=e.parentNode;if(t)t.removeChild(e)},pc=function(e){try{return e.nodeValue}catch(e){return""}},gc=function(e,t){if(0===t.length)hc(e);else e.nodeValue=t},vc=function(e){var t=$l(e);return{count:e.length-t.length,text:t}},bc=function(e,t){return Sc(e),t},yc=function(e,t){var n=vc(e.data.substr(0,t.offset())),r=vc(e.data.substr(t.offset())),i=n.text+r.text;if(i.length>0)return gc(e,i),cc(e,t.offset()-n.count);else return t},wc=function(e,t){var n=t.container(),r=ee.indexOf(n.childNodes,e).map(function(e){return e<t.offset()?cc(n,t.offset()-1):t}).getOr(t);return Sc(e),r},xc=function(e,t){return mc(e)&&t.container()===e?yc(e,t):bc(e,t)},Cc=function(e,t){return t.container()===e.parentNode?wc(e,t):bc(e,t)},kc,Sc=function(e){if(dc(e)&&Gl(e))if(Jl(e))e.removeAttribute("data-mce-caret");else hc(e);if(mc(e)){var t=$l(pc(e));gc(e,t)}},Ec={removeAndReposition:function(e,t){return cc.isTextPosition(t)?xc(e,t):Cc(e,t)},remove:Sc},Nc=function(e,t,n){var r=e?cc.before(n):cc.after(n);return Bc(e,t,r)},_c=function(e){return Wu.isBr(e)?cc.before(e):cc.after(e)},Tc=function(e){if(cc.isTextPosition(e))return 0===e.offset();else return vf(e.getNode())},Rc=function(e){if(cc.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}else return vf(e.getNode(true))},Ac=function(e,t){return!cc.isTextPosition(e)&&!cc.isTextPosition(t)&&e.getNode()===t.getNode(true)},Dc=function(e){return!cc.isTextPosition(e)&&Wu.isBr(e.getNode())},Pc=function(e,t,n){if(e)return!Ac(t,n)&&!Dc(t)&&Rc(t)&&Tc(n);else return!Ac(n,t)&&Tc(t)&&Rc(n)},Bc=function(e,t,n){var r=Qm(t);return w.from(e?r.next(n):r.prev(n))},Oc=function(t,n,r){return Bc(t,n,r).bind(function(e){if(Cm(r,e,n)&&Pc(t,r,e))return Bc(t,n,e);else return w.some(e)})},Mc=function(e,t){var n=e?t.firstChild:t.lastChild;if(Wu.isText(n))return w.some(cc(n,e?0:n.data.length));else if(n)if(vf(n))return w.some(e?cc.before(n):_c(n));else return Nc(e,t,n);else return w.none()},Lc={fromPosition:Bc,nextPosition:b.curry(Bc,true),prevPosition:b.curry(Bc,false),navigate:Oc,positionIn:Mc,firstPositionIn:b.curry(Mc,true),lastPositionIn:b.curry(Mc,false)},Ic=Wu.isContentEditableTrue,Hc=Wu.isContentEditableFalse,Fc=function(e,t,n,r){return t._selectionOverrides.showCaret(e,n,r)},zc=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},Wc=function(e,t){var n;if((n=e.fire("BeforeObjectSelected",{target:t})).isDefaultPrevented())return null;return zc(t)},Uc=function(e,t){var n,r;if(t=Rm(1,e.getBody(),t),n=cc.fromRangeStart(t),Hc(n.getNode()))return Fc(1,e,n.getNode(),!n.isAtEnd());if(Hc(n.getNode(true)))return Fc(1,e,n.getNode(true),false);if(r=e.dom.getParent(n.getNode(),function(e){return Hc(e)||Ic(e)}),Hc(r))return Fc(1,e,r,false);return null},jc=function(e,t){var n;if(!t||!t.collapsed)return t;if(n=Uc(e,t))return n;return t},Vc,$c,qc,Yc=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},Kc=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return w.none()},Xc=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(i.isSome())n.push(i.getOrDie());else return w.none()}return w.some(t.apply(null,n))},Gc,Jc;(Jc=Gc||(Gc={}))[Jc["Br"]=0]="Br",Jc[Jc["Block"]=1]="Block",Jc[Jc["Wrap"]=2]="Wrap",Jc[Jc["Eol"]=3]="Eol";var Qc=function(e,t){return Xc([ee.head(t.getClientRects()),ee.last(e.getClientRects())],_f).getOr(false)},Zc=function(e,t){return Xc([ee.last(t.getClientRects()),ee.head(e.getClientRects())],function(e,t){return Tf(e,t)}).getOr(false)},ed=function(e,t){return e===Hm.Backwards?t.reverse():t},td=function(e,t,n){return e===Hm.Forwards?t.next(n):t.prev(n)},nd=function(e,t,n,r){if(Wu.isBr(r.getNode(t===Hm.Forwards)))return Gc.Br;else if(false===Cm(n,r))return Gc.Block;else return Gc.Wrap},rd=function(e,t,n,r){var i=Qm(n),o=r,a,s=[];while(o){if(!(a=td(t,i,o)))break;if(Wu.isBr(a.getNode(false)))if(t===Hm.Forwards)return{positions:ed(t,s).concat([a]),breakType:Gc.Br,breakAt:w.some(a)};else return{positions:ed(t,s),breakType:Gc.Br,breakAt:w.some(a)};if(!a.isVisible()){o=a;continue}if(e(o,a)){var u=nd(n,t,o,a);return{positions:ed(t,s),breakType:u,breakAt:w.some(a)}}s.push(a),o=a}return{positions:ed(t,s),breakType:Gc.Eol,breakAt:w.none()}},id=function(n,r,i,e){return r(i,e).breakAt.map(function(e){var t=r(i,e).positions;return n===Hm.Backwards?t.concat(e):[e].concat(t)}).getOr([])},od=function(e,a){return ee.foldl(e,function(e,o){return e.fold(function(){return w.some(o)},function(i){return Xc([ee.head(i.getClientRects()),ee.head(o.getClientRects())],function(e,t){var n=Math.abs(a-e.left),r;return Math.abs(a-t.left)<=n?o:i}).or(e)})},w.none())},ad=function(t,e){return ee.head(e.getClientRects()).bind(function(e){return od(t,e.left)})},sd=b.curry(rd,Qc,-1),ud=b.curry(rd,Zc,1),ld=b.curry(id,-1,sd),fd=b.curry(id,1,ud),cd=function(t){return Lc.firstPositionIn(t).map(function(e){return[e].concat(ud(t,e).positions)}).getOr([])},dd=function(t){return Lc.lastPositionIn(t).map(function(e){return sd(t,e).positions.concat(e)}).getOr([])},md=function(e){return vd(ia.body(),e)},hd,pd,gd,vd=function(e,t){var n=[];return ee.each(Os.children(e),function(e){if(t(e))n=n.concat([e]);n=n.concat(vd(e,t))}),n},bd=md,yd=function(e,t,n){return ee.filter(Os.parents(e,n),t)},wd=function(e,t){return ee.filter(Os.siblings(e),t)},xd=function(e,t){return ee.filter(Os.children(e),t)},Cd=vd,kd,Sd,Ed,Nd,_d,Td=function(e){return os.all(e)},Rd=function(e,t,n){return yd(e,function(e){return os.is(e,t)},n)},Ad=function(e,t){return wd(e,function(e){return os.is(e,t)})},Dd=function(e,t){return xd(e,function(e){return os.is(e,t)})},Pd=function(e,t){return os.all(t,e)},Bd=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}},Od=function(n,e){return ee.bind(e,function(e){var t=Bd(e.getBoundingClientRect(),-1);return[{x:t.left,y:n(t),cell:e},{x:t.right,y:n(t),cell:e}]})},Md=function(e,i,o){return ee.foldl(e,function(e,r){return e.fold(function(){return w.some(r)},function(e){var t=Math.sqrt(Math.abs(e.x-i)+Math.abs(e.y-o)),n=Math.sqrt(Math.abs(r.x-i)+Math.abs(r.y-o));return w.some(n<t?r:e)})},w.none())},Ld=function(e,t,n,r,i){var o=Pd(ao.fromDom(n),"td,th").map(function(e){return e.dom()}),a=ee.filter(Od(e,o),function(e){return t(e,i)});return Md(a,r,i).map(function(e){return e.cell})},Id=function(e){return e.bottom},Hd=function(e){return e.top},Fd=function(e,t){return e.y<t},zd=function(e,t){return e.y>t},Wd=b.curry(Ld,Id,Fd),Ud=b.curry(Ld,Hd,zd),jd=function(t,n){return ee.head(n.getClientRects()).bind(function(e){return Wd(t,e.left,e.top)}).bind(function(e){return ad(dd(e),n)})},Vd=function(t,n){return ee.last(n.getClientRects()).bind(function(e){return Ud(t,e.left,e.top)}).bind(function(e){return ad(cd(e),n)})},$d=eo.detect().browser,qd=function(){return $d.isIE()||$d.isEdge()||$d.isFirefox()},Yd=function(t,n,e){var r=t(n,e);if(r.breakType===Gc.Wrap&&0===r.positions.length)return r.breakAt.map(function(e){return t(n,e).breakAt.isNone()}).getOr(true);else return r.breakAt.isNone()},Kd=Uf.curry(Yd,sd),Xd=Uf.curry(Yd,ud),Gd=function(e,t,n){var r=cc.fromRangeStart(t);return Lc.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(false)},Jd=function(e,t,n,r){var i=e.selection.getRng(),o=t?1:-1;if(qd()&&Gd(t,i,n)){var a=Fc(o,e,n,!t);return e.selection.setRng(a),true}return false},Qd=function(t,n,e){return jd(n,e).orThunk(function(){return ee.head(e.getClientRects()).bind(function(e){return od(ld(t,cc.before(n)),e.left)})}).getOr(cc.before(n))},Zd=function(t,n,e){return Vd(n,e).orThunk(function(){return ee.head(e.getClientRects()).bind(function(e){return od(fd(t,cc.after(n)),e.left)})}).getOr(cc.after(n))},em=function(e,t,n,r){var i=e.selection.getRng(),o=cc.fromRangeStart(i),a=e.getBody();if(!t&&Kd(r,o)){var s=Qd(a,n,o);return e.selection.setRng(s.toRange()),true}else if(t&&Xd(r,o)){var s=Zd(a,n,o);return e.selection.setRng(s.toRange()),true}else return false},tm=function(n,r){return function(){return w.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return w.from(n.dom.getParent(t,"table")).map(function(e){return Jd(n,r,e,t)})}).getOr(false)}},nm=function(n,r){return function(){return w.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return w.from(n.dom.getParent(t,"table")).map(function(e){return em(n,r,e,t)})}).getOr(false)}},rm=Wu.isContentEditableFalse,im=function(e){return Wu.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)},om=function(e){return e.ownerDocument.activeElement===e},am=function(e,t,n){var r=Sf(t.getBoundingClientRect(),n),i,o,a,s,u;if("BODY"===e.tagName)i=e.ownerDocument.documentElement,o=e.scrollLeft||i.scrollLeft,a=e.scrollTop||i.scrollTop;else u=e.getBoundingClientRect(),o=e.scrollLeft-u.left,a=e.scrollTop-u.top;if(r.left+=o,r.right+=o,r.top+=a,r.bottom+=a,r.width=1,(s=t.offsetWidth-t.clientWidth)>0){if(n)s*=-1;r.left+=s,r.right+=s}return r},sm=function(e){var t,n,r,i,o;for(t=mr("*[contentEditable=false]",e),i=0;i<t.length;i++){if(r=(n=t[i]).previousSibling,of(r))if(1===(o=r.data).length)r.parentNode.removeChild(r);else r.deleteData(o.length-1,1);if(r=n.nextSibling,rf(r))if(1===(o=r.data).length)r.parentNode.removeChild(r);else r.deleteData(0,1)}},um=function(i,o){var e,a=null,s,t=function(e,t){var n,r;if(u(),im(t))return null;if(o(t)){if(s=nf("p",t,e),n=am(i,t,e),mr(s).css("top",n.top),a=mr('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(n).appendTo(i),e)a.addClass("mce-visual-caret-before");l(),(r=t.ownerDocument.createRange()).setStart(s,0),r.setEnd(s,0)}else{if(s=Ql(t,e),r=t.ownerDocument.createRange(),rm(s.nextSibling))r.setStart(s,0),r.setEnd(s,0);else r.setStart(s,1),r.setEnd(s,1);return r}return r},u=function(){if(sm(i),s)Ec.remove(s),s=null;if(a)a.remove(),a=null;clearInterval(e)},l=function(){e=$e.setInterval(function(){if(om(i))mr("div.mce-visual-caret",i).toggleClass("mce-visual-caret-hidden");else mr("div.mce-visual-caret",i).addClass("mce-visual-caret-hidden")},500)},n,r;return{show:t,hide:u,getCss:function(){return".mce-visual-caret {"+"position: absolute;"+"background-color: black;"+"background-color: currentcolor;"+"}"+".mce-visual-caret-hidden {"+"display: none;"+"}"+"*[data-mce-caret] {"+"position: absolute;"+"left: -1000px;"+"right: auto;"+"top: 0;"+"margin: 0;"+"padding: 0;"+"}"},destroy:function(){return $e.clearInterval(e)}}},lm=function(e){return rm(e)||Wu.isTable(e)&&qd()},fm=Wu.isContentEditableFalse,cm=Wu.matchStyleValues("display","block table table-cell table-caption list-item"),dm=Gl,mm=Kl,hm=Uf.curry,pm=Wu.isElement,gm=vf,vm=function(e){return e>0},bm=function(e){return e<0},ym=function(e,t){var n;while(n=e(t))if(!mm(n))return n;return null},wm=function(e,t,n,r,i){var o=new iu(e,r);if(bm(t)){if(fm(e)||mm(e))if(n(e=ym(o.prev,true)))return e;while(e=ym(o.prev,i))if(n(e))return e}if(vm(t)){if(fm(e)||mm(e))if(n(e=ym(o.next,true)))return e;while(e=ym(o.next,i))if(n(e))return e}return null},xm=function(e,t){while(e&&e!==t){if(cm(e))return e;e=e.parentNode}return null},Cm=function(e,t,n){return xm(e.container(),n)===xm(t.container(),n)},km=function(e,t){var n,r;if(!t)return null;if(n=t.container(),r=t.offset(),!pm(n))return null;return n.childNodes[r+e]},Sm=function(e,t){var n=t.ownerDocument.createRange();if(e)n.setStartBefore(t),n.setEndBefore(t);else n.setStartAfter(t),n.setEndAfter(t);return n},Em=function(e,t,n){return xm(t,e)===xm(n,e)},Nm=function(e,t,n){var r,i;if(e)i="previousSibling";else i="nextSibling";while(n&&n!==t){if(r=n[i],dm(r))r=r[i];if(fm(r)){if(Em(t,r,n))return r;break}if(gm(r))break;n=n.parentNode}return null},_m=hm(Sm,true),Tm=hm(Sm,false),Rm=function(e,t,n){var r,i,o,a,s=hm(Nm,true,t),u=hm(Nm,false,t);if(i=n.startContainer,o=n.startOffset,Kl(i)){if(!pm(i))i=i.parentNode;if("before"===(a=i.getAttribute("data-mce-caret")))if(r=i.nextSibling,lm(r))return _m(r);if("after"===a)if(r=i.previousSibling,lm(r))return Tm(r)}if(!n.collapsed)return n;if(Wu.isText(i)){if(dm(i)){if(1===e){if(r=u(i))return _m(r);if(r=s(i))return Tm(r)}if(-1===e){if(r=s(i))return Tm(r);if(r=u(i))return _m(r)}return n}if(of(i)&&o>=i.data.length-1){if(1===e)if(r=u(i))return _m(r);return n}if(rf(i)&&o<=1){if(-1===e)if(r=s(i))return Tm(r);return n}if(o===i.data.length){if(r=u(i))return _m(r);return n}if(0===o){if(r=s(i))return Tm(r);return n}}return n},Am=function(e,t){var n=km(e,t);return fm(n)&&!Wu.isBogusAll(n)},Dm=function(e,t){return Wu.isTable(km(e,t))},Pm=function(e,t){return w.from(km(e?0:-1,t)).filter(fm)},Bm=function(e,t,n){var r=Rm(e,t,n);if(-1===e)return fc.fromRangeStart(r);return fc.fromRangeEnd(r)},Om=hm(Am,0),Mm=hm(Am,-1),Lm=hm(Dm,0),Im=hm(Dm,-1),Hm,Fm;(Fm=Hm||(Hm={}))[Fm["Backwards"]=-1]="Backwards",Fm[Fm["Forwards"]=1]="Forwards";var zm=Wu.isContentEditableFalse,Wm=Wu.isText,Um=Wu.isElement,jm=Wu.isBr,Vm=vf,$m=wf,qm=xf,Ym=function(e,t){var n=[];while(e&&e!==t)n.push(e),e=e.parentNode;return n},Km=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length)return e.childNodes[t];return null},Xm=function(e,t){if(vm(e)){if(Vm(t.previousSibling)&&!Wm(t.previousSibling))return cc.before(t);if(Wm(t))return cc(t,0)}if(bm(e)){if(Vm(t.nextSibling)&&!Wm(t.nextSibling))return cc.after(t);if(Wm(t))return cc(t,t.data.length)}if(bm(e)){if(jm(t))return cc.before(t);return cc.after(t)}return cc.before(t)},Gm=function(e,t){var n;if(!Wu.isBr(e))return false;if(!(n=Jm(1,cc.after(e),t)))return false;return!Cm(cc.before(e),cc.before(n),t)},Jm=function(e,t,n){var r,i,o,a,s;if(!Um(n)||!t)return null;if(t.isEqual(cc.after(n))&&n.lastChild){if(s=cc.after(n.lastChild),bm(e)&&Vm(n.lastChild)&&Um(n.lastChild))return jm(n.lastChild)?cc.before(n.lastChild):s}else s=t;var u=s.container(),l=s.offset();if(Wm(u)){if(bm(e)&&l>0)return cc(u,--l);if(vm(e)&&l<u.length)return cc(u,++l);r=u}else{if(bm(e)&&l>0)if(i=Km(u,l-1),Vm(i)){if(!$m(i))if(o=wm(i,e,qm,i)){if(Wm(o))return cc(o,o.data.length);return cc.after(o)}if(Wm(i))return cc(i,i.data.length);return cc.before(i)}if(vm(e)&&l<u.childNodes.length)if(i=Km(u,l),Vm(i)){if(Gm(i,n))return Jm(e,cc.after(i),n);if(!$m(i))if(o=wm(i,e,qm,i)){if(Wm(o))return cc(o,0);return cc.before(o)}if(Wm(i))return cc(i,0);return cc.after(i)}r=i?i:s.getNode()}if(vm(e)&&s.isAtEnd()||bm(e)&&s.isAtStart())if(r=wm(r,e,Uf.constant(true),n,true),qm(r,n))return Xm(e,r);if(i=wm(r,e,qm,n),(a=On.last(On.filter(Ym(u,n),zm)))&&(!i||!a.contains(i))){if(vm(e))s=cc.after(a);else s=cc.before(a);return s}if(i)return Xm(e,i);return null},Qm=function(t){return{next:function(e){return Jm(Hm.Forwards,e,t)},prev:function(e){return Jm(Hm.Backwards,e,t)}}},Zm=function(e){return e.firstChild&&e.firstChild===e.lastChild},eh=function(e){return"br"===e.name||" "===e.value},th=function(e,t){var n;return e.getBlockElements()[t.name]&&Zm(t)&&eh(t.firstChild)},nh=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||th(e,t))},rh,ih=function(e){var t=e.firstChild,n=e.lastChild;if(t&&"META"===t.nodeName)t.parentNode.removeChild(t);if(n&&"mce_marker"===n.id)n.parentNode.removeChild(n);return e},oh=function(e,t,n){var r=t.serialize(n),i=e.createFragment(r);return ih(i)},ah=function(e){return Yn.grep(e.childNodes,function(e){return"LI"===e.nodeName})},sh=function(e){return" "===e.data||Wu.isBr(e)},uh=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&sh(e.firstChild)},lh=function(e){return!e.firstChild||uh(e)},fh=function(e){return e.length>0&&lh(e[e.length-1])?e.slice(0,-1):e},ch=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},dh,mh=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},hh=function(e,t){var n=cc.before(e),r,i=Qm(t).next(n);return i?i.toRange():null},ph=function(e,t){var n=cc.after(e),r,i=Qm(t).prev(n);return i?i.toRange():null},gh=function(t,e,n,r){var i=mh(t,r),o=t.parentNode;return o.insertBefore(i[0],t),Yn.each(e,function(e){o.insertBefore(e,t)}),o.insertBefore(i[1],t),o.removeChild(t),ph(e[e.length-1],n)},vh=function(t,e,n){var r=t.parentNode;return Yn.each(e,function(e){r.insertBefore(e,t)}),hh(t,n)},bh=function(e,t,n,r){return r.insertAfter(t.reverse(),e),ph(t[0],n)},yh,wh=function(e,t){var n=t.firstChild,r=t.lastChild;if(n&&"meta"===n.name)n=n.next;if(r&&"mce_marker"===r.attr("id"))r=r.prev;if(nh(e,r))r=r.prev;if(!n||n!==r)return false;return"ul"===n.name||"ol"===n.name},xh=function(e,i,o,t){var n=oh(i,e,t),a=ch(i,o.startContainer),r=fh(ah(n.firstChild)),s=1,u=2,l=i.getRoot(),f=function(e){var t=cc.fromRangeStart(o),n=Qm(i.getRoot()),r=e===s?n.prev(t):n.next(t);return r?ch(i,r.getNode())!==a:true};if(f(s))return vh(a,r,l);else if(f(u))return bh(a,r,l,i);return gh(a,r,l,o)},Ch=function(e,t){return!!ch(e,t)},kh=fh,Sh=ah,Eh=Wu.isText,Nh=Wu.isBogus,_h=Pl.nodeIndex,Th=function(e){var t=e.parentNode;if(Nh(t))return Th(t);return t},Rh=function(e){if(!e)return[];return On.reduce(e.childNodes,function(e,t){if(Nh(t)&&"BR"!==t.nodeName)e=e.concat(Rh(t));else e.push(t);return e},[])},Ah=function(e,t){while(e=e.previousSibling){if(!Eh(e))break;t+=e.data.length}return t},Dh=function(t){return function(e){return t===e}},Ph=function(e){var r,t,n;return r=Rh(Th(e)),t=On.findIndex(r,Dh(e),e),r=r.slice(0,t+1),n=On.reduce(r,function(e,t,n){if(Eh(t)&&Eh(r[n-1]))e++;return e},0),r=On.filter(r,Wu.matchNodeNames(e.nodeName)),(t=On.findIndex(r,Dh(e),e))-n},Bh=function(e){var t;if(Eh(e))t="text()";else t=e.nodeName.toLowerCase();return t+"["+Ph(e)+"]"},Oh=function(e,t,n){var r=[];for(t=t.parentNode;t!==e;t=t.parentNode){if(n&&n(t))break;r.push(t)}return r},Mh=function(e,t){var n,r,i=[],o,a,s;if(n=t.container(),r=t.offset(),Eh(n))o=Ah(n,r);else{if(r>=(a=n.childNodes).length)o="after",r=a.length-1;else o="before";n=a[r]}return i.push(Bh(n)),s=Oh(e,n),s=On.filter(s,Uf.negate(Wu.isBogus)),(i=i.concat(On.map(s,function(e){return Bh(e)}))).reverse().join("/")+","+o},Lh=function(e,t,n){var r=Rh(e);return r=On.filter(r,function(e,t){return!Eh(e)||!Eh(r[t-1])}),(r=On.filter(r,Wu.matchNodeNames(t)))[n]},Ih=function(e,t){var n=e,r=0,i;while(Eh(n)){if(i=n.data.length,t>=r&&t<=r+i){e=n,t-=r;break}if(!Eh(n.nextSibling)){e=n,t=i;break}r+=i,n=n.nextSibling}if(Eh(e)&&t>e.data.length)t=e.data.length;return cc(e,t)},Hh=function(e,t){var n,r,i;if(!t)return null;if(t=(n=t.split(","))[0].split("/"),i=n.length>1?n[1]:"before",!(r=On.reduce(t,function(e,t){if(!(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t)))return null;if("text()"===t[1])t[1]="#text";return Lh(e,t[1],parseInt(t[2],10))},e)))return null;if(!Eh(r)){if("after"===i)i=_h(r)+1;else i=_h(r);return cc(r.parentNode,i)}return Ih(r,parseInt(i,10))},Fh=Wu.isContentEditableFalse,zh=function(e,t,n){var r,i;for(i=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&Wu.isText(r);r=r.previousSibling)i+=e(r.data).length;return i},Wh=function(e,t,n,r,i){var o=r[i?"startContainer":"endContainer"],a=r[i?"startOffset":"endOffset"],s=[],u,l=0,f=e.getRoot();if(Wu.isText(o))s.push(n?zh(t,o,a):a);else{if(a>=(u=o.childNodes).length&&u.length)l=1,a=Math.max(0,u.length-1);s.push(e.nodeIndex(u[a],n)+l)}for(;o&&o!==f;o=o.parentNode)s.push(e.nodeIndex(o,n));return s},Uh=function(e,t,n,r){var i=t.dom,o={};if(o.start=Wh(i,e,n,r,true),!t.isCollapsed())o.end=Wh(i,e,n,r,false);return o},jh=function(e){if(Wu.isText(e)&&0===e.data.length)e.parentNode.removeChild(e)},Vh=function(e,t,n){var r=0;return Yn.each(e.select(t),function(e){if("all"===e.getAttribute("data-mce-bogus"))return;if(e===n)return false;r++}),r},$h=function(e,t){var n,r,i,o=t?"start":"end";if(n=e[o+"Container"],r=e[o+"Offset"],Wu.isElement(n)&&"TR"===n.nodeName)if(n=(i=n.childNodes)[Math.min(t?r:r-1,i.length-1)])r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)},qh=function(e){return $h(e,true),$h(e,false),e},Yh=function(e,t){var n;if(Wu.isElement(e))if(e=Df(e,t),Fh(e))return e;if(Gl(e)){if(Wu.isText(e)&&Kl(e))e=e.parentNode;if(n=e.previousSibling,Fh(n))return n;if(n=e.nextSibling,Fh(n))return n}},Kh=function(e){return Yh(e.startContainer,e.startOffset)||Yh(e.endContainer,e.endOffset)},Xh=function(e,t,n){var r=n.getNode(),i=r?r.nodeName:null,o=n.getRng();if(Fh(r)||"IMG"===i)return{name:i,index:Vh(n.dom,i,r)};if(r=Kh(o))return{name:i=r.tagName,index:Vh(n.dom,i,r)};return Uh(e,n,t,o)},Gh=function(e){var t=e.getRng();return{start:Mh(e.dom.getRoot(),cc.fromRangeStart(t)),end:Mh(e.dom.getRoot(),cc.fromRangeEnd(t))}},Jh=function(e){return{rng:e.getRng()}},Qh=function(e){var t=e.dom,n=e.getRng(),r=t.uniqueId(),i=e.isCollapsed(),o="overflow:hidden;line-height:0px",a=e.getNode(),s=a.nodeName,u="&#xFEFF;";if("IMG"===s)return{name:s,index:Vh(t,s,a)};var l=qh(n.cloneRange());if(!i){l.collapse(false);var f=t.create("span",{"data-mce-type":"bookmark",id:r+"_end",style:o},u);l.insertNode(f),jh(f.nextSibling)}(n=qh(n)).collapse(true);var c=t.create("span",{"data-mce-type":"bookmark",id:r+"_start",style:o},u);return n.insertNode(c),jh(c.previousSibling),e.moveToBookmark({id:r,keep:1}),{id:r}},Zh,ep={getBookmark:function(e,t,n){if(2===t)return Xh($l,n,e);else if(3===t)return Gh(e);else if(t)return Jh(e);else return Qh(e)},getUndoBookmark:b.curry(Xh,b.identity,true)},tp=function(e,t){if(e.isBlock(t)&&!t.innerHTML&&!Me.ie)t.innerHTML='<br data-mce-bogus="1" />';return t},np=function(e,t){var n,r;return n=e.createRng(),r=Hh(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=Hh(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n},rp=function(e,t,n,r){var i=n[t?"start":"end"],o,a,s,u,l=e.getRoot();if(i){for(s=i[0],a=l,o=i.length-1;o>=1;o--){if(u=a.childNodes,i[o]>u.length-1)if(1==o&&0==i[o])break;else return;a=u[i[o]]}if(3===a.nodeType)s=Math.min(i[0],a.nodeValue.length);if(1===a.nodeType)s=Math.min(i[0],a.childNodes.length);if(t)r.setStart(a,s);else r.setEnd(a,s)}return true},ip=function(e,t,n){var r=e.get(n.id+"_"+t),i,o,a,s,u=n.keep,l,f;if(r){if(i=r.parentNode,"start"===t){if(!u)o=e.nodeIndex(r);else i=r.firstChild,o=1;l=i,f=o}else{if(!u)o=e.nodeIndex(r);else i=r.firstChild,o=1;l=i,f=o}if(!u){s=r.previousSibling,a=r.nextSibling,Yn.each(Yn.grep(r.childNodes),function(e){if(Wu.isText(e))e.nodeValue=e.nodeValue.replace(/\uFEFF/g,"")});while(r=e.get(n.id+"_"+t))e.remove(r,1);if(s&&a&&s.nodeType===a.nodeType&&Wu.isText(s)&&!Me.opera)if(o=s.nodeValue.length,s.appendData(a.nodeValue),e.remove(a),"start"===t)l=s,f=o;else l=s,f=o}return w.some(cc(l,f))}else return w.none()},op=function(e,t){return e.isSome()?e:t},ap=function(e,t){var n=e.createRng();if(rp(e,true,t,n)&&rp(e,false,t,n))return w.some(n);else return w.none()},sp=function(r,e){var t=ip(r,"start",e),n=ip(r,"end",e);return Xc([t,op(n,t)],function(e,t){var n=r.createRng();return n.setStart(tp(r,e.container()),e.offset()),n.setEnd(tp(r,t.container()),t.offset()),n})},up=function(n,e){return w.from(n.select(e.name)[e.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t})},lp,fp=function(e,t){var n=e.dom;if(t)if(Yn.isArray(t.start))return ap(n,t);else if("string"===typeof t.start)return w.some(np(n,t));else if(t.id)return sp(n,t);else if(t.name)return up(n,t);else if(t.rng)return w.some(t.rng);return w.none()},cp,dp,mp,hp={getBookmark:function(e,t,n){return ep.getBookmark(e,t,n)},moveToBookmark:function(t,e){fp(t,e).each(function(e){t.setRng(e)})},isBookmarkNode:function(e){return Wu.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}},pp=Yn.each,gp=function(i){this.compare=function(e,t){if(e.nodeName!==t.nodeName)return false;var n=function(n){var r={};return pp(i.getAttribs(n),function(e){var t=e.nodeName.toLowerCase();if(0!==t.indexOf("_")&&"style"!==t&&0!==t.indexOf("data-"))r[t]=i.getAttrib(n,t)}),r},r=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if("undefined"===typeof(n=t[r]))return false;if(e[r]!==n)return false;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return false;return true};if(!r(n(e),n(t)))return false;if(!r(i.parseStyle(i.getAttrib(e,"style")),i.parseStyle(i.getAttrib(t,"style"))))return false;return!hp.isBookmarkNode(e)&&!hp.isBookmarkNode(t)}},vp=function(t,n){var e;Os.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},bp=function(t,n){var e;Os.nextSibling(t).fold(function(){var e;Os.parent(t).each(function(e){wp(e,n)})},function(e){vp(e,n)})},yp=function(t,n){var e;Os.firstChild(t).fold(function(){wp(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},wp=function(e,t){e.dom().appendChild(t.dom())},xp,Cp,kp={before:vp,after:bp,prepend:yp,append:wp,appendAt:function(e,t,n){Os.child(e,n).fold(function(){wp(e,t)},function(e){vp(e,t)})},wrap:function(e,t){vp(e,t),wp(t,e)}},Sp,Ep,Np,_p,Tp=function(t,e){ee.each(e,function(e){kp.before(t,e)})},Rp=function(r,i){ee.each(i,function(e,t){var n=0===t?r:i[t-1];kp.after(n,e)})},Ap=function(t,e){ee.each(e.slice().reverse(),function(e){kp.prepend(t,e)})},Dp=function(t,e){ee.each(e,function(e){kp.append(t,e)})},Pp=function(e){e.dom().textContent="",ee.each(Os.children(e),function(e){Bp(e)})},Bp=function(e){var t=e.dom();if(null!==t.parentNode)t.parentNode.removeChild(t)},Op,Mp={empty:Pp,remove:Bp,unwrap:function(e){var t=Os.children(e);if(t.length>0)Tp(e,t);Bp(e)}};function Lp(n,r){var e=function(e){if(!n(e))throw new Error("Can only get "+r+" value of a "+r+" node");return a(e).getOr("")},t=function(e){try{return i(e)}catch(e){return w.none()}},i=function(e){return n(e)?w.from(e.dom().nodeValue):w.none()},o=eo.detect().browser,a=o.isIE()&&10===o.version.major?t:i,s;return{get:e,getOption:a,set:function(e,t){if(!n(e))throw new Error("Can only set raw "+r+" value of a "+r+" node");e.dom().nodeValue=t}}}var Ip=Lp(To.isText,"text"),Hp,Fp,zp,Wp=function(e){return Ip.get(e)},Up=function(e){return Ip.getOption(e)},jp=function(e,t){Ip.set(e,t)},Vp=function(e){var t=[],n=e.dom();while(n)t.push(ao.fromDom(n)),n=n.lastChild;return t},$p,qp,Yp=function(e){return To.isText(e)?" "===Wp(e):vu(e)},Kp,Xp,Gp=function(e){var t=Pd(e,"br"),n=ee.filter(Vp(e).slice(-1),vu);if(t.length===n.length)ee.each(n,Mp.remove)},Jp=function(e){Mp.empty(e),kp.append(e,ao.fromHtml('<br data-mce-bogus="1">'))},Qp=function(e){return 1===ee.filter(Os.children(e),Yp).length},Zp=function(n){Os.lastChild(n).each(function(t){Os.prevSibling(t).each(function(e){if(pu(n)&&vu(t)&&pu(e))Mp.remove(t)})})},eg=Yn.makeMap;function tg(e){var s=[],u,l,f,c,d;return u=(e=e||{}).indent,l=eg(e.indent_before||""),f=eg(e.indent_after||""),c=ll.getEncodeFunc(e.entity_encoding||"raw",e.entities),d="html"===e.element_format,{start:function(e,t,n){var r,i,o,a;if(u&&l[e]&&s.length>0)if((a=s[s.length-1]).length>0&&"\n"!==a)s.push("\n");if(s.push("<",e),t)for(r=0,i=t.length;r<i;r++)o=t[r],s.push(" ",o.name,'="',c(o.value,true),'"');if(!n||d)s[s.length]=">";else s[s.length]=" />";if(n&&u&&f[e]&&s.length>0)if((a=s[s.length-1]).length>0&&"\n"!==a)s.push("\n")},end:function(e){var t;if(s.push("</",e,">"),u&&f[e]&&s.length>0)if((t=s[s.length-1]).length>0&&"\n"!==t)s.push("\n")},text:function(e,t){if(e.length>0)s[s.length]=t?e:c(e)},cdata:function(e){s.push("<![CDATA[",e,"]]>")},comment:function(e){s.push("\x3c!--",e,"--\x3e")},pi:function(e,t){if(t)s.push("<?",e," ",c(t),"?>");else s.push("<?",e,"?>");if(u)s.push("\n")},doctype:function(e){s.push("<!DOCTYPE",e,">",u?"\n":"")},reset:function(){s.length=0},getContent:function(){return s.join("").replace(/\n$/,"")}}}function ng(t,h){if(void 0===h)h=wl();var p=tg(t),e;return(t=t||{}).validate="validate"in t?t.validate:true,{serialize:function(e){var c,d;d=t.validate,c={3:function(e){p.text(e.value,e.raw)},8:function(e){p.comment(e.value)},7:function(e){p.pi(e.name,e.value)},10:function(e){p.doctype(e.value)},4:function(e){p.cdata(e.value)},11:function(e){if(e=e.firstChild)do{m(e)}while(e=e.next)}},p.reset();var m=function(e){var t=c[e.type],n,r,i,o,a,s,u,l,f;if(!t){if(n=e.name,r=e.shortEnded,i=e.attributes,d&&i&&i.length>1)if((s=[]).map={},f=h.getElementRule(e.name)){for(u=0,l=f.attributesOrder.length;u<l;u++)if((o=f.attributesOrder[u])in i.map)a=i.map[o],s.map[o]=a,s.push({name:o,value:a});for(u=0,l=i.length;u<l;u++)if(!((o=i[u].name)in s.map))a=i.map[o],s.map[o]=a,s.push({name:o,value:a});i=s}if(p.start(e.name,i,r),!r){if(e=e.firstChild)do{m(e)}while(e=e.next);p.end(n)}}else t(e)};if(1===e.type&&!t.inner)m(e);else c[11](e);return p.getContent()}}}var rg=function(e,t,n,r){var i=document.createRange();return i.setStart(e,t),i.setEnd(n,r),i},ig=function(t){var n=cc.fromRangeStart(t),r=cc.fromRangeEnd(t),i=t.commonAncestorContainer;return Lc.fromPosition(false,i,r).map(function(e){if(!Cm(n,r,i)&&Cm(n,e,i))return rg(n.container(),n.offset(),e.container(),e.offset());else return t}).getOr(t)},og=function(e){return e.collapsed?e:ig(e)},ag,sg=function(e){return og(e)},ug=Wu.matchNodeNames("td th"),lg=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,i=n.lastChild;if(!r||r===i&&"BR"===r.nodeName)e.dom.setHTML(n,t);else e.selection.setContent(t)}},fg=function(e,t){w.from(e.getParent(t,"td,th")).map(ao.fromDom).each(Zp)},cg=function(a,r,e){var t,n,i,o,s,u,l,f,c,d,m,h,p=a.schema.getTextInlineElements(),g=a.selection,v=a.dom,b=function(e){var t,n,r;t=g.getRng(),n=t.startContainer,r=t.startOffset;var i=function(e){return n[e]&&3===n[e].nodeType};if(3===n.nodeType){if(r>0)e=e.replace(/^&nbsp;/," ");else if(!i("previousSibling"))e=e.replace(/^ /,"&nbsp;");if(r<n.length)e=e.replace(/&nbsp;(<br>|)$/," ");else if(!i("nextSibling"))e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;")}return e},y=function(){var e,t,n;if(t=(e=g.getRng()).startContainer,n=e.startOffset,3===t.nodeType&&e.collapsed)if(" "===t.data[n]){if(t.deleteData(n,1),!/[\u00a0| ]$/.test(r))r+=" "}else if(" "===t.data[n-1])if(t.deleteData(n-1,1),!/[\u00a0| ]$/.test(r))r=" "+r},w=function(){if(h){var s=a.getBody(),u=new gp(v);Yn.each(v.select("*[data-mce-fragment]"),function(e){if(p[e.nodeName.toLowerCase()])for(var t=e.parentNode;t&&t!=s;t=t.parentNode)if(u.compare(t,e)){for(var n=void 0,r=v.parseStyle(v.getAttrib(e,"style")),i=e.parentNode;i&&i!=t;i=i.parentNode){var o=v.parseStyle(v.getAttrib(i,"style"));for(var a in r)if(a in o&&o[a]!==r[a]){n=true;break}}if(!n){v.remove(e,true);break}}})}},x=function(e){var t=e;while(t=t.walk())if(1===t.type)t.attr("data-mce-fragment","1")},C=function(e){Yn.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})},k=function(e){return!!e.getAttribute("data-mce-fragment")},S=function(e){return e&&!a.schema.getShortEndedElements()[e.nodeName]},E=function(e){var t,n,r,i=function(e){for(var t=a.getBody();e&&e!==t;e=e.parentNode)if("false"===a.dom.getContentEditable(e))return e;return null};if(!e)return;if(g.scrollIntoView(e),t=i(e))return v.remove(e),void g.select(t);if(f=v.createRng(),(c=e.previousSibling)&&3===c.nodeType){if(f.setStart(c,c.nodeValue.length),!Me.ie)if((d=e.nextSibling)&&3===d.nodeType)c.appendData(d.data),d.parentNode.removeChild(d)}else f.setStartBefore(e),f.setEndBefore(e);var o=function(e){var t=cc.fromRangeStart(e),n;if(t=Qm(a.getBody()).next(t))return t.toRange()};if(n=v.getParent(e,v.isBlock),v.remove(e),n&&v.isEmpty(n))if(a.$(n).empty(),f.setStart(n,0),f.setEnd(n,0),!ug(n)&&!k(n)&&(r=o(f)))f=r,v.remove(n);else v.add(n,v.create("br",{"data-mce-bogus":"1"}));g.setRng(f)};if(/^ | $/.test(r))r=b(r);if(t=a.parser,h=e.merge,n=ng({validate:a.settings.validate},a.schema),m='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',u={content:r,format:"html",selection:true,paste:e.paste},(u=a.fire("BeforeSetContent",u)).isDefaultPrevented())return void a.fire("SetContent",{content:u.content,format:"html",selection:true,paste:e.paste});if(-1===(r=u.content).indexOf("{$caret}"))r+="{$caret}";r=r.replace(/\{\$caret\}/,m);var N=(f=g.getRng()).startContainer||(f.parentElement?f.parentElement():null),_=a.getBody();if(N===_&&g.isCollapsed())if(v.isBlock(_.firstChild)&&S(_.firstChild)&&v.isEmpty(_.firstChild))(f=v.createRng()).setStart(_.firstChild,0),f.setEnd(_.firstChild,0),g.setRng(f);if(!g.isCollapsed())a.selection.setRng(sg(a.selection.getRng())),a.getDoc().execCommand("Delete",false,null),y();var T={context:(i=g.getNode()).nodeName.toLowerCase(),data:e.data,insert:true};if(s=t.parse(r,T),true===e.paste&&wh(a.schema,s)&&Ch(v,i))return f=xh(n,v,a.selection.getRng(true),s),a.selection.setRng(f),void a.fire("SetContent",u);if(x(s),"mce_marker"===(c=s.lastChild).attr("id"))for(c=(l=c).prev;c;c=c.walk(true))if(3===c.type||!v.isBlock(c.name)){if(a.schema.isValidChild(c.parent.name,"span"))c.parent.insert(l,c,"br"===c.name);break}if(a._selectionOverrides.showBlockCaretContainer(i),!T.invalid)r=n.serialize(s),lg(a,r,i);else{if(g.setContent(m),i=g.getNode(),o=a.getBody(),9===i.nodeType)i=c=o;else c=i;while(c!==o)c=(i=c).parentNode;if(r=i===o?o.innerHTML:v.getOuterHTML(i),r=n.serialize(t.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return n.serialize(s)}))),i===o)v.setHTML(o,r);else v.setOuterHTML(i,r)}w(),E(v.get("mce_marker")),C(a.getBody()),fg(a.dom,a.selection.getStart()),a.fire("SetContent",u),a.addVisual()},dg=function(e){var t;if("string"!==typeof e)return t=Yn.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t};return{content:e,details:{}}},mg,hg={insertAtCaret:function(e,t){var n=dg(t);cg(e,n.content,n.details)}};function pg(e,t,n,r,i){return e(n,r)?w.some(n):Do.isFunction(i)&&i(n)?w.none():t(n,r,i)}var gg=function(e){return xg(ia.body(),e)},vg=function(e,t,n){var r=e.dom(),i=Do.isFunction(n)?n:b.constant(false);while(r.parentNode){r=r.parentNode;var o=ao.fromDom(r);if(t(o))return w.some(o);else if(i(o))break}return w.none()},bg,yg=function(t,n){var e=t.dom();if(!e.parentNode)return w.none();return wg(ao.fromDom(e.parentNode),function(e){return!ms.eq(t,e)&&n(e)})},wg=function(e,t){var n;return ee.find(e.dom().childNodes,b.compose(t,ao.fromDom)).map(ao.fromDom)},xg=function(e,r){var i=function(e){for(var t=0;t<e.childNodes.length;t++){if(r(ao.fromDom(e.childNodes[t])))return w.some(ao.fromDom(e.childNodes[t]));var n=i(e.childNodes[t]);if(n.isSome())return n}return w.none()};return i(e.dom())},Cg={first:gg,ancestor:vg,closest:function(e,t,n){var r;return pg(function(e){return t(e)},vg,e,t,n)},sibling:yg,child:wg,descendant:xg},kg=Va.immutable("sections","settings"),Sg,Eg=eo.detect().deviceType.isTouch(),Ng=["lists","autolink","autosave"],_g={theme:"mobile"},Tg=function(e){var t=Do.isArray(e)?e.join(" "):e,n=ee.map(Do.isString(t)?t.split(" "):[],Ui);return ee.filter(n,function(e){return e.length>0})},Rg=function(e){return ee.filter(e,b.curry(ee.contains,Ng))},Ag=function(n,e){var t=jo.bifilter(e,function(e,t){return ee.contains(n,t)});return kg(t.t,t.f)},Dg=function(e,t,n){var r=e.sections(),i=r.hasOwnProperty(t)?r[t]:{};return Yn.extend({},n,i)},Pg=function(e,t){return e.sections().hasOwnProperty(t)},Bg=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:true,submit_patch:true,add_unload_trigger:true,convert_urls:true,relative_urls:true,remove_script_host:true,object_resizing:true,doctype:"<!DOCTYPE html>",visual:true,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:true,padd_empty_editor:true,render_ui:true,indentation:"30px",inline_styles:true,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:true}},Og=function(e,t){var n=t.external_plugins?t.external_plugins:{};if(e&&e.external_plugins)return Yn.extend({},e.external_plugins,n);else return n},Mg=function(e,t){return[].concat(Tg(e)).concat(Tg(t))},Lg=function(e,t,n,r){var i=Tg(n.forced_plugins),o=Tg(r.plugins),a=e&&Pg(t,"mobile")?Rg(o):o,s=Mg(i,a);return Yn.extend(r,{plugins:s.join(" ")})},Ig=function(e,t){var n=t.settings().inline;return e&&Pg(t,"mobile")&&!n},Hg=function(e,t,n,r){var i=Ag(["mobile"],r),o=Yn.extend(t,n,i.settings(),Ig(e,i)?Dg(i,"mobile",_g):{},{validate:true,content_editable:i.settings().inline,external_plugins:Og(n,i.settings())});return Lg(e,i,n,o)},Fg=function(e,t,n,r,i){var o=Bg(t,n,e);return Hg(Eg,o,r,i)},zg=function(e,t,n){return w.from(t.settings[n]).filter(e)},Wg=b.curry(zg,Do.isString),Ug=function(e){var t={};if("string"===typeof e)ee.each(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){if((e=e.split("=")).length>1)t[Yn.trim(e[0])]=Yn.trim(e[1]);else t[Yn.trim(e[0])]=Yn.trim(e)});else t=e;return t},jg=function(e,t,n,r){var i=t in e.settings?e.settings[t]:n;if("hash"===r)return Ug(i);else if("string"===r)return zg(Do.isString,e,t).getOr(n);else if("number"===r)return zg(Do.isNumber,e,t).getOr(n);else if("boolean"===r)return zg(Do.isBoolean,e,t).getOr(n);else if("object"===r)return zg(Do.isObject,e,t).getOr(n);else if("array"===r)return zg(Do.isArray,e,t).getOr(n);else if("function"===r)return zg(Do.isFunction,e,t).getOr(n);else return i},Vg=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,$g=function(e){return Vg.test(e)},qg,Yg,Kg=function(e,t,n){return ee.filter(Pl.DOM.getParents(n.container(),"*",t),e)},Xg,Gg=function(e,t,n){var r=xm(t,e),i=xm(n,e);return r&&r===i},Jg,Qg=function(e,t){var n=t.container(),r=t.offset();if(e)if(Xl(n))if(Wu.isText(n.nextSibling))return cc(n.nextSibling,0);else return cc.after(n);else return Zl(t)?cc(n,r+1):t;else if(Xl(n))if(Wu.isText(n.previousSibling))return cc(n.previousSibling,n.previousSibling.data.length);else return cc.before(n);else return ef(t)?cc(n,r-1):t},Zg,ev,tv={isInlineTarget:function(e,t){var n=Wg(e,"inline_boundaries_selector").getOr("a[href],code");return os.is(ao.fromDom(t),n)},findRootInline:function(e,t,n){var r=Kg(e,t,n);return w.from(r[r.length-1])},isRtl:function(e){return"rtl"===Pl.DOM.getStyle(e,"direction",true)||$g(e.textContent)},isAtZwsp:function(e){return Zl(e)||ef(e)},normalizePosition:Qg,normalizeForwards:b.curry(Qg,true),normalizeBackwards:b.curry(Qg,false),hasSameParentBlock:Gg},nv=function(t){return function(e){return ms.eq(t,ao.fromDom(e.dom().parentNode))}},rv,iv=function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},ov,av,sv=function(e,t){return ms.contains(e,t)?Cg.closest(t,function(e){return bu(e)||wu(e)},nv(e)):w.none()},uv=function(e){if(e.dom.isEmpty(e.getBody()))e.setContent(""),iv(e)},lv=function(o,a,s){return Xc([Lc.firstPositionIn(s),Lc.lastPositionIn(s)],function(e,t){var n=tv.normalizePosition(true,e),r=tv.normalizePosition(false,t),i=tv.normalizePosition(false,a);if(o)return Lc.nextPosition(s,i).map(function(e){return e.isEqual(r)&&a.isEqual(n)}).getOr(false);else return Lc.prevPosition(s,i).map(function(e){return e.isEqual(n)&&a.isEqual(r)}).getOr(false)}).getOr(true)},fv,cv=function(e,t,n){return Cg.ancestor(e,function(e){return os.is(e,t)},n)},dv,mv,hv,pv,gv=function(e){return os.one(e)},vv=cv,bv=function(e,t){return Cg.sibling(e,function(e){return os.is(e,t)})},yv=function(e,t){return Cg.child(e,function(e){return os.is(e,t)})},wv=function(e,t){return os.one(t,e)},xv=function(e,t,n){return pg(os.is,cv,e,t,n)},Cv,kv,Sv,Ev,Nv,_v,Tv=function(e){return gv(e).isSome()},Rv=function(e,t,n){return vv(e,t,n).isSome()},Av=function(e,t){return bv(e,t).isSome()},Dv=function(e,t){return yv(e,t).isSome()},Pv=function(e,t){return wv(e,t).isSome()},Bv=function(e,t,n){return xv(e,t,n).isSome()},Ov=function(e,t){var n=ao.fromDom(e),r=ao.fromDom(t);return Rv(r,"pre,code",b.curry(ms.eq,n))},Mv=function(e,t){return Wu.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&false===Ov(e,t)},Lv=function(e){return Wu.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},Iv=function(e,t){return vf(t)&&false===Mv(e,t)||Lv(t)||Hv(t)},Hv=Wu.hasAttribute("data-mce-bookmark"),Fv=Wu.hasAttribute("data-mce-bogus"),zv=Wu.hasAttributeValue("data-mce-bogus","all"),Wv=function(e){var t,n,r=0;if(Iv(e,e))return false;else{if(!(n=e.firstChild))return true;t=new iu(n,e);do{if(zv(n)){n=t.next(true);continue}if(Fv(n)){n=t.next();continue}if(Wu.isBr(n)){r++,n=t.next();continue}if(Iv(e,n))return false;n=t.next()}while(n);return r<=1}},Uv,jv=function(e){return Wv(e.dom())},Vv=Va.immutable("block","position"),$v=Va.immutable("from","to"),qv=function(e,t){var n=ao.fromDom(e),r=ao.fromDom(t.container());return sv(n,r).map(function(e){return Vv(e,t)})},Yv=function(e){return false===ms.eq(e.from().block(),e.to().block())},Kv=function(e){return Os.parent(e.from().block()).bind(function(t){return Os.parent(e.to().block()).filter(function(e){return ms.eq(t,e)})}).isSome()},Xv=function(e){return false===Wu.isContentEditableFalse(e.from().block())&&false===Wu.isContentEditableFalse(e.to().block())},Gv=function(t,n,r){if(Wu.isBr(r.position().getNode())&&false===jv(r.block()))return Lc.positionIn(false,r.block().dom()).bind(function(e){if(e.isEqual(r.position()))return Lc.fromPosition(n,t,e).bind(function(e){return qv(t,e)});else return w.some(r)}).getOr(r);else return r},Jv=function(t,n,e){var r=qv(t,cc.fromRangeStart(e)),i=r.bind(function(e){return Lc.fromPosition(n,t,e.position()).bind(function(e){return qv(t,e).map(function(e){return Gv(t,n,e)})})});return Xc([r,i],$v).filter(function(e){return Yv(e)&&Kv(e)&&Xv(e)})},Qv,Zv=function(e,t,n){return n.collapsed?Jv(e,t,n):w.none()},eb=function(e){return e.slice(0,-1)},tb=function(e,t,n){if(ms.contains(t,e))return eb(Os.parents(e,function(e){return n(e)||ms.eq(e,t)}));else return[]},nb=function(e,t){return tb(e,t,b.constant(false))},rb,ib=tb,ob=nb,ab=function(e,t){return[e].concat(nb(e,t))},sb=function(e){var t=Os.children(e);return ee.findIndex(t,pu).fold(function(){return t},function(e){return t.slice(0,e)})},ub=function(e){var t=sb(e);return ee.each(t,function(e){Mp.remove(e)}),t},lb=function(e,t){Lc.positionIn(e,t.dom()).each(function(e){var t=e.getNode();if(Wu.isBr(t))Mp.remove(ao.fromDom(t))})},fb=function(e,t){var n=ab(t,e);return ee.find(n.reverse(),jv).each(Mp.remove)},cb=function(t,e){var n=Os.parents(e,function(e){return ms.eq(e,t)});return w.from(n[n.length-2])},db=function(t,n){if(ms.contains(n,t))return Os.parent(t).bind(function(e){return ms.eq(e,n)?w.some(t):cb(n,t)});else return w.none()},mb=function(n,r,i){if(jv(i)){if(Mp.remove(i),jv(r))Jp(r);return Lc.firstPositionIn(r.dom())}else{lb(true,r),lb(false,i);var o=ub(r);return db(r,i).fold(function(){fb(n,r);var e=Lc.lastPositionIn(i.dom());return ee.each(o,function(e){kp.append(i,e)}),e},function(t){var e=Lc.prevPosition(i.dom(),cc.before(t.dom()));return ee.each(o,function(e){kp.before(t,e)}),fb(n,r),e})}},hb,pb=function(e,t,n,r){return t?mb(e,r,n):mb(e,n,r)},gb,vb=function(t,n){var e,r=ao.fromDom(t.getBody());return(e=Zv(r.dom(),n,t.selection.getRng()).bind(function(e){return pb(r,n,e.from().block(),e.to().block())})).each(function(e){t.selection.setRng(e.toRange())}),e.isSome()},bb=function(n,r){var i=r.getRng();return Xc([sv(n,ao.fromDom(i.startContainer)),sv(n,ao.fromDom(i.endContainer))],function(e,t){if(false===ms.eq(e,t))return i.deleteContents(),pb(n,true,e,t).each(function(e){r.setRng(e.toRange())}),true;else return false}).getOr(false)},yb=function(e,t){var n=ao.fromDom(t),r=b.curry(ms.eq,e);return Cg.ancestor(n,ku,r).isSome()},wb=function(e,t){return yb(e,t.startContainer)||yb(e,t.endContainer)},xb=function(e,t){var n=Lc.prevPosition(e.dom(),cc.fromRangeStart(t)).isNone(),r=Lc.nextPosition(e.dom(),cc.fromRangeEnd(t)).isNone();return!wb(e,t)&&n&&r},Cb=function(e){return e.setContent(""),e.selection.setCursorLocation(),true},kb=function(e){var t=ao.fromDom(e.getBody()),n=e.selection.getRng();return xb(t,n)?Cb(e):bb(t,e.selection)},Sb,Eb=function(e,t){return e.selection.isCollapsed()?false:kb(e)},Nb,_b=function(s){if(!Do.isArray(s))throw new Error("cases must be an array");if(0===s.length)throw new Error("there must be at least one case");var u=[],n={};return ee.each(s,function(e,i){var t=jo.keys(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],a=e[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);else if("cata"===o)throw new Error("cannot have a case named cata (sorry)");else if(!Do.isArray(a))throw new Error("case arguments must be an array");u.push(o),n[o]=function(){var e=arguments.length,t;if(e!==a.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+a.length+" ("+a+"), got "+e);for(var r=new Array(e),n=0;n<r.length;n++)r[n]=arguments[n];return{fold:function(){if(arguments.length!==s.length)throw new Error("Wrong number of arguments to fold. Expected "+s.length+", got "+arguments.length);var e;return arguments[i].apply(null,r)},match:function(e){var t=jo.keys(e),n;if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(!ee.forall(u,function(e){return ee.contains(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "));return e[o].apply(null,r)},log:function(e){console.log(e,{constructors:u,constructor:o,params:r})}}}}),n},Tb=function(e){return ku(ao.fromDom(e))||wu(ao.fromDom(e))},Rb=_b([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Ab=function(e,t){var n=t.getNode(false===e),r=e?"after":"before";return Wu.isElement(n)&&n.getAttribute("data-mce-caret")===r},Db=function(t,e,n,r){var i=function(e){return gu(ao.fromDom(e))&&!Cm(n,r,t)};return Pm(!e,n).fold(function(){return Pm(e,r).fold(b.constant(false),i)},i)},Pb=function(e,t,n,r){var i=r.getNode(false===t);return sv(ao.fromDom(e),ao.fromDom(n.getNode())).map(function(e){return jv(e)?Rb.remove(e.dom()):Rb.moveToElement(i)}).orThunk(function(){return w.some(Rb.moveToElement(i))})},Bb=function(t,n,r){return Lc.fromPosition(n,t,r).bind(function(e){if(Tb(e.getNode()))return w.none();else if(Db(t,n,r,e))return w.none();else if(n&&Wu.isContentEditableFalse(e.getNode()))return Pb(t,n,r,e);else if(false===n&&Wu.isContentEditableFalse(e.getNode(true)))return Pb(t,n,r,e);else if(n&&Mm(r))return w.some(Rb.moveToPosition(e));else if(false===n&&Om(r))return w.some(Rb.moveToPosition(e));else return w.none()})},Ob=function(e,t){if(e&&Wu.isContentEditableFalse(t.nextSibling))return w.some(Rb.moveToElement(t.nextSibling));else if(false===e&&Wu.isContentEditableFalse(t.previousSibling))return w.some(Rb.moveToElement(t.previousSibling));else return w.none()},Mb=function(t,n,e){return e.fold(function(e){return w.some(Rb.remove(e))},function(e){return w.some(Rb.moveToElement(e))},function(e){if(Cm(n,e,t))return w.none();else return w.some(Rb.moveToPosition(e))})},Lb=function(t,e,n){if(Ab(e,n))return Ob(e,n.getNode(false===e)).fold(function(){return Bb(t,e,n)},w.some);else return Bb(t,e,n).bind(function(e){return Mb(t,n,e)})},Ib=function(e,t,n){var r=Rm(t?1:-1,e,n),i=cc.fromRangeStart(r);if(false===t&&Mm(i))return w.some(Rb.remove(i.getNode(true)));else if(t&&Om(i))return w.some(Rb.remove(i.getNode()));else return Lb(e,t,i)},Hb=function(e,t){var n=e.container(),r=e.offset();return false===cc.isTextPosition(e)&&n===t.parentNode&&r>cc.before(t).offset()},Fb=function(e,t){return Hb(t,e)?cc(t.container(),t.offset()-1):t},zb=function(e){return Wu.isText(e)?cc(e,0):cc.before(e)},Wb=function(e){return Wu.isText(e)?cc(e,e.data.length):cc.after(e)},Ub=function(e){if(vf(e.previousSibling))return w.some(Wb(e.previousSibling));else return e.previousSibling?Lc.lastPositionIn(e.previousSibling):w.none()},jb=function(e){if(vf(e.nextSibling))return w.some(zb(e.nextSibling));else return e.nextSibling?Lc.firstPositionIn(e.nextSibling):w.none()},Vb=function(e,t){var n=cc.before(t.previousSibling?t.previousSibling:t.parentNode);return Lc.prevPosition(e,n).fold(function(){return Lc.nextPosition(e,cc.after(t))},w.some)},$b=function(e,t){return Lc.nextPosition(e,cc.after(t)).fold(function(){return Lc.prevPosition(e,cc.before(t))},w.some)},qb=function(e,t){return Ub(t).orThunk(function(){return jb(t)}).orThunk(function(){return Vb(e,t)})},Yb=function(e,t){return jb(t).orThunk(function(){return Ub(t)}).orThunk(function(){return $b(e,t)})},Kb=function(e,t,n){return e?Yb(t,n):qb(t,n)},Xb=function(e,t,n){return Kb(e,t,n).map(b.curry(Fb,n))},Gb=function(t,n,e){e.fold(function(){t.focus()},function(e){t.selection.setRng(e.toRange(),n)})},Jb=function(t){return function(e){return e.dom()===t}},Qb=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(To.name(t))},Zb=function(e){if(jv(e)){var t=ao.fromHtml('<br data-mce-bogus="1">');return Mp.empty(e),kp.append(e,t),w.some(cc.before(t.dom()))}else return w.none()},ey=function(a,e){return Xc([Os.prevSibling(a),Os.nextSibling(a),e],function(e,t,n){var r,i=e.dom(),o=t.dom();if(Wu.isText(i)&&Wu.isText(o))if(r=i.data.length,i.appendData(o.data),Mp.remove(t),Mp.remove(a),n.container()===o)return cc(i,r);else return n;else return Mp.remove(a),n}).orThunk(function(){return Mp.remove(a),e})},ty,ny=function(t,n,e){var r=Xb(n,t.getBody(),e.dom()),i=Cg.ancestor(e,b.curry(Qb,t),Jb(t.getBody())),o=ey(e,r);if(t.dom.isEmpty(t.getBody()))t.setContent(""),t.selection.setCursorLocation();else i.bind(Zb).fold(function(){Gb(t,n,o)},function(e){Gb(t,n,w.some(e))})},ry=function(t,n){return function(e){return t._selectionOverrides.hideFakeCaret(),ny(t,n,ao.fromDom(e)),true}},iy=function(n,r){return function(e){var t=r?cc.before(e):cc.after(e);return n.selection.setRng(t.toRange()),true}},oy=function(t){return function(e){return t.selection.setRng(e.toRange()),true}},ay=function(t,n){var e;return Ib(t.getBody(),n,t.selection.getRng()).map(function(e){return e.fold(ry(t,n),iy(t,n),oy(t))}).getOr(false)},sy=function(e){ee.each(Pd(e,".mce-offscreen-selection"),Mp.remove)},uy=function(e,t){var n=e.selection.getNode();if(Wu.isContentEditableFalse(n))return sy(ao.fromDom(e.getBody())),ny(e,t,ao.fromDom(e.selection.getNode())),uv(e),true;else return false},ly=function(e,t){while(t&&t!==e){if(Wu.isContentEditableTrue(t)||Wu.isContentEditableFalse(t))return t;t=t.parentNode}return null},fy,cy,dy=function(e,t){if(e.selection.isCollapsed())return ay(e,t);else return uy(e,t)},my=function(e){var t,n=ly(e.getBody(),e.selection.getNode());if(Wu.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n))t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(cc.before(t).toRange());return true},hy=Wu.isText,py=function(e){return hy(e)&&e.data[0]===Vl},gy=function(e){return hy(e)&&e.data[e.data.length-1]===Vl},vy=function(e){return e.ownerDocument.createTextNode(Vl)},by=function(e){if(hy(e.previousSibling))if(gy(e.previousSibling))return e.previousSibling;else return e.previousSibling.appendData(Vl),e.previousSibling;else if(hy(e))if(py(e))return e;else return e.insertData(0,Vl),e;else{var t=vy(e);return e.parentNode.insertBefore(t,e),t}},yy=function(e){if(hy(e.nextSibling))if(py(e.nextSibling))return e.nextSibling;else return e.nextSibling.insertData(0,Vl),e.nextSibling;else if(hy(e))if(gy(e))return e;else return e.appendData(Vl),e;else{var t=vy(e);if(e.nextSibling)e.parentNode.insertBefore(t,e.nextSibling);else e.parentNode.appendChild(t);return t}},wy=function(e,t){return e?by(t):yy(t)},xy=b.curry(wy,true),Cy=b.curry(wy,false),ky=function(e,t){if(Wu.isText(e.container()))return wy(t,e.container());else return wy(t,e.getNode())},Sy=function(e,t){var n=t.get();return n&&e.container()===n&&Xl(n)},Ey,Ny=function(n,e){return e.fold(function(e){Ec.remove(n.get());var t=xy(e);return n.set(t),w.some(cc(t,t.length-1))},function(e){return Lc.firstPositionIn(e).map(function(e){if(!Sy(e,n)){Ec.remove(n.get());var t=ky(e,true);return n.set(t),cc(t,1)}else return cc(n.get(),1)})},function(e){return Lc.lastPositionIn(e).map(function(e){if(!Sy(e,n)){Ec.remove(n.get());var t=ky(e,false);return n.set(t),cc(t,t.length-1)}else return cc(n.get(),n.get().length-1)})},function(e){Ec.remove(n.get());var t=Cy(e);return n.set(t),w.some(cc(t,1))})},_y=function(e){return e&&/^(IMG)$/.test(e.nodeName)},Ty=function(e,t,n){var r=n.startContainer,i=n.startOffset,o,a,s;if(n.startContainer===n.endContainer)if(_y(n.startContainer.childNodes[n.startOffset]))return;if(3===r.nodeType&&i>=r.nodeValue.length)i=e.nodeIndex(r),r=r.parentNode;if(1===r.nodeType){if(i<(s=r.childNodes).length)o=new iu(r=s[i],e.getParent(r,e.isBlock));else(o=new iu(r=s[s.length-1],e.getParent(r,e.isBlock))).next(true);for(a=o.current();a;a=o.next())if(3===a.nodeType&&!Py(a))return n.setStart(a,0),void t.setRng(n)}},Ry=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!Py(e))return e},Ay,Dy,Py=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},By,Oy,My=function(e,t,n){if("color"===n||"backgroundColor"===n)t=e.toHex(t);if("fontWeight"===n&&700===t)t="bold";if("fontFamily"===n)t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",");return""+t},Ly,Iy,Hy,Fy={isInlineBlock:_y,moveStart:Ty,getNonWhiteSpaceSibling:Ry,isTextBlock:function(e,t){if(t.nodeType)t=t.nodeName;return!!e.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(e,t,n){return e.schema.isValidChild(t,n)},isWhiteSpaceNode:Py,replaceVars:function(e,n){if("string"!==typeof e)e=e(n);else if(n)e=e.replace(/%(\w+)/g,function(e,t){return n[t]||e});return e},isEq:function(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},normalizeStyleValue:My,getStyle:function(e,t,n){return My(e,e.getStyle(t,n),n)},getTextDecoration:function(t,e){var n;return t.getParent(e,function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n}),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}},zy=hp.isBookmarkNode,Wy=Fy.getParents,Uy=Fy.isWhiteSpaceNode,jy=Fy.isTextBlock,Vy=function(e,t){if("undefined"===typeof t)t=3===e.nodeType?e.length:e.childNodes.length;while(e&&e.hasChildNodes())if(e=e.childNodes[t])t=3===e.nodeType?e.length:e.childNodes.length;return{node:e,offset:t}},$y=function(e,t){var n=Vy(e,t);if(n.node){while(n.node&&0===n.offset&&n.node.previousSibling)n=Vy(n.node.previousSibling);if(n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1))if(n.offset>1)(e=n.node).splitText(n.offset-1)}return e},qy=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},Yy=function(e,t){var n=t;while(n){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Ky=function(e,t,n,r){var i,o,a=n.nodeValue;if("undefined"===typeof r)r=e?a.length:0;if(e){if(-1!==(i=(i=a.lastIndexOf(" ",r))>(o=a.lastIndexOf(" ",r))?i:o)&&!t)i++}else i=a.indexOf(" ",r),o=a.indexOf(" ",r),i=-1!==i&&(-1===o||i<o)?i:o;return i},Xy=function(e,t,n,r,i,o){var a,s,u,l;if(3===n.nodeType){if(-1!==(u=Ky(i,o,n,r)))return{container:n,offset:u};l=n}a=new iu(n,e.getParent(n,e.isBlock)||t);while(s=a[i?"prev":"next"]())if(3===s.nodeType){if(-1!==(u=Ky(i,o,l=s)))return{container:s,offset:u}}else if(e.isBlock(s))break;if(l){if(i)r=0;else r=l.length;return{container:l,offset:r}}},Gy=function(e,t,n,r,i){var o,a,s,u;if(3===r.nodeType&&0===r.nodeValue.length&&r[i])r=r[i];for(o=Wy(e,r),a=0;a<o.length;a++)for(s=0;s<t.length;s++){if("collapsed"in(u=t[s])&&u.collapsed!==n.collapsed)continue;if(e.is(o[a],u.selector))return o[a]}return r},Jy=function(t,e,n,r){var i,o=t.dom,a=o.getRoot();if(!e[0].wrapper)i=o.getParent(n,e[0].block,a);if(!i){var s=o.getParent(n,"LI,TD,TH");i=o.getParent(3===n.nodeType?n.parentNode:n,function(e){return e!==a&&jy(t,e)},s)}if(i&&e[0].wrapper)i=Wy(o,i,"ul,ol").reverse()[0]||i;if(!i){i=n;while(i[r]&&!o.isBlock(i[r]))if(i=i[r],Fy.isEq(i,"br"))break}return i||n},Qy=function(e,t,n,r,i,o,a){var s,u,l,f,c;if(s=u=a?n:i,f=a?"previousSibling":"nextSibling",c=e.getRoot(),3===s.nodeType&&!Uy(s))if(a?r>0:o<s.nodeValue.length)return s;while(true){if(!t[0].block_expand&&e.isBlock(u))return u;for(l=u[f];l;l=l[f])if(!zy(l)&&!Uy(l)&&!qy(l))return u;if(u===c||u.parentNode===c){s=u;break}u=u.parentNode}return s},Zy,ew=function(e,t,n,r){var i,o=t.startContainer,a=t.startOffset,s=t.endContainer,u=t.endOffset,l=e.dom;if(1===o.nodeType&&o.hasChildNodes())if(3===(o=Df(o,a)).nodeType)a=0;if(1===s.nodeType&&s.hasChildNodes())if(3===(s=Df(s,t.collapsed?u:u-1)).nodeType)u=s.nodeValue.length;if(o=Yy(l,o),s=Yy(l,s),zy(o.parentNode)||zy(o))if(3===(o=(o=zy(o)?o:o.parentNode).nextSibling||o).nodeType)a=0;if(zy(s.parentNode)||zy(s))if(3===(s=(s=zy(s)?s:s.parentNode).previousSibling||s).nodeType)u=s.length;if(n[0].inline){if(t.collapsed){if(i=Xy(l,e.getBody(),o,a,true,r))o=i.container,a=i.offset;if(i=Xy(l,e.getBody(),s,u,false,r))s=i.container,u=i.offset}s=r?s:$y(s,u)}if(n[0].inline||n[0].block_expand){if(!n[0].inline||3!==o.nodeType||0===a)o=Qy(l,n,o,a,s,u,true);if(!n[0].inline||3!==s.nodeType||u===s.nodeValue.length)s=Qy(l,n,o,a,s,u,false)}if(n[0].selector&&false!==n[0].expand&&!n[0].inline)o=Gy(l,n,t,o,"previousSibling"),s=Gy(l,n,t,s,"nextSibling");if(n[0].block||n[0].selector)if(o=Jy(e,n,o,"previousSibling"),s=Jy(e,n,s,"nextSibling"),n[0].block){if(!l.isBlock(o))o=Qy(l,n,o,a,s,u,true);if(!l.isBlock(s))s=Qy(l,n,o,a,s,u,false)}if(1===o.nodeType)a=l.nodeIndex(o),o=o.parentNode;if(1===s.nodeType)u=l.nodeIndex(s)+1,s=s.parentNode;return{startContainer:o,startOffset:a,endContainer:s,endOffset:u}},tw=Fy.isEq,nw=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++)if(false===r[i].inherit&&e.dom.is(t,r[i].selector))return true;return false},rw=function(t,e,n,r){var i=t.dom.getRoot();if(e===i)return false;return e=t.dom.getParent(e,function(e){if(nw(t,e,n))return true;return e.parentNode===i||!!aw(t,e,n,r,true)}),aw(t,e,n,r)},iw=function(e,t,n){if(tw(t,n.inline))return true;if(tw(t,n.block))return true;if(n.selector)return 1===t.nodeType&&e.is(t,n.selector)},ow=function(e,t,n,r,i,o){var a,s,u=n[r],l;if(n.onmatch)return n.onmatch(t,n,r);if(u)if("undefined"===typeof u.length){for(a in u)if(u.hasOwnProperty(a)){if("attributes"===r)s=e.getAttrib(t,a);else s=Fy.getStyle(e,t,a);if(i&&!s&&!n.exact)return;if((!i||n.exact)&&!tw(s,Fy.normalizeStyleValue(e,Fy.replaceVars(u[a],o),a)))return}}else for(l=0;l<u.length;l++)if("attributes"===r?e.getAttrib(t,u[l]):Fy.getStyle(e,t,u[l]))return n;return n},aw=function(e,t,n,r,i){var o=e.formatter.get(n),a,s,u,l,f=e.dom;if(o&&t)for(s=0;s<o.length;s++)if(a=o[s],iw(e.dom,t,a)&&ow(f,t,a,"attributes",i,r)&&ow(f,t,a,"styles",i,r)){if(l=a.classes)for(u=0;u<l.length;u++)if(!e.dom.hasClass(t,l[u]))return;return a}},sw,uw,lw,fw={matchNode:aw,matchName:iw,match:function(e,t,n,r){var i;if(r)return rw(e,r,t,n);if(r=e.selection.getNode(),rw(e,r,t,n))return true;if((i=e.selection.getStart())!==r)if(rw(e,i,t,n))return true;return false},matchAll:function(r,i,o){var e,a=[],s={};return e=r.selection.getStart(),r.dom.getParent(e,function(e){var t,n;for(t=0;t<i.length;t++)if(n=i[t],!s[n]&&aw(r,e,n,o))s[n]=true,a.push(n)},r.dom.getRoot()),a},canApply:function(e,t){var n=e.formatter.get(t),r,i,o,a,s,u=e.dom;if(n)for(r=e.selection.getStart(),i=Fy.getParents(u,r),a=n.length-1;a>=0;a--){if(!(s=n[a].selector)||n[a].defaultBlock)return true;for(o=i.length-1;o>=0;o--)if(u.is(i[o],s))return true}return false},matchesUnInheritedFormatSelector:nw},cw=function(e,t){return e.splitText(t)},dw,mw={split:function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;if(t===r&&Wu.isText(t)){if(n>0&&n<t.nodeValue.length)if(t=(r=cw(t,n)).previousSibling,i>n)t=r=cw(r,i-=n).previousSibling,i=r.nodeValue.length,n=0;else i=0}else{if(Wu.isText(t)&&n>0&&n<t.nodeValue.length)t=cw(t,n),n=0;if(Wu.isText(r)&&i>0&&i<r.nodeValue.length)i=(r=cw(r,i).previousSibling).nodeValue.length}return{startContainer:t,startOffset:n,endContainer:r,endOffset:i}}},hw=Vl,pw="_mce_caret",gw=function(e,t){return e.importNode(t,true)},vw=function(e){return 1===e.nodeType&&e.id===pw},bw=function(e){var t=[];while(e){if(3===e.nodeType&&e.nodeValue!==hw||e.childNodes.length>1)return[];if(1===e.nodeType)t.push(e);e=e.firstChild}return t},yw=function(e){return bw(e).length>0},ww=function(e){var t;if(e)for(e=(t=new iu(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},xw=function(e){var t=ao.fromTag("span");if(ea.setAll(t,{id:pw,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e)kp.append(t,ao.fromText(hw));return t},Cw=function(e,t){while(t&&t!==e){if(t.id===pw)return t;t=t.parentNode}return null},kw=function(e){var t=ww(e);if(t&&t.nodeValue.charAt(0)===hw)t.deleteData(0,1);return t},Sw=function(e,t,n,r){var i,o,a;if(i=t.getRng(true),o=e.getParent(n,e.isBlock),yw(n)){if(false!==r)i.setStartBefore(n),i.setEndBefore(n);e.remove(n)}else{if(a=kw(n),i.startContainer===a&&i.startOffset>0)i.setStart(a,i.startOffset-1);if(i.endContainer===a&&i.endOffset>0)i.setEnd(a,i.endOffset-1);e.remove(n,true)}if(o&&e.isEmpty(o))Jp(ao.fromDom(o));t.setRng(i)},Ew=function(e,t,n,r,i){if(!r){if(!(r=Cw(e,n.getStart())))while(r=t.get(pw))Sw(t,n,r,false)}else Sw(t,n,r,i)},Nw=function(e,t,n){var r=e.dom,i=r.getParent(n,Uf.curry(Fy.isTextBlock,e));if(i&&r.isEmpty(i))n.parentNode.replaceChild(t,n);else if(Gp(ao.fromDom(n)),r.isEmpty(n))n.parentNode.replaceChild(t,n);else r.insertAfter(t,n)},_w=function(e,t){return e.appendChild(t),t},Tw=function(e,t){var n=ee.foldr(e,function(e,t){return _w(e,t.cloneNode(false))},t);return _w(n,n.ownerDocument.createTextNode(hw))},Rw,Aw,Dw=function(e,t,n,r){if(Ew(e,t,n,null,false),8===r&&n.isCollapsed()&&n.getStart().innerHTML===hw)Ew(e,t,n,Cw(e,n.getStart()));if(37===r||39===r)Ew(e,t,n,Cw(e,n.getStart()))},Pw,Bw,Ow,Mw={setup:function(e){var t=e.dom,n=e.selection,r=e.getBody();e.on("mouseup keydown",function(e){Dw(r,t,n,e.keyCode)})},applyCaretFormat:function(e,t,n){var r,i,o,a,s,u,l,f=e.selection;if(a=(r=f.getRng(true)).startOffset,l=(u=r.startContainer).nodeValue,i=Cw(e.getBody(),f.getStart()))o=ww(i);var c=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&a>0&&a<l.length&&c.test(l.charAt(a))&&c.test(l.charAt(a-1)))s=f.getBookmark(),r.collapse(true),r=ew(e,r,e.formatter.get(t)),r=mw.split(r),e.formatter.apply(t,n,r),f.moveToBookmark(s);else{if(!i||o.nodeValue!==hw)o=(i=gw(e.getDoc(),xw(true).dom())).firstChild,r.insertNode(i),a=1,e.formatter.apply(t,n,i);else e.formatter.apply(t,n,i);f.setCursorLocation(o,a)}},removeCaretFormat:function(e,t,n,r){var i=e.dom,o=e.selection,a,s,u,l,f,c,d=[],m=o.getRng(),h;if(a=m.startContainer,s=m.startOffset,3===(f=a).nodeType){if(s!==a.nodeValue.length)l=true;f=f.parentNode}while(f){if(fw.matchNode(e,f,t,n,r)){c=f;break}if(f.nextSibling)l=true;d.push(f),f=f.parentNode}if(!c)return;if(l){u=o.getBookmark(),m.collapse(true);var p=ew(e,m,e.formatter.get(t),true);p=mw.split(p),e.formatter.remove(t,n,p),o.moveToBookmark(u)}else{h=Cw(e.getBody(),c);var g=xw(false).dom(),v=Tw(d,g);if(h)Nw(e,g,h);else Nw(e,g,c);if(Sw(i,o,h,false),o.setCursorLocation(v,1),i.isEmpty(c))i.remove(c)}},isCaretNode:vw,getParentCaretContainer:Cw,replaceWithCaretFormat:function(e,t){var n=xw(false),r=Tw(t,n.dom());return kp.before(ao.fromDom(e),n),Mp.remove(ao.fromDom(e)),cc(r,0)},isFormatElement:function(e,t){var n;return e.schema.getTextInlineElements().hasOwnProperty(To.name(t))&&!vw(t.dom())&&!Wu.isBogus(t.dom())}},Lw,Iw=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return w.none()},Hw=_b([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Fw=function(e,t){var n=xm(t,e);return n?n:e},zw=function(e,t,n){var r=tv.normalizeForwards(n),i=Fw(t,r.container());return tv.findRootInline(e,i,r).fold(function(){return Lc.nextPosition(i,r).bind(b.curry(tv.findRootInline,e,i)).map(function(e){return Hw.before(e)})},w.none)},Ww=function(e,t){return null===Mw.getParentCaretContainer(e,t)},Uw=function(e,t,n){return tv.findRootInline(e,t,n).filter(b.curry(Ww,t))},jw=function(e,t,n){var r=tv.normalizeBackwards(n);return Uw(e,t,r).bind(function(e){var t;return Lc.prevPosition(e,r).isNone()?w.some(Hw.start(e)):w.none()})},Vw=function(e,t,n){var r=tv.normalizeForwards(n);return Uw(e,t,r).bind(function(e){var t;return Lc.nextPosition(e,r).isNone()?w.some(Hw.end(e)):w.none()})},$w=function(e,t,n){var r=tv.normalizeBackwards(n),i=Fw(t,r.container());return tv.findRootInline(e,i,r).fold(function(){return Lc.prevPosition(i,r).bind(b.curry(tv.findRootInline,e,i)).map(function(e){return Hw.after(e)})},w.none)},qw=function(e){return false===tv.isRtl(Kw(e))},Yw=function(e,t,n){var r;return Iw([zw,jw,Vw,$w],[e,t,n]).filter(qw)},Kw=function(e){return e.fold(b.identity,b.identity,b.identity,b.identity)},Xw=function(e){return e.fold(b.constant("before"),b.constant("start"),b.constant("end"),b.constant("after"))},Gw=function(e){return e.fold(Hw.before,Hw.before,Hw.after,Hw.after)},Jw=function(e){return e.fold(Hw.start,Hw.start,Hw.end,Hw.end)},Qw=function(e,t){return Xw(e)===Xw(t)&&Kw(e)===Kw(t)},Zw=function(n,e,r,t,i,o){return Xc([tv.findRootInline(e,r,t),tv.findRootInline(e,r,i)],function(e,t){if(e!==t&&tv.hasSameParentBlock(r,e,t))return Hw.after(n?e:t);else return o}).getOr(o)},ex=function(e,t){return e.fold(b.constant(true),function(e){return!Qw(e,t)})},tx=function(t,n,r,i,e){var o=tv.normalizePosition(t,e),a,s;return Lc.fromPosition(t,r,o).map(b.curry(tv.normalizePosition,t)).fold(function(){return i.map(Gw)},function(e){return Yw(n,r,e).map(b.curry(Zw,t,n,r,o,e)).filter(b.curry(ex,i))}).filter(qw)},nx=function(e,t){if(e)return t.fold(b.compose(w.some,Hw.start),w.none,b.compose(w.some,Hw.after),w.none);else return t.fold(w.none,b.compose(w.some,Hw.before),w.none,b.compose(w.some,Hw.end))},rx=function(e,t,n,r){var i=tv.normalizePosition(e,r),o=Yw(t,n,i);return Yw(t,n,i).bind(b.curry(nx,e)).orThunk(function(){return tx(e,t,n,o,r)})},ix=Yw,ox=rx,ax=b.curry(rx,false),sx=b.curry(rx,true),ux=Kw,lx=Gw,fx=Jw,cx=function(e){var t=e,n=function(){return t},r,i;return{get:n,set:function(e){t=e},clone:function(){return cx(n())}}},dx=function(e){return Do.isFunction(e.selection.getSel().modify)},mx=function(e,t,n){var r=e?1:-1;return t.setRng(cc(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),true},hx,px=dx,gx=function(e,t){var n=t.selection.getRng(),r=e?cc.fromRangeEnd(n):cc.fromRangeStart(n);if(!dx(t))return false;else if(e&&Zl(r))return mx(true,t.selection,r);else if(!e&&ef(r))return mx(false,t.selection,r);else return false},vx=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},bx=function(e){return false!==e.settings.inline_boundaries},yx=function(e,t){if(e)t.setAttribute("data-mce-selected","inline-boundary");else t.removeAttribute("data-mce-selected")},wx=function(t,e,n){return Ny(e,n).map(function(e){return vx(t,e),n})},xx=function(t,n,e){var r=t.getBody(),i=cc.fromRangeStart(t.selection.getRng()),o=b.curry(tv.isInlineTarget,t),a;return ox(e,o,r,i).bind(function(e){return wx(t,n,e)})},Cx=function(e,t,n){var r=ee.filter(t.select('*[data-mce-selected="inline-boundary"]'),e),i=ee.filter(n,e);ee.each(ee.difference(r,i),b.curry(yx,false)),ee.each(ee.difference(i,r),b.curry(yx,true))},kx=function(e,t){if(e.selection.isCollapsed()&&true!==e.composing&&t.get()){var n=cc.fromRangeStart(e.selection.getRng());if(cc.isTextPosition(n)&&false===tv.isAtZwsp(n))vx(e,Ec.removeAndReposition(t.get(),n)),t.set(null)}},Sx=function(n,r,i,e){if(r.selection.isCollapsed()){var t=ee.filter(e,n);ee.each(t,function(e){var t=cc.fromRangeStart(r.selection.getRng());ix(n,r.getBody(),t).bind(function(e){return wx(r,i,e)})})}},Ex,Nx=function(e,t,n){return function(){return bx(t)?gx(e,t):false}},_x=function(t){var n=new cx(null),r=b.curry(tv.isInlineTarget,t);return t.on("NodeChange",function(e){if(bx(t))Cx(r,t.dom,e.parents),kx(t,n),Sx(r,t,n,e.parents)}),n},Tx={move:function(e,t,n){return function(){return bx(e)?xx(e,t,n).isSome():false}},moveNextWord:b.curry(Nx,true),movePrevWord:b.curry(Nx,false),setupSelectedState:_x,setCaretPosition:vx},Rx=function(e){return false!==e.settings.inline_boundaries},Ax=function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},Dx=function(i){return Xc([Lc.firstPositionIn(i),Lc.lastPositionIn(i)],function(e,t){var n=tv.normalizePosition(true,e),r=tv.normalizePosition(false,t);return Lc.nextPosition(i,n).map(function(e){return e.isEqual(r)}).getOr(true)}).getOr(true)},Px=function(t,n){return function(e){return Ny(n,e).map(function(e){return Tx.setCaretPosition(t,e),true}).getOr(false)}},Bx=function(e,t,n,r){var i=e.getBody(),o=b.curry(tv.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(Ax(n,r)),e.execCommand("Delete"),ix(o,i,cc.fromRangeStart(e.selection.getRng())).map(fx).map(Px(e,t))}),e.nodeChanged()},Ox=function(e,t){var n=xm(t,e);return n?n:e},Mx=function(n,r,i,o){var a=Ox(n.getBody(),o.container()),s=b.curry(tv.isInlineTarget,n),u=ix(s,a,o);return u.bind(function(e){if(i)return e.fold(b.constant(w.some(fx(e))),w.none,b.constant(w.some(lx(e))),w.none);else return e.fold(w.none,b.constant(w.some(lx(e))),w.none,b.constant(w.some(fx(e))))}).map(Px(n,r)).getOrThunk(function(){var t=Lc.navigate(i,a,o),e=t.bind(function(e){return ix(s,a,e)});if(u.isSome()&&e.isSome())return tv.findRootInline(s,a,o).map(function(e){if(Dx(e))return ny(n,i,ao.fromDom(e)),true;else return false}).getOr(false);else return e.bind(function(e){return t.map(function(e){if(i)Bx(n,r,o,e);else Bx(n,r,e,o);return true})}).getOr(false)})},Lx,Ix=function(e,t,n){if(e.selection.isCollapsed()&&Rx(e)){var r=cc.fromRangeStart(e.selection.getRng());return Mx(e,t,n,r)}return false},Hx=Va.immutable("start","end"),Fx=Va.immutable("rng","table","cells"),zx=_b([{removeTable:["element"]},{emptyCells:["cells"]}]),Wx=function(e,t){return xv(ao.fromDom(e),"td,th",t)},Ux=function(e,t){return vv(e,"table",t)},jx=function(e){return false===ms.eq(e.start(),e.end())},Vx=function(e,n){return Ux(e.start(),n).bind(function(t){return Ux(e.end(),n).bind(function(e){return ms.eq(t,e)?w.some(t):w.none()})})},$x=function(e,t){return Xc([Wx(e.startContainer,t),Wx(e.endContainer,t)],Hx).filter(jx)},qx=function(n,e){return Vx(n,e).bind(function(e){var t=Pd(e,"td,th");return Fx(n,e,t)})},Yx=function(e,t){var n=b.curry(ms.eq,e);return $x(t,n).map(function(e){return qx(e,n)})},Kx=function(e,t){return ee.findIndex(e,function(e){return ms.eq(e,t)})},Xx=function(n){return Xc([Kx(n.cells(),n.rng().start()),Kx(n.cells(),n.rng().end())],function(e,t){return n.cells().slice(e,t+1)})},Gx=function(n){return Xx(n).bind(function(e){var t=n.cells();return e.length===t.length?zx.removeTable(n.table()):zx.emptyCells(e)})},Jx,Qx,Zx=function(e,t){return Yx(e,t).map(Gx)},eC=function(e){return zx.emptyCells(e)},tC=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},nC,rC,iC=tC,oC=function(e){return ee.bind(e,function(e){var t=Af(e);return t?[ao.fromDom(t)]:[]})},aC=function(e){return tC(e).length>1},sC=function(e){return ee.filter(oC(e),ku)},uC=function(e){var t;return Pd(e,"td[data-mce-selected],th[data-mce-selected]")},lC=function(e,t){var n=uC(t),r=sC(e);return n.length>0?n:r},fC,cC=sC,dC=uC,mC=lC,hC=function(e){return lC(iC(e.selection.getSel()),ao.fromDom(e.getBody()))},pC=function(e,t){return ee.each(t,Jp),e.selection.setCursorLocation(t[0].dom(),0),true},gC=function(e,t){return ny(e,false,t),true},vC=function(t,e,n){return Zx(e,n).map(function(e){return e.fold(b.curry(gC,t),b.curry(pC,t))})},bC=function(e,t){return SC(e,t)},yC=function(t,e,n,r){return CC(e,r).fold(function(){return vC(t,e,n)},function(e){return bC(t,e)}).getOr(false)},wC=function(e,t){var n=ao.fromDom(e.getBody()),r=e.selection.getRng(),i=hC(e);return 0!==i.length?pC(e,i):yC(e,n,r,t)},xC=function(e,t){return ee.find(ab(t,e),ku)},CC=function(e,t){return ee.find(ab(t,e),function(e){return"caption"===To.name(e)})},kC=function(e,t,n,r,i){return Lc.navigate(n,e.getBody(),i).bind(function(e){return xC(t,ao.fromDom(e.getNode())).map(function(e){return false===ms.eq(e,r)})})},SC=function(e,t){return Jp(t),e.selection.setCursorLocation(t.dom(),0),w.some(true)},EC=function(e,n,r,i){return Lc.firstPositionIn(e.dom()).bind(function(t){return Lc.lastPositionIn(e.dom()).map(function(e){return n?r.isEqual(t)&&i.isEqual(e):r.isEqual(e)&&i.isEqual(t)})}).getOr(true)},NC=function(e,t){return SC(e,t)},_C=function(e,t,n){return CC(e,ao.fromDom(n.getNode())).map(function(e){return false===ms.eq(e,t)})},TC=function(t,n,r,i,o){return Lc.navigate(r,t.getBody(),o).bind(function(e){return EC(i,r,o,e)?NC(t,i):_C(n,i,e)}).or(w.some(true))},RC=function(t,n,r,e){var i=cc.fromRangeStart(t.selection.getRng());return xC(r,e).bind(function(e){return jv(e)?SC(t,e):kC(t,r,n,e,i)})},AC=function(e,t,n,r){var i=cc.fromRangeStart(e.selection.getRng());return jv(r)?SC(e,r):TC(e,n,t,r,i)},DC=function(t,n,e){var r=ao.fromDom(t.getBody());return CC(r,e).fold(function(){return RC(t,n,r,e)},function(e){return AC(t,n,r,e)}).getOr(false)},PC,BC=function(e,t){var n=ao.fromDom(e.selection.getStart(true));return e.selection.isCollapsed()?DC(e,t,n):wC(e,n)},OC=function(e,t){e.getDoc().execCommand(t,false,null)},MC,LC,IC={deleteCommand:function(e){if(dy(e,false))return;else if(Ix(e,false))return;else if(vb(e,false))return;else if(BC(e))return;else if(Eb(e,false))return;else OC(e,"Delete"),uv(e)},forwardDeleteCommand:function(e){if(dy(e,true))return;else if(Ix(e,true))return;else if(vb(e,true))return;else if(BC(e))return;else if(Eb(e,true))return;else OC(e,"ForwardDelete")}},HC,FC={isEq:function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},zC=Va.immutable("container","offset"),WC=function(e,t,n){while(e&&e!==t){if(n(e))return e;e=e.parentNode}return null},UC=function(e,t,n){return null!==WC(e,t,n)},jC=function(e,t,n){return UC(e,t,function(e){return e.nodeName===n})},VC=function(e){return e&&"TABLE"===e.nodeName},$C=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},qC=function(e,t){return Gl(e)&&false===UC(e,t,Mw.isCaretNode)},YC=function(e,t,n){var r=new iu(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());while(t=r[n?"prev":"next"]())if(Wu.isBr(t))return true},KC=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t},XC=function(e,t){while(t&&t!==e){if(Wu.isContentEditableFalse(t))return true;t=t.parentNode}return false},GC=function(e,t,n,r,i){var o,a,s,u=e.getRoot(),l,f=e.schema.getNonEmptyElements();if(s=e.getParent(i.parentNode,e.isBlock)||u,r&&Wu.isBr(i)&&t&&e.isEmpty(s))return w.some(zC(i.parentNode,e.nodeIndex(i)));o=new iu(i,s);while(l=o[r?"prev":"next"]()){if("false"===e.getContentEditableParent(l)||qC(l,u))return w.none();if(Wu.isText(l)&&l.nodeValue.length>0){if(false===jC(l,u,"A"))return w.some(zC(l,r?l.nodeValue.length:0));return w.none()}if(e.isBlock(l)||f[l.nodeName.toLowerCase()])return w.none();a=l}if(n&&a)return w.some(zC(a,0));return w.none()},JC=function(e,t,n,r){var i,o,a,s=e.getRoot(),u,l,f,c,d=false;if(i=r[(n?"start":"end")+"Container"],o=r[(n?"start":"end")+"Offset"],c=Wu.isElement(i)&&o===i.childNodes.length,l=e.schema.getNonEmptyElements(),f=n,Gl(i))return w.none();if(Wu.isElement(i)&&o>i.childNodes.length-1)f=false;if(Wu.isDocument(i))i=s,o=0;if(i===s){if(f)if(u=i.childNodes[o>0?o-1:0]){if(Gl(u))return w.none();if(l[u.nodeName]||VC(u))return w.none()}if(i.hasChildNodes()){if(o=Math.min(!f&&o>0?o-1:o,i.childNodes.length-1),i=i.childNodes[o],o=Wu.isText(i)&&c?i.data.length:0,!t&&i===s.lastChild&&VC(i))return w.none();if(XC(s,i)||Gl(i))return w.none();if(i.hasChildNodes()&&false===VC(i)){a=new iu(u=i,s);do{if(Wu.isContentEditableFalse(u)||Gl(u)){d=false;break}if(Wu.isText(u)&&u.nodeValue.length>0){o=f?0:u.nodeValue.length,i=u,d=true;break}if(l[u.nodeName.toLowerCase()]&&!$C(u)){if(o=e.nodeIndex(u),i=u.parentNode,("IMG"===u.nodeName||"PRE"===u.nodeName)&&!f)o++;d=true;break}}while(u=f?a.next():a.prev())}}}if(t){if(Wu.isText(i)&&0===o)GC(e,c,t,true,i).each(function(e){i=e.container(),o=e.offset(),d=true});if(Wu.isElement(i)){if(!(u=i.childNodes[o]))u=i.childNodes[o-1];if(u&&Wu.isBr(u)&&!KC(u,"A")&&!YC(e,u,false)&&!YC(e,u,true))GC(e,c,t,true,u).each(function(e){i=e.container(),o=e.offset(),d=true})}}if(f&&!t&&Wu.isText(i)&&o===i.nodeValue.length)GC(e,c,t,false,i).each(function(e){i=e.container(),o=e.offset(),d=true});return d?w.some(zC(i,o)):w.none()},QC,ZC={normalize:function(e,t){var n=t.collapsed,r=t.cloneRange();if(JC(e,n,true,r).each(function(e){r.setStart(e.container(),e.offset())}),!n)JC(e,n,false,r).each(function(e){r.setEnd(e.container(),e.offset())});if(n)r.collapse(true);return FC.isEq(t,r)?w.none():w.some(r)}},ek=function(e,t,n){var r=new iu(t,n),i,o=e.getNonEmptyElements();while(i=r.next())if(o[i.nodeName.toLowerCase()]||i.length>0)return true},tk=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},nk=function(e,t,n,r){var i=e.createRng();if(!r)i.setStartAfter(n),i.setEndAfter(n);else i.setStartBefore(n),i.setEndBefore(n);t.setRng(i)},rk=function(e,t){var n=e.selection,r=e.dom,i,o,a=n.getRng();ZC.normalize(r,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,u=a.startContainer;if(1===u.nodeType&&u.hasChildNodes()){var l=s>u.childNodes.length-1;if(u=u.childNodes[Math.min(s,u.childNodes.length-1)]||u,l&&3===u.nodeType)s=u.nodeValue.length;else s=0}var f=r.getParent(u,r.isBlock),c=f?r.getParent(f.parentNode,r.isBlock):null,d=c?c.nodeName.toUpperCase():"",m=t&&t.ctrlKey;if("LI"===d&&!m)f=c;if(u&&3===u.nodeType&&s>=u.nodeValue.length)if(!ek(e.schema,u,f))i=r.create("br"),a.insertNode(i),a.setStartAfter(i),a.setEndAfter(i),o=true;i=r.create("br"),a.insertNode(i),tk(r,n,i),nk(r,n,i,o),e.undoManager.add()},ik=function(e,t){var n=ao.fromTag("br");kp.before(ao.fromDom(t),n),e.undoManager.add()},ok=function(e,t){if(!sk(e.getBody(),t))kp.after(ao.fromDom(t),ao.fromTag("br"));var n=ao.fromTag("br");kp.after(ao.fromDom(t),n),tk(e.dom,e.selection,n.dom()),nk(e.dom,e.selection,n.dom(),false),e.undoManager.add()},ak=function(e){return Wu.isBr(e.getNode())},sk=function(e,t){if(ak(cc.after(t)))return true;else return Lc.nextPosition(e,cc.after(t)).map(function(e){return Wu.isBr(e.getNode())}).getOr(false)},uk=function(e){return e&&"A"===e.nodeName&&"href"in e},lk=function(e){return e.fold(b.constant(false),uk,uk,b.constant(false))},fk=function(e){var t=b.curry(tv.isInlineTarget,e),n=cc.fromRangeStart(e.selection.getRng());return ix(t,e.getBody(),n).filter(lk)},ck=function(e,t){t.fold(b.noop,b.curry(ik,e),b.curry(ok,e),b.noop)},dk,mk={insert:function(e,t){var n=fk(e);if(n.isSome())n.each(b.curry(ck,e));else rk(e,t)}},hk=_b([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),pk=function(e,t,n,r){return e.fold(t,n,r)},gk=function(e){return e.fold(b.identity,b.identity,b.identity)},vk=hk.before,bk=hk.on,yk=hk.after,wk=pk,xk=gk,Ck=_b([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),kk=Va.immutable("start","soffset","finish","foffset"),Sk=function(e){return Ck.exact(e.start(),e.soffset(),e.finish(),e.foffset())},Ek=function(e){return e.match({domRange:function(e){return ao.fromDom(e.startContainer)},relative:function(e,t){return xk(e)},exact:function(e,t,n,r){return e}})},Nk=function(e){var t=Ek(e);return Os.defaultView(t)},_k={domRange:Ck.domRange,relative:Ck.relative,exact:Ck.exact,exactFromRange:Sk,range:kk,getWin:Nk},Tk=eo.detect().browser,Rk=function(e,t){var n=To.isText(t)?Wp(t).length:Os.children(t).length+1;if(e>n)return n;else if(e<0)return 0;return e},Ak=function(e){return _k.range(e.start(),Rk(e.soffset(),e.start()),e.finish(),Rk(e.foffset(),e.finish()))},Dk=function(e,t){return ms.contains(e,t)||ms.eq(e,t)},Pk=function(t){return function(e){return Dk(t,e.start())&&Dk(t,e.finish())}},Bk=function(e){return true===e.inline||Tk.isIE()},Ok=function(e){return _k.range(ao.fromDom(e.startContainer),e.startOffset,ao.fromDom(e.endContainer),e.endOffset)},Mk=function(e){var t=e.getSelection(),n;return(!t||0===t.rangeCount?w.none():w.from(t.getRangeAt(0))).map(Ok)},Lk=function(e){var t=Os.defaultView(e);return Mk(t.dom()).filter(Pk(e))},Ik=function(e,t){return w.from(t).filter(Pk(e)).map(Ak)},Hk=function(e){var t=document.createRange();return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),w.some(t)},Fk,zk,Wk=function(e){var t;return(e.bookmark?e.bookmark:w.none()).bind(b.curry(Ik,ao.fromDom(e.getBody()))).bind(Hk)},Uk,jk={store:function(e){var t=Bk(e)?Lk(ao.fromDom(e.getBody())):w.none();e.bookmark=t.isSome()?t:e.bookmark},storeNative:function(e,t){var n=ao.fromDom(e.getBody()),r,i=(Bk(e)?w.from(t):w.none()).map(Ok).filter(Pk(n));e.bookmark=i.isSome()?i:e.bookmark},readRange:Mk,restore:function(t){Wk(t).each(function(e){t.selection.setRng(e)})},getRng:Wk,getBookmark:Lk,validate:Ik},Vk=function(e,t,n,r,i,o){if("false"===e.getContentEditable(o))return;if("LI"!==o.nodeName){var a=n?"margin":"padding";if(a="TABLE"===o.nodeName?"margin":a,a+="rtl"===e.getStyle(o,"direction",true)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(o.style[a]||0,10)-r);e.setStyle(o,a,s?s+i:"")}else{var s=parseInt(o.style[a]||0,10)+r+i;e.setStyle(o,a,s)}}},$k=function(e,t){var n=e.settings,r=e.dom,i=e.selection,o=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),u=e.getParam("indent_use_margin",false);if(!e.queryCommandState("InsertUnorderedList")&&!e.queryCommandState("InsertOrderedList")){if(!n.forced_root_block&&!r.getParent(i.getNode(),r.isBlock))o.apply("div");ee.each(i.getSelectedBlocks(),function(e){return Vk(r,t,u,s,a,e)})}},qk=Yn.each,Yk=Yn.extend,Kk=Yn.map,Xk=Yn.inArray,Gk=Yn.explode,Jk=true,Qk=false;function Zk(s){var i,o,a,u={state:{},exec:{},value:{}},l=s.settings,t;s.on("PreInit",function(){i=s.dom,o=s.selection,l=s.settings,a=s.formatter});var e,n=function(e){var t;if(s.quirks.isHidden()||s.removed)return;if(e=e.toLowerCase(),t=u.state[e])return t(e);try{return s.getDoc().queryCommandState(e)}catch(e){}return false},r,f=function(e,n){n=n||"exec",qk(e,function(t,e){qk(e.toLowerCase().split(","),function(e){u[n][e]=t})})},c,d,m,h,p;Yk(this,{execCommand:function(t,n,r,e){var i,o,a=false;if(s.removed)return;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)&&(!e||!e.skip_focus))s.focus();else jk.restore(s);if((e=s.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return false;if(o=t.toLowerCase(),i=u.exec[o])return i(o,n,r),s.fire("ExecCommand",{command:t,ui:n,value:r}),true;if(qk(s.plugins,function(e){if(e.execCommand&&e.execCommand(t,n,r))return s.fire("ExecCommand",{command:t,ui:n,value:r}),a=true,false}),a)return a;if(s.theme&&s.theme.execCommand&&s.theme.execCommand(t,n,r))return s.fire("ExecCommand",{command:t,ui:n,value:r}),true;try{a=s.getDoc().execCommand(t,n,r)}catch(e){}if(a)return s.fire("ExecCommand",{command:t,ui:n,value:r}),true;return false},queryCommandState:n,queryCommandValue:function(e){var t;if(s.quirks.isHidden()||s.removed)return;if(e=e.toLowerCase(),t=u.value[e])return t(e);try{return s.getDoc().queryCommandValue(e)}catch(e){}},queryCommandSupported:function(e){if(e=e.toLowerCase(),u.exec[e])return true;try{return s.getDoc().queryCommandSupported(e)}catch(e){}return false},addCommands:f,addCommand:function(e,i,o){e=e.toLowerCase(),u.exec[e]=function(e,t,n,r){return i.call(o||s,t,n,r)}},addQueryStateHandler:function(e,t,n){e=e.toLowerCase(),u.state[e]=function(){return t.call(n||s)}},addQueryValueHandler:function(e,t,n){e=e.toLowerCase(),u.value[e]=function(){return t.call(n||s)}},hasCustomCommand:function(e){return e=e.toLowerCase(),!!u.exec[e]}});var g=function(e,t,n){if(void 0===t)t=Qk;if(void 0===n)n=null;return s.getDoc().execCommand(e,t,n)},v=function(e){return a.match(e)},b=function(e,t){a.toggle(e,t?{value:t}:void 0),s.nodeChanged()},y=function(e){t=o.getBookmark(e)},w=function(){o.moveToBookmark(t)};f({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){s.undoManager.add()},"Cut,Copy,Paste":function(e){var t=s.getDoc(),n;try{g(e)}catch(e){n=Jk}if("paste"===e&&!t.queryCommandEnabled(e))n=true;if(n||!t.queryCommandSupported(e)){var r=s.translate("Your browser doesn't support direct access to the clipboard. "+"Please use the Ctrl+X/C/V keyboard shortcuts instead.");if(Me.mac)r=r.replace(/Ctrl\+/g,"⌘+");s.notificationManager.open({text:r,type:"error"})}},unlink:function(){if(o.isCollapsed()){var e=s.dom.getParent(s.selection.getStart(),"a");if(e)s.dom.remove(e,true);return}a.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);if("full"===t)t="justify";if(qk("left,center,right,justify".split(","),function(e){if(t!==e)a.remove("align"+e)}),"none"!==t)b("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;if(g(e),t=i.getParent(o.getNode(),"ol,ul"))if(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName))y(),i.split(n,t),w()},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){b(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){b(e,n)},FontSize:function(e,t,n){var r,i;if(n>=1&&n<=7)if(i=Gk(l.font_size_style_values),r=Gk(l.font_size_classes))n=r[n-1]||n;else n=i[n-1]||n;b(e,n)},RemoveFormat:function(e){a.remove(e)},mceBlockQuote:function(){b("blockquote")},FormatBlock:function(e,t,n){return b(n||"p")},mceCleanup:function(){var e=o.getBookmark();s.setContent(s.getContent({cleanup:Jk}),{cleanup:Jk}),o.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var r=n||o.getNode();if(r!==s.getBody())y(),s.dom.remove(r,Jk),w()},mceSelectNodeDepth:function(e,t,n){var r=0;i.getParent(o.getNode(),function(e){if(1===e.nodeType&&r++===n)return o.select(e),Qk},s.getBody())},mceSelectNode:function(e,t,n){o.select(n)},mceInsertContent:function(e,t,n){hg.insertAtCaret(s,n)},mceInsertRawHTML:function(e,t,n){o.setContent("tiny_mce_marker"),s.setContent(s.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){b(n)},mceSetContent:function(e,t,n){s.setContent(n)},"Indent,Outdent":function(e){$k(s,e)},mceRepaint:function(){},InsertHorizontalRule:function(){s.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){s.hasVisual=!s.hasVisual,s.addVisual()},mceReplaceContent:function(e,t,n){s.execCommand("mceInsertContent",false,n.replace(/\{\$selection\}/g,o.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;if("string"===typeof n)n={href:n};if(r=i.getParent(o.getNode(),"a"),n.href=n.href.replace(" ","%20"),!r||!n.href)a.remove("link");if(n.href)a.apply("link",n,r)},selectAll:function(){var e=i.getParent(o.getStart(),Wu.isContentEditableTrue);if(e){var t=i.createRng();t.selectNodeContents(e),o.setRng(t)}},delete:function(){IC.deleteCommand(s)},forwardDelete:function(){IC.forwardDeleteCommand(s)},mceNewDocument:function(){s.setContent("")},InsertLineBreak:function(e,t,n){return mk.insert(s,n),true}}),f({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=o.isCollapsed()?[i.getParent(o.getNode(),i.isBlock)]:o.getSelectedBlocks(),r=Kk(n,function(e){return!!a.matchNode(e,t)});return-1!==Xk(r,Jk)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return v(e)},mceBlockQuote:function(){return v("blockquote")},Outdent:function(){var e;if(l.inline_styles){if((e=i.getParent(o.getStart(),i.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return Jk;if((e=i.getParent(o.getEnd(),i.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return Jk}return n("InsertUnorderedList")||n("InsertOrderedList")||!l.inline_styles&&!!i.getParent(o.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=i.getParent(o.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),f({"FontSize,FontName":function(e){var t=0,n;if(n=i.getParent(o.getNode(),"span"))if("fontsize"===e)t=n.style.fontSize;else t=n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return t}},"value"),f({Undo:function(){s.undoManager.undo()},Redo:function(){s.undoManager.redo()}})}var eS=Yn.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange "+"mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover "+"draggesture dragdrop drop drag submit "+"compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),tS=function(a){var s=this,u,l={},f,c=function(){return false},d=function(){return true};u=(a=a||{}).scope||s,f=a.toggleEvent||c;var e=function(e,t){var n,r,i,o;if(e=e.toLowerCase(),(t=t||{}).type=e,!t.target)t.target=u;if(!t.preventDefault)t.preventDefault=function(){t.isDefaultPrevented=d},t.stopPropagation=function(){t.isPropagationStopped=d},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=d},t.isDefaultPrevented=c,t.isPropagationStopped=c,t.isImmediatePropagationStopped=c;if(a.beforeFire)a.beforeFire(t);if(n=l[e])for(r=0,i=n.length;r<i;r++){if((o=n[r]).once)m(e,o.func);if(t.isImmediatePropagationStopped())return t.stopPropagation(),t;if(false===o.func.call(u,t))return t.preventDefault(),t}return t},r=function(e,t,n,r){var i,o,a;if(false===t)t=c;if(t){if(t={func:t},r)Yn.extend(t,r);a=(o=e.toLowerCase().split(" ")).length;while(a--){if(e=o[a],!(i=l[e]))i=l[e]=[],f(e,true);if(n)i.unshift(t);else i.push(t)}}return s},m=function(e,t){var n,r,i,o,a;if(e){n=(o=e.toLowerCase().split(" ")).length;while(n--){if(e=o[n],r=l[e],!e){for(i in l)f(i,false),delete l[i];return s}if(r){if(!t)r.length=0;else{a=r.length;while(a--)if(r[a].func===t)r=r.slice(0,a).concat(r.slice(a+1)),l[e]=r}if(!r.length)f(e,false),delete l[e]}}}else{for(e in l)f(e,false);l={}}return s},t=function(e,t,n){return r(e,t,n,{once:true})},n=function(e){return e=e.toLowerCase(),!(!l[e]||0===l[e].length)};s.fire=e,s.on=r,s.off=m,s.once=t,s.has=n};tS.isNative=function(e){return!!eS[e.toLowerCase()]};var nS=function(n){if(!n._eventDispatcher)n._eventDispatcher=new tS({scope:n,toggleEvent:function(e,t){if(tS.isNative(e)&&n.toggleNativeEvent)n.toggleNativeEvent(e,t)}});return n._eventDispatcher},rS={fire:function(e,t,n){var r=this;if(r.removed&&"remove"!==e)return t;if(t=nS(r).fire(e,t,n),false!==n&&r.parent){var i=r.parent();while(i&&!t.isPropagationStopped())i.fire(e,t,false),i=i.parent()}return t},on:function(e,t,n){return nS(this).on(e,t,n)},off:function(e,t){return nS(this).off(e,t)},once:function(e,t){return nS(this).once(e,t)},hasEventListeners:function(e){return nS(this).has(e)}},iS=Pl.DOM,oS,aS=function(e,t){if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;if(e.settings.event_root){if(!e.eventRoot)e.eventRoot=iS.select(e.settings.event_root)[0];return e.eventRoot}return e.getBody()},sS=function(o,a){var e,t,s=function(e){return!e.hidden&&!e.readonly};if(!o.delegates)o.delegates={};if(o.delegates[a]||o.removed)return;if(e=aS(o,a),o.settings.event_root){if(!oS)oS={},o.editorManager.on("removeEditor",function(){var e;if(!o.editorManager.activeEditor)if(oS){for(e in oS)o.dom.unbind(aS(o,e));oS=null}});if(oS[a])return;t=function(e){var t=e.target,n=o.editorManager.get(),r=n.length;while(r--){var i=n[r].getBody();if(i===t||iS.isChildOf(t,i))if(s(n[r]))n[r].fire(a,e)}},oS[a]=t,iS.bind(e,a,t)}else t=function(e){if(s(o))o.fire(a,e)},iS.bind(e,a,t),o.delegates[a]=t},uS={bindPendingEventDelegates:function(){var t=this;Yn.each(t._pendingNativeEvents,function(e){sS(t,e)})},toggleNativeEvent:function(e,t){var n=this;if("focus"===e||"blur"===e)return;if(t)if(n.initialized)sS(n,e);else if(!n._pendingNativeEvents)n._pendingNativeEvents=[e];else n._pendingNativeEvents.push(e);else if(n.initialized)n.dom.unbind(aS(n,e),e,n.delegates[e]),delete n.delegates[e]},unbindAllNativeEvents:function(){var e=this,t=e.getBody(),n=e.dom,r;if(e.delegates){for(r in e.delegates)e.dom.unbind(aS(e,r),r,e.delegates[r]);delete e.delegates}if(!e.inline&&t&&n)t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc());if(n)n.unbind(t),n.unbind(e.getContainer())}},lS=uS=Yn.extend({},rS,uS),fS=function(e,t,n){try{e.getDoc().execCommand(t,false,n)}catch(e){}},cS=function(t){var e,n;return e=t.getBody(),n=function(e){if(t.dom.getParents(e.target,"a").length>0)e.preventDefault()},t.dom.bind(e,"click",n),{unbind:function(){t.dom.unbind(e,"click",n)}}},dS=function(e,t){if(e._clickBlocker)e._clickBlocker.unbind(),e._clickBlocker=null;if(t)e._clickBlocker=cS(e),e.selection.controlSelection.hideResizeRect(),e.readonly=true,e.getBody().contentEditable=false;else e.readonly=false,e.getBody().contentEditable=true,fS(e,"StyleWithCSS",false),fS(e,"enableInlineTableEditing",false),fS(e,"enableObjectResizing",false),e.focus(),e.nodeChanged()},mS,hS=function(e,t){var n=e.readonly?"readonly":"design";if(t===n)return;if(e.initialized)dS(e,"readonly"===t);else e.on("init",function(){dS(e,"readonly"===t)});e.fire("SwitchMode",{mode:t})},pS=Yn.each,gS=Yn.explode,vS={f9:120,f10:121,f11:122},bS=Yn.makeMap("alt,ctrl,shift,meta,access");function yS(o){var e=this,a={},n=[],s=function(e){var t,n,r={};for(n in pS(gS(e,"+"),function(e){if(e in bS)r[e]=true;else if(/^[0-9]{2,}$/.test(e))r.keyCode=parseInt(e,10);else r.charCode=e.charCodeAt(0),r.keyCode=vS[e]||e.toUpperCase().charCodeAt(0)}),t=[r.keyCode],bS)if(r[n])t.push(n);else r[n]=false;if(r.id=t.join(","),r.access)if(r.alt=true,Me.mac)r.ctrl=true;else r.shift=true;if(r.meta)if(Me.mac)r.meta=true;else r.ctrl=true,r.meta=false;return r},u=function(e,t,n,r){var i;return(i=Yn.map(gS(e,">"),s))[i.length-1]=Yn.extend(i[i.length-1],{func:n,scope:r||o}),Yn.extend(i[0],{desc:o.translate(t),subpatterns:i.slice(1)})},r=function(e){return e.altKey||e.ctrlKey||e.metaKey},i=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},l=function(e,t){if(!t)return false;if(t.ctrl!==e.ctrlKey||t.meta!==e.metaKey)return false;if(t.alt!==e.altKey||t.shift!==e.shiftKey)return false;if(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)return e.preventDefault(),true;return false},f=function(e){return e.func?e.func.call(e.scope):null};o.on("keyup keypress keydown",function(t){if((r(t)||i(t))&&!t.isDefaultPrevented())if(pS(a,function(e){if(l(t,e)){if(n=e.subpatterns.slice(0),"keydown"===t.type)f(e);return true}}),l(t,n[0])){if(1===n.length)if("keydown"===t.type)f(n[0]);n.shift()}}),e.add=function(e,n,r,i){var t;if("string"===typeof(t=r))r=function(){o.execCommand(t,false,null)};else if(Yn.isArray(t))r=function(){o.execCommand(t[0],t[1],t[2])};return pS(gS(Yn.trim(e.toLowerCase())),function(e){var t=u(e,n,r,i);a[t.id]=t}),true},e.remove=function(e){var t=u(e);if(a[t.id])return delete a[t.id],true;return false}}var wS,xS,CS,kS,SS,ES,NS=function(e){return Cg.first(e).isSome()},_S=function(e,t,n){return Cg.ancestor(e,t,n).isSome()},TS=function(e,t,n){return Cg.closest(e,t,n).isSome()},RS=function(e,t){return Cg.sibling(e,t).isSome()},AS=function(e,t){return Cg.child(e,t).isSome()},DS=function(e,t){return Cg.descendant(e,t).isSome()},PS=function(e){e.dom().focus()},BS,OS,MS=function(e){var t=void 0!==e?e.dom():document;return w.from(t.activeElement).map(ao.fromDom)},LS,IS,HS=function(e){var t=Os.owner(e).dom();return e.dom()===t.activeElement},FS=PS,zS=function(e){e.dom().blur()},WS=MS,US=function(t){return MS(Os.owner(t)).filter(function(e){return t.dom().contains(e.dom())})},jS=function(t){var e=Os.owner(t),n;MS(e).filter(function(e){return TS(e,b.curry(ms.eq,t))}).fold(function(){PS(t)},b.noop)},VS=function(t,e){return t.dom.getParent(e,function(e){return"true"===t.dom.getContentEditable(e)})},$S=function(e){return e.collapsed?w.from(Df(e.startContainer,e.startOffset)).map(ao.fromDom):w.none()},qS=function(t,e){return $S(e).bind(function(e){if(Cu(e))return w.some(e);else if(false===ms.contains(t,e))return w.some(t);else return w.none()})},YS=function(t,e){qS(ao.fromDom(t.getBody()),e).bind(function(e){return Lc.firstPositionIn(e.dom())}).fold(function(){return t.selection.normalize()},function(e){return t.selection.setRng(e.toRange())})},KS=function(t){if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},XS=function(e){return HS(e)||US(e).isSome()},GS=function(e){return e.iframeElement&&HS(ao.fromDom(e.iframeElement))},JS=function(e){var t=e.getBody();return t&&XS(ao.fromDom(t))},QS=function(e){return e.inline?JS(e):GS(e)},ZS=function(t){var e=t.selection,n=t.settings.content_editable,r=t.getBody(),i,o=e.getRng();if(t.quirks.refreshContentEditable(),i=VS(t,e.getNode()),t.$.contains(r,i))return KS(i),YS(t,o),void eE(t);if(void 0!==t.bookmark&&false===QS(t))jk.getRng(t).each(function(e){t.selection.setRng(e),o=e});if(!n){if(!Me.opera)KS(r);t.getWin().focus()}if(Me.gecko||n)KS(r),YS(t,o);eE(t)},eE=function(e){e.editorManager.setActive(e)},tE,nE=function(e,t){if(e.removed)return;t?eE(e):ZS(e)},rE=QS,iE=function(e,t){var n;return t.dom()[e]},oE=function(e,t){return parseInt(Ra(t,e),10)},aE=b.curry(iE,"clientWidth"),sE=b.curry(iE,"clientHeight"),uE=b.curry(oE,"margin-top"),lE=b.curry(oE,"margin-left"),fE=function(e){return e.dom().getBoundingClientRect()},cE=function(e,t,n){var r=aE(e),i=sE(e);return t>=0&&n>=0&&t<=r&&n<=i},dE=function(e,t,n,r){var i=fE(t),o,a,s,u;return{x:n-(e?i.left+t.dom().clientLeft+lE(t):0),y:r-(e?i.top+t.dom().clientTop+uE(t):0)}},mE,hE=function(e){return w.from(e).map(ao.fromDom)},pE,gE={isXYInContentArea:function(e,t,n){var r=ao.fromDom(e.getBody()),i=e.inline?r:Os.documentElement(r),o=dE(e.inline,i,t,n);return cE(i,o.x,o.y)},isEditorAttachedToDom:function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return hE(t).map(function(e){return ms.contains(Os.owner(e),e)}).getOr(false)}};function vE(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}function bE(n){var r=[],i=function(){var e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():vE()},e=function(){return w.from(r[0])},o=function(e,t){return e.type===t.type&&e.text===t.text&&!e.progressBar&&!e.timeout&&!t.progressBar&&!t.timeout},a=function(){if(r.length>0)i().reposition(r)},s=function(e){r.push(e)},u=function(t){ee.findIndex(r,function(e){return e===t}).each(function(e){r.splice(e,1)})},t=function(t){if(n.removed||!gE.isEditorAttachedToDom(n))return;return ee.find(r,function(e){return o(i().getArgs(e),t)}).getOrThunk(function(){n.editorManager.setActive(n);var e=i().open(t,function(){u(e),a()});return s(e),a(),e})},l=function(){e().each(function(e){i().close(e),u(e),a()})},f=function(){return r},c,d;return(d=n).on("SkinLoaded",function(){var e=d.settings.service_message;if(e)t({text:e,type:"warning",timeout:0,icon:""})}),d.on("ResizeEditor ResizeWindow",function(){$e.requestAnimationFrame(a)}),d.on("remove",function(){ee.each(r,function(e){i().close(e)})}),{open:t,close:l,getNotifications:f}}function yE(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}function wE(r){var n=[],i=function(){var e=r.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():yE()},o=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},t=function(e){r.fire("OpenWindow",{win:e})},a=function(e){r.fire("CloseWindow",{win:e})},s=function(e){n.push(e),t(e)},u=function(t){ee.findIndex(n,function(e){return e===t}).each(function(e){if(n.splice(e,1),a(t),0===n.length)r.focus()})},e=function(){return w.from(n[n.length-1])},l=function(e,t){r.editorManager.setActive(r),jk.store(r);var n=i().open(e,t,u);return s(n),n},f=function(e,t,n){var r=i().alert(e,o(n?n:this,t),u);s(r)},c=function(e,t,n){var r=i().confirm(e,o(n?n:this,t),u);s(r)},d=function(){e().each(function(e){i().close(e),u(e)})},m=function(){return e().map(i().getParams).getOr(null)},h=function(t){e().each(function(e){i().setParams(e,t)})},p=function(){return n};return r.on("remove",function(){ee.each(n.slice(0),function(e){i().close(e)})}),{windows:n,open:l,alert:f,confirm:c,close:d,getParams:m,setParams:h,getWindows:p}}var xE=Fl.PluginManager,CE=function(e,t){for(var n in xE.urls){var r;if(xE.urls[n]+"/plugin"+t+".js"===e)return n}return null},kE=function(e,t){var n=CE(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t},SE=function(e,t){e.notificationManager.open({type:"error",text:t})},EE=function(e,t){if(e._skinLoaded)SE(e,t);else e.on("SkinLoaded",function(){SE(e,t)})},NE,_E,TE,RE={pluginLoadError:function(e,t){EE(e,kE(e,t))},uploadError:function(e,t){EE(e,"Failed to upload image: "+t)},displayError:EE,initError:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;if(r)if(r.error)r.error.apply(r,arguments);else r.log.apply(r,arguments)}},AE=Fl.PluginManager,DE=Fl.ThemeManager;function PE(){var e;return new(me.getOrDie("XMLHttpRequest"))}function BE(f,a){var n={},s=function(e,t){if(e)return e.replace(/\/$/,"")+"/"+t.replace(/^\//,"");return t},t=function(e,t,n,r){var i,o;(i=new PE).open("POST",a.url),i.withCredentials=a.credentials,i.upload.onprogress=function(e){r(e.loaded/e.total*100)},i.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+i.status)},i.onload=function(){var e;if(i.status<200||i.status>=300)return void n("HTTP Error: "+i.status);if(!(e=JSON.parse(i.responseText))||"string"!==typeof e.location)return void n("Invalid JSON: "+i.responseText);t(s(a.basePath,e.location))},(o=new FormData).append("file",e.blob(),e.filename()),i.send(o)},r=function(){return new Ie(function(e){e([])})},c=function(e,t){return{url:t,blobInfo:e,status:true}},d=function(e,t){return{url:"",blobInfo:e,status:false,error:t}},m=function(e,t){Yn.each(n[e],function(e){e(t)}),delete n[e]},i=function(s,u,l){return f.markPending(s.blobUri()),new Ie(function(t){var n,e,r=function(){};try{var i=function(){if(n)n.close(),e=r},o,a;u(s,function(e){i(),f.markUploaded(s.blobUri(),e),m(s.blobUri(),c(s,e)),t(c(s,e))},function(e){i(),f.removeFailed(s.blobUri()),m(s.blobUri(),d(s,e)),t(d(s,e))},e=function(e){if(e<0||e>100)return;if(!n)n=l();n.progressBar.value(e)})}catch(e){t(d(s,e.message))}})},o=function(e){return e===t},u=function(e){var t=e.blobUri();return new Ie(function(e){n[t]=n[t]||[],n[t].push(e)})},l=function(e,t){return e=Yn.grep(e,function(e){return!f.isUploaded(e.blobUri())}),Ie.all(Yn.map(e,function(e){return f.isPending(e.blobUri())?u(e):i(e,a.handler,t)}))},e=function(e,t){return!a.url&&o(a.handler)?r():l(e,t)};return a=Yn.extend({credentials:false,handler:t},a),{upload:e}}function OE(e,t){var n;return new(me.getOrDie("Blob"))(e,t)}function ME(){var e;return new(me.getOrDie("FileReader"))}function LE(e){var t;return new(me.getOrDie("Uint8Array"))(e)}var IE,HE,FE=function(e){var t;return me.getOrDie("atob")(e)},zE=function(e){var t;me.getOrDie("requestAnimationFrame")(e)},WE=function(i){return new Ie(function(e,t){var n=function(){t("Cannot convert "+i+" to Blob. Resource might not exist or is inaccessible.")};try{var r=new PE;r.open("GET",i,true),r.responseType="blob",r.onload=function(){if(200===this.status)e(this.response);else n()},r.onerror=n,r.send()}catch(e){n()}})},UE=function(e){var t,n;if(e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]))t=n[1];return{type:t,data:e[1]}},jE=function(i){return new Ie(function(t){var e,n,r;i=UE(i);try{e=FE(i.data)}catch(e){return void t(new OE([]))}for(n=new LE(e.length),r=0;r<n.length;r++)n[r]=e.charCodeAt(r);t(new OE([n],{type:i.type}))})},VE,$E,qE=function(e){if(0===e.indexOf("blob:"))return WE(e);if(0===e.indexOf("data:"))return jE(e);return null},YE=function(n){return new Ie(function(e){var t=new ME;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})},KE=UE,XE=0,GE=function(e){return(e||"blobid")+XE++},JE=function(n,r,i,t){var o,a;if(0===r.src.indexOf("blob:")){if(a=n.getByUri(r.src))i({image:r,blobInfo:a});else qE(r.src).then(function(t){YE(t).then(function(e){o=KE(e).data,a=n.create(GE(),t,o),n.add(a),i({image:r,blobInfo:a})})},function(e){t(e)});return}if(o=KE(r.src).data,a=n.findFirst(function(e){return e.base64()===o}))i({image:r,blobInfo:a});else qE(r.src).then(function(e){a=n.create(GE(),e,o),n.add(a),i({image:r,blobInfo:a})},function(e){t(e)})},QE=function(e){return e?e.getElementsByTagName("img"):[]};function ZE(i,o){var a={},e;return{findAll:function(e,n){var t,r;if(!n)n=Uf.constant(true);return t=On.filter(QE(e),function(e){var t=e.src;if(!Me.fileApi)return false;if(e.hasAttribute("data-mce-bogus"))return false;if(e.hasAttribute("data-mce-placeholder"))return false;if(!t||t===Me.transparentSrc)return false;if(0===t.indexOf("blob:"))return!i.isUploaded(t);if(0===t.indexOf("data:"))return n(e);return false}),r=On.map(t,function(n){var e;if(a[n.src])return new Ie(function(t){a[n.src].then(function(e){if("string"===typeof e)return e;t({image:n,blobInfo:e.blobInfo})})});return e=new Ie(function(e,t){JE(o,n,e,t)}).then(function(e){return delete a[e.image.src],e}).catch(function(e){return delete a[n.src],e}),a[n.src]=e}),Ie.all(r)}}}var eN=0,tN=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)},t;return"s"+(new Date).getTime().toString(36)+e()+e()+e()},nN,rN={uuid:function(e){return e+eN+++tN()}};function iN(){var n=[],r=Uf.constant,i=function(e){var t;return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"},e=function(e,t,n,r){return"object"===typeof e?o(e):o({id:e,name:r,blob:t,base64:n})},o=function(e){var t,n;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||rN.uuid("blobid"),n=e.name||t,{id:r(t),name:r(n),filename:r(n+"."+i(e.blob.type)),blob:r(e.blob),base64:r(e.base64),blobUri:r(e.blobUri||ve.createObjectURL(e.blob)),uri:r(e.uri)}},t=function(e){if(!a(e.id()))n.push(e)},a=function(t){return s(function(e){return e.id()===t})},s=function(e){return On.filter(n,e)[0]},u,l,f;return{create:e,add:t,get:a,getByUri:function(t){return s(function(e){return e.blobUri()===t})},findFirst:s,removeByUri:function(t){n=On.filter(n,function(e){if(e.blobUri()===t)return ve.revokeObjectURL(e.blobUri()),false;return true})},destroy:function(){On.each(n,function(e){ve.revokeObjectURL(e.blobUri())}),n=[]}}}function oN(){var t=1,n=2,r={},i=function(e,t){return{status:e,resultUri:t}},o=function(e){return e in r},e,a,s,u,l,f,c;return{hasBlobUri:o,getResultUri:function(e){var t=r[e];return t?t.resultUri:null},isPending:function(e){return o(e)?r[e].status===t:false},isUploaded:function(e){return o(e)?r[e].status===n:false},markPending:function(e){r[e]=i(t,null)},markUploaded:function(e,t){r[e]=i(n,t)},removeFailed:function(e){delete r[e]},destroy:function(){r={}}}}function aN(i){var o=iN(),t,e,r=i.settings,a=oN(),s=function(t){return function(e){if(i.selection)return t(e);return[]}},n=function(){return"?"+(new Date).getTime()},u=function(e,t,n){var r=0;do{if(-1!==(r=e.indexOf(t,r)))e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1}while(-1!==r);return e},l=function(e,t,n){return e=u(e,'src="'+t+'"','src="'+n+'"'),e=u(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},f=function(t,n){On.each(i.undoManager.data,function(e){if("fragmented"===e.type)e.fragments=On.map(e.fragments,function(e){return l(e,t,n)});else e.content=l(e.content,t,n)})},c=function(){return i.notificationManager.open({text:i.translate("Image uploading..."),type:"info",timeout:-1,progressBar:true})},d=function(e,t){o.removeByUri(e.src),f(e.src,t),i.$(e).attr({src:r.images_reuse_filename?t+n():t,"data-mce-src":i.convertURL(t,"src")})},m=function(n){if(!t)t=BE(a,{url:r.images_upload_url,basePath:r.images_upload_base_path,credentials:r.images_upload_credentials,handler:r.images_upload_handler});return g().then(s(function(r){var e;return e=On.map(r,function(e){return e.blobInfo}),t.upload(e,c).then(s(function(e){var t=On.map(e,function(e,t){var n=r[t].image;if(e.status&&false!==i.settings.images_replace_blob_uris)d(n,e.url);else if(e.error)RE.uploadError(i,e.error);return{element:n,status:e.status}});if(n)n(t);return t}))}))},h=function(e){if(false!==r.automatic_uploads)return m(e)},p=function(e){return r.images_dataimg_filter?r.images_dataimg_filter(e):true},g=function(){if(!e)e=ZE(a,o);return e.findAll(i.getBody(),p).then(s(function(e){return e=On.filter(e,function(e){if("string"===typeof e)return RE.displayError(i,e),false;return true}),On.each(e,function(e){f(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}))},v=function(){o.destroy(),a.destroy(),e=t=null},b=function(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var t=a.getResultUri(n);if(t)return'src="'+t+'"';var r=o.getByUri(n);if(!r)r=On.reduce(i.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null);if(r)return'src="data:'+r.blob().type+";base64,"+r.base64()+'"';return e})};return i.on("setContent",function(){if(false!==i.settings.automatic_uploads)h();else g()}),i.on("RawSaveContent",function(e){e.content=b(e.content)}),i.on("getContent",function(e){if(e.source_view||"raw"===e.format)return;e.content=b(e.content)}),i.on("PostRender",function(){i.parser.addNodeFilter("img",function(e){On.each(e,function(e){var t=e.attr("src");if(o.getByUri(t))return;var n=a.getResultUri(t);if(n)e.attr("src",n)})})}),{blobCache:o,uploadImages:m,uploadImagesAuto:h,scanForImages:g,destroy:v}}var sN=function(e,t){return e.hasOwnProperty(t.nodeName)},uN=function(e,t){if(Wu.isText(t))return true;else if(Wu.isElement(t))return!sN(e,t)&&!hp.isBookmarkNode(t);else return false},lN=function(t,e,n){return ee.exists(ob(ao.fromDom(n),ao.fromDom(e)),function(e){return sN(t,e.dom())})},fN=function(e,t){if(Wu.isText(t))if(0===t.nodeValue.length)return true;else if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||sN(e,t.nextSibling)))return true;return false},cN=function(e){var t=e.settings,n=e.dom,r=e.selection,i=e.schema,o=i.getBlockElements(),a=r.getStart(),s=e.getBody(),u,l,f,c,d,m,h,p,g,v,b;if(b=t.forced_root_block,!a||!Wu.isElement(a)||!b)return;if(v=s.nodeName.toLowerCase(),!i.isValidChild(v,b.toLowerCase())||lN(o,s,a))return;l=(u=r.getRng()).startContainer,f=u.startOffset,c=u.endContainer,d=u.endOffset,g=rE(e),a=s.firstChild;while(a)if(uN(o,a)){if(fN(o,a)){a=(h=a).nextSibling,n.remove(h);continue}if(!m)m=n.create(b,e.settings.forced_root_block_attrs),a.parentNode.insertBefore(m,a),p=true;a=(h=a).nextSibling,m.appendChild(h)}else m=null,a=a.nextSibling;if(p&&g)u.setStart(l,f),u.setEnd(c,d),r.setRng(u),e.nodeChanged()},dN,mN=function(e){if(e.settings.forced_root_block)e.on("NodeChange",b.curry(cN,e))};function hN(o){var r,i=[],t=function(e){var t,n;if((n=o.$(e).parentsUntil(o.getBody()).add(e)).length===i.length){for(t=n.length;t>=0;t--)if(n[t]!==i[t])break;if(-1===t)return i=n,true}return i=n,false};if(!("onselectionchange"in o.getDoc()))o.on("NodeChange Click MouseUp KeyUp Focus",function(e){var t,n;if(n={startContainer:(t=o.selection.getRng()).startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset},"nodechange"===e.type||!FC.isEq(n,r))o.fire("SelectionChange");r=n});o.on("contextmenu",function(){o.fire("SelectionChange")}),o.on("SelectionChange",function(){var e=o.selection.getStart(true);if(!e||!Me.range&&o.selection.isCollapsed())return;if(!t(e)&&o.dom.isChildOf(e,o.getBody()))o.nodeChanged({selectionChange:true})}),o.on("MouseUp",function(e){if(!e.isDefaultPrevented())if("IMG"===o.selection.getNode().nodeName)$e.setEditorTimeout(o,function(){o.nodeChanged()});else o.nodeChanged()}),this.nodeChanged=function(e){var t=o.selection,n,r,i;if(o.initialized&&t&&!o.settings.disable_nodechange&&!o.readonly){if(i=o.getBody(),(n=t.getStart(true)||i).ownerDocument!==o.getDoc()||!o.dom.isChildOf(n,i))n=i;r=[],o.dom.getParent(n,function(e){if(e===i)return true;r.push(e)}),(e=e||{}).element=n,e.parents=r,o.fire("NodeChange",e)}}}var pN=function(e){var t,n,r,i;return i=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}},gN=function(e){return e.inline?pN(e.getBody()):{left:0,top:0}},vN=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},bN=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i},yN=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=pN(e.getContentAreaContainer()),r=bN(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}},wN=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},xN,CN=function(e,t){return wN(gN(e),vN(e),yN(e,t))},kN=Wu.isContentEditableFalse,SN=Wu.isContentEditableTrue,EN=function(e,t){return kN(t)&&t!==e},NN=function(e,t,n){if(t===n||e.dom.isChildOf(t,n))return false;if(kN(t))return false;return true},_N=function(e){var t=e.cloneNode(true);return t.removeAttribute("data-mce-selected"),t},TN=function(e,t,n,r){var i=t.cloneNode(true);e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null);var o=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o},RN=function(e,t){if(e.parentNode!==t)t.appendChild(e)},AN=function(e,t,n,r,i,o){var a=0,s=0;if(e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>i)a=t.pageX+n-i;if(t.pageY+r>o)s=t.pageY+r-o;e.style.width=n-a+"px",e.style.height=r-s+"px"},DN=function(e){if(e&&e.parentNode)e.parentNode.removeChild(e)},PN=function(e){return 0===e.button},BN=function(e){return e.element},ON=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},MN=function(o,a){return function(e){if(PN(e)){var t=On.find(a.dom.getParents(e.target),Uf.or(kN,SN));if(EN(a.getBody(),t)){var n=a.dom.getPos(t),r=a.getBody(),i=a.getDoc().documentElement;o.element=t,o.screenX=e.screenX,o.screenY=e.screenY,o.maxX=(a.inline?r.scrollWidth:i.offsetWidth)-2,o.maxY=(a.inline?r.scrollHeight:i.offsetHeight)-2,o.relX=e.pageX-n.x,o.relY=e.pageY-n.y,o.width=t.offsetWidth,o.height=t.offsetHeight,o.ghost=TN(a,t,o.width,o.height)}}}},LN=function(i,o){var a=$e.throttle(function(e,t){o._selectionOverrides.hideFakeCaret(),o.selection.placeCaretAt(e,t)},0);return function(e){var t=Math.max(Math.abs(e.screenX-i.screenX),Math.abs(e.screenY-i.screenY));if(BN(i)&&!i.dragging&&t>10){var n;if(o.fire("dragstart",{target:i.element}).isDefaultPrevented())return;i.dragging=true,o.focus()}if(i.dragging){var r=ON(i,CN(o,e));RN(i.ghost,o.getBody()),AN(i.ghost,r,i.width,i.height,i.maxX,i.maxY),a(e.clientX,e.clientY)}}},IN=function(e){var t,n=e.getSel().getRangeAt(0).startContainer;return 3===n.nodeType?n.parentNode:n},HN=function(r,i){return function(e){if(r.dragging)if(NN(i,IN(i.selection),r.element)){var t=_N(r.element),n=i.fire("drop",{targetClone:t,clientX:e.clientX,clientY:e.clientY});if(!n.isDefaultPrevented())t=n.targetClone,i.undoManager.transact(function(){DN(r.element),i.insertContent(i.dom.getOuterHTML(t)),i._selectionOverrides.hideFakeCaret()})}zN(r)}},FN=function(e,t){return function(){if(zN(e),e.dragging)t.fire("dragend")}},zN=function(e){e.dragging=false,e.element=null,DN(e.ghost)},WN=function(e){var t={},n,r,i,o,a,s;n=Pl.DOM,s=document,r=MN(t,e),i=LN(t,e),o=HN(t,e),a=FN(t,e),e.on("mousedown",r),e.on("mousemove",i),e.on("mouseup",o),n.bind(s,"mousemove",i),n.bind(s,"mouseup",a),e.on("remove",function(){n.unbind(s,"mousemove",i),n.unbind(s,"mouseup",a)})},UN=function(n){n.on("drop",function(e){var t="undefined"!==typeof e.clientX?n.getDoc().elementFromPoint(e.clientX,e.clientY):null;if(kN(t)||kN(n.dom.getContentEditableParent(t)))e.preventDefault()})},jN,VN=function(e){WN(e),UN(e)},$N=function(t){var e=function(e){return On.map(e,function(e){return(e=kf(e)).node=t,e})};if(Wu.isElement(t))return e(t.getClientRects());if(Wu.isText(t)){var n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}},qN=function(e){return On.reduce(e,function(e,t){return e.concat($N(t))},[])},YN,KN;(KN=YN||(YN={}))[KN["Up"]=-1]="Up",KN[KN["Down"]=1]="Down";var XN=function(e,t,n,r){while(r=wm(r,e,xf,t))if(n(r))return},GN=function(i,o,a,e,s,t){var u=0,n,l=[],f,r=function(e){var t,n,r;if(r=qN([e]),-1===i)r=r.reverse();for(t=0;t<r.length;t++){if(n=r[t],a(n,f))continue;if(l.length>0&&o(n,On.last(l)))u++;if(n.line=u,s(n))return true;l.push(n)}};if(!(f=On.last(t.getClientRects())))return l;return r(n=t.getNode()),XN(i,e,r,n),l},JN=function(e,t){return t.line>e},QN=function(e,t){return t.line===e},ZN=b.curry(GN,YN.Up,_f,Tf),e_=b.curry(GN,YN.Down,Tf,_f),t_=function(t,e,n,r){var i=Qm(e),o,a,s,u,l=[],f=0,c,d,m=function(e){if(1===t)return On.last(e.getClientRects());return On.last(e.getClientRects())};if(1===t)o=i.next,a=Tf,s=_f,u=cc.after(r);else o=i.prev,a=_f,s=Tf,u=cc.before(r);d=m(u);do{if(!u.isVisible())continue;if(s(c=m(u),d))continue;if(l.length>0&&a(c,On.last(l)))f++;if((c=kf(c)).position=u,c.line=f,n(c))return l;l.push(c)}while(u=o(u));return l},n_=function(t){return function(e){return JN(t,e)}},r_=function(t){return function(e){return QN(t,e)}},i_=Wu.isContentEditableFalse,o_=wm,a_=function(e,t){return Math.abs(e.left-t)},s_=function(e,t){return Math.abs(e.right-t)},u_=function(e,t){return e>=t.left&&e<=t.right},l_=function(e,i){return On.reduce(e,function(e,t){var n,r;if(n=Math.min(a_(e,i),s_(e,i)),r=Math.min(a_(t,i),s_(t,i)),u_(i,t))return t;if(u_(i,e))return e;if(r===n&&i_(t.node))return t;if(r<n)return t;return e})},f_=function(e,t,n,r){while(r=o_(r,e,xf,t))if(n(r))return},c_=function(e,r){var i=[],t=function(t,e){var n;return n=On.filter(qN([e]),function(e){return!t(e,r)}),i=i.concat(n),0===n.length};return i.push(r),f_(YN.Up,e,b.curry(t,_f),r.node),f_(YN.Down,e,b.curry(t,Tf),r.node),i},d_=function(e){return On.filter(On.toArray(e.getElementsByTagName("*")),lm)},m_=function(e,t){return{node:e.node,before:a_(e,t)<s_(e,t)}},h_=function(e,t,n){var r,i=qN(d_(e)),o=On.filter(i,function(e){return n>=e.top&&n<=e.bottom});if(r=l_(o,t))if((r=l_(c_(e,r),t))&&lm(r.node))return m_(r,t);return null},p_,g_=function(n,r,e){if(e.collapsed)return false;return ee.foldl(e.getClientRects(),function(e,t){return e||Rf(t,n,r)},false)},v_,b_,y_,w_=function(e,t){var n=null,r=null,i,o;return{cancel:function(){if(null!==n)clearTimeout(n),r=n=null},throttle:function(){if(r=arguments,null===n)n=setTimeout(function(){e.apply(null,r),r=n=null},t)}}},x_=function(t,n){var r=null,e,i;return{cancel:function(){if(null!==r)clearTimeout(r),r=null},throttle:function(){var e=arguments;if(null===r)r=setTimeout(function(){t.apply(null,e),e=r=null},n)}}},C_=function(t,n){var r=null,e,i;return{cancel:function(){if(null!==r)clearTimeout(r),r=null},throttle:function(){var e=arguments;if(null!==r)clearTimeout(r);r=setTimeout(function(){t.apply(null,e),e=r=null},n)}}},k_,S_=function(n){var e=x_(function(){if(!n.removed){var e;if(n.selection.getRng().collapsed){var t=jc(n,n.selection.getRng());n.selection.setRng(t)}}},0);n.on("focus",function(){e.throttle()}),n.on("blur",function(){e.cancel()})},E_={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return Me.mac?e.metaKey:e.ctrlKey&&!e.altKey}},N_=Wu.isContentEditableTrue,__=Wu.isContentEditableFalse,T_=Mm,R_=Om,A_=function(h){var e=function(e){return h.dom.isBlock(e)},u=h.getBody(),i=um(h.getBody(),e),p="sel-"+h.dom.uniqueId(),g,l=function(e){return h.dom.hasClass(e,"mce-offscreen-selection")},f=function(){var e=h.dom.get(p);return e?e.getElementsByTagName("*")[0]:e},c=function(e){if(e)h.selection.setRng(e)},d=function(){return h.selection.getRng()},o=function(e,t){h.selection.scrollIntoView(e,t)},v=function(e,t,n){var r;if((r=h.fire("ShowCaret",{target:t,direction:e,before:n})).isDefaultPrevented())return null;return o(t,-1===e),i.show(n,t)},b=function(e,t){if(t=Rm(e,u,t),-1===e)return cc.fromRangeStart(t);return cc.fromRangeEnd(t)},t=function(e){if(e.hasAttribute("data-mce-caret"))sf(e),c(d()),o(e[0])},n=function(){var i=function(e){var t=h.getBody();while(e&&e!==t){if(N_(e)||__(e))return e;e=e.parentNode}return null};h.on("mouseup",function(e){var t=d();if(t.collapsed&&gE.isXYInContentArea(h,e.clientX,e.clientY))c(Uc(h,t))}),h.on("click",function(e){var t;if(t=i(e.target)){if(__(t))e.preventDefault(),h.focus();if(N_(t))if(h.dom.isChildOf(t,h.selection.getNode()))w()}}),h.on("blur NewBlock",function(){w()});var e,o=function(e){var t=Qm(e);if(!e.firstChild)return false;var n=cc.before(e.firstChild),r=t.next(n);return r&&!R_(r)&&!T_(r)},a=function(e,t){var n,r;return h.dom.getParent(e,h.dom.isBlock)===h.dom.getParent(t,h.dom.isBlock)},s=function(e,t){var n=h.dom.getParent(e,h.dom.isBlock),r=h.dom.getParent(t,h.dom.isBlock);return n&&!a(n,r)&&o(n)},n,r;r=false,(n=h).on("touchstart",function(){r=false}),n.on("touchmove",function(){r=true}),n.on("touchend",function(e){var t=i(e.target);if(__(t))if(!r)e.preventDefault(),m(Wc(n,t))}),h.on("mousedown",function(e){var t,n=e.target;if(n!==u&&"HTML"!==n.nodeName&&!h.dom.isChildOf(n,u))return;if(false===gE.isXYInContentArea(h,e.clientX,e.clientY))return;if(t=i(n)){if(__(t))e.preventDefault(),m(Wc(h,t));else if(w(),!(N_(t)&&e.shiftKey)&&!g_(e.clientX,e.clientY,h.selection.getRng()))h.selection.placeCaretAt(e.clientX,e.clientY)}else if(false===lm(n)){w(),x();var r=h_(u,e.clientX,e.clientY);if(r)if(!s(e.target,r.node))e.preventDefault(),h.getBody().focus(),c(v(1,r.node,r.before))}}),h.on("keypress",function(e){if(E_.modifierPressed(e))return;if(e.keyCode,__(h.selection.getNode()))e.preventDefault()}),h.on("getSelectionRange",function(e){var t=e.range;if(g){if(!g.parentNode)return void(g=null);(t=t.cloneRange()).selectNode(g),e.range=t}}),h.on("setSelectionRange",function(e){var t;if(t=m(e.range,e.forward))e.range=t}),h.on("AfterSetSelectionRange",function(e){var t=e.range;if(!y(t))x();if(!l(t.startContainer.parentNode))w()}),h.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!Me.ie){var n=f();if(n)e.preventDefault(),t.clearData(),t.setData("text/html",n.outerHTML),t.setData("text/plain",n.outerText)}}),VN(h),S_(h)},r=function(){var e=h.contentStyles,t=".mce-content-body";e.push(i.getCss()),e.push(t+" .mce-offscreen-selection {"+"position: absolute;"+"left: -9999999999px;"+"max-width: 1000000px;"+"}"+t+" *[contentEditable=false] {"+"cursor: default;"+"}"+t+" *[contentEditable=true] {"+"cursor: text;"+"}")},a=function(e){return Gl(e)||rf(e)||of(e)},y=function(e){return a(e.startContainer)||a(e.endContainer)},m=function(e,t){var n,r=h.$,i=h.dom,o,a,s,u,l,f,c,d,m;if(!e)return null;if(e.collapsed){if(!y(e))if(false===t){if(c=b(-1,e),lm(c.getNode(true)))return v(-1,c.getNode(true),false);if(lm(c.getNode()))return v(-1,c.getNode(),!c.isAtEnd())}else{if(c=b(1,e),lm(c.getNode()))return v(1,c.getNode(),!c.isAtEnd());if(lm(c.getNode(true)))return v(1,c.getNode(true),false)}return null}if(s=e.startContainer,u=e.startOffset,l=e.endOffset,3===s.nodeType&&0===u&&__(s.parentNode))s=s.parentNode,u=i.nodeIndex(s),s=s.parentNode;if(1!==s.nodeType)return null;if(l===u+1)n=s.childNodes[u];if(!__(n))return null;if(d=m=n.cloneNode(true),(f=h.fire("ObjectSelected",{target:n,targetClone:d})).isDefaultPrevented())return null;if(o=wv(ao.fromDom(h.getBody()),"#"+p).fold(function(){return r([])},function(e){return r([e.dom()])}),d=f.targetClone,0===o.length)(o=r('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",p)).appendTo(h.getBody());if(e=h.dom.createRng(),d===m&&Me.ie)o.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(d),e.setStartAfter(o[0].firstChild.firstChild),e.setEndAfter(d);else o.empty().append(" ").append(d).append(" "),e.setStart(o[0].firstChild,1),e.setEnd(o[0].lastChild,0);return o.css({top:i.getPos(n,h.getBody()).y}),o[0].focus(),(a=h.selection.getSel()).removeAllRanges(),a.addRange(e),ee.each(Pd(ao.fromDom(h.getBody()),"*[data-mce-selected]"),function(e){ea.remove(e,"data-mce-selected")}),n.setAttribute("data-mce-selected","1"),g=n,x(),e},w=function(){if(g)g.removeAttribute("data-mce-selected"),wv(ao.fromDom(h.getBody()),"#"+p).each(Mp.remove),g=null},s=function(){i.destroy(),g=null},x=function(){i.hide()};if(Me.ceFalse)n(),r();return{showCaret:v,showBlockCaretContainer:t,hideFakeCaret:x,destroy:s}},D_=Yn.each,P_=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},B_=function(e){return e.replace(/<!--|-->/g,"")},O_=function(e,t,n){var r=1,i,o,a,s;s=e.getShortEndedElements(),(a=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=i=n;while(o=a.exec(t)){if(i=a.lastIndex,"/"===o[1])r--;else if(!o[1]){if(o[2]in s)continue;r++}if(0===r)break}return i},M_;function L_(z,W){if(void 0===W)W=wl();var t=function(){};if(false!==(z=z||{}).fix_self_closing)z.fix_self_closing=true;D_("comment cdata text start end pi doctype".split(" "),function(e){if(e)self[e]=z[e]||t});var U=z.comment?z.comment:t,j=z.cdata?z.cdata:t,V=z.text?z.text:t,$=z.start?z.start:t,q=z.end?z.end:t,Y=z.pi?z.pi:t,K=z.doctype?z.doctype:t,e;return{parse:function(e){var t,n=0,r,i,o=[],l,a,s,u,f,c,d,m,h,p,g,v,b,y,w,x,C,k,S,E,N,_,T,R,A,D,P=0,B=ll.decode,O,M=Yn.makeMap("src,href,data,background,formaction,poster"),L=/((java|vb)script|mhtml):/i,I=/^data:/i,H=function(e){var t,n;t=o.length;while(t--)if(o[t].name===e)break;if(t>=0){for(n=o.length-1;n>=t;n--)if((e=o[n]).valid)q(e.name);o.length=t}},F=function(e,t,n,r,i){var o,a,s=/[\s\u0000-\u001F]+/g;if(n=(t=t.toLowerCase())in m?t:B(n||r||i||""),p&&!f&&false===P_(t)){if(!(o=w[t])&&x){a=x.length;while(a--)if((o=x[a]).pattern.test(t))break;if(-1===a)o=null}if(!o)return;if(o.validValues&&!(n in o.validValues))return}if(M[t]&&!z.allow_script_urls){var u=n.replace(s,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if(L.test(u))return;if(!z.allow_html_data_urls&&I.test(u)&&!/^data:image\//i.test(u))return}if(f&&(t in M||0===t.indexOf("on")))return;l.map[t]=n,l.push({name:t,value:n})};T=new RegExp("<(?:"+"(?:!--([\\w\\W]*?)--\x3e)|"+"(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|"+"(?:!DOCTYPE([\\w\\W]*?)>)|"+"(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|"+"(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|"+"(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>)"+")","g"),R=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,d=W.getShortEndedElements(),_=z.self_closing_elements||W.getSelfClosingElements(),m=W.getBoolAttrs(),p=z.validate,c=z.remove_internals,O=z.fix_self_closing,A=W.getSpecialElements(),E=e+">";while(t=T.exec(E)){if(n<t.index)V(B(e.substr(n,t.index-n)));if(r=t[6]){if(":"===(r=r.toLowerCase()).charAt(0))r=r.substr(1);H(r)}else if(r=t[7]){if(t.index+t[0].length>e.length){V(B(e.substr(t.index))),n=t.index+t[0].length;continue}if(":"===(r=r.toLowerCase()).charAt(0))r=r.substr(1);if(h=r in d,O&&_[r]&&o.length>0&&o[o.length-1].name===r)H(r);if(!p||(g=W.getElementRule(r))){if(v=true,p)w=g.attributes,x=g.attributePatterns;if(y=t[8]){if((f=-1!==y.indexOf("data-mce-type"))&&c)v=false;(l=[]).map={},y.replace(R,F)}else(l=[]).map={};if(p&&!f){if(C=g.attributesRequired,k=g.attributesDefault,S=g.attributesForced,(N=g.removeEmptyAttrs)&&!l.length)v=false;if(S){a=S.length;while(a--){if(u=(b=S[a]).name,"{$uid}"===(D=b.value))D="mce_"+P++;l.map[u]=D,l.push({name:u,value:D})}}if(k){a=k.length;while(a--)if(!((u=(b=k[a]).name)in l.map)){if("{$uid}"===(D=b.value))D="mce_"+P++;l.map[u]=D,l.push({name:u,value:D})}}if(C){a=C.length;while(a--)if(C[a]in l.map)break;if(-1===a)v=false}if(b=l.map["data-mce-bogus"]){if("all"===b){n=O_(W,e,T.lastIndex),T.lastIndex=n;continue}v=false}}if(v)$(r,l,h)}else v=false;if(i=A[r]){if(i.lastIndex=n=t.index+t[0].length,t=i.exec(e)){if(v)s=e.substr(n,t.index-n);n=t.index+t[0].length}else s=e.substr(n),n=e.length;if(v){if(s.length>0)V(s,true);q(r)}T.lastIndex=n;continue}if(!h)if(!y||y.indexOf("/")!==y.length-1)o.push({name:r,valid:v});else if(v)q(r)}else if(r=t[1]){if(">"===r.charAt(0))r=" "+r;if(!z.allow_conditional_comments&&"[if"===r.substr(0,3).toLowerCase())r=" "+r;U(r)}else if(r=t[2])j(B_(r));else if(r=t[3])K(r);else if(r=t[4])Y(r,t[5]);n=t.index+t[0].length}if(n<e.length)V(B(e.substr(n)));for(a=o.length-1;a>=0;a--)if((r=o[a]).valid)q(r.name)}}}(M_=L_||(L_={})).findEndTag=O_;var I_=L_,H_=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},F_=function(e,t){var n=t,r=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,i,o,a,s,u,l=e.schema;n=H_(e.getTempAttrs(),n),u=l.getShortEndedElements();while(s=r.exec(n)){if(o=r.lastIndex,a=s[0].length,u[s[1]])i=o;else i=I_.findEndTag(l,n,o);n=n.substring(0,o-a)+n.substring(i),r.lastIndex=o-a}return n},z_,W_=function(e,t){return $l(F_(e,t))},U_=F_,j_=0,V_=1,$_=2,q_,Y_=j_,K_=$_,X_=V_,G_=function(h,p){var e=h.length+p.length+2,g=new Array(e),v=new Array(e),o=function(e,t,n){return{start:e,end:t,diag:n}},l=function(e,t,n,r,i){var o=f(e,t,n,r);if(null===o||o.start===t&&o.diag===t-r||o.end===e&&o.diag===e-n){var a=e,s=n;while(a<t||s<r)if(a<t&&s<r&&h[a]===p[s])i.push([j_,h[a]]),++a,++s;else if(t-e>r-n)i.push([$_,h[a]]),++a;else i.push([V_,p[s]]),++s}else{l(e,o.start,n,o.start-o.diag,i);for(var u=o.start;u<o.end;++u)i.push([j_,h[u]]);l(o.end,t,o.end-o.diag,r,i)}},b=function(e,t,n,r){var i=e;while(i-t<r&&i<n&&h[i]===p[i-t])++i;return o(e,i,t)},f=function(e,t,n,r){var i=t-e,o=r-n;if(0===i||0===o)return null;var a=i-o,s=o+i,u=(s%2===0?s:s+1)/2,l,f,c,d,m;for(g[1+u]=e,v[1+u]=t+1,l=0;l<=u;++l){for(f=-l;f<=l;f+=2){if(c=f+u,f===-l||f!==l&&g[c-1]<g[c+1])g[c]=g[c+1];else g[c]=g[c-1]+1;m=(d=g[c])-e+n-f;while(d<t&&m<r&&h[d]===p[m])g[c]=++d,++m;if(a%2!==0&&a-l<=f&&f<=a+l)if(v[c-a]<=g[c])return b(v[c-a],f+e-n,t,r)}for(f=a-l;f<=a+l;f+=2){if(c=f+u-a,f===a-l||f!==a+l&&v[c+1]<=v[c-1])v[c]=v[c+1]-1;else v[c]=v[c-1];m=(d=v[c]-1)-e+n-f;while(d>=e&&m>=n&&h[d]===p[m])v[c]=d--,m--;if(a%2===0&&-l<=f&&f<=l)if(v[c]<=g[c+a])return b(v[c],f+e-n,t,r)}}},t=[];return l(0,h.length,0,p.length,t),t},J_=function(e){if(1===e.nodeType)return e.outerHTML;else if(3===e.nodeType)return ll.encodeRaw(e.data,false);else if(8===e.nodeType)return"\x3c!--"+e.data+"--\x3e";return""},Q_=function(e){var t,n,r;if(r=document.createElement("div"),t=document.createDocumentFragment(),e)r.innerHTML=e;while(n=r.firstChild)t.appendChild(n);return t},Z_=function(e,t,n){var r=Q_(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else e.appendChild(r)},eT=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},tT=function(e,t){var n=0;On.each(e,function(e){if(e[0]===Y_)n++;else if(e[0]===X_)Z_(t,e[1],n),n++;else if(e[0]===K_)eT(t,n)})},nT,rT,iT=function(e){return On.filter(On.map(e.childNodes,J_),function(e){return e.length>0})},oT=function(e,t){var n=On.map(t.childNodes,J_);return tT(G_(n,e),t),t},aT=function(e){return-1!==e.indexOf("</iframe>")},sT=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},uT=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},lT,fT,cT=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},dT,mT={createFragmentedLevel:sT,createCompleteLevel:uT,createFromEditor:function(n){var e,t,r;return e=iT(n.getBody()),t=(r=ee.bind(e,function(e){var t=U_(n.serializer,e);return t.length>0?[t]:[]})).join(""),aT(t)?sT(r):uT(t)},applyToEditor:function(e,t,n){if("fragmented"===t.type)oT(t.fragments,e.getBody());else e.setContent(t.content,{format:"raw"});e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},isEq:function(e,t){return!!e&&!!t&&cT(e)===cT(t)}};function hT(s){var i=this,u=0,l=[],f,r,t=0,c=function(){return 0===t},o=function(e){if(c())i.typing=e},d=function(e){s.setDirty(e)},a=function(e){o(false),i.add({},e)},n=function(){if(i.typing)o(false),i.add()};return s.on("init",function(){i.add()}),s.on("BeforeExecCommand",function(e){var t=e.command;if("Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t)n(),i.beforeChange()}),s.on("ExecCommand",function(e){var t=e.command;if("Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t)a(e)}),s.on("ObjectResizeStart Cut",function(){i.beforeChange()}),s.on("SaveContent ObjectResized blur",a),s.on("DragEnd",a),s.on("KeyUp",function(e){var t=e.keyCode;if(e.isDefaultPrevented())return;if(t>=33&&t<=36||t>=37&&t<=40||45===t||e.ctrlKey)a(),s.nodeChanged();if(46===t||8===t)s.nodeChanged();if(r&&i.typing&&false===mT.isEq(mT.createFromEditor(s),l[0])){if(false===s.isDirty())d(true),s.fire("change",{level:l[0],lastLevel:null});s.fire("TypingUndo"),r=false,s.nodeChanged()}}),s.on("KeyDown",function(e){var t=e.keyCode;if(e.isDefaultPrevented())return;if(t>=33&&t<=36||t>=37&&t<=40||45===t){if(i.typing)a(e);return}var n=e.ctrlKey&&!e.altKey||e.metaKey;if((t<16||t>20)&&224!==t&&91!==t&&!i.typing&&!n)i.beforeChange(),o(true),i.add({},e),r=true}),s.on("MouseDown",function(e){if(i.typing)a(e)}),s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),s.on("AddUndo Undo Redo ClearUndos",function(e){if(!e.isDefaultPrevented())s.nodeChanged()}),i={data:l,typing:false,beforeChange:function(){if(c())f=ep.getUndoBookmark(s.selection)},add:function(e,t){var n,r=s.settings,i,o;if(o=mT.createFromEditor(s),e=e||{},e=Yn.extend(e,o),false===c()||s.removed)return null;if(i=l[u],s.fire("BeforeAddUndo",{level:e,lastLevel:i,originalEvent:t}).isDefaultPrevented())return null;if(i&&mT.isEq(i,e))return null;if(l[u])l[u].beforeBookmark=f;if(r.custom_undo_redo_levels)if(l.length>r.custom_undo_redo_levels){for(n=0;n<l.length-1;n++)l[n]=l[n+1];l.length--,u=l.length}if(e.bookmark=ep.getUndoBookmark(s.selection),u<l.length-1)l.length=u+1;l.push(e),u=l.length-1;var a={level:e,lastLevel:i,originalEvent:t};if(s.fire("AddUndo",a),u>0)d(true),s.fire("change",a);return e},undo:function(){var e;if(i.typing)i.add(),i.typing=false,o(false);if(u>0)e=l[--u],mT.applyToEditor(s,e,true),d(true),s.fire("undo",{level:e});return e},redo:function(){var e;if(u<l.length-1)e=l[++u],mT.applyToEditor(s,e,false),d(true),s.fire("redo",{level:e});return e},clear:function(){l=[],u=0,i.typing=false,i.data=l,s.fire("ClearUndos")},hasUndo:function(){return u>0||i.typing&&l[0]&&!mT.isEq(mT.createFromEditor(s),l[0])},hasRedo:function(){return u<l.length-1&&!i.typing},transact:function(e){return n(),i.beforeChange(),i.ignore(e),i.add()},ignore:function(e){try{t++,e()}finally{t--}},extra:function(e,t){var n,r;if(i.transact(e))if(r=l[u].bookmark,n=l[u-1],mT.applyToEditor(s,n,true),i.transact(t))l[u-1].beforeBookmark=r}}}var pT={},gT=On.filter,vT=On.each,bT,yT=function(e,t){vT(pT[e],function(e){e(t)})};(function(e,t){var n=pT[e];if(!n)pT[e]=n=[];pT[e].push(t)})("pre",function(e){var t=e.selection.getRng(),n,r,i=function(e){return n(e.previousSibling)&&-1!==On.indexOf(r,e.previousSibling)},o=function(e,t){mr(t).remove(),mr(e).append("<br><br>").append(t.childNodes)};if(n=Wu.matchNodeNames("pre"),!t.collapsed)r=e.selection.getSelectedBlocks(),vT(gT(gT(r,n),i),function(e){o(e.previousSibling,e)})});var wT=yT,xT=Yn.each,CT=function(e,t){var n=e.childNodes;if(--t>n.length-1)t=n.length-1;else if(t<0)t=0;return n[t]||e},kT,ST={walk:function(e,t,i){var n=t.startContainer,r=t.startOffset,o=t.endContainer,a=t.endOffset,s,u,l,f,c,d,m;if((m=e.select("td[data-mce-selected],th[data-mce-selected]")).length>0)return void xT(m,function(e){i([e])});var h=function(e){var t;if(3===(t=e[0]).nodeType&&t===n&&r>=t.nodeValue.length)e.splice(0,1);if(t=e[e.length-1],0===a&&e.length>0&&t===o&&3===t.nodeType)e.splice(e.length-1,1);return e},p=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},g=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},v=function(e,t,n){var r=n?"nextSibling":"previousSibling";for(c=(f=e).parentNode;f&&f!==t;f=c)if(c=f.parentNode,(d=p(f===e?f:f[r],r)).length){if(!n)d.reverse();i(h(d))}};if(1===n.nodeType&&n.hasChildNodes())n=n.childNodes[r];if(1===o.nodeType&&o.hasChildNodes())o=CT(o,a);if(n===o)return i(h([n]));for(s=e.findCommonAncestor(n,o),f=n;f;f=f.parentNode){if(f===o)return v(n,s,true);if(f===s)break}for(f=o;f;f=f.parentNode){if(f===n)return v(o,s);if(f===s)break}if(u=g(n,s)||n,l=g(o,s)||o,v(n,u,true),(d=p(u===n?u:u.nextSibling,"nextSibling",l===o?l.nextSibling:l)).length)i(h(d));v(o,l)}},ET=/^(src|href|style)$/,NT=Yn.each,_T=Fy.isEq,TT=function(e){return/^(TH|TD)$/.test(e.nodeName)},RT=function(e,t,n){var r,i,o;if(r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],Wu.isElement(r)){if(o=r.childNodes.length-1,!n&&i)i--;r=r.childNodes[i>o?o:i]}if(Wu.isText(r)&&n&&i>=r.nodeValue.length)r=new iu(r,e.getBody()).next()||r;if(Wu.isText(r)&&!n&&0===i)r=new iu(r,e.getBody()).prev()||r;return r},AT=function(e,t,n,r){var i=e.create(n,r);return t.parentNode.insertBefore(i,t),i.appendChild(t),i},DT=function(e,t,n){if(_T(t,n.inline))return true;if(_T(t,n.block))return true;if(n.selector)return Wu.isElement(t)&&e.is(t,n.selector)},PT=function(e,t){return t.links&&"A"===e.tagName},BT=function(e,t,n,r){return!(t=Fy.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},OT=function(t,e,n){var r=e.parentNode,i,o=t.dom,a=t.settings.forced_root_block;if(n.block)if(!a){if(o.isBlock(e)&&!o.isBlock(r)){if(!BT(o,e,false)&&!BT(o,e.firstChild,true,1))e.insertBefore(o.create("br"),e.firstChild);if(!BT(o,e,true)&&!BT(o,e.lastChild,false,1))e.appendChild(o.create("br"))}}else if(r===o.getRoot())if(!n.list_block||!_T(e,n.list_block))NT(Yn.grep(e.childNodes),function(e){if(Fy.isValid(t,a,e.nodeName.toLowerCase()))if(!i)i=AT(o,e,a),o.setAttribs(i,t.settings.forced_root_block_attrs);else i.appendChild(e);else i=0});if(n.selector&&n.inline&&!_T(n.inline,e))return;o.remove(e,1)},MT=function(e,n,r,i,o){var t,a,s,u=e.dom;if(!DT(u,i,n)&&!PT(i,n))return false;if("all"!==n.remove){if(NT(n.styles,function(e,t){if(e=Fy.normalizeStyleValue(u,Fy.replaceVars(e,r),t),"number"===typeof t)t=e,o=0;if(n.remove_similar||!o||_T(Fy.getStyle(u,o,t),e))u.setStyle(i,t,"");s=1}),s&&""===u.getAttrib(i,"style"))i.removeAttribute("style"),i.removeAttribute("data-mce-style");for(NT(n.attributes,function(e,t){var n;if(e=Fy.replaceVars(e,r),"number"===typeof t)t=e,o=0;if(!o||_T(u.getAttrib(o,t),e)){if("class"===t)if(e=u.getAttrib(i,t))if(n="",NT(e.split(/\s+/),function(e){if(/mce\-\w+/.test(e))n+=(n?" ":"")+e}),n)return void u.setAttrib(i,t,n);if("class"===t)i.removeAttribute("className");if(ET.test(t))i.removeAttribute("data-mce-"+t);i.removeAttribute(t)}}),NT(n.classes,function(e){if(e=Fy.replaceVars(e,r),!o||u.hasClass(o,e))u.removeClass(i,e)}),a=u.getAttribs(i),t=0;t<a.length;t++){var l=a[t].nodeName;if(0!==l.indexOf("_")&&0!==l.indexOf("data-"))return false}}if("none"!==n.remove)return OT(e,i,n),true},LT=function(n,e,r,i,o){var a;return NT(Fy.getParents(n.dom,e.parentNode).reverse(),function(e){var t;if(!a&&"_start"!==e.id&&"_end"!==e.id)if((t=fw.matchNode(n,e,r,i,o))&&false!==t.split)a=e}),a},IT=function(e,t,n,r,i,o,a,s){var u,l,f,c,d,m,h=e.dom;if(n){for(m=n.parentNode,u=r.parentNode;u&&u!==m;u=u.parentNode){for(l=h.clone(u,false),d=0;d<t.length;d++)if(MT(e,t[d],s,l,l)){l=0;break}if(l){if(f)l.appendChild(f);if(!c)c=l;f=l}}if(o&&(!a.mixed||!h.isBlock(n)))r=h.split(n,r);if(f)i.parentNode.insertBefore(f,i),c.appendChild(i)}return r},HT,FT={removeFormat:MT,remove:function(a,n,s,e,r){var u=a.formatter.get(n),l=u[0],t,i,f=true,c=a.dom,o=a.selection,d=function(e){var t=LT(a,e,n,s,r);return IT(a,u,t,e,e,true,l,s)},m=function(e){var t,n,r,i,o;if(Wu.isElement(e)&&c.getContentEditable(e))i=f,f="true"===c.getContentEditable(e),o=true;if(t=Yn.grep(e.childNodes),f&&!o)for(n=0,r=u.length;n<r;n++)if(MT(a,u[n],s,e,e))break;if(l.deep)if(t.length){for(n=0,r=t.length;n<r;n++)m(t[n]);if(o)f=i}},h=function(e){var t=c.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];if(hp.isBookmarkNode(n))n=n[e?"firstChild":"lastChild"];if(Wu.isText(n)&&0===n.data.length)n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling;return c.remove(t,true),n},p=function(e){var t,n,r=e.commonAncestorContainer;if(e=ew(a,e,u,true),l.split){if((t=RT(a,e,true))!==(n=RT(a,e))){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild)if("TR"===t.nodeName)t=t.firstChild.firstChild||t;else t=t.firstChild||t;if(r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&TT(n)&&n.firstChild)n=n.firstChild||n;if(c.isChildOf(t,n)&&t!==n&&!c.isBlock(n)&&!TT(t)&&!TT(n))return t=AT(c,t,"span",{id:"_start","data-mce-type":"bookmark"}),d(t),void(t=h(true));t=AT(c,t,"span",{id:"_start","data-mce-type":"bookmark"}),n=AT(c,n,"span",{id:"_end","data-mce-type":"bookmark"}),d(t),d(n),t=h(true),n=h()}else t=n=d(t);e.startContainer=t.parentNode?t.parentNode:t,e.startOffset=c.nodeIndex(t),e.endContainer=n.parentNode?n.parentNode:n,e.endOffset=c.nodeIndex(n)+1}ST.walk(c,e,function(e){NT(e,function(e){if(m(e),Wu.isElement(e)&&"underline"===a.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===Fy.getTextDecoration(c,e.parentNode))MT(a,{deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,e)})})};if(e){if(e.nodeType)(i=c.createRng()).setStartBefore(e),i.setEndAfter(e),p(i);else p(e);return}if("false"===c.getContentEditable(o.getNode())){e=o.getNode();for(var g=0,v=u.length;g<v;g++)if(u[g].ceFalseOverride)if(MT(a,u[g],s,e,e))break;return}if(!o.isCollapsed()||!l.inline||c.select("td[data-mce-selected],th[data-mce-selected]").length){if(t=o.getBookmark(),p(o.getRng()),o.moveToBookmark(t),l.inline&&fw.match(a,n,s,o.getStart()))Fy.moveStart(c,o,o.getRng());a.nodeChanged()}else Mw.removeCaretFormat(a,n,s,r)}},zT=Yn.each,WT=function(e){return e&&1===e.nodeType&&!hp.isBookmarkNode(e)&&!Mw.isCaretNode(e)&&!Wu.isBogus(e)},UT=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!hp.isBookmarkNode(n))return n}return e},jT=function(e,t,n){var r,i,o=new gp(e);if(t&&n)if(t=UT(t,"previousSibling"),n=UT(n,"nextSibling"),o.compare(t,n)){for(r=t.nextSibling;r&&r!==n;)r=(i=r).nextSibling,t.appendChild(i);return e.remove(n),Yn.each(Yn.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},VT=function(e,t,n){zT(e.childNodes,function(e){if(WT(e)){if(t(e))n(e);if(e.hasChildNodes())VT(e,t,n)}})},$T=function(n,e){return b.curry(function(e,t){return!!(t&&Fy.getStyle(n,t,e))},e)},qT=function(r,e,t){return b.curry(function(e,t,n){if(r.setStyle(n,e,t),""===n.getAttribute("style"))n.removeAttribute("style");YT(r,n)},e,t)},YT=function(e,t){if("SPAN"===t.nodeName&&0===e.getAttribs(t).length)e.remove(t,true)},KT=function(e,t){var n;if(1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType)if(n=Fy.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n)e.setStyle(t,"text-decoration",n);else if(e.getStyle(t,"text-decoration")===n)e.setStyle(t,"text-decoration",null)},XT,GT,JT,QT,ZT=function(r,e,t){if(e.clear_child_styles){var n=e.links?"*:not(a)":"*";zT(r.select(n,t),function(n){if(WT(n))zT(e.styles,function(e,t){r.setStyle(n,t,"")})})}},eR,tR,nR=function(n,e,r,i){zT(e,function(t){zT(n.dom.select(t.inline,i),function(e){if(!WT(e))return;FT.removeFormat(n,t,r,e,t.exact?e:null)}),ZT(n.dom,t,i)})},rR=function(e,t,n,r){if(t.styles.color||t.styles.textDecoration)Yn.walk(r,b.curry(KT,e),"childNodes"),KT(e,r)},iR=function(e,t,n,r){if(t.styles&&t.styles.backgroundColor)VT(r,$T(e,"fontSize"),qT(e,"backgroundColor",Fy.replaceVars(t.styles.backgroundColor,n)))},oR=function(e,t,n,r){if("sub"===t.inline||"sup"===t.inline)VT(r,$T(e,"fontSize"),qT(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),true)},aR=function(e,t,n,r){if(r&&false!==t.merge_siblings)r=jT(e,Fy.getNonWhiteSpaceSibling(r),r),r=jT(e,r,Fy.getNonWhiteSpaceSibling(r,true))},sR=function(t,n,r,i,o){if(fw.matchNode(t,o.parentNode,r,i))if(FT.removeFormat(t,n,i,o))return;if(n.merge_with_parents)t.dom.getParent(o.parentNode,function(e){if(fw.matchNode(t,e,r,i))return FT.removeFormat(t,n,i,o),true})},uR=Yn.each,lR=function(e){return e&&1===e.nodeType&&!hp.isBookmarkNode(e)&&!Mw.isCaretNode(e)&&!Wu.isBogus(e)},fR=function(h,p,g,r){var v=h.formatter.get(p),b=v[0],e,t,i=!r&&h.selection.isCollapsed(),o=h.dom,n=h.selection,y=function(n,e){if(e=e||b,n){if(e.onformat)e.onformat(n,e,g,r);if(uR(e.styles,function(e,t){o.setStyle(n,t,Fy.replaceVars(e,g))}),e.styles){var t=o.getAttrib(n,"style");if(t)n.setAttribute("data-mce-style",t)}uR(e.attributes,function(e,t){o.setAttrib(n,t,Fy.replaceVars(e,g))}),uR(e.classes,function(e){if(e=Fy.replaceVars(e,g),!o.hasClass(n,e))o.addClass(n,e)})}},w=function(e,t){var n=false;if(!b.selector)return false;return uR(e,function(e){if("collapsed"in e&&e.collapsed!==i)return;if(o.is(t,e.selector)&&!Mw.isCaretNode(t))return y(t,e),n=true,false}),n},a=function(u,e,t,l){var f=[],c,d,m=true;if(c=b.inline||b.block,d=u.create(c),y(d),ST.walk(u,e,function(e){var a,s=function(e){var t,n,r,i;if(i=m,t=e.nodeName.toLowerCase(),n=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&u.getContentEditable(e))i=m,m="true"===u.getContentEditable(e),r=true;if(Fy.isEq(t,"br")){if(a=0,b.block)u.remove(e);return}if(b.wrapper&&fw.matchNode(h,e,p,g))return void(a=0);if(m&&!r&&b.block&&!b.wrapper&&Fy.isTextBlock(h,t)&&Fy.isValid(h,n,c))return e=u.rename(e,c),y(e),f.push(e),void(a=0);if(b.selector){var o=w(v,e);if(!b.inline||o)return void(a=0)}if(m&&!r&&Fy.isValid(h,c,t)&&Fy.isValid(h,n,c)&&!(!l&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0))&&!Mw.isCaretNode(e)&&(!b.inline||!u.isBlock(e))){if(!a)a=u.clone(d,false),e.parentNode.insertBefore(a,e),f.push(a);a.appendChild(e)}else{if(a=0,uR(Yn.grep(e.childNodes),s),r)m=i;a=0}};uR(e,s)}),true===b.links)uR(f,function(e){var t=function(e){if("A"===e.nodeName)y(e,b);uR(Yn.grep(e.childNodes),t)};t(e)});uR(f,function(e){var t,n,r=function(e){var t=false;return uR(e.childNodes,function(e){if(lR(e))return t=e,false}),t},i=function(e){var t,n;if((t=r(e))&&!hp.isBookmarkNode(t)&&fw.matchName(u,t,b))n=u.clone(t,false),y(n),u.replace(n,e,true),u.remove(t,1);return n||e},o,a;if(a=0,uR((o=e).childNodes,function(e){if(!Fy.isWhiteSpaceNode(e)&&!hp.isBookmarkNode(e))a++}),t=a,(f.length>1||!u.isBlock(e))&&0===t)return void u.remove(e,1);if(b.inline||b.wrapper){if(!b.exact&&1===t)e=i(e);nR(h,v,g,e),sR(h,b,p,g,e),iR(u,b,g,e),oR(u,b,g,e),aR(u,b,g,e)}})};if("false"===o.getContentEditable(n.getNode())){r=n.getNode();for(var s=0,u=v.length;s<u;s++)if(v[s].ceFalseOverride&&o.is(r,v[s].selector))return void y(r,v[s]);return}if(b){if(r)if(r.nodeType){if(!w(v,r))(t=o.createRng()).setStartBefore(r),t.setEndAfter(r),a(o,ew(h,t,v),null,true)}else a(o,r,null,true);else if(!i||!b.inline||o.select("td[data-mce-selected],th[data-mce-selected]").length){var l=h.selection.getNode();if(!h.settings.forced_root_block&&v[0].defaultBlock&&!o.getParent(l,o.isBlock))fR(h,v[0].defaultBlock);if(h.selection.setRng(sg(h.selection.getRng())),e=n.getBookmark(),a(o,ew(h,n.getRng(),v),e),b.styles)rR(o,b,g,l);n.moveToBookmark(e),Fy.moveStart(o,n,n.getRng()),h.nodeChanged()}else Mw.applyCaretFormat(h,p,g);wT(p,h)}},cR={applyFormat:fR},dR=Yn.each,mR=function(t,o){var a={};t.set({}),o.on("NodeChange",function(n){var r=Fy.getParents(o.dom,n.element),i={};if((r=Yn.grep(r,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")})).length&&Me.gecko)for(var e=r[0];e.hasChildNodes()&&1===e.childNodes.length&&e.firstChild.hasChildNodes();e=r[0])r.unshift(e.firstChild);dR(t.get(),function(e,n){dR(r,function(t){if(o.formatter.matchNode(t,n,{},e.similar)){if(!a[n])dR(e,function(e){e(true,{node:t,format:n,parents:r})}),a[n]=e;return i[n]=e,false}if(fw.matchesUnInheritedFormatSelector(o,t,n))return false})}),dR(a,function(e,t){if(!i[t])delete a[t],dR(e,function(e){e(false,{node:n.element,format:t,parents:r})})})})},hR=function(e,t,n,r){var i=e.get();dR(t.split(","),function(e){if(!i[e])i[e]=[],i[e].similar=r;i[e].push(n)}),e.set(i)},pR,gR={formatChanged:function(e,t,n,r,i){if(null===t.get())mR(t,e);hR(t,n,r,i)}},vR,bR={get:function(r){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:false,classes:"align-left",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:false,preview:false,defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:false,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:false,classes:"align-center",ceFalseOverride:true,preview:"font-family font-size"},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:false},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:false,classes:"align-right",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:false,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:false,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:true,remove_similar:true,clear_child_styles:true},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:true,remove_similar:true,clear_child_styles:true},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:true},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:true,remove_similar:true},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(){return true},onformat:function(n,e,t){Yn.each(t,function(e,t){r.setAttrib(n,t,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]};return Yn.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}};function yR(e){var n={},t=function(e){return e?n[e]:n},r=function(e,t){if(e)if("string"!==typeof e)Yn.each(e,function(e,t){r(t,e)});else t=t.length?t:[t],Yn.each(t,function(e){if("undefined"===typeof e.deep)e.deep=!e.selector;if("undefined"===typeof e.split)e.split=!e.selector||e.inline;if("undefined"===typeof e.remove&&e.selector&&!e.inline)e.remove="none";if(e.selector&&e.inline)e.mixed=true,e.block_expand=true;if("string"===typeof e.classes)e.classes=e.classes.split(/\s+/)}),n[e]=t},i=function(e){if(e&&n[e])delete n[e];return n};return r(bR.get(e.dom)),r(e.settings.formats),{get:t,register:r,unregister:i}}var wR=Yn.each,xR=Pl.DOM,CR=function(e,t){var n,r,i,o=t&&t.schema||wl({}),a=function(e,t){if(t.classes.length)xR.addClass(e,t.classes.join(" "));xR.setAttribs(e,t.attrs)},u=function(e){var t;return r="string"===typeof e?{name:e,classes:[],attrs:{}}:e,t=xR.create(r.name),a(t,r),t},l=function(e,t){var n="string"!==typeof e?e.nodeName.toLowerCase():e,r=o.getElementRule(n),i=r&&r.parentsRequired;if(i&&i.length)return t&&-1!==Yn.inArray(i,t)?t:i[0];else return false},f=function(n,e,t){var r,i,o,a=e.length>0&&e[0],s=a&&a.name;if(o=l(n,s))if(s===o)i=e[0],e=e.slice(1);else i=o;else if(a)i=e[0],e=e.slice(1);else if(!t)return n;if(i)(r=u(i)).appendChild(n);if(t){if(!r)(r=xR.create("div")).appendChild(n);Yn.each(t,function(e){var t=u(e);r.insertBefore(t,n)})}return f(r,e,i&&i.siblings)};if(e&&e.length)return r=e[0],n=u(r),(i=xR.create("div")).appendChild(f(n,e.slice(1),r.siblings)),i;else return""},kR=function(e,t){return CR(ER(e),t)},SR=function(e){var t,a={classes:[],attrs:{}};if("*"!==(e=a.selector=Yn.trim(e)))t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,n,r,i){switch(t){case"#":a.attrs.id=n;break;case".":a.classes.push(n);break;case":":if(-1!==Yn.inArray("checked disabled enabled read-only required".split(" "),n))a.attrs[n]=n}if("["===r){var o=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);if(o)a.attrs[o[1]]=o[2]}return""});return a.name=t||"div",a},ER=function(e){if(!e||"string"!==typeof e)return[];return e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Yn.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=Yn.map(e.split(/(?:~\+|~|\+)/),SR),n=t.pop();if(t.length)n.siblings=t;return n}).reverse()},NR,_R={getCssText:function(n,e){var t,r,i,o,a="",s,u;if(false===(u=n.settings.preview_styles))return"";if("string"!==typeof u)u="font-family font-size font-weight font-style text-decoration "+"text-transform color background-color border border-radius outline text-shadow";var l=function(e){return e.replace(/%(\w+)/g,"")};if("string"===typeof e){if(!(e=n.formatter.get(e)))return;e=e[0]}if("preview"in e)if(false===(u=e.preview))return"";if(t=e.block||e.inline||"span",(o=ER(e.selector)).length){if(!o[0].name)o[0].name=t;t=e.selector,r=CR(o,n)}else r=CR([t],n);return i=xR.select(t,r)[0]||r.firstChild,wR(e.styles,function(e,t){if(e=l(e))xR.setStyle(i,t,e)}),wR(e.attributes,function(e,t){if(e=l(e))xR.setAttrib(i,t,e)}),wR(e.classes,function(e){if(e=l(e),!xR.hasClass(i,e))xR.addClass(i,e)}),n.fire("PreviewFormats"),xR.setStyles(r,{position:"absolute",left:-65535}),n.getBody().appendChild(r),s=xR.getStyle(n.getBody(),"fontSize",true),s=/px$/.test(s)?parseInt(s,10):0,wR(u.split(" "),function(e){var t=xR.getStyle(i,e,true);if("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t))if(t=xR.getStyle(n.getBody(),e,true),"#ffffff"===xR.toHex(t).toLowerCase())return;if("color"===e)if("#000000"===xR.toHex(t).toLowerCase())return;if("font-size"===e)if(/em|%$/.test(t)){if(0===s)return;t=(t=parseFloat(t)/(/%$/.test(t)?100:1))*s+"px"}if("border"===e&&t)a+="padding:0 2px;";a+=e+":"+t+";"}),n.fire("AfterPreviewFormats"),xR.remove(r),a},parseSelector:ER,selectorToHtml:kR},TR,RR={toggle:function(e,t,n,r,i){var o=t.get(n);if(fw.match(e,n,r,i)&&(!("toggle"in o[0])||o[0].toggle))FT.remove(e,n,r,i);else cR.applyFormat(e,n,r,i)}},AR,DR={setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",false,"h"+t]);e.addShortcut("access+7","",["FormatBlock",false,"p"]),e.addShortcut("access+8","",["FormatBlock",false,"div"]),e.addShortcut("access+9","",["FormatBlock",false,"address"])}};function PR(e){var t=yR(e),n=cx(null);return DR.setup(e),Mw.setup(e),{get:t.get,register:t.register,unregister:t.unregister,apply:b.curry(cR.applyFormat,e),remove:b.curry(FT.remove,e),toggle:b.curry(RR.toggle,e,t),match:b.curry(fw.match,e),matchAll:b.curry(fw.matchAll,e),matchNode:b.curry(fw.matchNode,e),canApply:b.curry(fw.canApply,e),formatChanged:b.curry(gR.formatChanged,e,n),getCssText:b.curry(_R.getCssText,e)}}var BR=function(e,t){return t},OR,MR=function(a){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var i=e[r];for(var o in i)if(i.hasOwnProperty(o))n[o]=a(n[o],i[o])}return n}},LR=MR(function(e,t){var n;return Do.isObject(e)&&Do.isObject(t)?LR(e,t):t}),IR=MR(BR),HR={deepMerge:LR,merge:IR},FR,zR,WR,UR=function(e,t){return e.fire("PreProcess",t)},jR=function(e,t){return e.fire("PostProcess",t)},VR=function(e){return e.fire("remove")},$R,qR,YR={register:function(t,u,l){t.addAttributeFilter("data-mce-tabindex",function(e,t){var n=e.length,r;while(n--)(r=e[n]).attr("tabindex",r.attributes.map["data-mce-tabindex"]),r.attr(t,null)}),t.addAttributeFilter("src,href,style",function(e,t){var n=e.length,r,i,o="data-mce-"+t,a=u.url_converter,s=u.url_converter_scope;while(n--)if(void 0!==(i=(r=e[n]).attributes.map[o]))r.attr(t,i.length>0?i:null),r.attr(o,null);else{if(i=r.attributes.map[t],"style"===t)i=l.serializeStyle(l.parseStyle(i),r.name);else if(a)i=a.call(s,i,t,r.name);r.attr(t,i.length>0?i:null)}}),t.addAttributeFilter("class",function(e){var t=e.length,n,r;while(t--)if(r=(n=e[t]).attr("class"))r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null)}),t.addAttributeFilter("data-mce-type",function(e,t,n){var r=e.length,i;while(r--)if("bookmark"===(i=e[r]).attributes.map["data-mce-type"]&&!n.cleanup)i.remove()}),t.addNodeFilter("noscript",function(e){var t=e.length,n;while(t--)if(n=e[t].firstChild)n.value=ll.decode(n.value)}),t.addNodeFilter("script,style",function(e,t){var n=e.length,r,i,o,a=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};while(n--)if(i=(r=e[n]).firstChild?r.firstChild.value:"","script"===t){if(o=r.attr("type"))r.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,""));if("xhtml"===u.element_format&&i.length>0)r.firstChild.value="// <![CDATA[\n"+a(i)+"\n// ]]>"}else if("xhtml"===u.element_format&&i.length>0)r.firstChild.value="\x3c!--\n"+a(i)+"\n--\x3e"}),t.addNodeFilter("#comment",function(e){var t=e.length,n;while(t--)if(0===(n=e[t]).value.indexOf("[CDATA["))n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"");else if(0===n.value.indexOf("mce:protected "))n.name="#text",n.type=3,n.raw=true,n.value=unescape(n.value).substr(14)}),t.addNodeFilter("xml:namespace,input",function(e,t){var n=e.length,r;while(n--)if(7===(r=e[n]).type)r.remove();else if(1===r.type)if("input"===t&&!("type"in r.attributes.map))r.attr("type","text")}),t.addAttributeFilter("data-mce-type",function(e){ee.each(e,function(e){if("format-caret"===e.attr("data-mce-type"))if(e.isEmpty(t.schema.getNonEmptyElements()))e.remove();else e.unwrap()})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,"+"data-mce-selected,data-mce-expando,"+"data-mce-type,data-mce-resize",function(e,t){var n=e.length;while(n--)e[n].attr(t,null)})},trimTrailingBr:function(e){var t,n,r=function(e){return e&&"br"===e.name};if(r(t=e.lastChild))if(r(n=t.prev))t.remove(),n.remove()}},KR=function(e,t,n){var r,i,o,a=e.dom;if(t=t.cloneNode(true),(r=document.implementation).createHTMLDocument){if(i=r.createHTMLDocument(""),Yn.each("BODY"===t.nodeName?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,true))}),"BODY"!==t.nodeName)t=i.body.firstChild;else t=i.body;o=a.doc,a.doc=i}if(UR(e,HR.merge(n,{node:t})),o)a.doc=o;return t},XR=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events},GR,JR={process:function(e,t,n){return XR(e,n)?KR(e,t,n):t}},QR=function(t,e){ee.each(e,function(e){t.attr(e,null)})},ZR=function(e,o,a){e.addNodeFilter("font",function(e){ee.each(e,function(e){var t=o.parse(e.attr("style")),n=e.attr("color"),r=e.attr("face"),i=e.attr("size");if(n)t.color=n;if(r)t["font-family"]=r;if(i)t["font-size"]=a[parseInt(e.attr("size"),10)-1];e.name="span",e.attr("style",o.serialize(t)),QR(e,["color","face","size"])})})},eA=function(e,n){e.addNodeFilter("strike",function(e){ee.each(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})},tA=function(e,t){var n=Cl();if(t.convert_fonts_to_spans)ZR(e,n,Yn.explode(t.font_size_legacy_values));eA(e,n)},nA,rA={register:function(e,t){if(t.inline_styles)tA(e,t)}},iA=Me.ie?/^[ \t\r\n\uFEFF]*$/:/^[ \t\r\n]*$/,oA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},aA=function(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}},sA=function(){function s(e,t){if(this.name=e,1===(this.type=t))this.attributes=[],this.attributes.map={}}return s.create=function(e,t){var n,r;if(n=new s(e,oA[e]||1),t)for(r in t)n.attr(r,t[r]);return n},s.prototype.replace=function(e){var t=this;if(e.parent)e.remove();return t.insert(e,t),t.remove(),t},s.prototype.attr=function(e,t){var n=this,r,i;if("string"!==typeof e){for(i in e)n.attr(i,e[i]);return n}if(r=n.attributes){if(void 0!==t){if(null===t){if(e in r.map){delete r.map[e],i=r.length;while(i--)if(r[i].name===e)return r=r.splice(i,1),n}return n}if(e in r.map){i=r.length;while(i--)if(r[i].name===e){r[i].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}},s.prototype.clone=function(){var e=this,t=new s(e.name,e.type),n,r,i,o,a;if(i=e.attributes){for((a=[]).map={},n=0,r=i.length;n<r;n++)if("id"!==(o=i[n]).name)a[a.length]={name:o.name,value:o.value},a.map[o.name]=o.value;t.attributes=a}return t.value=e.value,t.shortEnded=e.shortEnded,t},s.prototype.wrap=function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},s.prototype.unwrap=function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,true),t=n;e.remove()},s.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;if(t){if(t.firstChild===e){if(t.firstChild=n)n.prev=null}else r.next=n;if(t.lastChild===e){if(t.lastChild=r)r.next=null}else n.prev=r;e.parent=e.next=e.prev=null}return e},s.prototype.append=function(e){var t=this,n;if(e.parent)e.remove();if(n=t.lastChild)(n.next=e).prev=n,t.lastChild=e;else t.lastChild=t.firstChild=e;return e.parent=t,e},s.prototype.insert=function(e,t,n){var r;if(e.parent)e.remove();if(r=t.parent||this,n){if(t===r.firstChild)r.firstChild=e;else t.prev.next=e;e.prev=t.prev,(e.next=t).prev=e}else{if(t===r.lastChild)r.lastChild=e;else t.next.prev=e;e.next=t.next,(e.prev=t).next=e}return e.parent=r,e},s.prototype.getAll=function(e){var t=this,n,r=[];for(n=t.firstChild;n;n=aA(n,t))if(n.name===e)r.push(n);return r},s.prototype.empty=function(){var e=this,t,n,r;if(e.firstChild){for(t=[],r=e.firstChild;r;r=aA(r,e))t.push(r);n=t.length;while(n--)(r=t[n]).parent=r.firstChild=r.lastChild=r.next=r.prev=null}return e.firstChild=e.lastChild=null,e},s.prototype.isEmpty=function(e,t,n){var r=this,i=r.firstChild,o,a;if(t=t||{},i)do{if(1===i.type){if(i.attributes.map["data-mce-bogus"])continue;if(e[i.name])return false;o=i.attributes.length;while(o--)if("name"===(a=i.attributes[o].name)||0===a.indexOf("data-mce-bookmark"))return false}if(8===i.type)return false;if(3===i.type&&!iA.test(i.value))return false;if(3===i.type&&i.parent&&t[i.parent.name]&&iA.test(i.value))return false;if(n&&n(i))return false}while(i=aA(i,r));return true},s.prototype.walk=function(e){return aA(this,null,e)},s}(),uA=function(e,t,n,r){var i;if((e.padd_empty_with_br||t.insert)&&n[r.name])r.empty().append(new sA("br",1)).shortEnded=true;else r.empty().append(new sA("#text",3)).value=" "},lA=function(e){return fA(e,"#text")&&" "===e.firstChild.value},fA=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},cA=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty},dA=function(t,e,n,r){return r.isEmpty(e,n,function(e){return cA(t,e)})},mA=function(e,t){return e&&(t[e.name]||"br"===e.name)},hA=function(e,p){var g=e.schema;if(p.remove_trailing_brs)e.addNodeFilter("br",function(e,t,n){var r,i=e.length,o,a=Yn.extend({},g.getBlockElements()),s=g.getNonEmptyElements(),u,l,f,c,d=g.getNonEmptyElements(),m,h;for(a.body=1,r=0;r<i;r++)if(u=(o=e[r]).parent,a[o.parent.name]&&o===u.lastChild){f=o.prev;while(f){if("span"!==(c=f.name)||"bookmark"!==f.attr("data-mce-type")){if("br"!==c)break;if("br"===c){o=null;break}}f=f.prev}if(o)if(o.remove(),dA(g,s,d,u))if(m=g.getElementRule(u.name))if(m.removeEmpty)u.remove();else if(m.paddEmpty)uA(p,n,a,u)}else{l=o;while(u&&u.firstChild===l&&u.lastChild===l){if(a[(l=u).name])break;u=u.parent}if(l===u&&true!==p.padd_empty_with_br)(h=new sA("#text",3)).value=" ",o.replace(h)}});if(e.addAttributeFilter("href",function(e){var t=e.length,n,r=function(e){var t;return e.split(" ").filter(function(e){return e.length>0}).concat(["noopener"]).sort().join(" ")},i=function(e){var t=e?Yn.trim(e):"";if(!/\b(noopener)\b/g.test(t))return r(t);else return t};if(!p.allow_unsafe_link_target)while(t--)if("a"===(n=e[t]).name&&"_blank"===n.attr("target"))n.attr("rel",i(n.attr("rel")))}),!p.allow_html_in_named_anchor)e.addAttributeFilter("id,name",function(e){var t=e.length,n,r,i,o;while(t--)if("a"===(o=e[t]).name&&o.firstChild&&!o.attr("href")){i=o.parent,n=o.lastChild;do{r=n.prev,i.insert(n,o),n=r}while(n)}});if(p.fix_list_elements)e.addNodeFilter("ul,ol",function(e){var t=e.length,n,r;while(t--)if("ul"===(r=(n=e[t]).parent).name||"ol"===r.name)if(n.prev&&"li"===n.prev.name)n.prev.append(n);else{var i=new sA("li",1);i.attr("style","list-style-type: none"),n.wrap(i)}});if(p.validate&&g.getValidClasses())e.addAttributeFilter("class",function(e){var t=e.length,n,r,i,o,a,s=g.getValidClasses(),u,l;while(t--){for(r=(n=e[t]).attr("class").split(" "),a="",i=0;i<r.length;i++){if(o=r[i],l=false,(u=s["*"])&&u[o])l=true;if(u=s[n.name],!l&&u&&u[o])l=true;if(l){if(a)a+=" ";a+=o}}if(!a.length)a=null;n.attr("class",a)}})},pA=Yn.makeMap,gA=Yn.each,vA=Yn.explode,bA=Yn.extend;function yA(T,R){if(void 0===R)R=wl();var A={},D=[],P={},B={};(T=T||{}).validate="validate"in T?T.validate:true,T.root_name=T.root_name||"body";var O=function(e){var t,n,r,i,o,a,s,u,l,f,c,d,m,h,p,g;for(d=pA("tr,td,th,tbody,thead,tfoot,table"),f=R.getNonEmptyElements(),c=R.getWhiteSpaceElements(),m=R.getTextBlockElements(),h=R.getSpecialElements(),t=0;t<e.length;t++){if(!(n=e[t]).parent||n.fixed)continue;if(m[n.name]&&"li"===n.parent.name){p=n.next;while(p){if(m[p.name])p.name="li",p.fixed=true,n.parent.insert(p,n.parent);else break;p=p.next}n.unwrap(n);continue}for(i=[n],r=n.parent;r&&!R.isValidChild(r.name,n.name)&&!d[r.name];r=r.parent)i.push(r);if(r&&i.length>1){for(i.reverse(),o=a=v(i[0].clone()),l=0;l<i.length-1;l++){if(R.isValidChild(a.name,i[l].name))s=v(i[l].clone()),a.append(s);else s=a;for(u=i[l].firstChild;u&&u!==i[l+1];)g=u.next,s.append(u),u=g;a=s}if(!dA(R,f,c,o))r.insert(o,i[0],true),r.insert(n,o);else r.insert(n,i[0],true);if(r=i[0],dA(R,f,c,r)||fA(r,"br"))r.empty().remove()}else if(n.parent){if("li"===n.name){if((p=n.prev)&&("ul"===p.name||"ul"===p.name)){p.append(n);continue}if((p=n.next)&&("ul"===p.name||"ul"===p.name)){p.insert(n,p.firstChild,true);continue}n.wrap(v(new sA("ul",1)));continue}if(R.isValidChild(n.parent.name,"div")&&R.isValidChild("div",n.name))n.wrap(v(new sA("div",1)));else if(h[n.name])n.empty().remove();else n.unwrap()}}},v=function(e){var t,n,r;if(n in A)if(r=P[n])r.push(e);else P[n]=[e];t=D.length;while(t--)if((n=D[t].name)in e.attributes.map)if(r=B[n])r.push(e);else B[n]=[e];return e},e,t,n,r,i,o={schema:R,addAttributeFilter:function(e,n){gA(vA(e),function(e){var t;for(t=0;t<D.length;t++)if(D[t].name===e)return void D[t].callbacks.push(n);D.push({name:e,callbacks:[n]})})},getAttributeFilters:function(){return[].concat(D)},addNodeFilter:function(e,n){gA(vA(e),function(e){var t=A[e];if(!t)A[e]=t=[];t.push(n)})},getNodeFilters:function(){var e=[];for(var t in A)if(A.hasOwnProperty(t))e.push({name:t,callbacks:A[t]});return e},filterNode:v,parse:function(e,a){var t,n,r,i,o,s,u,l,f,c=[],d,m;a=a||{},P={},B={},f=bA(pA("script,style,head,html,body,title,meta,param"),R.getBlockElements());var h=R.getNonEmptyElements(),p=R.children,g=T.validate,v="forced_root_block"in a?a.forced_root_block:T.forced_root_block,b=R.getWhiteSpaceElements(),y=/^[ \t\r\n]+/,w=/[ \t\r\n]+$/,x=/[ \t\r\n]+/g,C=/^[ \t\r\n]+$/,k=function(){var t=_.firstChild,e,n,r=function(e){if(e){if((t=e.firstChild)&&3===t.type)t.value=t.value.replace(y,"");if((t=e.lastChild)&&3===t.type)t.value=t.value.replace(w,"")}};if(!R.isValidChild(_.name,v.toLowerCase()))return;while(t){if(e=t.next,3===t.type||1===t.type&&"p"!==t.name&&!f[t.name]&&!t.attr("data-mce-type"))if(!n)(n=S(v,1)).attr(T.forced_root_block_attrs),_.insert(n,t),n.append(t);else n.append(t);else r(n),n=null;t=e}r(n)},S=function(e,t){var n=new sA(e,t),r;if(e in A)if(r=P[e])r.push(n);else P[e]=[n];return n},E=function(e){var t,n,r,i,o=R.getBlockElements();for(t=e.prev;t&&3===t.type;){if((r=t.value.replace(w,"")).length>0)return void(t.value=r);if(n=t.next){if(3===n.type&&n.value.length){t=t.prev;continue}if(!o[n.name]&&"script"!==n.name&&"style"!==n.name){t=t.prev;continue}}i=t.prev,t.remove(),t=i}},N=function(e){var t,n={};for(t in e)if("li"!==t&&"p"!==t)n[t]=e[t];return n};t=I_({validate:g,allow_script_urls:T.allow_script_urls,allow_conditional_comments:T.allow_conditional_comments,self_closing_elements:N(R.getSelfClosingElements()),cdata:function(e){m.append(S("#cdata",4)).value=e},text:function(e,t){var n;if(!d)if(e=e.replace(x," "),mA(m.lastChild,f))e=e.replace(y,"");if(0!==e.length)(n=S("#text",3)).raw=!!t,m.append(n).value=e},comment:function(e){m.append(S("#comment",8)).value=e},pi:function(e,t){m.append(S(e,7)).value=t,E(m)},doctype:function(e){var t;(t=m.append(S("#doctype",10))).value=e,E(m)},start:function(e,t,n){var r,i,o,a,s;if(o=g?R.getElementRule(e):{}){if((r=S(o.outputName||e,1)).attributes=t,r.shortEnded=n,m.append(r),(s=p[m.name])&&p[r.name]&&!s[r.name])c.push(r);i=D.length;while(i--)if((a=D[i].name)in t.map)if(u=B[a])u.push(r);else B[a]=[r];if(f[e])E(r);if(!n)m=r;if(!d&&b[e])d=true}},end:function(e){var t,n,r,i,o;if(n=g?R.getElementRule(e):{}){if(f[e])if(!d){if((t=m.firstChild)&&3===t.type)if((r=t.value.replace(y,"")).length>0)t.value=r,t=t.next;else{i=t.next,t.remove(),t=i;while(t&&3===t.type){if(r=t.value,i=t.next,0===r.length||C.test(r))t.remove(),t=i;t=i}}if((t=m.lastChild)&&3===t.type)if((r=t.value.replace(w,"")).length>0)t.value=r,t=t.prev;else{i=t.prev,t.remove(),t=i;while(t&&3===t.type){if(r=t.value,i=t.prev,0===r.length||C.test(r))t.remove(),t=i;t=i}}}if(d&&b[e])d=false;if(n.removeEmpty&&dA(R,h,b,m))if(!m.attributes.map.name&&!m.attr("id")){if(o=m.parent,f[m.name])m.empty().remove();else m.unwrap();return void(m=o)}if(n.paddEmpty&&(lA(m)||dA(R,h,b,m)))uA(T,a,f,m);m=m.parent}}},R);var _=m=new sA(a.context||T.root_name,11);if(t.parse(e),g&&c.length)if(!a.context)O(c);else a.invalid=true;if(v&&("body"===_.name||a.isRootContent))k();if(!a.invalid){for(l in P){u=A[l],o=(n=P[l]).length;while(o--)if(!n[o].parent)n.splice(o,1);for(r=0,i=u.length;r<i;r++)u[r](n,l,a)}for(r=0,i=D.length;r<i;r++)if((u=D[r]).name in B){o=(n=B[u.name]).length;while(o--)if(!n[o].parent)n.splice(o,1);for(o=0,s=u.callbacks.length;o<s;o++)u.callbacks[o](n,u.name,a)}}return _}};return hA(o,T),rA.register(o,T),o}var wA=function(e,t,n){if(-1===Yn.inArray(t,n))e.addAttributeFilter(n,function(e,t){var n=e.length;while(n--)e[n].attr(t,null)}),t.push(n)},xA=function(e,t,n){if(!t.no_events&&e){var r;return jR(e,HR.merge(t,{content:n})).content}else return n},CA=function(e,t,n){var r=$l(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection?r:Yn.trim(r)},kA=function(e,t,n,r){var i=r.selection?HR.merge({forced_root_block:false},r):r,o=e.parse(n,i);return YR.trimTrailingBr(o),o},SA=function(e,t,n){var r;return ng(e,t).serialize(n)},EA=function(e,t,n,r,i){var o=SA(t,n,r);return xA(e,i,o)};function NA(a,s){var u,l,f,e=["data-mce-selected"];u=s&&s.dom?s.dom:Pl.DOM,l=s&&s.schema?s.schema:wl(a),a.entity_encoding=a.entity_encoding||"named",a.remove_trailing_brs="remove_trailing_brs"in a?a.remove_trailing_brs:true,f=yA(a,l),YR.register(f,a,u);var t=function(e,t){var n=HR.merge({format:"html"},t?t:{}),r=JR.process(s,e,n),i=CA(u,r,n),o=kA(f,u,i,n);return"tree"===n.format?o:EA(s,a,l,o,n)};return{schema:l,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:t,addRules:function(e){l.addValidElements(e)},setRules:function(e){l.setValidElements(e)},addTempAttr:b.curry(wA,f,e),getTempAttrs:function(){return e}}}function _A(e,t){var n=NA(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}var TA=function(e){return wv(ao.fromDom(e.getBody()),"*[data-mce-caret]").fold(b.constant(null),function(e){return e.dom()})},RA=function(e){e.selection.setRng(e.selection.getRng())},AA=function(e,t){if(t.hasAttribute("data-mce-caret"))sf(t),RA(e),e.selection.scrollIntoView(t)},DA=function(e,t){var n=TA(e);if(!n)return;if("compositionstart"===t.type)return t.preventDefault(),t.stopPropagation(),void AA(e,n);if(Jl(n))AA(e,n)},PA,BA=function(e){e.on("keyup compositionstart",b.curry(DA,e))},OA;function MA(e){return{getBookmark:b.curry(hp.getBookmark,e),moveToBookmark:b.curry(hp.moveToBookmark,e)}}(OA=MA||(MA={})).isBookmarkNode=hp.isBookmarkNode;var LA=MA,IA=Wu.isContentEditableFalse,HA=Wu.isContentEditableTrue,FA=function(e,t){while(t&&t!==e){if(HA(t)||IA(t))return t;t=t.parentNode}return null},zA=function(i,a){var s=a.dom,u=Yn.each,l,f,c,d,m,h,p,g,v,b,y,w,x,C,k,S=a.getDoc(),E=document,N=Math.abs,_=Math.round,T=a.getBody(),R,A;d={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var e=".mce-content-body";a.contentStyles.push(e+" div.mce-resizehandle {"+"position: absolute;"+"border: 1px solid black;"+"box-sizing: content-box;"+"background: #FFF;"+"width: 7px;"+"height: 7px;"+"z-index: 10000"+"}"+e+" .mce-resizehandle:hover {"+"background: #000"+"}"+e+" img[data-mce-selected],"+e+" hr[data-mce-selected] {"+"outline: 1px solid black;"+"resize: none"+"}"+e+" .mce-clonedresizable {"+"position: absolute;"+(Me.gecko?"":"outline: 1px dashed black;")+"opacity: .5;"+"filter: alpha(opacity=50);"+"z-index: 10000"+"}"+e+" .mce-resize-helper {"+"background: #555;"+"background: rgba(0,0,0,0.75);"+"border-radius: 3px;"+"border: 1px;"+"color: white;"+"display: none;"+"font-family: sans-serif;"+"font-size: 12px;"+"white-space: nowrap;"+"line-height: 14px;"+"margin: 5px 10px;"+"padding: 5px;"+"position: absolute;"+"z-index: 10001"+"}");var D=function(e){return e&&("IMG"===e.nodeName||a.dom.is(e,"figure.image"))},n=function(e,t){return D(e.target)&&!g_(e.clientX,e.clientY,t)},r=function(e){var t=e.target;if(n(e,a.selection.getRng())&&!e.isDefaultPrevented())e.preventDefault(),a.selection.select(t)},P=function(e){return a.dom.is(e,"figure.image")?e.querySelector("img"):e},B=function(e){var t=a.settings.object_resizing;if(false===t||Me.iOS)return false;if("string"!==typeof t)t="table,img,figure.image,div";if("false"===e.getAttribute("data-mce-resize"))return false;if(e===a.getBody())return false;return os.is(ao.fromDom(e),t)},O=function(e){var t,n,r,i,o;if(t=e.screenX-h,n=e.screenY-p,C=t*m[2]+b,k=n*m[3]+y,C=C<5?5:C,k=k<5?5:k,D(l)&&false!==a.settings.resize_img_proportional)r=!E_.modifierPressed(e);else r=E_.modifierPressed(e)||D(l)&&m[2]*m[3]!==0;if(r)if(N(t)>N(n))k=_(C*w),C=_(k/w);else C=_(k/w),k=_(C*w);if(s.setStyles(P(f),{width:C,height:k}),i=(i=m.startPos.x+t)>0?i:0,o=(o=m.startPos.y+n)>0?o:0,s.setStyles(c,{left:i,top:o,display:"block"}),c.innerHTML=C+" &times; "+k,m[2]<0&&f.clientWidth<=C)s.setStyle(f,"left",g+(b-C));if(m[3]<0&&f.clientHeight<=k)s.setStyle(f,"top",v+(y-k));if((t=T.scrollWidth-R)+(n=T.scrollHeight-A)!==0)s.setStyles(c,{left:i-t,top:o-n});if(!x)a.fire("ObjectResizeStart",{target:l,width:b,height:y}),x=true},M=function(){x=false;var e=function(e,t){if(t)if(l.style[e]||!a.schema.isValid(l.nodeName.toLowerCase(),e))s.setStyle(P(l),e,t);else s.setAttrib(P(l),e,t)};if(e("width",C),e("height",k),s.unbind(S,"mousemove",O),s.unbind(S,"mouseup",M),E!==S)s.unbind(E,"mousemove",O),s.unbind(E,"mouseup",M);s.remove(f),s.remove(c),o(l),a.fire("ObjectResized",{target:l,width:C,height:k}),s.setAttrib(l,"style",s.getAttrib(l,"style")),a.nodeChanged()},o=function(e){var t,i,o,n,r;if(L(),F(),t=s.getPos(e,T),g=t.x,v=t.y,r=e.getBoundingClientRect(),i=r.width||r.right-r.left,o=r.height||r.bottom-r.top,l!==e)l=e,C=k=0;if(n=a.fire("ObjectSelected",{target:e}),B(e)&&!n.isDefaultPrevented())u(d,function(t,e){var n,r=function(e){if(h=e.screenX,p=e.screenY,b=P(l).clientWidth,y=P(l).clientHeight,w=y/b,(m=t).startPos={x:i*t[0]+g,y:o*t[1]+v},R=T.scrollWidth,A=T.scrollHeight,f=l.cloneNode(true),s.addClass(f,"mce-clonedresizable"),s.setAttrib(f,"data-mce-bogus","all"),f.contentEditable=false,f.unSelectabe=true,s.setStyles(f,{left:g,top:v,margin:0}),f.removeAttribute("data-mce-selected"),T.appendChild(f),s.bind(S,"mousemove",O),s.bind(S,"mouseup",M),E!==S)s.bind(E,"mousemove",O),s.bind(E,"mouseup",M);c=s.add(T,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+y)};if(n=s.get("mceResizeHandle"+e))s.remove(n);if(n=s.add(T,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:true,style:"cursor:"+e+"-resize; margin:0; padding:0"}),Me.ie)n.contentEditable=false;s.bind(n,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),r(e)}),t.elm=n,s.setStyles(n,{left:i*t[0]+g-n.offsetWidth/2,top:o*t[1]+v-n.offsetHeight/2})});else L();l.setAttribute("data-mce-selected","1")},L=function(){var e,t;if(F(),l)l.removeAttribute("data-mce-selected");for(e in d)if(t=s.get("mceResizeHandle"+e))s.unbind(t),s.remove(t)},I=function(e){var t,n,r=function(e,t){if(e)do{if(e===t)return true}while(e=e.parentNode)};if(x||a.removed)return;if(u(s.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"===e.type?e.target:i.getNode(),r(n=s.$(n).closest("table,img,figure.image,hr")[0],T))if(z(),r(t=i.getStart(true),n)&&r(i.getEnd(true),n))return void o(n);L()},H=function(e){return IA(FA(a.getBody(),e))},F=function(){for(var e in d){var t=d[e];if(t.elm)s.unbind(t.elm),delete t.elm}},z=function(){try{a.getDoc().execCommand("enableObjectResizing",false,false)}catch(e){}},t;return a.on("init",function(){if(z(),Me.ie&&Me.ie>=11)a.on("mousedown click",function(e){var t=e.target,n=t.nodeName;if(!x&&/^(TABLE|IMG|HR)$/.test(n)&&!H(t)){if(2!==e.button)a.selection.select(t,"TABLE"===n);if("mousedown"===e.type)a.nodeChanged()}}),a.dom.bind(T,"mscontrolselect",function(e){var t=function(e){$e.setEditorTimeout(a,function(){a.selection.select(e)})};if(H(e.target))return e.preventDefault(),void t(e.target);if(/^(TABLE|IMG|HR)$/.test(e.target.nodeName))if(e.preventDefault(),"IMG"===e.target.tagName)t(e.target)});var t=$e.throttle(function(e){if(!a.composing&&!a.destroyed)I(e)});a.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",t),a.on("keyup compositionend",function(e){if(l&&"TABLE"===l.nodeName)t(e)}),a.on("hide blur",L),a.on("contextmenu",r)}),a.on("remove",F),{isResizable:B,showResizeRect:o,hideResizeRect:L,updateResizeRect:I,destroy:function(){l=f=null}}},WA=function(e){var t=0,n=0,r=e;while(r&&r.nodeType)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},UA=function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()},jA,VA=function(e,t,n){var r,i,o=e.dom,a=o.getRoot(),s,u,l=0;if(UA(e,t,n))return;if(!Wu.isElement(t))return;if(false===n)l=t.offsetHeight;if("BODY"!==a.nodeName){var f=e.selection.getScrollContainer();if(f){if(r=WA(t).y-WA(f).y+l,u=f.clientHeight,r<(s=f.scrollTop)||r+25>s+u)f.scrollTop=r<s?r:r-u+25;return}}if(i=o.getViewPort(e.getWin()),r=o.getPos(t).y+l,s=i.y,u=i.h,r<i.y||r+25>s+u)e.getWin().scrollTo(0,r<s?r:r-u+25)},$A=function(e){return Wu.isContentEditableTrue(e)||Wu.isContentEditableFalse(e)},qA=function(e,t,n){while(e&&e!==t){if(n(e))return e;e=e.parentNode}return null},YA=function(e,n,t){var r,i,o;if(r=t.elementFromPoint(e,n),i=t.body.createTextRange(),!r||"HTML"===r.tagName)r=t.body;if(i.moveToElementText(r),(o=(o=Yn.toArray(i.getClientRects())).sort(function(e,t){return(e=Math.abs(Math.max(e.top-n,e.bottom-n)))-(t=Math.abs(Math.max(t.top-n,t.bottom-n)))})).length>0){n=(o[0].bottom+o[0].top)/2;try{return i.moveToPoint(e,n),i.collapse(true),i}catch(e){}}return null},KA=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return Wu.isContentEditableFalse(qA(n,t,$A))?null:e},XA,GA={fromPoint:function(t,n,r){var i,e,o=r;if(o.caretPositionFromPoint){if(e=o.caretPositionFromPoint(t,n))(i=r.createRange()).setStart(e.offsetNode,e.offset),i.collapse(true)}else if(r.caretRangeFromPoint)i=r.caretRangeFromPoint(t,n);else if(o.body.createTextRange){i=o.body.createTextRange();try{i.moveToPoint(t,n),i.collapse(true)}catch(e){i=YA(t,n,r)}return KA(i,r.body)}return i}},JA,QA=function(n,e){return ee.map(e,function(e){var t=n.fire("GetSelectionRange",{range:e});return t.range!==e?t.range:e})},ZA=function(e,t){return ao.fromDom(e.dom().cloneNode(t))},eD,tD=function(e){return ZA(e,true)},nD=function(e,t){var n=ao.fromTag(t),r=ea.clone(e);return ea.setAll(n,r),n},rD,iD,oD=function(e){return ZA(e,false)},aD=nD,sD=tD,uD=function(e,t){var n=nD(e,t),r=Os.children(tD(e));return Dp(n,r),n},lD=function(e,t){var n=nD(e,t);kp.before(e,n);var r=Os.children(e);return Dp(n,r),Mp.remove(e),n},fD,cD=function(e,t){var n,r=(t||document).createDocumentFragment();return ee.each(e,function(e){r.appendChild(e.dom())}),ao.fromDom(r)},dD=function(e){var t=e.startContainer,n=e.startOffset;if(Wu.isText(t))return 0===n?w.some(ao.fromDom(t)):w.none();else return w.from(t.childNodes[n]).map(ao.fromDom)},mD=function(e){var t=e.endContainer,n=e.endOffset;if(Wu.isText(t))return n===t.data.length?w.some(ao.fromDom(t)):w.none();else return w.from(t.childNodes[n-1]).map(ao.fromDom)},hD=function(t){return Os.firstChild(t).fold(b.constant([t]),function(e){return[t].concat(hD(e))})},pD=function(t){return Os.lastChild(t).fold(b.constant([t]),function(e){if("br"===To.name(e))return Os.prevSibling(e).map(function(e){return[t].concat(pD(e))}).getOr([]);else return[t].concat(pD(e))})},gD=function(i,e){return Xc([dD(e),mD(e)],function(e,t){var n=ee.find(hD(i),b.curry(ms.eq,e)),r=ee.find(pD(i),b.curry(ms.eq,t));return n.isSome()&&r.isSome()}).getOr(false)},vD=function(e,t,n,r){var i=n,o=new iu(n,i),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==Yn.trim(n.nodeValue).length){if(r)t.setStart(n,0);else t.setEnd(n,n.nodeValue.length);return}if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName)){if(r)t.setStartBefore(n);else if("BR"===n.nodeName)t.setEndBefore(n);else t.setEndAfter(n);return}if(Me.ie&&Me.ie<11&&e.isBlock(n)&&e.isEmpty(n)){if(r)t.setStart(n,0);else t.setEnd(n,0);return}}while(n=r?o.next():o.prev());if("BODY"===i.nodeName)if(r)t.setStart(i,0);else t.setEnd(i,i.childNodes.length)},bD=Va.immutable("element","width","rows"),yD=Va.immutable("element","cells"),wD=Va.immutable("x","y"),xD=function(e,t){var n=parseInt(ea.get(e,t),10);return isNaN(n)?1:n},CD=function(e,t,n,r,i){for(var o=xD(i,"rowspan"),a=xD(i,"colspan"),s=e.rows(),u=n;u<n+o;u++){if(!s[u])s[u]=yD(sD(r),[]);for(var l=t;l<t+a;l++){var f;s[u].cells()[l]=u===n&&l===t?i:oD(i)}}},kD=function(e,t,n){var r=e.rows(),i;return!!(r[n]?r[n].cells():[])[t]},SD=function(e,t,n){while(kD(e,t,n))t++;return t},ED=function(e){return ee.foldl(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},ND=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var i=n[r].cells(),o=0;o<i.length;o++)if(ms.eq(i[o],t))return w.some(wD(o,r));return w.none()},_D=function(e,t,n,r,i){for(var o=[],a=e.rows(),s=n;s<=i;s++){var u=a[s].cells(),l=t<r?u.slice(t,r+1):u.slice(r,t+1);o.push(yD(a[s].element(),l))}return o},TD=function(e,t,n){var r=t.x(),i=t.y(),o=n.x(),a=n.y(),s=i<a?_D(e,r,i,o,a):_D(e,r,a,o,i);return bD(e.element(),ED(s),s)},RD=function(e,t){var n=oD(e.element()),r=ao.fromTag("tbody");return Dp(r,t),kp.append(n,r),n},AD=function(e){return ee.map(e.rows(),function(e){var t=ee.map(e.cells(),function(e){var t=sD(e);return ea.remove(t,"colspan"),ea.remove(t,"rowspan"),t}),n=oD(e.element());return Dp(n,t),n})},DD,PD,BD,OD=function(e){var i=bD(oD(e),0,[]);return ee.each(Pd(e,"tr"),function(n,r){ee.each(Pd(n,"td,th"),function(e,t){CD(i,SD(i,t,r),r,n,e)})}),bD(i.element(),ED(i.rows()),i.rows())},MD=function(e){return RD(e,AD(e))},LD=function(n,e,r){return ND(n,e).bind(function(t){return ND(n,r).map(function(e){return TD(n,t,e)})})},ID=function(e){return ee.find(e,function(e){return"ul"===To.name(e)||"ol"===To.name(e)})},HD=function(t,n){return ee.find(t,function(e){return"li"===To.name(e)&&gD(e,n)}).fold(b.constant([]),function(e){return ID(t).map(function(e){return[ao.fromTag("li"),ao.fromTag(To.name(e))]}).getOr([])})},FD=function(e,t){var n=ee.foldl(t,function(e,t){return kp.append(t,e),t},e);return t.length>0?cD([n]):n},zD=function(t){if(wu(t))return Os.parent(t).filter(yu).fold(b.constant([]),function(e){return[t,e]});else return yu(t)?[t]:[]},WD=function(e,t){var n=ao.fromDom(t.commonAncestorContainer),r=ab(n,e),i=ee.filter(r,function(e){return gu(e)||hu(e)}),o=HD(r,t),a=i.concat(o.length?o:zD(n));return ee.map(a,oD)},UD=function(){return cD([])},jD=function(e,t){return FD(ao.fromDom(t.cloneContents()),WD(e,t))},VD=function(e,t){return vv(t,"table",b.curry(ms.eq,e))},$D=function(e,i){return VD(e,i[0]).bind(function(e){var t=i[0],n=i[i.length-1],r=OD(e);return LD(r,t,n).map(function(e){return cD([MD(e)])})}).getOrThunk(UD)},qD=function(e,t){return t.length>0&&t[0].collapsed?UD():jD(e,t[0])},YD,KD=function(e,t){var n=mC(t,e);return n.length>0?$D(e,n):qD(e,t)},XD,GD=function(e,t){var n=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),o,a=QA(e,iC(i));if((t=t||{}).get=true,t.format=t.format||"html",t.selection=true,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return e.selection.isCollapsed()?"":$l(n.text||(i.toString?i.toString():""));if(n.cloneContents){if(o=t.contextual?KD(ao.fromDom(e.getBody()),a).dom():n.cloneContents())r.appendChild(o)}else if(void 0!==n.item||void 0!==n.htmlText)r.innerHTML="<br>"+(n.item?n.item(0).outerHTML:n.htmlText),r.removeChild(r.firstChild);else r.innerHTML=n.toString();t.getInner=true;var s=e.selection.serializer.serialize(r,t);if("tree"===t.format)return s;return t.content=e.selection.isCollapsed()?"":s,e.fire("GetContent",t),t.content},JD,QD=function(e,t,n){var r=e.selection.getRng(),i,o=e.getDoc(),a,s;if((n=n||{format:"html"}).set=true,n.selection=true,n.content=t,!n.no_events)if((n=e.fire("BeforeSetContent",n)).isDefaultPrevented())return void e.fire("SetContent",n);if(t=n.content,r.insertNode){if(t+='<span id="__caret">_</span>',r.startContainer===o&&r.endContainer===o)o.body.innerHTML=t;else if(r.deleteContents(),0===o.body.childNodes.length)o.body.innerHTML=t;else if(r.createContextualFragment)r.insertNode(r.createContextualFragment(t));else a=o.createDocumentFragment(),s=o.createElement("div"),a.appendChild(s),s.outerHTML=t,r.insertNode(a);i=e.dom.get("__caret"),(r=o.createRange()).setStartBefore(i),r.setEndBefore(i),e.selection.setRng(r),e.dom.remove("__caret");try{e.selection.setRng(r)}catch(e){}}else{if(r.item)o.execCommand("Delete",false,null),r=e.getRng();if(/^\s+/.test(t))r.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp");else r.pasteHTML(t)}if(!n.no_events)e.fire("SetContent",n)},ZD=function(e,t,n,r,i){var o=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return w.from(o).map(ao.fromDom).map(function(e){return!r||!t.collapsed?Os.child(e,i(e,a)).getOr(e):e}).bind(function(e){return To.isElement(e)?w.some(e):Os.parent(e)}).map(function(e){return e.dom()}).getOr(e)},eP=function(e,t,n){return ZD(e,t,true,n,function(e,t){return Math.min(Os.childNodesCount(e),t)})},tP=function(e,t,n){return ZD(e,t,false,n,function(e,t){return t>0?t-1:t})},nP=function(e,t){var n=e;while(e&&Wu.isText(e)&&0===e.length)e=t?e.nextSibling:e.previousSibling;return e||n},rP=function(e,t){var n,r,i,o,a;if(!t)return e;if(r=t.startContainer,i=t.endContainer,o=t.startOffset,a=t.endOffset,n=t.commonAncestorContainer,!t.collapsed){if(r===i)if(a-o<2)if(r.hasChildNodes())n=r.childNodes[o];if(3===r.nodeType&&3===i.nodeType){if(r.length===o)r=nP(r.nextSibling,true);else r=r.parentNode;if(0===a)i=nP(i.previousSibling,false);else i=i.parentNode;if(r&&r===i)return r}}if(n&&3===n.nodeType)return n.parentNode;return n},iP=function(e,t,n,r){var i,o,a=[];if(o=e.getRoot(),n=e.getParent(n||eP(o,t,false),e.isBlock),r=e.getParent(r||tP(o,t,false),e.isBlock),n&&n!==o)a.push(n);if(n&&r&&n!==r){var s=new iu(i=n,o);while((i=s.next())&&i!==r)if(e.isBlock(i))a.push(i)}if(r&&n!==r&&r!==o)a.push(r);return a},oP=function(r,e,i){return w.from(e).map(function(e){var t=r.nodeIndex(e),n=r.createRng();if(n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),i)vD(r,n,e,true),vD(r,n,e,false);return n})},aP=Yn.each,sP=function(e){return!!e.select},uP=function(e){return!!(e&&e.ownerDocument)&&ms.contains(ao.fromDom(e.ownerDocument),ao.fromDom(e))},lP=function(e){if(!e)return false;else if(sP(e))return true;else return uP(e.startContainer)&&uP(e.endContainer)},fP=function(a,s,e,u){var n,t,l,f,c,r=function(e,t){var n=a.createRng();if(!e)vD(a,n,u.getBody(),true),x(n);else n.setStart(e,t),n.setEnd(e,t),x(n),b(false)},i,o=function(e,t){return QD(u,e,t)},d=function(e){return eP(u.getBody(),w(),e)},m=function(e){return tP(u.getBody(),w(),e)},h,p,g=function(e,t){return oP(a,e,t).each(x),e},v=function(){var e=w(),t=y();if(!e||e.item)return false;if(e.compareEndPoints)return 0===e.compareEndPoints("StartToEnd",e);return!t||e.collapsed},b=function(e){var t=w();t.collapse(!!e),x(t)},y=function(){return s.getSelection?s.getSelection():s.document.selection},w=function(){var e,t,n,r,i=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!s)return null;if("undefined"===typeof(r=s.document)||null===r)return null;if(void 0!==u.bookmark&&false===rE(u)){var o=jk.getRng(u);if(o.isSome())return o.map(function(e){return QA(u,[e])[0]}).getOr(r.createRange())}try{if(e=y())if(e.rangeCount>0)t=e.getRangeAt(0);else t=e.createRange?e.createRange():r.createRange()}catch(e){}if(!(t=QA(u,[t])[0]))t=r.createRange?r.createRange():r.body.createTextRange();if(t.setStart&&9===t.startContainer.nodeType&&t.collapsed)n=a.getRoot(),t.setStart(n,0),t.setEnd(n,0);if(l&&f)if(0===i(t.START_TO_START,t,l)&&0===i(t.END_TO_END,t,l))t=f;else f=l=null;return t},x=function(e,t){var n,r,i;if(!lP(e))return;var o=sP(e)?e:null;if(o){f=null;try{o.select()}catch(e){}return}if(n=y(),e=(i=u.fire("SetSelectionRange",{range:e,forward:t})).range,n){f=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}if(false===t&&n.extend)n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset);l=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&n.setBaseAndExtent&&!Me.ie)if(e.endOffset-e.startOffset<2)if(e.startContainer.hasChildNodes())if((r=e.startContainer.childNodes[e.startOffset])&&"IMG"===r.tagName)if(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode!==e.startContainer||n.focusNode!==e.endContainer)n.setBaseAndExtent(r,0,r,1);u.fire("AfterSetSelectionRange",{range:e,forward:t})},C,k,S,E=function(){var e=y(),t,n;if(!e||!e.anchorNode||!e.focusNode)return true;return(t=a.createRng()).setStart(e.anchorNode,e.anchorOffset),t.collapse(true),(n=a.createRng()).setStart(e.focusNode,e.focusOffset),n.collapse(true),t.compareBoundaryPoints(t.START_TO_START,n)<=0},N,_,T,R,A,D,P=function(){s=null,t.destroy()},B={bookmarkManager:null,controlSelection:null,dom:a,win:s,serializer:e,editor:u,collapse:b,setCursorLocation:r,getContent:function(e){return GD(u,e)},setContent:o,getBookmark:function(e,t){return n.getBookmark(e,t)},moveToBookmark:function(e){return n.moveToBookmark(e)},select:g,isCollapsed:v,isForward:E,setNode:function(e){return o(a.getOuterHTML(e)),e},getNode:function(){return rP(u.getBody(),w())},getSel:y,setRng:x,getRng:w,getStart:d,getEnd:m,getSelectedBlocks:function(e,t){return iP(a,w(),e,t)},normalize:function(){var e=w();if(!aC(y())){var t=ZC.normalize(a,e);return t.each(function(e){x(e,E())}),t.getOr(e)}return e},selectorChanged:function(e,t){var o;if(!c)c={},o={},u.on("NodeChange",function(e){var n=e.element,r=a.getParents(n,null,a.getRoot()),i={};aP(c,function(e,n){aP(r,function(t){if(a.is(t,n)){if(!o[n])aP(e,function(e){e(true,{node:t,selector:n,parents:r})}),o[n]=e;return i[n]=e,false}})}),aP(o,function(e,t){if(!i[t])delete o[t],aP(e,function(e){e(false,{node:n,selector:t,parents:r})})})});if(!c[e])c[e]=[];return c[e].push(t),B},getScrollContainer:function(){var e,t=a.getRoot();while(t&&"BODY"!==t.nodeName){var n=getComputedStyle(t);if(n&&"fixed"==n.position)return;if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){return VA(u,e,t)},placeCaretAt:function(e,t){return x(GA.fromPoint(e,t,u.getDoc()))},getBoundingClientRect:function(){var e=w();return e.collapsed?cc.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:P};return n=LA(B),t=zA(B,u),B.bookmarkManager=n,B.controlSelection=t,B},cP=Wu.isContentEditableFalse,dP=Af,mP=Mm,hP=Om,pP=function(e,t){while(t=e(t))if(t.isVisible())return t;return t},gP=function(e,t){var n=Cm(e,t);if(!n&&Wu.isBr(e.getNode()))return true;return n},vP=function(e,t,n,r){var i,o,a,s,u=e===Hm.Forwards,l=u?hP:mP;if(!r.collapsed)if(i=dP(r),cP(i))return Fc(e,t,i,e===Hm.Backwards);if(s=uf(r),l(o=Bm(e,t.getBody(),r)))return Wc(t,o.getNode(!u));if(!(o=n(o))){if(s)return r;return null}if(l(o))return Fc(e,t,o.getNode(!u),u);if(l(a=n(o)))if(gP(o,a))return Fc(e,t,a.getNode(!u),u);if(s)return jc(t,o.toRange());return null},bP=function(e,t,n,r){var i,o,a,s,u,l,f,c,d;if(d=dP(r),i=Bm(e,t.getBody(),r),o=n(t.getBody(),n_(1),i),a=On.filter(o,r_(1)),u=On.last(i.getClientRects()),hP(i)||Lm(i))d=i.getNode();if(mP(i)||Im(i))d=i.getNode(true);if(!u)return null;if(l=u.left,s=l_(a,l))if(cP(s.node))return f=Math.abs(l-s.left),c=Math.abs(l-s.right),Fc(e,t,s.node,f<c);if(d){var m=t_(e,t.getBody(),n_(1),d);if(s=l_(On.filter(m,r_(1)),l))return jc(t,s.position.toRange());if(s=On.last(On.filter(m,r_(0))))return jc(t,s.position.toRange())}},yP=function(e){var t=e.dom.create(e.settings.forced_root_block);if(!Me.ie||Me.ie>=11)t.innerHTML='<br data-mce-bogus="1">';return t},wP=function(e,t,n){var r,i,o,a=Qm(e.getBody()),s=Uf.curry(pP,a.next),u=Uf.curry(pP,a.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;if(1===t)i=s(cc.fromRangeStart(n));else i=u(cc.fromRangeStart(n));if(!i){if(o=yP(e),1===t)e.$(r).after(o);else e.$(r).before(o);e.selection.select(o,true),e.selection.collapse()}}},xP=function(e,t){var n=Qm(e.getBody()),r=Uf.curry(pP,n.next),i=Uf.curry(pP,n.prev),o,a=t?Hm.Forwards:Hm.Backwards,s=t?r:i,u=e.selection.getRng();if(o=vP(a,e,s,u))return o;if(o=wP(e,a,u))return o;return null},CP=function(e,t){var n,r=t?1:-1,i=t?e_:ZN,o=e.selection.getRng();if(n=bP(r,e,i,o))return n;if(n=wP(e,r,o))return n;return null},kP=function(t,n){return function(){var e=xP(t,n);if(e)return t.selection.setRng(e),true;else return false}},SP=function(t,n){return function(){var e=CP(t,n);if(e)return t.selection.setRng(e),true;else return false}},EP=function(e){return ee.map(e,function(e){return HR.merge({shiftKey:false,altKey:false,ctrlKey:false,metaKey:false,keyCode:0,action:b.noop},e)})},NP=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},_P=function(e,t){return ee.bind(EP(e),function(e){return NP(e,t)?[e]:[]})},TP,RP,AP=_P,DP=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},PP=function(e,t){return ee.find(_P(e,t),function(e){return e.action()})},BP=function(e,t,n){var r=eo.detect().os;PP([{keyCode:E_.RIGHT,action:kP(e,true)},{keyCode:E_.LEFT,action:kP(e,false)},{keyCode:E_.UP,action:SP(e,false)},{keyCode:E_.DOWN,action:SP(e,true)},{keyCode:E_.RIGHT,action:tm(e,true)},{keyCode:E_.LEFT,action:tm(e,false)},{keyCode:E_.UP,action:nm(e,false)},{keyCode:E_.DOWN,action:nm(e,true)},{keyCode:E_.RIGHT,action:Tx.move(e,t,true)},{keyCode:E_.LEFT,action:Tx.move(e,t,false)},{keyCode:E_.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Tx.moveNextWord(e,t)},{keyCode:E_.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Tx.movePrevWord(e,t)}],n).each(function(e){n.preventDefault()})},OP,MP=function(t,n){t.on("keydown",function(e){if(false===e.isDefaultPrevented())BP(t,n,e)})},LP=function(e,t){var n=ab(t,e);return ee.findIndex(n,pu).fold(b.constant(n),function(e){return n.slice(0,e)})},IP=function(e){return 1===Os.children(e).length},HP=function(e,t,n,r){var i=b.curry(Mw.isFormatElement,t),o=ee.map(ee.filter(r,i),function(e){return e.dom()});if(0===o.length)ny(t,e,n);else{var a=Mw.replaceWithCaretFormat(n.dom(),o);t.selection.setRng(a.toRange())}},FP=function(n,r){var e=ao.fromDom(n.getBody()),t=ao.fromDom(n.selection.getStart()),i=ee.filter(LP(e,t),IP);return ee.last(i).map(function(e){var t=cc.fromRangeStart(n.selection.getRng());if(lv(r,t,e.dom()))return HP(r,n,e,i),true;else return false}).getOr(false)},zP,WP=function(e,t){return e.selection.isCollapsed()?FP(e,t):false},UP=function(e,t,n){PP([{keyCode:E_.BACKSPACE,action:DP(dy,e,false)},{keyCode:E_.DELETE,action:DP(dy,e,true)},{keyCode:E_.BACKSPACE,action:DP(Ix,e,t,false)},{keyCode:E_.DELETE,action:DP(Ix,e,t,true)},{keyCode:E_.BACKSPACE,action:DP(Eb,e,false)},{keyCode:E_.DELETE,action:DP(Eb,e,true)},{keyCode:E_.BACKSPACE,action:DP(vb,e,false)},{keyCode:E_.DELETE,action:DP(vb,e,true)},{keyCode:E_.BACKSPACE,action:DP(BC,e,false)},{keyCode:E_.DELETE,action:DP(BC,e,true)},{keyCode:E_.BACKSPACE,action:DP(WP,e,false)},{keyCode:E_.DELETE,action:DP(WP,e,true)}],n).each(function(e){n.preventDefault()})},jP=function(e,t){PP([{keyCode:E_.BACKSPACE,action:DP(my,e)},{keyCode:E_.DELETE,action:DP(my,e)}],t)},VP,$P=function(t,n){t.on("keydown",function(e){if(false===e.isDefaultPrevented())UP(t,n,e)}),t.on("keyup",function(e){if(false===e.isDefaultPrevented())jP(t,e)})},qP=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}else return r},YP,KP,XP,GP,JP,QP,ZP,eB,tB,nB,rB,iB,oB,aB=function(e){return e.getParam("iframe_attrs",{})},sB=function(e){return e.getParam("doctype","<!DOCTYPE html>")},uB=function(e){return e.getParam("document_base_url","")},lB=function(e){return qP(e,"body_id","tinymce")},fB=function(e){return qP(e,"body_class","")},cB=function(e){return e.getParam("content_security_policy","")},dB=function(e){return e.getParam("br_in_pre",true)},mB=function(e){if(e.getParam("force_p_newlines",false))return"p";var t=e.getParam("forced_root_block","p");return false===t?"":t},hB=function(e){return e.getParam("forced_root_block_attrs",{})},pB=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},gB=function(e){return e.getParam("no_newline_selector","")},vB=function(e){return e.getParam("keep_styles",true)},bB=function(e){return e.getParam("end_container_on_empty_block",false)},yB=function(e){while(e){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},wB,xB,CB=function(e){return w.from(e.dom.getParent(e.selection.getStart(true),e.dom.isBlock))},kB,SB,EB=function(e,t){var n,r,i,o=t,a,s=e.dom,u=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){var l=yB(t.firstChild);if(l&&/^(UL|OL|DL)$/.test(l.nodeName))t.insertBefore(s.doc.createTextNode(" "),t.firstChild)}if(i=s.createRng(),t.normalize(),t.hasChildNodes()){n=new iu(t,t);while(r=n.current()){if(Wu.isText(r)){i.setStart(r,0),i.setEnd(r,0);break}if(u[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}o=r,r=n.next()}if(!r)i.setStart(o,0),i.setEnd(o,0)}else if(Wu.isBr(t))if(t.nextSibling&&s.isBlock(t.nextSibling))i.setStartBefore(t),i.setEndBefore(t);else i.setStartAfter(t),i.setEndAfter(t);else i.setStart(t,0),i.setEnd(t,0);e.selection.setRng(i),s.remove(a),e.selection.scrollIntoView(t)},NB=function(e,t){var n=e.getRoot(),r,i;r=t;while(r!==n&&"false"!==e.getContentEditable(r)){if("true"===e.getContentEditable(r))i=r;r=r.parentNode}return r!==n?i:n},_B=CB,TB=function(e){return CB(e).fold(b.constant(""),function(e){return e.nodeName.toUpperCase()})},RB=function(e){return CB(e).filter(function(e){return wu(ao.fromDom(e))}).isSome()},AB=function(e,t){return e.firstChild&&e.firstChild.nodeName===t},DB=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},PB=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},BB=function(e){return PB(e)&&PB(e.parentNode)},OB=function(e){var t=e.parentNode;if(/^(LI|DT|DD)$/.test(t.nodeName))return t;return e},MB=function(e,t,n){var r=e[n?"firstChild":"lastChild"];while(r){if(Wu.isElement(r))break;r=r[n?"nextSibling":"previousSibling"]}return r===t},LB,IB=function(e,t,n,r,i){var o=e.dom,a=e.selection.getRng();if(n===e.getBody())return;if(BB(n))i="LI";var s=i?t(i):o.create("BR");if(MB(n,r,true)&&MB(n,r,false))if(DB(n,"LI"))o.insertAfter(s,OB(n));else o.replace(s,n);else if(MB(n,r,true))if(DB(n,"LI"))o.insertAfter(s,OB(n)),s.appendChild(o.doc.createTextNode(" ")),s.appendChild(n);else n.parentNode.insertBefore(s,n);else if(MB(n,r,false))o.insertAfter(s,OB(n));else{n=OB(n);var u=a.cloneRange();u.setStartAfter(r),u.setEndAfter(n);var l=u.extractContents();if("LI"===i&&AB(l,"LI"))s=l.firstChild,o.insertAfter(l,n);else o.insertAfter(l,n),o.insertAfter(s,n)}o.remove(r),EB(e,s)},HB=function(e){return e&&"A"===e.nodeName&&0===Yn.trim($l(e.innerText||e.textContent)).length},FB=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},zB=function(e){e.innerHTML='<br data-mce-bogus="1">'},WB=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},UB=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},jB=function(e,t,n){var r=n,i=[],o;if(!r)return;while(r=r.firstChild){if(e.isBlock(r))return;if(Wu.isElement(r)&&!t[r.nodeName.toLowerCase()])i.push(r)}o=i.length;while(o--)if(!(r=i[o]).hasChildNodes()||r.firstChild===r.lastChild&&""===r.firstChild.nodeValue)e.remove(r);else if(HB(r))e.remove(r)},VB=function(e,t,n){if(false===Wu.isText(t))return n;else if(e)return 1===n&&t.data.charAt(n-1)===Vl?0:n;else return n===t.data.length-1&&t.data.charAt(n)===Vl?t.data.length:n},$B=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,VB(true,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,VB(false,e.endContainer,e.endOffset)),t},qB=function(e){do{if(Wu.isText(e))e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"");e=e.firstChild}while(e)},YB=function(e,t){var n=e.getRoot(),r,i;r=t;while(r!==n&&"false"!==e.getContentEditable(r)){if("true"===e.getContentEditable(r))i=r;r=r.parentNode}return r!==n?i:n},KB=function(e,t){var n=mB(e);if(n&&n.toLowerCase()===t.tagName.toLowerCase())e.dom.setAttribs(t,hB(e))},XB=function(e,t,n,r,i){var o,a,s,u,l,f,c=t||"P",d=e.dom,m=YB(d,r);if(!(a=d.getParent(r,d.isBlock))||!UB(d,a)){if((a=a||m)===e.getBody()||FB(a))f=a.nodeName.toLowerCase();else f=a.parentNode.nodeName.toLowerCase();if(!a.hasChildNodes())return o=d.create(c),KB(e,o),a.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;u=r;while(u.parentNode!==a)u=u.parentNode;while(u&&!d.isBlock(u))u=(s=u).previousSibling;if(s&&e.schema.isValidChild(f,c.toLowerCase())){o=d.create(c),KB(e,o),s.parentNode.insertBefore(o,s),u=s;while(u&&!d.isBlock(u))l=u.nextSibling,o.appendChild(u),u=l;n.setStart(r,i),n.setEnd(r,i)}}return r},GB=function(e,t){var n;if(t.normalize(),!(n=t.lastChild)||/^(left|right)$/gi.test(e.getStyle(n,"float",true)))e.add(t,"br")},JB,QB=function(a,e){var t,s,u,l,f,n,r,i,o,c,d,m,h,p=a.dom,g=a.schema,v=g.getNonEmptyElements(),b=a.selection.getRng(),y=function(e){var t=u,n,r,i,o=g.getTextInlineElements();if(e||"TABLE"===c||"HR"===c)n=p.create(e||m),KB(a,n);else n=f.cloneNode(false);if((i=n).classList.remove("without-margin"),false===vB(a))p.setAttrib(n,"style",null),p.setAttrib(n,"class",null);else do{if(o[t.nodeName]){if(Mw.isCaretNode(t))continue;if(r=t.cloneNode(false),p.setAttrib(r,"id",""),n.hasChildNodes())r.appendChild(n.firstChild),n.appendChild(r);else i=r,n.appendChild(r)}}while((t=t.parentNode)&&t!==s);return zB(i),n},w=function(e){var t=Me.ie?/^[ \t\r\n\uFEFF]*$/:/^[ \t\r\n]*$/,n,r,i,o;if(o=VB(e,u,l),Wu.isText(u)&&(e?o>0:o<u.nodeValue.length))return false;if(u.parentNode===f&&h&&!e)return true;if(e&&Wu.isElement(u)&&u===f.firstChild)return true;if(WB(u,"TABLE")||WB(u,"HR"))return h&&!e||!h&&e;if(n=new iu(u,f),Wu.isText(u))if(e&&0===o)n.prev();else if(!e&&o===u.nodeValue.length)n.next();while(r=n.current()){if(Wu.isElement(r)){if(!r.getAttribute("data-mce-bogus"))if(i=r.nodeName.toLowerCase(),v[i]&&"br"!==i)return false}else if(Wu.isText(r)&&!t.test(r.nodeValue))return false;if(e)n.prev();else n.next()}return true},x=function(){if(/^(H[1-6]|PRE|FIGURE)$/.test(c)&&"HGROUP"!==d)r=y(m);else r=y();if(bB(a)&&UB(p,o)&&p.isEmpty(f))r=p.split(o,f);else p.insertAfter(r,f);EB(a,r)};if(ZC.normalize(p,b).each(function(e){b.setStart(e.startContainer,e.startOffset),b.setEnd(e.endContainer,e.endOffset)}),u=b.startContainer,l=b.startOffset,m=mB(a),n=e.shiftKey,Wu.isElement(u)&&u.hasChildNodes())if(h=l>u.childNodes.length-1,u=u.childNodes[Math.min(l,u.childNodes.length-1)]||u,h&&Wu.isText(u))l=u.nodeValue.length;else l=0;if(!(s=YB(p,u)))return;if(m&&!n||!m&&n)u=XB(a,m,b,u,l);if(f=p.getParent(u,p.isBlock),o=f?p.getParent(f.parentNode,p.isBlock):null,c=f?f.nodeName.toUpperCase():"","LI"===(d=o?o.nodeName.toUpperCase():"")&&!e.ctrlKey)o=(f=o).parentNode,c=d;if(/^(LI|DT|DD)$/.test(c))if(p.isEmpty(f))return void IB(a,y,o,f,m);if(m&&f===a.getBody())return;if(m=m||"P",Kl(f)){if(r=sf(f),p.isEmpty(f))zB(f);EB(a,r)}else if(w())x();else if(w(true))r=f.parentNode.insertBefore(y(),f),EB(a,WB(f,"HR")?r:f);else{if((t=$B(b).cloneRange()).setEndAfter(f),i=t.extractContents(),qB(i),r=i.firstChild,p.insertAfter(i,f),jB(p,v,r),GB(p,f),p.isEmpty(f))zB(f);if(r.normalize(),p.isEmpty(r))p.remove(r),x();else EB(a,r)}p.setAttrib(r,"id",""),a.fire("NewBlock",{newBlock:r})},ZB=function(e,t){return _B(e).filter(function(e){return t.length>0&&os.is(ao.fromDom(e),t)}).isSome()},eO,tO,nO=function(e){return ZB(e,pB(e))},rO=function(e){return ZB(e,gB(e))},iO=_b([{br:[]},{block:[]},{none:[]}]),oO=function(e,t){return rO(e)},aO=function(r){return function(e,t){var n;return""===mB(e)===r}},sO=function(n){return function(e,t){return RB(e)===n}},uO=function(r){return function(e,t){var n;return"PRE"===TB(e)===r}},lO=function(n){return function(e,t){return dB(e)===n}},fO=function(e,t){return nO(e)},cO=function(e,t){return t},dO=function(e){var t=mB(e),n=NB(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t?t:"P")},mO=function(t,i){return function(n,r){var e;return ee.foldl(t,function(e,t){return e&&t(n,r)},true)?w.some(i):w.none()}},hO,pO=function(e,t){return Iw([mO([oO],iO.none()),mO([uO(true),lO(false),cO],iO.br()),mO([uO(true),lO(false)],iO.block()),mO([uO(true),lO(true),cO],iO.block()),mO([uO(true),lO(true)],iO.br()),mO([sO(true),cO],iO.br()),mO([sO(true)],iO.block()),mO([aO(true),cO,dO],iO.block()),mO([aO(true)],iO.br()),mO([fO],iO.br()),mO([aO(false),cO],iO.br()),mO([dO],iO.block())],[e,t.shiftKey]).getOr(iO.none())},gO,vO=function(e,t){pO(e,t).fold(function(){mk.insert(e,t)},function(){QB(e,t)},b.noop)},bO=function(e){if(e.typing)e.typing=false,e.add()},yO=function(e,t){if(t.isDefaultPrevented())return;t.preventDefault(),bO(e.undoManager),e.undoManager.transact(function(){if(false===e.selection.isCollapsed())e.execCommand("Delete");vO(e,t)})},wO,xO=function(t){t.on("keydown",function(e){if(e.keyCode===E_.ENTER)yO(t,e)})},CO=function(e,t){return NO(e)&&Wu.isText(t.container())},kO=function(e,t){var n=t.container(),r=t.offset();n.insertData(r," "),e.selection.setCursorLocation(n,r+1)},SO=function(e,t,n){if(CO(n,t))return kO(e,t),true;else return false},EO=function(e){var t=b.curry(tv.isInlineTarget,e),n=cc.fromRangeStart(e.selection.getRng()),r;return ix(t,e.getBody(),n).map(b.curry(SO,e,n)).getOr(false)},NO=function(e){return e.fold(b.constant(false),b.constant(true),b.constant(true),b.constant(false))},_O,TO=function(e){return e.selection.isCollapsed()?EO(e):false},RO=function(e,t){PP([{keyCode:E_.SPACEBAR,action:DP(TO,e)}],t).each(function(e){t.preventDefault()})},AO,DO=function(t){t.on("keydown",function(e){if(false===e.isDefaultPrevented())RO(t,e)})},PO,BO=function(e){var t=Tx.setupSelectedState(e);MP(e,t),$P(e,t),xO(e),DO(e)};function OO(a){var i=Yn.each,s=E_.BACKSPACE,u=E_.DELETE,l=a.dom,f=a.selection,t=a.settings,e=a.parser,n=Me.gecko,r=Me.ie,o=Me.webkit,c="data:text/mce-internal,",d=r?"Text":"URL",m=function(e,t){try{a.getDoc().execCommand(e,false,t)}catch(e){}},h=function(e){return e.isDefaultPrevented()},p=function(e){var t,n;if(e.dataTransfer){if(a.selection.isCollapsed()&&"IMG"===e.target.tagName)f.select(e.target);if((t=a.selection.getContent()).length>0)n=c+escape(a.id)+","+escape(t),e.dataTransfer.setData(d,n)}},g=function(e){var t;if(e.dataTransfer)if((t=e.dataTransfer.getData(d))&&t.indexOf(c)>=0)return t=t.substr(c.length).split(","),{id:unescape(t[0]),html:unescape(t[1])};return null},v=function(e,t){if(a.queryCommandSupported("mceInsertClipboardContent"))a.execCommand("mceInsertClipboardContent",false,{content:e,internal:t});else a.execCommand("mceInsertContent",false,e)},b=function(){var i=function(e){var t=l.create("body"),n=e.cloneContents();return t.appendChild(n),f.serializer.serialize(t,{format:"html"})},o=function(e){var t=i(e),n=l.createRng(),r;return n.selectNode(a.getBody()),t===i(n)};a.on("keydown",function(e){var t=e.keyCode,n,r;if(!h(e)&&(t===u||t===s)){if(n=a.selection.isCollapsed(),r=a.getBody(),n&&!l.isEmpty(r))return;if(!n&&!o(a.selection.getRng()))return;if(e.preventDefault(),a.setContent(""),r.firstChild&&l.isBlock(r.firstChild))a.selection.setCursorLocation(r.firstChild,0);else a.selection.setCursorLocation(r,0);a.nodeChanged()}})},y=function(){a.shortcuts.add("meta+a",null,"SelectAll")},w=function(){if(!a.settings.content_editable)l.bind(a.getDoc(),"mousedown mouseup",function(e){var t;if(e.target===a.getDoc().documentElement)if(t=f.getRng(),a.getBody().focus(),"mousedown"===e.type){if(Gl(t.startContainer))return;f.placeCaretAt(e.clientX,e.clientY)}else f.setRng(t)})},x=function(){a.on("keydown",function(e){if(!h(e)&&e.keyCode===s){if(!a.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&0===f.getRng().startOffset){var t=f.getNode(),n=t.previousSibling;if("HR"===t.nodeName)return l.remove(t),void e.preventDefault();if(n&&n.nodeName&&"hr"===n.nodeName.toLowerCase())l.remove(n),e.preventDefault()}}})},C=function(){if(!Range.prototype.getClientRects)a.on("mousedown",function(e){if(!h(e)&&"HTML"===e.target.nodeName){var t=a.getBody();t.blur(),$e.setEditorTimeout(a,function(){t.focus()})}})},k=function(){a.on("click",function(e){var t=e.target;if(/^(IMG|HR)$/.test(t.nodeName)&&"false"!==l.getContentEditableParent(t))e.preventDefault(),a.selection.select(t),a.nodeChanged();if("A"===t.nodeName&&l.hasClass(t,"mce-item-anchor"))e.preventDefault(),f.select(t)})},S=function(){var n=function(){var e=l.getAttribs(f.getStart().cloneNode(false));return function(){var t=f.getStart();if(t!==a.getBody())l.setAttrib(t,"style",null),i(e,function(e){t.setAttributeNode(e.cloneNode(true))})}},r=function(){return!f.isCollapsed()&&l.getParent(f.getStart(),l.isBlock)!==l.getParent(f.getEnd(),l.isBlock)};a.on("keypress",function(e){var t;if(!h(e)&&(8===e.keyCode||46===e.keyCode)&&r())return t=n(),a.getDoc().execCommand("delete",false,null),t(),e.preventDefault(),false}),l.bind(a.getDoc(),"cut",function(e){var t;if(!h(e)&&r())t=n(),$e.setEditorTimeout(a,function(){t()})})},E=function(){a.on("keydown",function(e){if(!h(e)&&e.keyCode===s)if(f.isCollapsed()&&0===f.getRng().startOffset){var t=f.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),false}})},N,_=function(){var e=function(){if(m("StyleWithCSS",false),m("enableInlineTableEditing",false),!t.object_resizing)m("enableObjectResizing",false)};if(!t.readonly)a.on("BeforeExecCommand MouseDown",e)},T=function(){var t=function(){i(l.select("a"),function(e){var t=e.parentNode,n=l.getRoot();if(t.lastChild===e){while(t&&!l.isBlock(t)){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}l.add(t,"br",{"data-mce-bogus":1})}})};a.on("SetContent ExecCommand",function(e){if("setcontent"===e.type||"mceInsertLink"===e.command)t()})},R=function(){if(t.forced_root_block)a.on("init",function(){m("DefaultParagraphSeparator",t.forced_root_block)})},A=function(){a.on("keyup focusin mouseup",function(e){if(!E_.modifierPressed(e))f.normalize()},true)},D=function(){a.contentStyles.push("img:-moz-broken {"+"-moz-force-broken-image-icon:1;"+"min-width:24px;"+"min-height:24px"+"}")},P=function(){if(!a.inline)a.on("keydown",function(){if(document.activeElement===document.body)a.getWin().focus()})},B=function(){if(!a.inline)a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(e){var t;if("HTML"===e.target.nodeName){if(Me.ie>11)return void a.getBody().focus();t=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(t),a.selection.normalize(),a.nodeChanged()}})},O=function(){if(Me.mac)a.on("keydown",function(e){if(E_.metaKeyPressed(e)&&!e.shiftKey&&(37===e.keyCode||39===e.keyCode))e.preventDefault(),a.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary")})},M=function(){m("AutoUrlDetect",false)},L=function(){a.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},I=function(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(e){e.preventDefault()})})},H=function(){e.addNodeFilter("br",function(e){var t=e.length;while(t--)if("Apple-interchange-newline"===e[t].attr("class"))e[t].remove()})},F=function(){var r;a.on("dragstart",function(e){r=f.getRng(),p(e)}),a.on("drop",function(e){if(!h(e)){var t=g(e);if(t){e.preventDefault();var n=GA.fromPoint(e.clientX,e.clientY,a.getDoc());if(t.id==a.id&&r)f.setRng(r),a.undoManager.transact(r.deleteContents.bind(r));r=null,f.setRng(n),v(t.html,true)}}})},z=function(){},W=function(){var e;if(!n||a.removed)return 0;return!(e=a.selection.getSel())||!e.rangeCount||0===e.rangeCount};if(a.on("keydown",function(e){var t,n,r,i,o;if(h(e)||e.keyCode!==E_.BACKSPACE)return;if(n=(t=f.getRng()).startContainer,r=t.startOffset,i=l.getRoot(),o=n,!t.collapsed||0!==r)return;while(o&&o.parentNode&&o.parentNode.firstChild===o&&o.parentNode!==i)o=o.parentNode;if("BLOCKQUOTE"===o.tagName)a.formatter.toggle("blockquote",null,o),(t=l.createRng()).setStart(n,0),t.setEnd(n,0),f.setRng(t)}),b(),!Me.windowsPhone)A();if(o)if(w(),k(),R(),I(),E(),H(),Me.iOS)P(),B(),L();else y();if(Me.ie>=11)B(),E();if(Me.ie)y(),M(),F();if(n)x(),C(),S(),_(),T(),D(),O(),E();return{refreshContentEditable:z,isHidden:W}}var MO=Pl.DOM,LO=function(e,t){var n=ao.fromDom(e.getDoc().head),r=ao.fromTag("style");ea.set(r,"type","text/css"),kp.append(r,ao.fromText(t)),kp.append(n,r)},IO=function(s){var e=yA(s.settings,s.schema);return e.addAttributeFilter("src,href,style,tabindex",function(e,t){var n=e.length,r,i=s.dom,o,a;while(n--)if(o=(r=e[n]).attr(t),a="data-mce-"+t,!r.attributes.map[a]){if(0===o.indexOf("data:")||0===o.indexOf("blob:"))continue;if("style"===t){if(!(o=i.serializeStyle(i.parseStyle(o),r.name)).length)o=null;r.attr(a,o),r.attr(t,o)}else if("tabindex"===t)r.attr(a,o),r.attr(t,null);else r.attr(a,s.convertURL(o,t,r.name))}}),e.addNodeFilter("script",function(e){var t=e.length,n,r;while(t--)if(0!==(r=(n=e[t]).attr("type")||"no/type").indexOf("mce-"))n.attr("type","mce-"+r)}),e.addNodeFilter("#cdata",function(e){var t=e.length,n;while(t--)(n=e[t]).type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"}),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){var t=e.length,n,r=s.schema.getNonEmptyElements();while(t--)if((n=e[t]).isEmpty(r)&&0===n.getAll("br").length)n.append(new sA("br",1)).shortEnded=true}),e},HO=function(t){if(t.settings.auto_focus)$e.setEditorTimeout(t,function(){var e;if(true===t.settings.auto_focus)e=t;else e=t.editorManager.get(t.settings.auto_focus);if(!e.destroyed)e.focus()},100)},FO=function(e){e.bindPendingEventDelegates(),e.initialized=true,e.fire("init"),e.focus(true),e.nodeChanged({initial:true}),e.execCallback("init_instance_callback",e),HO(e)},zO=function(e){return e.inline?MO.styleSheetLoader:e.dom.styleSheetLoader},WO,UO=function(t,e){var n=t.settings,r=t.getElement(),i=t.getDoc(),o,a;if(!n.inline)t.getElement().style.visibility=t.orgVisibility;if(!e&&!n.content_editable)i.open(),i.write(t.iframeHTML),i.close();if(n.content_editable)t.on("remove",function(){var e=this.getBody();MO.removeClass(e,"mce-content-body"),MO.removeClass(e,"mce-edit-focus"),MO.setAttrib(e,"contentEditable",null)}),MO.addClass(r,"mce-content-body"),t.contentDocument=i=n.content_document||document,t.contentWindow=n.content_window||window,t.bodyElement=r,n.content_document=n.content_window=null,n.root_name=r.nodeName.toLowerCase();if((o=t.getBody()).disabled=true,t.readonly=n.readonly,!t.readonly){if(t.inline&&"static"===MO.getStyle(o,"position",true))o.style.position="relative";o.contentEditable=t.getParam("content_editable_state",true)}if(o.disabled=false,t.editorUpload=aN(t),t.schema=wl(n),t.dom=new Pl(i,{keep_values:true,url_converter:t.convertURL,url_converter_scope:t,hex_colors:n.force_hex_style_colors,class_filter:n.class_filter,update_styles:true,root_element:t.inline?t.getBody():null,collect:n.content_editable,schema:t.schema,onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=IO(t),t.serializer=_A(n,t),t.selection=fP(t.dom,t.getWin(),t.serializer,t),t.formatter=PR(t),t.undoManager=hT(t),t._nodeChangeDispatcher=new hN(t),t._selectionOverrides=A_(t),BA(t),BO(t),mN(t),t.fire("PreInit"),!n.browser_spellcheck&&!n.gecko_spellcheck)i.body.spellcheck=false,MO.setAttrib(o,"spellcheck","false");if(t.quirks=OO(t),t.fire("PostRender"),n.directionality)o.dir=n.directionality;if(n.nowrap)o.style.whiteSpace="nowrap";if(n.protect)t.on("BeforeSetContent",function(t){Yn.each(n.protect,function(e){t.content=t.content.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})});if(t.on("SetContent",function(){t.addVisual(t.getBody())}),n.padd_empty_editor)t.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(t.load({initial:true,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type}),t.contentStyles.length>0)a="",Yn.each(t.contentStyles,function(e){a+=e+"\r\n"}),t.dom.addStyle(a);if(zO(t).loadAll(t.contentCSS,function(e){if(!t.destroyed)FO(t)},function(e){if(!t.destroyed)FO(t)}),n.content_style)LO(t,n.content_style);t.fire("initContentBody")},jO=Pl.DOM,VO=function(e,t){if(document.domain!==window.location.hostname&&Me.ie&&Me.ie<12){var n=rN.uuid("mce");e[n]=function(){UO(e)};var r="javascript:(function(){"+'document.open();document.domain="'+document.domain+'";'+'var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);'+"document.close();ed."+n+"(true);})()";return jO.setAttrib(t,"src",r),true}return false},$O=function(e){var t="number"===typeof e?e+"px":e;return t?t:""},qO=function(e,t,n,r){var i=ao.fromTag("iframe");return ea.setAll(i,r),ea.setAll(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Na(i,{width:"100%",height:$O(n),display:"block"}),i},YO=function(e){var t,n,r;if(r=sB(e)+"<html><head>",uB(e)!==e.documentBaseUrl)r+='<base href="'+e.documentBaseURI.getURI()+'" />';if(r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=lB(e),n=fB(e),cB(e))r+='<meta http-equiv="Content-Security-Policy" content="'+cB(e)+'" />';return r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'},KO=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. "+"Press ALT-F10 for toolbar. Press ALT-0 for help"),r=qO(e.id,n,t.height,aB(e)).dom();r.onload=function(){r.onload=null,e.fire("load")};var i=VO(e,r);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=YO(e),jO.add(t.iframeContainer,r),i},XO,GO=function(e,t){var n=KO(e,t);if(t.editorContainer)jO.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=jO.isHidden(t.editorContainer);if(e.getElement().style.display="none",jO.setAttrib(e.id,"aria-hidden",true),!n)UO(e)},JO=Pl.DOM,QO=function(t,n,e){var r=AE.get(e),i,o;if(i=AE.urls[e]||t.documentBaseUrl.replace(/\/$/,""),e=Yn.trim(e),r&&-1===Yn.inArray(n,e)){if(Yn.each(AE.dependencies(e),function(e){QO(t,n,e)}),t.plugins[e])return;if(o=new r(t,i,t.$),(t.plugins[e]=o).init)o.init(t,i),n.push(e)}},ZO=function(e){return e.replace(/^\-/,"")},eM=function(t){var n=[];Yn.each(t.settings.plugins.split(/[ ,]/),function(e){QO(t,n,ZO(e))})},tM=function(e){var t,n=e.settings.theme;if(Do.isString(n)){if(e.settings.theme=ZO(n),t=DE.get(n),e.theme=new t(e,DE.urls[n]),e.theme.init)e.theme.init(e,DE.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}},nM=function(e){var t,n,r,i,o,a=e.settings,s=e.getElement();if(t=a.width||JO.getStyle(s,"width")||"100%",n=a.height||JO.getStyle(s,"height")||s.offsetHeight,r=a.min_height||100,(i=/^[0-9\.]+(|px)$/i).test(""+t))t=Math.max(parseInt(t,10),100);if(i.test(""+n))n=Math.max(parseInt(n,10),r);if(o=e.theme.renderUI({targetNode:s,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),!a.content_editable)if((n=(o.iframeHeight||n)+("number"===typeof n?o.deltaHeight||0:""))<r)n=r;return o.height=n,o},rM=function(e){var t,n=e.getElement();if((t=e.settings.theme(e,n)).editorContainer.nodeType)t.editorContainer.id=t.editorContainer.id||e.id+"_parent";if(t.iframeContainer&&t.iframeContainer.nodeType)t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer";return t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t},iM=function(e){return{editorContainer:e,iframeContainer:e}},oM=function(e){var t=JO.create("div");return JO.insertAfter(t,e),iM(t)},aM=function(e){var t=e.getElement();return e.inline?iM(null):oM(t)},sM=function(e){var t=e.settings,n=e.getElement();if(e.orgDisplay=n.style.display,Do.isString(t.theme))return nM(e);else if(Do.isFunction(t.theme))return rM(e);else return aM(e)},uM,lM=function(t){var e=t.settings,n=t.getElement(),r;if(t.rtl=e.rtl_ui||t.editorManager.i18n.rtl,t.editorManager.i18n.setCode(e.language),e.aria_label=e.aria_label||JO.getAttrib(n,"aria-label",t.getLang("aria.rich_text_area")),t.fire("ScriptsLoaded"),tM(t),eM(t),r=sM(t),t.editorContainer=r.editorContainer?r.editorContainer:null,e.content_css)Yn.each(Yn.explode(e.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))});if(e.content_editable)return UO(t);else return GO(t,r)},fM=Pl.DOM,cM=function(e){return"-"===e.charAt(0)},dM=function(e,t){var n=t.settings;if(n.language&&"en"!==n.language&&!n.language_url)n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js";if(n.language_url&&!t.editorManager.i18n.data[n.language])e.add(n.language_url)},mM=function(e,t,n,r){var i=t.settings,o=i.theme;if(Do.isString(o)){if(!cM(o)&&!DE.urls.hasOwnProperty(o)){var a=i.theme_url;if(a)DE.load(o,t.documentBaseURI.toAbsolute(a));else DE.load(o,"themes/"+o+"/theme"+n+".js")}e.loadQueue(function(){DE.waitFor(o,r)})}else r()},hM=function(n,r){if(Yn.isArray(n.plugins))n.plugins=n.plugins.join(" ");Yn.each(n.external_plugins,function(e,t){AE.load(t,e),n.plugins+=" "+t}),Yn.each(n.plugins.split(/[ ,]/),function(e){if((e=Yn.trim(e))&&!AE.urls[e])if(cM(e)){e=e.substr(1,e.length);var t=AE.dependencies(e);Yn.each(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"};e=AE.createUrl(t,e),AE.load(e.resource,e)})}else AE.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"})})},pM=function(t,e){var n=Il.ScriptLoader;mM(n,t,e,function(){dM(n,t),hM(t.settings,e),n.loadQueue(function(){if(!t.removed)lM(t)},t,function(e){if(RE.pluginLoadError(t,e[0]),!t.removed)lM(t)})})},gM,vM=function(t){var e=t.settings,n=t.id,r=function(){fM.unbind(window,"ready",r),t.render()};if(!rt.Event.domLoaded)return void fM.bind(window,"ready",r);if(!t.getElement())return;if(!Me.contentEditable)return;if(!e.inline)t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden";else t.inline=true;var i=t.getElement().form||fM.getParent(n,"form");if(i){if(t.formElement=i,e.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName))fM.insertAfter(fM.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=true;if(t.formEventDelegate=function(e){t.fire(e.type,e)},fM.bind(i,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),e.submit_patch&&!i.submit.nodeType&&!i.submit.length&&!i._mceOldSubmit)i._mceOldSubmit=i.submit,i.submit=function(){return t.editorManager.triggerSave(),t.setDirty(false),i._mceOldSubmit(i)}}if(t.windowManager=wE(t),t.notificationManager=bE(t),"xml"===e.encoding)t.on("GetContent",function(e){if(e.save)e.content=fM.encode(e.content)});if(e.add_form_submit_trigger)t.on("submit",function(){if(t.initialized)t.save()});if(e.add_unload_trigger)t._beforeUnload=function(){if(t.initialized&&!t.destroyed&&!t.isHidden())t.save({format:"raw",no_events:true,set_dirty:false})},t.editorManager.on("BeforeUnload",t._beforeUnload);t.editorManager.add(t),pM(t,t.suffix)},bM,yM=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r},wM=Yn.each,xM=Yn.trim,CM="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),kM={ftp:21,http:80,https:443,mailto:25},SM=function(r,e){var i=this,t,n;if(r=xM(r),t=(e=i.settings=e||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(r)||/^\s*#/.test(r))return void(i.source=r);var o=0===r.indexOf("//");if(0===r.indexOf("/")&&!o)r=(t?t.protocol||"http":"http")+"://mce_host"+r;if(!/^[\w\-]*:?\/\//.test(r))if(n=e.base_uri?e.base_uri.path:new SM(document.location.href).directory,""==e.base_uri.protocol)r="//mce_host"+i.toAbsPath(n,r);else r=/([^#?]*)([#?]?.*)/.exec(r),r=(t&&t.protocol||"http")+"://mce_host"+i.toAbsPath(n,r[1])+r[2];if(r=r.replace(/@@/g,"(mce_at)"),r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(r),wM(CM,function(e,t){var n=r[t];if(n)n=n.replace(/\(mce_at\)/g,"@@");i[e]=n}),t){if(!i.protocol)i.protocol=t.protocol;if(!i.userInfo)i.userInfo=t.userInfo;if(!i.port&&"mce_host"===i.host)i.port=t.port;if(!i.host||"mce_host"===i.host)i.host=t.host;i.source=""}if(o)i.protocol=""};SM.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t=this,n;if("./"===e)return e;if("mce_host"!==(e=new SM(e,{base_uri:t})).host&&t.host!==e.host&&e.host||t.port!==e.port||t.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var r=t.getURI(),i=e.getURI();if(r===i||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===i)return r;if(n=t.toRelPath(t.path,e.path),e.query)n+="?"+e.query;if(e.anchor)n+="#"+e.anchor;return n},toAbsolute:function(e,t){return(e=new SM(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return true;var t=kM[this.protocol];if(t&&(this.port||t)==(e.port||t))return true}return false},toRelPath:function(e,t){var n,r=0,i="",o,a;if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(o=0,a=e.length;o<a;o++)if(o>=n.length||e[o]!==n[o]){r=o+1;break}if(e.length<n.length)for(o=0,a=n.length;o<a;o++)if(o>=e.length||e[o]!==n[o]){r=o+1;break}if(1===r)return t;for(o=0,a=e.length-(r-1);o<a;o++)i+="../";for(o=r-1,a=n.length;o<a;o++)if(o!==r-1)i+="/"+n[o];else i+=n[o];return i},toAbsPath:function(e,t){var n,r=0,i=[],o,a;for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),wM(e,function(e){if(e)i.push(e)}),e=i,n=t.length-1,i=[];n>=0;n--){if(0===t[n].length||"."===t[n])continue;if(".."===t[n]){r++;continue}if(r>0){r--;continue}i.push(t[n])}if((n=e.length-r)<=0)a=i.reverse().join("/");else a=e.slice(0,n).join("/")+"/"+i.reverse().join("/");if(0!==a.indexOf("/"))a="/"+a;if(o&&a.lastIndexOf("/")!==a.length-1)a+=o;return a},getURI:function(e){var t,n=this;if(!n.source||e){if(t="",!e){if(n.protocol)t+=n.protocol+"://";else t+="//";if(n.userInfo)t+=n.userInfo+"@";if(n.host)t+=n.host;if(n.port)t+=":"+n.port}if(n.path)t+=n.path;if(n.query)t+="?"+n.query;if(n.anchor)t+="#"+n.anchor;n.source=t}return n.source}},SM.parseDataUri=function(e){var t,n;if(e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]))t=n[1];return{type:t,data:e[1]}},SM.getDocumentBaseUrl=function(e){var t;if(0!==e.protocol.indexOf("http")&&"file:"!==e.protocol)t=e.href;else t=e.protocol+"//"+e.host+e.pathname;if(/^[^:]+:\/\/\/?[^\/]+\//.test(t))if(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),!/[\/\\]$/.test(t))t+="/";return t};var EM=function(e,t){if(t(e),e.firstChild)EM(e.firstChild,t);if(e.next)EM(e.next,t)},NM=function(e,n,t){var r={},i={},o=[];if(t.firstChild)EM(t.firstChild,function(t){ee.each(e,function(e){if(e.name===t.name)if(r[e.name])r[e.name].nodes.push(t);else r[e.name]={filter:e,nodes:[t]}}),ee.each(n,function(e){if("string"===typeof t.attr(e.name))if(i[e.name])i[e.name].nodes.push(t);else i[e.name]={filter:e,nodes:[t]}})});for(var a in r)if(r.hasOwnProperty(a))o.push(r[a]);for(var s in i)if(i.hasOwnProperty(s))o.push(i[s]);return o},_M=function(e,t,n){var r=NM(e,t,n);ee.each(r,function(t){ee.each(t.filter.callbacks,function(e){e(t.nodes,t.filter.name,{})})})},TM="html",RM=function(e){return e instanceof sA},AM=function(e,t,n){var r=e.getBody(),i,o;if(0===t.length||/^\s+$/.test(t)){if(o='<br data-mce-bogus="1">',"TABLE"===r.nodeName)t="<tr><td>"+o+"</td></tr>";else if(/^(UL|OL)$/.test(r.nodeName))t="<li>"+o+"</li>";if((i=e.settings.forced_root_block)&&e.schema.isValidChild(r.nodeName.toLowerCase(),i.toLowerCase()))t=o,t=e.dom.createHTML(i,e.settings.forced_root_block_attrs,t);else if(!t)t='<br data-mce-bogus="1">';e.dom.setHTML(r,t),e.fire("SetContent",n)}else{if("raw"!==n.format)t=ng({validate:e.validate},e.schema).serialize(e.parser.parse(t,{isRootContent:true,insert:true}));if(n.content=Yn.trim(t),e.dom.setHTML(r,n.content),!n.no_events)e.fire("SetContent",n)}return n.content},DM=function(e,t,n){_M(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),t);var r=ng({validate:e.validate},e.schema).serialize(t);if(n.content=Yn.trim(r),e.dom.setHTML(e.getBody(),n.content),!n.no_events)e.fire("SetContent",n);return t},PM=function(e,t,n){if(void 0===n)n={};if(n.format=n.format?n.format:TM,n.set=true,n.content=RM(t)?"":t,!RM(t)&&!n.no_events)e.fire("BeforeSetContent",n),t=n.content;return RM(t)?DM(e,t,n):AM(e,t,n)},BM=function(e,t){if(void 0===t)t={};var n,r=e.getBody();if(e.removed)return"";if(t.format=t.format?t.format:TM,t.get=true,t.getInner=true,!t.no_events)e.fire("BeforeGetContent",t);if("raw"===t.format)n=Yn.trim(W_(e.serializer,r.innerHTML));else if("text"===t.format)n=r.innerText||r.textContent;else if("tree"===t.format)return e.serializer.serialize(r,t);else n=e.serializer.serialize(r,t);if("text"!==t.format)t.content=Yn.trim(n);else t.content=n;if(!t.no_events)e.fire("GetContent",t);return t.content},OM=Pl.DOM,MM=function(e){if(e.orgDisplay)OM.setStyle(e.id,"display",e.orgDisplay)},LM=function(e){return w.from(e).each(function(e){return e.destroy()})},IM=function(e){if(e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection)e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null},HM=function(e){var t=e.formElement;if(t){if(t._mceOldSubmit)t.submit=t._mceOldSubmit,t._mceOldSubmit=null;OM.unbind(t,"submit reset",e.formEventDelegate)}},FM=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),i=e.getElement();if(r)e.save();if(e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&i)OM.remove(i.nextSibling);if(!e.inline&&r)MM(e);VR(e),e.editorManager.remove(e),OM.remove(e.getContainer()),LM(t),LM(n),e.destroy()}},zM=function(e,t){var n=e.selection,r=e.dom;if(e.destroyed)return;if(!t&&!e.removed)return void e.remove();if(!t){if(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy)e.theme.destroy();LM(n),LM(r)}HM(e),IM(e),e.destroyed=1},WM=Pl.DOM,UM=Yn.extend,jM=Yn.each,VM=Yn.resolve,$M=Me.ie,qM=function(e,t,n){var r=this,i,o;if(i=r.documentBaseUrl=n.documentBaseURL,o=n.baseURI,t=Fg(r,e,i,n.defaultSettings,t),r.settings=t,Fl.language=t.language||"en",Fl.languageLoad=t.language_load,Fl.baseURL=n.baseURL,r.id=e,r.setDirty(false),r.plugins={},r.documentBaseURI=new SM(t.document_base_url,{base_uri:o}),r.baseURI=o,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new yS(r),r.loadedCSS={},r.editorCommands=new Zk(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix)Me.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"");if(false===t.override_viewport)Me.overrideViewPort=false;n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=mr.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};UM(qM.prototype={render:function(){vM(this)},focus:function(e){nE(this,e)},execCallback:function(e){var t=this,n=t.settings[e],r;if(!n)return;if(t.callbackLookup&&(r=t.callbackLookup[e]))n=r.func,r=r.scope;if("string"===typeof n)r=(r=n.replace(/\.\w+$/,""))?VM(r):0,n=VM(n),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[e]={func:n,scope:r};return n.apply(r||t,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Yn.is(e,"string")){var n=this.settings.language||"en",r=this.editorManager.i18n;e=r.data[n+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,t){return r.data[n+"."+t]||"{#"+t+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return jg(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;if(t.cmd)t.onclick=function(){n.execCommand(t.cmd)};if(t.stateSelector&&"undefined"===typeof t.active)t.active=false;if(!t.text&&!t.icon)t.icon=e;n.buttons=n.buttons,t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return yM(this,e,t)},addMenuItem:function(e,t){var n=this;if(t.cmd)t.onclick=function(){n.execCommand(t.cmd)};n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n=this,r;if(n.contextToolbars=n.contextToolbars||[],"string"===typeof e)r=e,e=function(e){return n.dom.is(e,r)};n.contextToolbars.push({id:rN.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;if(e.hidden){if(e.hidden=false,e.inline)e.getBody().contentEditable=true;else WM.show(e.getContainer()),WM.hide(e.id);e.load(),e.fire("show")}},hide:function(){var e=this,t=e.getDoc();if(!e.hidden){if($M&&t&&!e.inline)t.execCommand("SelectAll");if(e.save(),e.inline){if(e.getBody().contentEditable=false,e===e.editorManager.focusedEditor)e.editorManager.focusedEditor=null}else WM.hide(e.getContainer()),WM.setStyle(e.id,"display",e.orgDisplay);e.hidden=true,e.fire("hide")}},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t=this,n=t.getElement(),r;if(t.removed)return"";if(n){if((e=e||{}).load=true,r=t.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,!e.no_events)t.fire("LoadContent",e);return e.element=n=null,r}},save:function(e){var t=this,n=t.getElement(),r,i;if(!n||!t.initialized||t.removed)return;if((e=e||{}).save=true,e.element=n,r=e.content=t.getContent(e),!e.no_events)t.fire("SaveContent",e);if("raw"===e.format)t.fire("RawSaveContent",e);if(r=e.content,!/TEXTAREA|INPUT/i.test(n.nodeName)){if(!t.inline)n.innerHTML=r;if(i=WM.getParent(t.id,"form"))jM(i.elements,function(e){if(e.name===t.id)return e.value=r,false})}else n.value=r;if(e.element=n=null,false!==e.set_dirty)t.setDirty(false);return r},setContent:function(e,t){return PM(this,e,t)},getContent:function(e){return BM(this,e)},insertContent:function(e,t){if(t)e=UM({content:e},t);this.execCommand("mceInsertContent",false,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;if(this.isNotDirty=!e,e&&e!==t)this.fire("dirty")},setMode:function(e){hS(this,e)},getContainer:function(){var e=this;if(!e.container)e.container=WM.get(e.editorContainer||e.id+"_parent");return e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){if(!this.targetElm)this.targetElm=WM.get(this.id);return this.targetElm},getWin:function(){var e=this,t;if(!e.contentWindow)if(t=e.iframeElement)e.contentWindow=t.contentWindow;return e.contentWindow},getDoc:function(){var e=this,t;if(!e.contentDocument)if(t=e.getWin())e.contentDocument=t.document;return e.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,i=r.settings;if(i.urlconverter_callback)return r.execCallback("urlconverter_callback",e,n,true,t);if(!i.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length)return e;if(i.relative_urls)return r.documentBaseURI.toRelative(e);return e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n=this,r=n.settings,i=n.dom,o;if(e=e||n.getBody(),void 0===n.hasVisual)n.hasVisual=r.visual;jM(i.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":if(o=r.visual_table_class||"mce-item-table",(!(t=i.getAttrib(e,"border"))||"0"===t)&&n.hasVisual)i.addClass(e,o);else i.removeClass(e,o);return;case"A":if(!i.getAttrib(e,"href",false))if(t=i.getAttrib(e,"name")||e.id,o=r.visual_anchor_class||"mce-item-anchor",t&&n.hasVisual)i.addClass(e,o);else i.removeClass(e,o);return}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){FM(this)},destroy:function(e){zM(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},lS);var YM,KM={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},XM=function(e){return"nodechange"===e.type&&e.selectionChange},GM=function(e,t){var n=function(){t.throttle()};Pl.DOM.bind(document,"mouseup",n),e.on("remove",function(){Pl.DOM.unbind(document,"mouseup",n)})},JM=function(e){e.on("focusout",function(){jk.store(e)})},QM=function(e,t){e.on("mouseup touchend",function(e){t.throttle()})},ZM=function(t,e){var n=eo.detect().browser;if(n.isIE()||n.isEdge())JM(t);else QM(t,e);t.on("keyup nodechange",function(e){if(!XM(e))jk.store(t)})},eL,tL=function(e){var t=x_(function(){jk.store(e)},0);if(e.inline)GM(e,t);e.on("init",function(){ZM(e,t)}),e.on("remove",function(){t.cancel()})},nL,rL=Pl.DOM,iL=function(e){return KM.isEditorUIElement(e)},oL=function(t,e){if(t.destroyed)return;var n=t?t.settings.custom_ui_selector:"",r;return null!==rL.getParent(e,function(e){return iL(e)||(n?t.dom.is(e,n):false)})},aL=function(){try{return document.activeElement}catch(e){return document.body}},sL=function(r,e){var t=e.editor;if(tL(t),t.on("focusin",function(){var e=this,t=r.focusedEditor;if(t!==e){if(t)t.fire("blur",{focusedEditor:e});r.setActive(e),(r.focusedEditor=e).fire("focus",{blurredEditor:t}),e.focus(true)}}),t.on("focusout",function(){var t=this;$e.setEditorTimeout(t,function(){var e=r.focusedEditor;if(!oL(t,aL())&&e===t)t.fire("blur",{focusedEditor:null}),r.focusedEditor=null})}),!nL)nL=function(e){var t=r.activeEditor,n;if(n=e.target,t&&n.ownerDocument===document)if(n!==document.body&&!oL(t,n)&&r.focusedEditor===t)t.fire("blur",{focusedEditor:null}),r.focusedEditor=null},rL.bind(document,"focusin",nL)},uL=function(e,t){if(e.focusedEditor===t.editor)e.focusedEditor=null;if(!e.activeEditor)rL.unbind(document,"focusin",nL),nL=null},lL,fL=function(e){e.on("AddEditor",b.curry(sL,e)),e.on("RemoveEditor",b.curry(uL,e))},cL=iL,dL=oL,mL={},hL="en",pL={setCode:function(e){if(e)hL=e,this.rtl=this.data[e]?"rtl"===this.data[e]._dir:false},getCode:function(){return hL},rtl:false,add:function(e,t){var n=mL[e];if(!n)mL[e]=n={};for(var r in t)n[r]=t[r];this.setCode(e)},translate:function(e){var t=mL[hL]||{},n=function(e){if(Yn.is(e,"function"))return Object.prototype.toString.call(e);return!r(e)?""+e:""},r=function(e){return""===e||null===e||Yn.is(e,"undefined")},i=function(e){return e=n(e),Yn.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(Yn.is(e,"object")&&Yn.hasOwn(e,"raw"))return n(e.raw);if(Yn.is(e,"array")){var o=e.slice(1);e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return Yn.hasOwn(o,t)?n(o[t]):e})}return i(e).replace(/{context:\w+}$/,"")},data:mL},gL=Pl.DOM,vL=Yn.explode,bL=Yn.each,yL=Yn.extend,wL=0,xL,CL,kL=false,SL=[],EL=[],NL=function(e){return"length"!==e},_L=function(t){bL(CL.get(),function(e){if("scroll"===t.type)e.fire("ScrollWindow",t);else e.fire("ResizeWindow",t)})},TL=function(e){if(e!==kL){if(e)mr(window).on("resize scroll",_L);else mr(window).off("resize scroll",_L);kL=e}},RL=function(t){var e=EL;delete SL[t.id];for(var n=0;n<SL.length;n++)if(SL[n]===t){SL.splice(n,1);break}if(EL=ee.filter(EL,function(e){return t!==e}),CL.activeEditor===t)CL.activeEditor=EL.length>0?EL[0]:null;if(CL.focusedEditor===t)CL.focusedEditor=null;return e.length!==EL.length},AL=function(e){if(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode)RL(e),e.unbindAllNativeEvents(),e.destroy(true),e.removed=true,e=null;return e};yL(CL={defaultSettings:{},$:mr,majorVersion:"4",minorVersion:"7.7",releaseDate:"2018-02-19",editors:SL,i18n:pL,activeEditor:null,settings:{},setup:function(){var e=this,t,n,r="",i,o;if(n=SM.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n))if(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),!/[\/\\]$/.test(n))n+="/";if(i=window.tinymce||window.tinyMCEPreInit)t=i.base||i.baseURL,r=i.suffix;else{for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var u=(o=a[s].src).substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){if(-1!==u.indexOf(".min"))r=".min";t=o.substring(0,o.lastIndexOf("/"));break}}if(!t&&document.currentScript){if(-1!==(o=document.currentScript.src).indexOf(".min"))r=".min";t=o.substring(0,o.lastIndexOf("/"))}}e.baseURL=new SM(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new SM(e.baseURL),e.suffix=r,fL(e)},overrideDefaults:function(e){var t,n;if(t=e.base_url)this.baseURL=new SM(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new SM(this.baseURL);if(n=e.suffix,e.suffix)this.suffix=n;var r=(this.defaultSettings=e).plugin_base_urls;for(var i in r)Fl.PluginManager.urls[i]=r[i]},init:function(r){var s=this,n,i;i=Yn.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track "+"colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var t=function(e,t){return e.inline&&t.tagName.toLowerCase()in i},u=function(e){var t=e.id;if(!t){if((t=e.name)&&!gL.get(t))t=e.name;else t=gL.uniqueId();e.setAttribute("id",t)}return t},e=function(e){var t=r[e];if(!t)return;return t.apply(s,Array.prototype.slice.call(arguments,2))},o=function(e,t){return t.constructor===RegExp?t.test(e.className):gL.hasClass(e,t)},l=function(t){var e,n=[];if(Me.ie&&Me.ie<11)return RE.initError("TinyMCE does not support the browser you are using. For a list of supported"+" browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(t.types)return bL(t.types,function(e){n=n.concat(gL.select(e.selector))}),n;else if(t.selector)return gL.select(t.selector);else if(t.target)return[t.target];switch(t.mode){case"exact":if((e=t.elements||"").length>0)bL(vL(e),function(t){var e;if(e=gL.get(t))n.push(e);else bL(document.forms,function(e){bL(e.elements,function(e){if(e.name===t)t="mce_editor_"+wL++,gL.setAttrib(e,"id",t),n.push(e)})})});break;case"textareas":case"specific_textareas":bL(gL.select("textarea"),function(e){if(t.editor_deselector&&o(e,t.editor_deselector))return;if(!t.editor_selector||o(e,t.editor_selector))n.push(e)})}return n},f=function(e){n=e},c=function(){var i=0,o=[],a,n=function(e,t,n){var r=new qM(e,t,s);o.push(r),r.on("init",function(){if(++i===a.length)f(o)}),r.targetElm=r.targetElm||n,r.render()};if(gL.unbind(window,"ready",c),e("onpageload"),a=mr.unique(l(r)),r.types)return void bL(r.types,function(t){Yn.each(a,function(e){if(gL.is(e,t.selector))return n(u(e),yL({},r,t),e),false;return true})});if(Yn.each(a,function(e){AL(s.get(e.id))}),0===(a=Yn.grep(a,function(e){return!s.get(e.id)})).length)f([]);else bL(a,function(e){if(t(r,e))RE.initError("Could not initialize inline editor on invalid inline target element",e);else n(u(e),r,e)})};return s.settings=r,gL.bind(window,"ready",c),new Ie(function(t){if(n)t(n);else f=function(e){t(e)}})},get:function(t){if(0===arguments.length)return EL.slice(0);else if(Do.isString(t))return ee.find(EL,function(e){return e.id===t}).getOr(null);else if(Do.isNumber(t))return EL[t]?EL[t]:null;else return null},add:function(e){var t=this,n;if((n=SL[e.id])===e)return e;if(null===t.get(e.id)){if(NL(e.id))SL[e.id]=e;SL.push(e),EL.push(e)}if(TL(true),t.activeEditor=e,t.fire("AddEditor",{editor:e}),!xL)xL=function(){t.fire("BeforeUnload")},gL.bind(window,"beforeunload",xL);return e},createEditor:function(e,t){return this.add(new qM(e,t,this))},remove:function(e){var t=this,n,r;if(!e){for(n=EL.length-1;n>=0;n--)t.remove(EL[n]);return}if(Do.isString(e))return e=e.selector||e,void bL(gL.select(e),function(e){if(r=t.get(e.id))t.remove(r)});if(r=e,Do.isNull(t.get(r.id)))return null;if(RL(r))t.fire("RemoveEditor",{editor:r});if(0===EL.length)gL.unbind(window,"beforeunload",xL);return r.remove(),TL(EL.length>0),r},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":if(!r.get(n))new qM(n,r.settings,r).render();return true;case"mceRemoveEditor":if(i)i.remove();return true;case"mceToggleEditor":if(!i)return r.execCommand("mceAddEditor",0,n),true;if(i.isHidden())i.show();else i.hide();return true}if(r.activeEditor)return r.activeEditor.execCommand(e,t,n);return false},triggerSave:function(){bL(EL,function(e){e.save()})},addI18n:function(e,t){pL.add(e,t)},translate:function(e){return pL.translate(e)},setActive:function(e){var t=this.activeEditor;if(this.activeEditor!==e){if(t)t.fire("deactivate",{relatedTarget:e});e.fire("activate",{relatedTarget:t})}this.activeEditor=e}},rS),CL.setup();var DL=CL,PL;function BL(n){var e,t,r;return{walk:function(e,t){return ST.walk(n,e,t)},split:mw.split,normalize:function(t){return ZC.normalize(n,t).fold(b.constant(false),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),true})}}}(PL=BL||(BL={})).compareRanges=FC.isEq,PL.getCaretRangeFromPoint=GA.fromPoint,PL.getSelectedNode=Af,PL.getNode=Df;var OL=BL,ML=Math.min,LL=Math.max,IL=Math.round,HL=function(e,t,n){var r,i,o,a,s,u;if(r=t.x,i=t.y,o=e.w,a=e.h,s=t.w,u=t.h,"b"===(n=(n||"").split(""))[0])i+=u;if("r"===n[1])r+=s;if("c"===n[0])i+=IL(u/2);if("c"===n[1])r+=IL(s/2);if("b"===n[3])i-=a;if("r"===n[4])r-=o;if("c"===n[3])i-=IL(a/2);if("c"===n[4])r-=IL(o/2);return jL(r,i,o,a)},FL,zL=function(e,t,n){return jL(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},WL=function(e,t){var n,r,i,o;if(n=LL(e.x,t.x),r=LL(e.y,t.y),i=ML(e.x+e.w,t.x+t.w),o=ML(e.y+e.h,t.y+t.h),i-n<0||o-r<0)return null;return jL(n,r,i-n,o-r)},UL=function(e,t,n){var r,i,o,a,s,u,l,f,c,d;if(s=e.x,u=e.y,l=e.x+e.w,f=e.y+e.h,c=t.x+t.w,d=t.y+t.h,r=LL(0,t.x-s),i=LL(0,t.y-u),o=LL(0,l-c),a=LL(0,f-d),s+=r,u+=i,n)l+=r,f+=i,s-=o,u-=a;return jL(s,u,(l-=o)-s,(f-=a)-u)},jL=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},VL,$L={inflate:zL,relativePosition:HL,findBestRelativePosition:function(e,t,n,r){var i,o;for(o=0;o<r.length;o++)if((i=HL(e,t,r[o])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},intersect:WL,clamp:UL,create:jL,fromClientRect:function(e){return jL(e.left,e.top,e.width,e.height)}},qL={},YL={add:function(e,t){qL[e.toLowerCase()]=t},has:function(e){return!!qL[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=qL.hasOwnProperty(t)?qL[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"===typeof e)(t=t||{}).type=e;else e=(t=e).type;if(e=e.toLowerCase(),!(n=qL[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},KL=Yn.each,XL=Yn.extend,GL,JL,QL=function(){};QL.extend=GL=function(r){var e=this,o=e.prototype,t,n,i,a=function(){var e,t,n,r=this;if(!JL){if(r.init)r.init.apply(r,arguments);if(t=r.Mixins){e=t.length;while(e--)if((n=t[e]).init)n.init.apply(r,arguments)}}},s=function(){return this},u=function(r,i){return function(){var e=this,t=e._super,n;return e._super=o[r],n=i.apply(e,arguments),e._super=t,n}};if(JL=true,t=new e,JL=false,r.Mixins)if(KL(r.Mixins,function(e){for(var t in e)if("init"!==t)r[t]=e[t]}),o.Mixins)r.Mixins=o.Mixins.concat(r.Mixins);if(r.Methods)KL(r.Methods.split(","),function(e){r[e]=s});if(r.Properties)KL(r.Properties.split(","),function(e){var n="_"+e;r[e]=function(e){var t=this;if(void 0!==e)return t[n]=e,t;return t[n]}});if(r.Statics)KL(r.Statics,function(e,t){a[t]=e});if(r.Defaults&&o.Defaults)r.Defaults=XL({},o.Defaults,r.Defaults);for(n in r)if("function"===typeof(i=r[n])&&o[n])t[n]=u(n,i);else t[n]=i;return a.prototype=t,(a.constructor=a).extend=GL,a};var ZL=Math.min,eI=Math.max,tI=Math.round,nI=function(e){var n={},s=0,u=0,l=0,t=function(e,t,n){var r,i,o,a,s,u;if(o=i=r=0,(s=ZL(e/=255,ZL(t/=255,n/=255)))===(u=eI(e,eI(t,n))))return{h:0,s:0,v:100*(o=s)};return i=(u-s)/u,{h:tI(r=60*((r=e===s?3:n===s?1:5)-(a=e===s?t-n:n===s?e-t:n-e)/((o=u)-s))),s:tI(100*i),v:tI(100*o)}},r=function(e,t,n){var r,i,o,a;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,n=parseInt(n,10)/100,t=eI(0,ZL(t,1)),n=eI(0,ZL(n,1)),0===t)return void(s=u=l=tI(255*n));switch(r=e/60,o=(i=n*t)*(1-Math.abs(r%2-1)),a=n-i,Math.floor(r)){case 0:s=i,u=o,l=0;break;case 1:s=o,u=i,l=0;break;case 2:s=0,u=i,l=o;break;case 3:s=0,u=o,l=i;break;case 4:s=o,u=0,l=i;break;case 5:s=i,u=0,l=o;break;default:s=u=l=0}s=tI(255*(s+a)),u=tI(255*(u+a)),l=tI(255*(l+a))},i=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(s)+e(u)+e(l)},o=function(){return{r:s,g:u,b:l}},a=function(){return t(s,u,l)},f=function(e){var t;if("object"===typeof e){if("r"in e)s=e.r,u=e.g,l=e.b;else if("v"in e)r(e.h,e.s,e.v)}else if(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))s=parseInt(t[1],10),u=parseInt(t[2],10),l=parseInt(t[3],10);else if(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))s=parseInt(t[1],16),u=parseInt(t[2],16),l=parseInt(t[3],16);else if(t=/#([0-F])([0-F])([0-F])/gi.exec(e))s=parseInt(t[1]+t[1],16),u=parseInt(t[2]+t[2],16),l=parseInt(t[3]+t[3],16);return s=s<0?0:s>255?255:s,u=u<0?0:u>255?255:u,l=l<0?0:l>255?255:l,n};if(e)f(e);return n.toRgb=o,n.toHsv=a,n.toHex=i,n.parse=f,n},rI=function(e,n){var r,i,t,o;if(n=n||'"',null===e)return"null";if("string"===(t=typeof e))return i="\bb\tt\nn\ff\rr\"\"''\\\\",n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){if('"'===n&&"'"===e)return e;if((r=i.indexOf(t))+1)return"\\"+i.charAt(r+1);return e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e})+n;if("object"===t){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(r=0,i="[";r<e.length;r++)i+=(r>0?",":"")+rI(e[r],n);return i+"]"}for(o in i="{",e)if(e.hasOwnProperty(o))i+="function"!==typeof e[o]?(i.length>1?","+n:n)+o+n+":"+rI(e[o],n):"";return i+"}"}return""+e},iI={serialize:rI,parse:function(e){try{return JSON.parse(e)}catch(e){}}},oI={callbacks:{},count:0,send:function(t){var n=this,r=Pl.DOM,i=void 0!==t.count?t.count:n.count,o="tinymce_jsonp_"+i;n.callbacks[i]=function(e){r.remove(o),delete n.callbacks[i],t.callback(e)},r.add(r.doc.body,"script",{id:o,src:t.url,type:"text/javascript"}),n.count++}},aI={send:function(e){var t,n=0,r=function(){if(!e.async||4===t.readyState||n++>1e4){if(e.success&&n<1e4&&200===t.status)e.success.call(e.success_scope,""+t.responseText,t,e);else if(e.error)e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e);t=null}else setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=false===e.async?false:true,e.data=e.data||"",aI.fire("beforeInitialize",{settings:e}),t=new PE){if(t.overrideMimeType)t.overrideMimeType(e.content_type);if(t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain)t.withCredentials=true;if(e.content_type)t.setRequestHeader("Content-Type",e.content_type);if(e.requestheaders)Yn.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)});if(t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=aI.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}};Yn.extend(aI,rS);var sI=Yn.extend,uI=function(e){this.settings=sI({},e),this.count=0};uI.sendRPC=function(e){return(new uI).send(e)},uI.prototype={send:function(n){var r=n.error,i=n.success;(n=sI(this.settings,n)).success=function(e,t){if("undefined"===typeof(e=iI.parse(e)))e={error:"JSON Parse error."};if(e.error)r.call(n.error_scope||n.scope,e.error,t);else i.call(n.success_scope||n.scope,e.result)},n.error=function(e,t){if(r)r.call(n.error_scope||n.scope,e,t)},n.data=iI.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",aI.send(n)}};var lI=window.localStorage,fI=DL,cI={geom:{Rect:$L},util:{Promise:Ie,Delay:$e,Tools:Yn,VK:E_,URI:SM,Class:QL,EventDispatcher:tS,Observable:rS,I18n:pL,XHR:aI,JSON:iI,JSONRequest:uI,JSONP:oI,LocalStorage:lI,Color:nI},dom:{EventUtils:rt,Sizzle:sn,DomQuery:mr,TreeWalker:iu,DOMUtils:Pl,ScriptLoader:Il,RangeUtils:OL,Serializer:_A,ControlSelection:zA,BookmarkManager:LA,Selection:fP,Event:rt.Event},html:{Styles:Cl,Entities:ll,Node:sA,Schema:wl,SaxParser:I_,DomParser:yA,Writer:tg,Serializer:ng},ui:{Factory:YL},Env:Me,AddOnManager:Fl,Formatter:PR,UndoManager:hT,EditorCommands:Zk,WindowManager:wE,NotificationManager:bE,EditorObservable:lS,Shortcuts:yS,Editor:qM,FocusManager:KM,EditorManager:DL,DOM:Pl.DOM,ScriptLoader:Il.ScriptLoader,PluginManager:Fl.PluginManager,ThemeManager:Fl.ThemeManager,trim:Yn.trim,isArray:Yn.isArray,is:Yn.is,toArray:Yn.toArray,makeMap:Yn.makeMap,each:Yn.each,map:Yn.map,grep:Yn.grep,inArray:Yn.inArray,extend:Yn.extend,create:Yn.create,walk:Yn.walk,createNS:Yn.createNS,resolve:Yn.resolve,explode:Yn.explode,_addCacheSuffix:Yn._addCacheSuffix,isOpera:Me.opera,isWebKit:Me.webkit,isIE:Me.ie,isGecko:Me.gecko,isMac:Me.mac},dI=fI=Yn.extend(fI,cI),mI=function(e){if("object"===typeof module)try{module.exports=e}catch(e){}},hI,pI;pI=dI,window.tinymce=pI,window.tinyMCE=pI,mI(dI)}(),function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ThemeManager"),o=tinymce.util.Tools.resolve("tinymce.EditorManager"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=function(e){return e.getParam("branding",true,"boolean")},c=function(e){return false!==d(e)},d=function(e){return e.getParam("menubar")},m=function(e){return e.getParam("statusbar",true,"boolean")},h=function(e){return e.getParam("toolbar_items_size")},p=function(e){return e.getParam("readonly",false,"boolean")},g=function(e){return e.getParam("fixed_toolbar_container")},v=function(e){return e.getParam("inline_toolbar_position_handler")},b=function(e){return e.getParam("menu")},y=function(e){return e.getParam("removed_menuitems","")},s=function(e){return e.getParam("min_width",100,"number")},u=function(e){return e.getParam("min_height",100,"number")},w=function(e){return e.getParam("max_width",65535,"number")},x=function(e){return e.getParam("max_height",65535,"number")},C=function(e){return false===e.settings.skin},i=function(e){return e.getParam("inline",false,"boolean")},k=function(e){var t=e.getParam("resize","vertical");if(false===t)return"none";else if("both"===t)return"both";else return"vertical"},a=function(e){var t=e.settings,n=t.skin,r=t.skin_url;if(false!==n){var i=n?n:"lightgray";if(r)r=e.documentBaseURI.toAbsolute(r);else r=o.baseURL+"/skins/"+i}return r},r=function(e,t){for(var n=[],r=1;r<10;r++){var i=e["toolbar"+r];if(!i)break;n.push(i)}var o=e.toolbar?[e.toolbar]:[t];return n.length>0?n:o},S=function(e){var t=e.getParam("toolbar"),n="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";if(false===t)return[];else if(l.isArray(t))return l.grep(t,function(e){return e.length>0});else return r(e.settings,n)},E=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),N=tinymce.util.Tools.resolve("tinymce.ui.Factory"),_=tinymce.util.Tools.resolve("tinymce.util.I18n"),t,n,T,R=function(e){return e.fire("SkinLoaded")},A=function(e){return e.fire("ResizeEditor")},D=function(e){return e.fire("BeforeRenderUI")},P=function(t,n){return function(){var e=t.find(n)[0];if(e)e.focus(true)}},B,O=function(e,t){e.shortcuts.add("Alt+F9","",P(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",P(t,"toolbar")),e.shortcuts.add("Alt+F11","",P(t,"elementpath")),t.on("cancel",function(){e.focus()})},M=tinymce.util.Tools.resolve("tinymce.geom.Rect"),L=tinymce.util.Tools.resolve("tinymce.util.Delay"),I,H,F,z=function(e){return function(){return e}},W,U,j,V,$,q,Y,K,X,G={noop:function(){},noarg:function(e){return function(){return e()}},compose:function(e,t){return function(){return e(t.apply(null,arguments))}},constant:z,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(r){for(var i=new Array(arguments.length-1),e=1;e<arguments.length;e++)i[e-1]=arguments[e];return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];var n=i.concat(e);return r.apply(null,n)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:z(false),always:z(true)},J=G.never,Q=G.always,Z=function(){return ee},ee=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r,i={fold:function(e,t){return e()},is:J,isSome:J,isNone:Q,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:n,orThunk:t,map:Z,ap:Z,each:function(){},bind:Z,flatten:Z,exists:J,forall:Q,filter:Z,equals:e,equals_:e,toArray:function(){return[]},toString:G.constant("none()")};if(Object.freeze)Object.freeze(i);return i}(),te=function(n){var e=function(){return n},t=function(){return o},r,i=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:Q,isNone:J,getOr:e,getOrThunk:e,getOrDie:e,or:t,orThunk:t,map:function(e){return te(e(n))},ap:function(e){return e.fold(Z,function(e){return te(e(n))})},each:function(e){e(n)},bind:i,flatten:e,exists:i,forall:i,filter:function(e){return e(n)?o:ee},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(J,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},ne,re={some:te,none:Z,from:function(e){return null===e||void 0===e?ee:te(e)}},ie=function(e){var t=ae(e);if(t&&"static"!==E.DOM.getStyle(t,"position",true)){var n=E.DOM.getPos(t),r=t.scrollLeft-n.x,i=t.scrollTop-n.y;return re.some({x:r,y:i})}else return re.none()},oe,ae=function(e){return e?e.getRoot().uiContainer:null},se,ue={getUiContainerDelta:ie,setUiContainer:function(e,t){var n=E.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},getUiContainer:ae,inheritUiContainer:function(e,t){return t.uiContainer=ae(e)}},le=function(r,e,i){var o=[],a;if(!e)return;return l.each(e.split(/[ ,]/),function(t){var e,n=function(){var e=r.selection;if(t.settings.stateSelector)e.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},true);if(t.settings.disabledStateSelector)e.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};if("|"===t)a=null;else{if(!a)a={type:"buttongroup",items:[]},o.push(a);if(r.buttons[t]){if(e=t,"function"===typeof(t=r.buttons[e]))t=t();if(t.type=t.type||"button",t.size=i,t=N.create(t),a.items.push(t),r.initialized)n();else r.on("init",n)}}}),{type:"toolbar",layout:"flow",items:o}},fe,ce=le,de=function(t,n){var r=[],i=function(e){if(e)r.push(le(t,e,n))};if(l.each(S(t),function(e){i(e)}),r.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:true,ariaRemember:true,items:r}},me=E.DOM,he=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},pe=function(e){l.each(e.contextToolbars,function(e){if(e.panel)e.panel.hide()})},ge=function(e,t){e.moveTo(t.left,t.top)},ve=function(n,r,i){r=r?r.substr(0,2):"",l.each({t:"down",b:"up"},function(e,t){n.classes.toggle("arrow-"+e,i(t,r.substr(0,1)))}),l.each({l:"left",r:"right"},function(e,t){n.classes.toggle("arrow-"+e,i(t,r.substr(1,1)))})},be=function(e,t,n,r,i,o){if(o=he({x:t,y:n,w:o.w,h:o.h}),e)o=e({elementRect:he(r),contentAreaRect:he(i),panelRect:o});return o},ye,we=function(m){var r,o=function(){return m.contextToolbars||[]},h=function(e){var t,n,r;if(t=me.getPos(m.getContentAreaContainer()),n=m.dom.getRect(e),"BODY"===(r=m.dom.getRoot()).nodeName)n.x-=r.ownerDocument.documentElement.scrollLeft||r.scrollLeft,n.y-=r.ownerDocument.documentElement.scrollTop||r.scrollTop;return n.x+=t.x,n.y+=t.y,n},n=function(e,t){var n,r,i,o,a,s,u,l,f=v(m);if(m.removed)return;if(!e||!e.toolbar.panel)return void pe(m);if(u=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],a=e.toolbar.panel,t)a.show();i=h(e.element),r=me.getRect(a.getEl()),o=me.getRect(m.getContentAreaContainer()||m.getBody());var c=ue.getUiContainerDelta(a).getOr({x:0,y:0});if(i.x+=c.x,i.y+=c.y,r.x+=c.x,r.y+=c.y,o.x+=c.x,o.y+=c.y,l=25,"inline"!==me.getStyle(e.element,"display",true)){var d=e.element.getBoundingClientRect();i.w=d.width,i.h=d.height}if(!m.inline)o.w=m.getDoc().documentElement.offsetWidth;if(m.selection.controlSelection.isResizable(e.element)&&i.w<l)i=M.inflate(i,0,8);if(n=M.findBestRelativePosition(r,i,o,u),i=M.clamp(i,o),n)s=M.relativePosition(r,i,n),ge(a,be(f,s.x,s.y,i,o,r));else if(o.h+=r.h,i=M.intersect(o,i))if(n=M.findBestRelativePosition(r,i,o,["bc-tc","bl-tl","br-tr"]))s=M.relativePosition(r,i,n),ge(a,be(f,s.x,s.y,i,o,r));else ge(a,be(f,i.x,i.y,i,o,r));else a.hide();ve(a,n,function(e,t){return e===t})},i=function(t){return function(){var e=function(){if(m.selection)n(u(m.selection.getNode()),t)};L.requestAnimationFrame(e)}},a=function(e){if(!r){var t=i(true),n=ue.getUiContainer(e);r=m.selection.getScrollContainer()||m.getWin(),me.bind(r,"scroll",t),me.bind(n,"scroll",t),m.on("remove",function(){me.unbind(r,"scroll",t),me.unbind(n,"scroll",t)})}},t=function(e){var t;if(e.toolbar.panel)return e.toolbar.panel.show(),void n(e);t=N.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:true,border:1,items:ce(m,e.toolbar.items),oncancel:function(){m.focus()}}),ue.setUiContainer(m,t),a(t),(e.toolbar.panel=t).renderTo().reflow(),n(e)},s=function(){l.each(o(),function(e){if(e.panel)e.panel.hide()})},u=function(e){var t,n,r,i=o();for(t=(r=m.$(e).parents().add(e)).length-1;t>=0;t--)for(n=i.length-1;n>=0;n--)if(i[n].predicate(r[t]))return{toolbar:i[n],element:r[t]};return null};m.on("click keyup setContent ObjectResized",function(e){if("setcontent"===e.type&&!e.selection)return;L.setEditorTimeout(m,function(){var e;if(e=u(m.selection.getNode()))s(),t(e);else s()})}),m.on("blur hide contextmenu",s),m.on("ObjectResizeStart",function(){var e=u(m.selection.getNode());if(e&&e.toolbar.panel)e.toolbar.panel.hide()}),m.on("ResizeEditor ResizeWindow",i(true)),m.on("nodeChange",i(false)),m.on("remove",function(){l.each(o(),function(e){if(e.panel)e.panel.remove()}),m.contextToolbars={}}),m.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var e=u(m.selection.getNode());if(e&&e.toolbar.panel)e.toolbar.panel.items()[0].focus()})},xe=void 0===(Ce=Array.prototype.indexOf)?function(e,t){return ze(e,t)}:function(e,t){return Ce.call(e,t)},Ce,ke,Se,Ee=function(e,t){var n=xe(e,t);return-1===n?re.none():re.some(n)},Ne=function(e,t){return xe(e,t)>-1},_e=function(e,t){return Fe(e,t).isSome()},Te=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},Re=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n.push(i)}return n},Ae=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},De=function(e,t){for(var n=0,r=e.length;n<r;n++){var i;t(e[n],n,e)}},Pe=function(e,t){for(var n=e.length-1;n>=0;n--){var r;t(e[n],n,e)}},Be=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i],s;(t(a,i,e)?n:r).push(a)}return{pass:n,fail:r}},Oe=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(t(o,r,e))n.push(o)}return n},Me=function(e,t){if(0===e.length)return[];else{for(var n=t(e[0]),r=[],i=[],o=0,a=e.length;o<a;o++){var s=e[o],u=t(s);if(u!==n)r.push(i),i=[];n=u,i.push(s)}if(0!==i.length)r.push(i);return r}},Le=function(e,t,n){return Pe(e,function(e){n=t(n,e)}),n},Ie=function(e,t,n){return De(e,function(e){n=t(n,e)}),n},He=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return re.some(i)}return re.none()},Fe=function(e,t){for(var n=0,r=e.length;n<r;n++){var i;if(t(e[n],n,e))return re.some(n)}return re.none()},ze=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},We=Array.prototype.push,Ue=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);We.apply(t,e[n])}return t},je=function(e,t){var n=Ae(e,t);return Ue(n)},Ve=function(e,t){for(var n=0,r=e.length;n<r;++n){var i;if(true!==t(e[n],n,e))return false}return true},$e=function(e,n){return e.length===n.length&&Ve(e,function(e,t){return e===n[t]})},qe=Array.prototype.slice,Ye,Ke,Xe,Ge,Je,Qe,Ze,et={map:Ae,each:De,eachr:Pe,partition:Be,filter:Oe,groupBy:Me,indexOf:Ee,foldr:Le,foldl:Ie,find:He,findIndex:Fe,flatten:Ue,bind:je,forall:Ve,exists:_e,contains:Ne,equal:$e,reverse:function(e){var t=qe.call(e,0);return t.reverse(),t},chunk:Re,difference:function(e,t){return Oe(e,function(e){return!Ne(t,e)})},mapToObject:function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n},pure:function(e){return[e]},sort:function(e,t){var n=qe.call(e,0);return n.sort(t),n},range:Te,head:function(e){return 0===e.length?re.none():re.some(e[0])},last:function(e){return 0===e.length?re.none():re.some(e[e.length-1])}},tt={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck"},table:{title:"Table"},help:{title:"Help"}},nt=function(){return{name:"|",item:{text:"|"}}},rt=function(e,t){var n;return"|"===e?{name:"|",item:{text:"|"}}:t?{name:e,item:t}:null},it=function(e,t){return et.findIndex(e,function(e){return e.name===t}).isSome()},ot=function(e){return e&&"|"===e.item.text},at=function(e,t){var n=et.filter(e,function(e){return false===t.hasOwnProperty(e.name)}),r=et.filter(n,function(e,t,n){return!ot(e)||!ot(n[t-1])});return et.filter(r,function(e,t,n){return!ot(e)||t>0&&t<n.length-1})},st=function(n,e,t,r){var i,o,a,s;if(e)o=e[r],s=true;else o=tt[r];if(o){if(i={text:o.title},a=[],l.each((o.items||"").split(/[ ,]/),function(e){var t=rt(e,n[e]);if(t)a.push(t)}),!s)l.each(n,function(e,t){if(e.context===r&&!it(a,t)){if("before"===e.separator)a.push({name:"|",item:{text:"|"}});if(e.prependToContext)a.unshift(rt(t,e));else a.push(rt(t,e));if("after"===e.separator)a.push({name:"|",item:{text:"|"}})}});if(i.menu=et.map(at(a,t),function(e){return e.item}),!i.menu.length)return null}return i},ut=function(e){var t,n=[],r=b(e);if(r)for(t in r)n.push(t);else for(t in tt)n.push(t);return n},lt,ft=function(e){for(var t=[],n=ut(e),r=l.makeMap(y(e).split(/[ ,]/)),i=d(e),o="string"===typeof i?i.split(/[ ,]/):n,a=0;a<o.length;a++){var s=o[a],u=st(e.menuItems,b(e),r,s);if(u)t.push(u)}return t},ct=E.DOM,dt=function(e){return{width:e.clientWidth,height:e.clientHeight}},mt=function(e,t,n){var r,i,o,a;if(r=e.getContainer(),i=e.getContentAreaContainer().firstChild,o=dt(r),a=dt(i),null!==t)t=Math.max(s(e),t),t=Math.min(w(e),t),ct.setStyle(r,"width",t+(o.width-a.width)),ct.setStyle(i,"width",t);n=Math.max(u(e),n),n=Math.min(x(e),n),ct.setStyle(i,"height",n),A(e)},ht,pt=mt,gt=function(e,t,n){var r=e.getContentAreaContainer();mt(e,r.clientWidth+t,r.clientHeight+n)},vt=tinymce.util.Tools.resolve("tinymce.Env"),bt=function(e){return{element:function(){return e}}},yt=function(e,t,n){var r=e.settings[n];if(r)r(bt(t.getEl("body")))},wt=function(n,r,e){l.each(e,function(e){var t=r.items().filter("#"+e.name)[0];if(t&&t.visible()&&e.name!==n)yt(e,t,"onhide"),t.visible(false)})},xt=function(e){e.items().each(function(e){e.active(false)})},Ct=function(e,t){return l.grep(e,function(e){return e.name===t})[0]},kt=function(o,a,s){return function(e){var t=e.control,n=t.parents().filter("panel")[0],r=n.find("#"+a)[0],i=Ct(s,a);if(wt(a,n,s),xt(t.parent()),r&&r.visible())yt(i,r,"onhide"),r.hide(),t.active(false);else{if(r)r.show(),yt(i,r,"onshow");else r=N.create({type:"container",name:a,layout:"stack",classes:"sidebar-panel",html:""}),n.prepend(r),yt(i,r,"onrender"),yt(i,r,"onshow");t.active(true)}A(o)}},St=function(){return!vt.ie||vt.ie>=11},Et,Nt,_t=function(e){return St()&&e.sidebars?e.sidebars.length>0:false},Tt=function(n){var e;return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:l.map(n.sidebars,function(e){var t=e.settings;return{type:"button",icon:t.icon,image:t.image,tooltip:t.tooltip,onclick:kt(n,e.name,n.sidebars)}})}]}},Rt,At=function(e){var t=function(){e._skinLoaded=true,R(e)};return function(){if(e.initialized)t();else e.on("init",t)}},Dt=E.DOM,Pt=function(t){return function(e){t.find("*").disabled("readonly"===e.mode)}},Bt=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},Ot=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[Bt("0"),Tt(e)]}},Mt,Lt=function(t,e,n){var r,i,o;if(false===C(t)&&n.skinUiCss)Dt.styleSheetLoader.load(n.skinUiCss,At(t));else At(t)();if(r=e.panel=N.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[false===c(t)?null:{type:"menubar",border:"0 0 1 0",items:ft(t)},de(t,h(t))]},_t(t)?Ot(t):Bt("1 0 0 0")]}),ue.setUiContainer(t,r),"none"!==k(t))i={type:"resizehandle",direction:k(t),onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;o={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){if("both"===k(t))pt(t,o.width+e.deltaX,o.height+e.deltaY);else pt(t,null,o.height+e.deltaY)}};if(m(t)){var a='<a href="https://www.tinymce.com/?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>',s=_.translate(["Powered by {0}",a]),u=f(t)?{type:"label",classes:"branding",html:" "+s}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:true,items:[{type:"elementpath",editor:t},i,u]})}if(D(t),t.on("SwitchMode",Pt(r)),r.renderBefore(n.targetNode).reflow(),p(t))t.setMode("readonly");if(n.width)Dt.setStyle(r.getEl(),"width",n.width);return t.on("remove",function(){r.remove(),r=null}),O(t,r),we(t),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},It=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Ht=0,Ft={id:function(){return"mceu_"+Ht++},create:function(e,t,n){var r=document.createElement(e);if(E.DOM.setAttribs(r,t),"string"===typeof n)r.innerHTML=n;else l.each(n,function(e){if(e.nodeType)r.appendChild(e)});return r},createFragment:function(e){return E.DOM.createFragment(e)},getWindowSize:function(){return E.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return E.DOM.getPos(e,t||Ft.getContainer())},getContainer:function(){return vt.container?vt.container:document.body},getViewPort:function(e){return E.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return E.DOM.addClass(e,t)},removeClass:function(e,t){return E.DOM.removeClass(e,t)},hasClass:function(e,t){return E.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return E.DOM.toggleClass(e,t,n)},css:function(e,t,n){return E.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return E.DOM.getStyle(e,t,true)},on:function(e,t,n,r){return E.DOM.bind(e,t,n,r)},off:function(e,t,n){return E.DOM.unbind(e,t,n)},fire:function(e,t,n){return E.DOM.fire(e,t,n)},innerHtml:function(e,t){E.DOM.setHTML(e,t)}},zt=function(e){return"static"===Ft.getRuntimeStyle(e,"position")},Wt=function(e){return e.state.get("fixed")};function Ut(e,t,n){var r,i,o,a,s,u,l,f,c,d;if(c=Vt(),o=(i=Ft.getPos(t,ue.getUiContainer(e))).x,a=i.y,Wt(e)&&zt(document.body))o-=c.x,a-=c.y;if(r=e.getEl(),s=(d=Ft.getSize(r)).width,u=d.height,l=(d=Ft.getSize(t)).width,f=d.height,"b"===(n=(n||"").split(""))[0])a+=f;if("r"===n[1])o+=l;if("c"===n[0])a+=Math.round(f/2);if("c"===n[1])o+=Math.round(l/2);if("b"===n[3])a-=u;if("r"===n[4])o-=s;if("c"===n[3])a-=Math.round(u/2);if("c"===n[4])o-=Math.round(s/2);return{x:o,y:a,w:s,h:u}}var jt=function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}},Vt=function(){return{x:0,y:0,w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.defaultView.innerWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.defaultView.innerHeight)}},$t=function(e){var t=ue.getUiContainer(e);return t&&!Wt(e)?jt(t):Vt()},qt={testMoveRel:function(e,t){for(var n=$t(this),r=0;r<t.length;r++){var i=Ut(this,e,t[r]);if(Wt(this)){if(i.x>0&&i.x+i.w<n.w&&i.y>0&&i.y+i.h<n.h)return t[r]}else if(i.x>n.x&&i.x+i.w<n.w+n.x&&i.y>n.y&&i.y+i.h<n.h+n.y)return t[r]}return t[0]},moveRel:function(e,t){if("string"!==typeof t)t=this.testMoveRel(e,t);var n=Ut(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(e,t){var n=this;function r(e,t,n){if(e<0)return 0;if(e+n>t)return(e=t-n)<0?0:e;return e}if(n.settings.constrainToViewport){var i=$t(this),o=n.layoutRect();e=r(e,i.w+i.x,o.w),t=r(t,i.h+i.y,o.h)}var a=ue.getUiContainer(n);if(a&&zt(a)&&!Wt(n))e-=a.scrollLeft,t-=a.scrollTop;if(a)e+=1,t+=1;if(n.state.get("rendered"))n.layoutRect({x:e,y:t}).repaint();else n.settings.x=e,n.settings.y=t;return n.fire("move",{x:e,y:t}),n}},Yt=tinymce.util.Tools.resolve("tinymce.util.Class"),Kt=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Xt=function(e){var t,n=10;if(!e)return;if("number"===typeof e)return{top:e=e||0,left:e,bottom:e,right:e};if(1===(t=(e=e.split(" ")).length))e[1]=e[2]=e[3]=e[0];else if(2===t)e[2]=e[0],e[3]=e[1];else if(3===t)e[3]=e[1];return{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0}},Gt=function(r,e){function n(e){var t=r.ownerDocument.defaultView;if(t){var n=t.getComputedStyle(r,null);if(n)return e=e.replace(/[A-Z]/g,function(e){return"-"+e}),n.getPropertyValue(e);else return null}return r.currentStyle[e]}function t(e){var t=parseFloat(n(e));return isNaN(t)?0:t}return{top:t(e+"TopWidth"),right:t(e+"RightWidth"),bottom:t(e+"BottomWidth"),left:t(e+"LeftWidth")}};function Jt(){}function Qt(e){this.cls=[],this.cls._map={},this.onchange=e||Jt,this.prefix=""}function Zt(e){var t=[],n=e.length,r;while(n--)if(!(r=e[n]).__checked)t.push(r),r.__checked=1;n=t.length;while(n--)delete t[n].__checked;return t}l.extend(Qt.prototype,{add:function(e){if(e&&!this.contains(e))this.cls._map[e]=true,this.cls.push(e),this._change();return this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length;t++)if(this.cls[t]===e)break;this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);if(n!==t){if(n)this.remove(e);else this.add(e);this._change()}return this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Qt.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++){if(t>0)e+=" ";e+=this.prefix+this.cls[t]}return e};var en=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,tn=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,nn=/^\s*|\s*$/g,rn,on=Yt.extend({init:function(e){var n=this.match;function o(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}function a(t){if(t)return function(e){return e._name===t}}function s(n){if(n)return n=n.split("."),function(e){var t=n.length;while(t--)if(!e.classes.contains(n[t]))return false;return true}}function u(n,r,i){if(n)return function(e){var t=e[n]?e[n]():"";return!r?!!i:"="===r?t===i:"*="===r?t.indexOf(i)>=0:"~="===r?(" "+t+" ").indexOf(" "+i+" ")>=0:"!="===r?t!==i:"^="===r?0===t.indexOf(i):"$="===r?t.substr(t.length-i.length)===i:false}}function l(r){var t;if(r){if(!(r=/(?:not\((.+)\))|(.+)/i.exec(r))[1])return r=r[2],function(e,t,n){return"first"===r?0===t:"last"===r?t===n-1:"even"===r?t%2===0:"odd"===r?t%2===1:e[r]?e[r]():false};return t=c(r[1],[]),function(e){return!n(e,t)}}}function f(e,t,n){var r;function i(e){if(e)t.push(e)}return i(o((r=en.exec(e.replace(nn,"")))[1])),i(a(r[2])),i(s(r[3])),i(u(r[4],r[5],r[6])),i(l(r[7])),t.pseudo=!!r[7],t.direct=n,t}function c(e,t){var n=[],r,i,o;do{if(tn.exec(""),i=tn.exec(e))if(e=i[3],n.push(i[1]),i[2]){r=i[3];break}}while(i);if(r)c(r,t);for(e=[],o=0;o<n.length;o++)if(">"!==n[o])e.push(f(n[o],[],">"===n[o-1]));return t.push(e),t}this._selectors=c(e,[])},match:function(e,t){var n,r,i,o,a,s,u,l,f,c,d,m,h;for(n=0,r=(t=t||this._selectors).length;n<r;n++){for(h=e,m=0,i=(o=(a=t[n]).length)-1;i>=0;i--){l=a[i];while(h){if(l.pseudo){f=c=(d=h.parent().items()).length;while(f--)if(d[f]===h)break}for(s=0,u=l.length;s<u;s++)if(!l[s](h,f,c)){s=u+1;break}if(s===u){m++;break}else if(i===o-1)break;h=h.parent()}}if(m===o)return true}return false},find:function(e){var l=[],t,n,r=this._selectors;function f(e,t,n){var r,i,o,a,s,u=t[n];for(r=0,i=e.length;r<i;r++){for(s=e[r],o=0,a=u.length;o<a;o++)if(!u[o](s,r,i)){o=a+1;break}if(o===a){if(n===t.length-1)l.push(s);else if(s.items)f(s.items(),t,n+1)}else if(u.direct)return;if(s.items)f(s.items(),t,n)}}if(e.items){for(t=0,n=r.length;t<n;t++)f(e.items(),r[t],0);if(n>1)l=Zt(l)}if(!rn)rn=on.Collection;return new rn(l)}}),an,sn,un=Array.prototype.push,ln=Array.prototype.slice;sn={length:0,init:function(e){if(e)this.add(e)},add:function(e){var t=this;if(!l.isArray(e))if(e instanceof an)t.add(e.toArray());else un.call(t,e);else un.apply(t,e);return t},set:function(e){var t=this,n=t.length,r;for(t.length=0,t.add(e),r=t.length;r<n;r++)delete t[r];return t},filter:function(t){var e=this,n,r,i=[],o,a;if("string"===typeof t)t=new on(t),a=function(e){return t.match(e)};else a=t;for(n=0,r=e.length;n<r;n++)if(a(o=e[n]))i.push(o);return new an(i)},slice:function(){return new an(ln.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return l.each(this,e),this},toArray:function(){return l.toArray(this)},indexOf:function(e){var t=this,n=t.length;while(n--)if(t[n]===e)break;return n},reverse:function(){return new an(l.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].classes.contains(e):false},prop:function(t,n){var e=this,r;if(void 0!==n)return e.each(function(e){if(e[t])e[t](n)}),e;if((r=e[0])&&r[t])return r[t]()},exec:function(t){var e=this,n=l.toArray(arguments).slice(1);return e.each(function(e){if(e[t])e[t].apply(e,n)}),e},remove:function(){var e=this.length;while(e--)this[e].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}},l.each("fire on off show hide append prepend before after reflow".split(" "),function(n){sn[n]=function(){var t=l.toArray(arguments);return this.each(function(e){if(n in e)e[n].apply(e,t)}),this}}),l.each("text name disabled active selected checked visible parent value data".split(" "),function(t){sn[t]=function(e){return this.prop(t,e)}}),an=Yt.extend(sn);var fn=on.Collection=an,cn=function(e){this.create=e.create};cn.create=function(o,a){return new cn({create:function(t,n){var r,e=function(e){t.set(n,e.value)},i=function(e){o.set(a,e.value)};if(t.on("change:"+n,i),o.on("change:"+a,e),!(r=t._bindings))r=t._bindings=[],t.on("destroy",function(){var e=r.length;while(e--)r[e]()});return r.push(function(){o.off("change:"+a,e)}),o.get(a)}})};var dn=tinymce.util.Tools.resolve("tinymce.util.Observable");function mn(e){return e.nodeType>0}function hn(e,t){var n,r;if(e===t)return true;if(null===e||null===t)return e===t;if("object"!==typeof e||"object"!==typeof t)return e===t;if(l.isArray(t)){if(e.length!==t.length)return false;n=e.length;while(n--)if(!hn(e[n],t[n]))return false}if(mn(e)||mn(t))return e===t;for(n in r={},t){if(!hn(e[n],t[n]))return false;r[n]=true}for(n in e)if(!r[n]&&!hn(e[n],t[n]))return false;return true}var pn=Yt.extend({Mixins:[dn],init:function(e){var t,n;for(t in e=e||{})if((n=e[t])instanceof cn)e[t]=n.create(this,t);this.data=e},set:function(e,t){var n,r,i=this.data[e];if(t instanceof cn)t=t.create(this,e);if("object"===typeof e){for(n in e)this.set(n,e[n]);return this}if(!hn(i,t))this.data[e]=t,r={target:this,name:e,value:t,oldValue:i},this.fire("change:"+e,r),this.fire("change",r);return this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return cn.create(this,e)},destroy:function(){this.fire("destroy")}}),gn={},vn,bn={add:function(e){var t=e.parent();if(t){if(!t._layout||t._layout.isNative())return;if(!gn[t._id])gn[t._id]=t;if(!vn)vn=true,L.requestAnimationFrame(function(){var e,t;for(e in vn=false,gn)if((t=gn[e]).state.get("rendered"))t.reflow();gn={}},document.body)}},remove:function(e){if(gn[e._id])delete gn[e._id]}},yn="onmousewheel"in document,wn=false,xn="mce-",Cn,kn=0,Sn={Statics:{classPrefix:xn},isRtl:function(){return Cn.rtl},classPrefix:xn,init:function(t){var n=this,e,r;function i(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)n.classes.add(e[t])}if(n.settings=t=l.extend({},n.Defaults,t),n._id=t.id||"mceu_"+kn++,n._aria={role:t.role},n._elmCache={},n.$=It,n.state=new pn({visible:true,active:false,disabled:false,value:""}),n.data=new pn(t.data),n.classes=new Qt(function(){if(n.state.get("rendered"))n.getEl().className=this.toString()}),n.classes.prefix=n.classPrefix,e=t.classes){if(n.Defaults)if((r=n.Defaults.classes)&&e!==r)i(r);i(e)}if(l.each("title text name visible disabled active value".split(" "),function(e){if(e in t)n[e](t[e])}),n.on("click",function(){if(n.disabled())return false}),n.settings=t,n.borderBox=Xt(t.border),n.paddingBox=Xt(t.padding),n.marginBox=Xt(t.margin),t.hidden)n.hide()},Properties:"parent,name",getContainerElm:function(){var e=ue.getUiContainer(this);return e?e:Ft.getContainer()},getParentCtrl:function(e){var t,n=this.getRoot().controlIdLookup;while(e&&n){if(t=n[e.id])break;e=e.parentNode}return t},initLayoutRect:function(){var e=this,t=e.settings,n,r,i=e.getEl(),o,a,s,u,l,f,c,d;n=e.borderBox=e.borderBox||Gt(i,"border"),e.paddingBox=e.paddingBox||Gt(i,"padding"),e.marginBox=e.marginBox||Gt(i,"margin"),d=Ft.getSize(i),f=t.minWidth,c=t.minHeight,s=f||d.width,u=c||d.height,o=t.width,a=t.height,l="undefined"!==typeof(l=t.autoResize)?l:!o&&!a,o=o||s,a=a||u;var m=n.left+n.right,h=n.top+n.bottom,p=t.maxWidth||65535,g=t.maxHeight||65535;return e._layoutRect=r={x:t.x||0,y:t.y||0,w:o,h:a,deltaW:m,deltaH:h,contentW:o-m,contentH:a-h,innerW:o-m,innerH:a-h,startMinWidth:f||0,startMinHeight:c||0,minW:Math.min(s,p),minH:Math.min(u,g),maxW:p,maxH:g,autoResize:l,scrollW:0},e._lastLayoutRect={},r},layoutRect:function(e){var t=this,n=t._layoutRect,r,i,o,a,s;if(!n)n=t.initLayoutRect();if(e){if(o=n.deltaW,a=n.deltaH,void 0!==e.x)n.x=e.x;if(void 0!==e.y)n.y=e.y;if(void 0!==e.minW)n.minW=e.minW;if(void 0!==e.minH)n.minH=e.minH;if(void 0!==(i=e.w))i=(i=i<n.minW?n.minW:i)>n.maxW?n.maxW:i,n.w=i,n.innerW=i-o;if(void 0!==(i=e.h))i=(i=i<n.minH?n.minH:i)>n.maxH?n.maxH:i,n.h=i,n.innerH=i-a;if(void 0!==(i=e.innerW))i=(i=i<n.minW-o?n.minW-o:i)>n.maxW-o?n.maxW-o:i,n.innerW=i,n.w=i+o;if(void 0!==(i=e.innerH))i=(i=i<n.minH-a?n.minH-a:i)>n.maxH-a?n.maxH-a:i,n.innerH=i,n.h=i+a;if(void 0!==e.contentW)n.contentW=e.contentW;if(void 0!==e.contentH)n.contentH=e.contentH;if((r=t._lastLayoutRect).x!==n.x||r.y!==n.y||r.w!==n.w||r.h!==n.h){if(s=Cn.repaintControls)if(s.map&&!s.map[t._id])s.push(t),s.map[t._id]=true;r.x=n.x,r.y=n.y,r.w=n.w,r.h=n.h}return t}return n},repaint:function(){var e=this,t,n,r,i,o,a,s,u,l,f;if(l=!document.createRange?Math.round:function(e){return e},t=e.getEl().style,i=e._layoutRect,u=e._lastRepaintRect||{},a=(o=e.borderBox).left+o.right,s=o.top+o.bottom,i.x!==u.x)t.left=l(i.x)+"px",u.x=i.x;if(i.y!==u.y)t.top=l(i.y)+"px",u.y=i.y;if(i.w!==u.w)f=l(i.w-a),t.width=(f>=0?f:0)+"px",u.w=i.w;if(i.h!==u.h)f=l(i.h-s),t.height=(f>=0?f:0)+"px",u.h=i.h;if(e._hasBody&&i.innerW!==u.innerW){if(f=l(i.innerW),r=e.getEl("body"))(n=r.style).width=(f>=0?f:0)+"px";u.innerW=i.innerW}if(e._hasBody&&i.innerH!==u.innerH){if(f=l(i.innerH),r=r||e.getEl("body"))(n=n||r.style).height=(f>=0?f:0)+"px";u.innerH=i.innerH}e._lastRepaintRect=u,e.fire("repaint",{},false)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,Ft.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){var o=this;function n(n){var r,i;if("string"!==typeof n)return n;return function(e){if(!r)o.parentsAndSelf().each(function(e){var t=e.settings.callbacks;if(t&&(r=t[n]))return i=e,false});if(!r)return e.action=n,void this.fire("execute",e);return r.call(i,e)}}return En(o).on(e,n(t)),o},off:function(e,t){return En(this).off(e,t),this},fire:function(e,t,n){var r=this;if(!(t=t||{}).control)t.control=r;if(t=En(r).fire(e,t),false!==n&&r.parent){var i=r.parent();while(i&&!t.isPropagationStopped())i.fire(e,t,false),i=i.parent()}return t},hasEventListeners:function(e){return En(this).has(e)},parents:function(e){var t=this,n,r=new fn;for(n=t.parent();n;n=n.parent())r.add(n);if(e)r=r.filter(e);return r},parentsAndSelf:function(e){return new fn(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;if(!this._elmCache[t])this._elmCache[t]=It("#"+t)[0];return this._elmCache[t]},show:function(){return this.visible(true)},hide:function(){return this.visible(false)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);if("undefined"===typeof t)return n._aria[e];if(n._aria[e]=t,n.state.get("rendered"))r.setAttribute("role"===e?e:"aria-"+e,t);return n},encode:function(e,t){if(false!==t)e=this.translate(e);return(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return Cn.translate?Cn.translate(e):e},before:function(e){var t=this,n=t.parent();if(n)n.insert(e,n.items().indexOf(t),true);return t},after:function(e){var t=this,n=t.parent();if(n)n.insert(e,n.items().indexOf(t));return t},remove:function(){var t=this,e=t.getEl(),n=t.parent(),r,i;if(t.items){var o=t.items().toArray();i=o.length;while(i--)o[i].remove()}if(n&&n.items)r=[],n.items().each(function(e){if(e!==t)r.push(e)}),n.items().set(r),n._lastRect=null;if(t._eventsRoot&&t._eventsRoot===t)It(e).off();var a=t.getRoot().controlIdLookup;if(a)delete a[t._id];if(e&&e.parentNode)e.parentNode.removeChild(e);return t.state.set("rendered",false),t.state.destroy(),t.fire("remove"),t},renderBefore:function(e){return It(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return It(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var r=this,e=r.settings,t,n,i,o,a;for(o in r.$el=It(r.getEl()),r.state.set("rendered",true),e)if(0===o.indexOf("on"))r.on(o.substr(2),e[o]);if(r._eventsRoot){for(i=r.parent();!a&&i;i=i.parent())a=i._eventsRoot;if(a)for(o in a._nativeEvents)r._nativeEvents[o]=true}if(Nn(r),e.style)if(t=r.getEl())t.setAttribute("style",e.style),t.style.cssText=e.style;if(r.settings.border)n=r.borderBox,r.$el.css({"border-top-width":n.top,"border-right-width":n.right,"border-bottom-width":n.bottom,"border-left-width":n.left});var s=r.getRoot();if(!s.controlIdLookup)s.controlIdLookup={};for(var u in(s.controlIdLookup[r._id]=r)._aria)r.aria(u,r._aria[u]);if(false===r.state.get("visible"))r.getEl().style.display="none";r.bindStates(),r.state.on("change:visible",function(e){var t=e.value,n;if(r.state.get("rendered"))r.getEl().style.display=false===t?"none":"",r.getEl().getBoundingClientRect();if(n=r.parent())n._lastRect=null;r.fire(t?"show":"hide"),bn.add(r)}),r.fire("postrender",{},false)},bindStates:function(){},scrollIntoView:function(e){function t(e,t){var n,r,i=e;n=r=0;while(i&&i!==t&&i.nodeType)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}var n=this.getEl(),r=n.parentNode,i,o,a,s,u,l,f=t(n,r);if(i=f.x,o=f.y,a=n.offsetWidth,s=n.offsetHeight,u=r.clientWidth,l=r.clientHeight,"end"===e)i-=u-a,o-=l-s;else if("center"===e)i-=u/2-a/2,o-=l/2-s/2;return r.scrollLeft=i,r.scrollTop=o,this},getRoot:function(){var e=this,t,n=[];while(e){if(e.rootControl){t=e.rootControl;break}n.push(e),e=(t=e).parent()}if(!t)t=this;var r=n.length;while(r--)n[r].rootControl=t;return t},reflow:function(){bn.remove(this);var e=this.parent();if(e&&e._layout&&!e._layout.isNative())e.reflow();return this}};function En(n){if(!n._eventDispatcher)n._eventDispatcher=new Kt({scope:n,toggleEvent:function(e,t){if(t&&Kt.isNative(e)){if(!n._nativeEvents)n._nativeEvents={};if(n._nativeEvents[e]=true,n.state.get("rendered"))Nn(n)}}});return n._eventDispatcher}function Nn(s){var e,t,n,u,r,i;function o(e){var t=s.getParentCtrl(e.target);if(t)t.fire(e.type,e)}function a(){var e=u._lastHoverCtrl;if(e)e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),u._lastHoverCtrl=null}function l(e){var t=s.getParentCtrl(e.target),n=u._lastHoverCtrl,r=0,i,o,a;if(t!==n){if((o=(u._lastHoverCtrl=t).parents().toArray().reverse()).push(t),n){for((a=n.parents().toArray().reverse()).push(n),r=0;r<a.length;r++)if(o[r]!==a[r])break;for(i=a.length-1;i>=r;i--)(n=a[i]).fire("mouseleave",{target:n.getEl()})}for(i=r;i<o.length;i++)(t=o[i]).fire("mouseenter",{target:t.getEl()})}}function f(e){if(e.preventDefault(),"mousewheel"===e.type){if(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX)e.deltaX=-1/40*e.wheelDeltaX}else e.deltaX=0,e.deltaY=e.detail;e=s.fire("wheel",e)}if(r=s._nativeEvents){for((n=s.parents().toArray()).unshift(s),e=0,t=n.length;!u&&e<t;e++)u=n[e]._eventsRoot;if(!u)u=n[n.length-1]||s;for(s._eventsRoot=u,t=e,e=0;e<t;e++)n[e]._eventsRoot=u;var c=u._delegates;if(!c)c=u._delegates={};for(i in r){if(!r)return false;if("wheel"===i&&!wn){if(yn)It(s.getEl()).on("mousewheel",f);else It(s.getEl()).on("DOMMouseScroll",f);continue}if("mouseenter"===i||"mouseleave"===i){if(!u._hasMouseEnter)It(u.getEl()).on("mouseleave",a).on("mouseover",l),u._hasMouseEnter=1}else if(!c[i])It(u.getEl()).on(i,o),c[i]=true;r[i]=false}}}l.each("text title visible disabled active value".split(" "),function(t){Sn[t]=function(e){if(0===arguments.length)return this.state.get(t);if("undefined"!==typeof e)this.state.set(t,e);return this}});var _n=Cn=Yt.extend(Sn),Tn=function(e){return e.getAttribute("data-mce-tabstop")?true:false};function Rn(e){var t=e.root,o,i;function n(e){return e&&1===e.nodeType}try{o=document.activeElement}catch(e){o=document.body}function r(e){if(n(e=e||o))return e.getAttribute("role");return null}function a(e){var t,n=e||o;while(n=n.parentNode)if(t=r(n))return t}function s(e){var t=o;if(n(t))return t.getAttribute("aria-"+e)}function u(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function l(e){if(u(e)&&!e.hidden)return true;if(Tn(e))return true;if(/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(r(e)))return true;return false}function f(e){var n=[];function r(e){if(1!==e.nodeType||"none"===e.style.display||e.disabled)return;if(l(e))n.push(e);for(var t=0;t<e.childNodes.length;t++)r(e.childNodes[t])}return r(e||t.getEl()),n}function c(e){var t,n;(n=(e=e||i).parents().toArray()).unshift(e);for(var r=0;r<n.length;r++)if((t=n[r]).settings.ariaRoot)break;return t}function d(e){var t=c(e),n=f(t.getEl());if(t.settings.ariaRemember&&"lastAriaIndex"in t)m(t.lastAriaIndex,n);else m(0,n)}function m(e,t){if(e<0)e=t.length-1;else if(e>=t.length)e=0;if(t[e])t[e].focus();return e}function h(e,t){var n=-1,r=c();t=t||f(r.getEl());for(var i=0;i<t.length;i++)if(t[i]===o)n=i;n+=e,r.lastAriaIndex=m(n,t)}function p(){var e;if("tablist"===a())h(-1,f(o.parentNode));else if(i.parent().submenu)w();else h(-1)}function g(){var e=r(),t=a();if("tablist"===t)h(1,f(o.parentNode));else if("menuitem"===e&&"menu"===t&&s("haspopup"))x();else h(1)}function v(){h(-1)}function b(){var e=r(),t=a();if("menuitem"===e&&"menubar"===t)x();else if("button"===e&&s("haspopup"))x({key:"down"});else h(1)}function y(e){var t;if("tablist"===a()){var n=f(i.getEl("body"))[0];if(n)n.focus()}else h(e.shiftKey?-1:1)}function w(){i.fire("cancel")}function x(e){e=e||{},i.fire("click",{target:o,aria:e})}return i=t.getParentCtrl(o),t.on("keydown",function(e){function t(e,t){if(u(o)||Tn(o))return;if("slider"===r(o))return;if(false!==t(e))e.preventDefault()}if(e.isDefaultPrevented())return;switch(e.keyCode){case 37:t(e,p);break;case 39:t(e,g);break;case 38:t(e,v);break;case 40:t(e,b);break;case 27:w();break;case 14:case 13:case 32:t(e,x);break;case 9:y(e),e.preventDefault()}}),t.on("focusin",function(e){o=e.target,i=e.control}),{focusFirst:d}}var An={},Dn=_n.extend({init:function(e){var t=this;if(t._super(e),(e=t.settings).fixed)t.state.set("fixed",true);if(t._items=new fn,t.isRtl())t.classes.add("rtl");if(t.bodyClasses=new Qt(function(){if(t.state.get("rendered"))t.getEl("body").className=this.toString()}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls)t.classes.add(e.containerCls);if(t._layout=N.create((e.layout||"")+"layout"),t.settings.items)t.add(t.settings.items);else t.add(t.render());t._hasBody=true},items:function(){return this._items},find:function(e){return(e=An[e]=An[e]||new on(e)).find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t=this,n,r,i;if(e)if(r=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav)return void r.focusFirst(t);if(i=t.find("*"),t.statusbar)i.add(t.statusbar.items());if(i.each(function(e){if(e.settings.autofocus)return n=null,false;if(e.canFocus)n=n||e}),n)n.focus();return t},replace:function(e,t){var n,r=this.items(),i=r.length;while(i--)if(r[i]===e){r[i]=t;break}if(i>=0){if(n=t.getEl())n.parentNode.removeChild(n);if(n=e.getEl())n.parentNode.removeChild(n)}t.parent(this)},create:function(e){var t=this,n,r=[];if(!l.isArray(e))e=[e];return l.each(e,function(e){if(e){if(!(e instanceof _n)){if("string"===typeof e)e={type:e};n=l.extend({},t.settings.defaults,e),e.type=n.type=n.type||e.type||t.settings.defaultType||(n.defaults?n.defaults.type:null),e=N.create(n)}r.push(e)}}),r},renderNew:function(){var r=this;return r.items().each(function(e,t){var n;if(e.parent(r),!e.state.get("rendered")){if((n=r.getEl("body")).hasChildNodes()&&t<=n.childNodes.length-1)It(n.childNodes[t]).before(e.renderHtml());else It(n).append(e.renderHtml());e.postRender(),bn.add(e)}}),r._layout.applyClasses(r.items().filter(":visible")),r._lastRect=null,r},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r=this,i,o,a;if(e=r.create(e),i=r.items(),!n&&t<i.length-1)t+=1;if(t>=0&&t<i.length)o=i.slice(0,t).toArray(),a=i.slice(t).toArray(),i.set(o.concat(e,a));return r.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e,r={};return this.find("*").each(function(e){var t=e.name(),n=e.value();if(t&&"undefined"!==typeof n)r[t]=n}),r},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+">"+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this,t;if(e.items().exec("postRender"),e._super(),e._layout.postRender(e),e.state.set("rendered",true),e.settings.style)e.$el.css(e.settings.style);if(e.settings.border)t=e.borderBox,e.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left});if(!e.parent())e.keyboardNav=Rn({root:e});return e},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},true},reflow:function(){var e;if(bn.remove(this),this.visible()){_n.repaintControls=[],_n.repaintControls.map={},this.recalc(),e=_n.repaintControls.length;while(e--)_n.repaintControls[e].repaint();if("flow"!==this.settings.layout&&"stack"!==this.settings.layout)this.repaint();_n.repaintControls=[]}return this}});function Pn(e){var t,n,r,i,o,a,s,u,l=Math.max;return t=e.documentElement,n=e.body,r=l(t.scrollWidth,n.scrollWidth),i=l(t.clientWidth,n.clientWidth),o=l(t.offsetWidth,n.offsetWidth),a=l(t.scrollHeight,n.scrollHeight),s=l(t.clientHeight,n.clientHeight),{width:r<o?i:r,height:a<(u=l(t.offsetHeight,n.offsetHeight))?s:a}}function Bn(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function On(e,i){var o,a=i.document||document,s,t,u,l,f,c;i=i||{};var d=a.getElementById(i.handle||e);t=function(e){var t=Pn(a),n,r;if(Bn(e),e.preventDefault(),s=e.button,n=d,f=e.screenX,c=e.screenY,window.getComputedStyle)r=window.getComputedStyle(n,null).getPropertyValue("cursor");else r=n.runtimeStyle.cursor;o=It("<div></div>").css({position:"absolute",top:0,left:0,width:t.width,height:t.height,zIndex:2147483647,opacity:1e-4,cursor:r}).appendTo(a.body),It(a).on("mousemove touchmove",l).on("mouseup touchend",u),i.start(e)},l=function(e){if(Bn(e),e.button!==s)return u(e);e.deltaX=e.screenX-f,e.deltaY=e.screenY-c,e.preventDefault(),i.drag(e)},u=function(e){if(Bn(e),It(a).off("mousemove touchmove",l).off("mouseup touchend",u),o.remove(),i.stop)i.stop(e)},this.destroy=function(){It(d).off()},It(d).on("mousedown touchstart",t)}var Mn={init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){var v=this,b=2;function n(){var p,g,e;function t(e,t,n,r,i,o){var a,s,u,l,f,c,d,m,h;if(s=v.getEl("scroll"+e)){if(m=t.toLowerCase(),h=n.toLowerCase(),It(v.getEl("absend")).css(m,v.layoutRect()[r]-1),!i)return void It(s).css("display","none");It(s).css("display","block"),a=v.getEl("body"),u=v.getEl("scroll"+e+"t"),l=a["client"+n]-2*b,c=(l-=p&&g?s["client"+o]:0)/(f=a["scroll"+n]),(d={})[m]=a["offset"+t]+b,d[h]=l,It(s).css(d),(d={})[m]=a["scroll"+t]*c,d[h]=l*c,It(u).css(d)}}e=v.getEl("body"),p=e.scrollWidth>e.clientWidth,g=e.scrollHeight>e.clientHeight,t("h","Left","Width","contentW",p,"Height"),t("v","Top","Height","contentH",g,"Width")}function e(){function e(a,s,u,l,f){var c,e=v._id+"-scroll"+a,t=v.classPrefix;It(v.getEl()).append('<div id="'+e+'" class="'+t+"scrollbar "+t+"scrollbar-"+a+'">'+'<div id="'+e+'t" class="'+t+'scrollbar-thumb"></div>'+"</div>"),v.draghelper=new On(e+"t",{start:function(){c=v.getEl("body")["scroll"+s],It("#"+e).addClass(t+"active")},drag:function(e){var t,n,r,i,o=v.layoutRect();n=o.contentW>o.innerW,r=o.contentH>o.innerH,i=v.getEl("body")["client"+u]-2*b,t=(i-=n&&r?v.getEl("scroll"+a)["client"+f]:0)/v.getEl("body")["scroll"+u],v.getEl("body")["scroll"+s]=c+e["delta"+l]/t},stop:function(){It("#"+e).removeClass(t+"active")}})}v.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height")}if(v.settings.autoScroll){if(!v._hasScroll)v._hasScroll=true,e(),v.on("wheel",function(e){var t=v.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),It(v.getEl("body")).on("scroll",n);n()}}},Ln=Dn.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[Mn],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;if(e.preRender(),t.preRender(e),"undefined"===typeof n)n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>";else{if("function"===typeof n)n=n.call(e);e._hasBody=false}return'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),In={resizeToContent:function(){this._layoutRect.autoResize=true,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=Ft.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=false,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}},Hn,Fn,zn,Wn=[],Un=[],jn;function Vn(e,t){while(e){if(e===t)return true;e=e.parent()}}function $n(e){var t=Wn.length;while(t--){var n=Wn[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r)if(Vn(r,n)||n.parent()===r)continue;if(!(e=n.fire("autohide",{target:e.target})).isDefaultPrevented())n.hide()}}}function qn(){if(!Hn)Hn=function(e){if(2===e.button)return;$n(e)},It(document).on("click touchstart",Hn)}function Yn(){if(!Fn)Fn=function(){var e;e=Wn.length;while(e--)Xn(Wn[e])},It(window).on("scroll",Fn)}function Kn(){if(!zn){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;zn=function(){if(!document.all||t!==e.clientWidth||n!==e.clientHeight)t=e.clientWidth,n=e.clientHeight,Jn.hideAll()},It(window).on("resize",zn)}}function Xn(i){var e=Ft.getViewPort().y;function t(e,t){for(var n,r=0;r<Wn.length;r++)if(Wn[r]!==i){n=Wn[r].parent();while(n&&(n=n.parent()))if(n===i)Wn[r].fixed(e).moveBy(0,t).repaint()}}if(i.settings.autofix)if(!i.state.get("fixed")){if(i._autoFixY=i.layoutRect().y,i._autoFixY<e)i.fixed(true).layoutRect({y:0}).repaint(),t(true,e-i._autoFixY)}else if(i._autoFixY>e)i.fixed(false).layoutRect({y:i._autoFixY}).repaint(),t(false,i._autoFixY-e)}function Gn(e,t){var n,r=Jn.zIndex||65535,i;if(e)Un.push(t);else{n=Un.length;while(n--)if(Un[n]===t)Un.splice(n,1)}if(Un.length)for(n=0;n<Un.length;n++){if(Un[n].modal)r++,i=Un[n];Un[n].getEl().style.zIndex=r,Un[n].zIndex=r,r++}var o=It("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];if(i)It(o).css("z-index",i.zIndex-1);else if(o)o.parentNode.removeChild(o),jn=false;Jn.currentZIndex=r}var Jn=Ln.extend({Mixins:[qt,In],init:function(e){var r=this;if(r._super(e),(r._eventsRoot=r).classes.add("floatpanel"),e.autohide)qn(),Kn(),Wn.push(r);if(e.autofix)Yn(),r.on("move",function(){Xn(this)});if(r.on("postrender show",function(e){if(e.control===r){var t,n=r.classPrefix;if(r.modal&&!jn){if(!(t=It("#"+n+"modal-block",r.getContainerElm()))[0])t=It('<div id="'+n+'modal-block" class="'+n+"reset "+n+'fade"></div>').appendTo(r.getContainerElm());L.setTimeout(function(){t.addClass(n+"in"),It(r.getEl()).addClass(n+"in")}),jn=true}Gn(true,r)}}),r.on("show",function(){r.parents().each(function(e){if(e.state.get("fixed"))return r.fixed(true),false})}),e.popover)r._preBodyHtml='<div class="'+r.classPrefix+'arrow"></div>',r.classes.add("popover").add("bottom").add(r.isRtl()?"end":"start");r.aria("label",e.ariaLabel),r.aria("labelledby",r._id),r.aria("describedby",r.describedBy||r._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!==e){if(t.state.get("rendered")){var n=Ft.getViewPort();if(e)t.layoutRect().y-=n.y;else t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e=this,t,n=e._super();t=Wn.length;while(t--)if(Wn[t]===e)break;if(-1===t)Wn.push(e);return n},hide:function(){return Qn(this),Gn(false,this),this._super()},hideAll:function(){Jn.hideAll()},close:function(){var e=this;if(!e.fire("close").isDefaultPrevented())e.remove(),Gn(false,e);return e},remove:function(){Qn(this),this._super()},postRender:function(){var e=this;if(e.settings.bodyRole)this.getEl("body").setAttribute("role",e.settings.bodyRole);return e._super()}});function Qn(e){var t;t=Wn.length;while(t--)if(Wn[t]===e)Wn.splice(t,1);t=Un.length;while(t--)if(Un[t]===e)Un.splice(t,1)}Jn.hideAll=function(){var e=Wn.length;while(e--){var t=Wn[e];if(t&&t.settings.autohide)t.hide(),Wn.splice(e,1)}};var Zn=function(e,t){return!!(e&&!t.settings.ui_container)},er,tr=function(a,e,t){var s,n,u=E.DOM,r=g(a);if(r)n=u.select(r)[0];var i=function(){if(s&&s.moveRel&&s.visible()&&!s._fixed){var e=a.selection.getScrollContainer(),t=a.getBody(),n=0,r=0;if(e){var i=u.getPos(t),o=u.getPos(e);n=Math.max(0,o.x-i.x),r=Math.max(0,o.y-i.y)}s.fixed(false).moveRel(t,a.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(n,r)}},o=function(){if(s)s.show(),i(),u.addClass(a.getBody(),"mce-edit-focus")},l=function(){if(s)s.hide(),Jn.hideAll(),u.removeClass(a.getBody(),"mce-edit-focus")},f=function(){if(a.destroyed)return;if(s){if(!s.visible())o();return}if(s=e.panel=N.create({type:n?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:Zn(n,a),fixed:Zn(n,a),border:1,items:[false===c(a)?null:{type:"menubar",border:"0 0 1 0",items:ft(a)},de(a,h(a))]}),ue.setUiContainer(a,s),D(a),n)s.renderTo(n).reflow();else s.renderTo().reflow();O(a,s),o(),we(a),a.on("nodeChange",i),a.on("ResizeWindow",i),a.on("activate",o),a.on("deactivate",l),a.nodeChanged()};if(a.settings.content_editable=true,a.on("focus",function(){if(false===C(a)&&t.skinUiCss)u.styleSheetLoader.load(t.skinUiCss,f,f);else f()}),a.on("blur hide",l),a.on("remove",function(){if(s)s.remove(),s=null}),false===C(a)&&t.skinUiCss)u.styleSheetLoader.load(t.skinUiCss,At(a));else At(a)();return{}};function nr(r,i){var o=this,a,s=_n.classPrefix,u;o.show=function(e,t){function n(){if(a)if(It(r).append('<div class="'+s+"throbber"+(i?" "+s+"throbber-inline":"")+'"></div>'),t)t()}if(o.hide(),a=true,e)u=L.setTimeout(n,e);else n();return o},o.hide=function(){var e=r.lastChild;if(L.clearTimeout(u),e&&-1!==e.className.indexOf("throbber"))e.parentNode.removeChild(e);return a=false,o}}var rr,ir=function(e,t){var n;e.on("ProgressState",function(e){if(n=n||new nr(t.panel.getEl("body")),e.state)n.show(e.time);else n.hide()})},or,ar=function(e,t,n){var r=a(e);if(r)n.skinUiCss=r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css");return ir(e,t),i(e)?tr(e,t,n):Lt(e,t,n)},sr=_n.extend({Mixins:[qt],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation">'+'<div class="'+t+'tooltip-arrow"></div>'+'<div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div>"+"</div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=65535+65535}}),ur=_n.extend({init:function(r){var i=this;if(i._super(r),r=i.settings,i.canFocus=true,r.tooltip&&false!==ur.tooltips)i.on("mouseenter",function(e){var t=i.tooltip().moveTo(-65535);if(e.control===i){var n=t.text(r.tooltip).show().testMoveRel(i.getEl(),["bc-tc","bc-tl","bc-tr"]);t.classes.toggle("tooltip-n","bc-tc"===n),t.classes.toggle("tooltip-nw","bc-tl"===n),t.classes.toggle("tooltip-ne","bc-tr"===n),t.moveRel(i.getEl(),n)}else t.hide()}),i.on("mouseleave mousedown click",function(){i.tooltip().remove(),i._tooltip=null});i.aria("label",r.ariaLabel||r.tooltip)},tooltip:function(){if(!this._tooltip)this._tooltip=new sr({type:"tooltip"}),ue.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo();return this._tooltip},postRender:function(){var e=this,t=e.settings;if(e._super(),!e.parent()&&(t.width||t.height))e.initLayoutRect(),e.repaint();if(t.autofocus)e.focus()},bindStates:function(){var t=this;function n(e){t.aria("disabled",e),t.classes.toggle("disabled",e)}function r(e){t.aria("pressed",e),t.classes.toggle("active",e)}if(t.state.on("change:disabled",function(e){n(e.value)}),t.state.on("change:active",function(e){r(e.value)}),t.state.get("disabled"))n(true);if(t.state.get("active"))r(true);return t._super()},remove:function(){if(this._super(),this._tooltip)this._tooltip.remove(),this._tooltip=null}}),lr=ur.extend({Defaults:{value:0},init:function(e){var t=this;if(t._super(e),t.classes.add("progress"),!t.settings.filter)t.settings.filter=function(e){return Math.round(e)}},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'">'+'<div class="'+n+'bar-container">'+'<div class="'+n+'bar"></div>'+"</div>"+'<div class="'+n+'text">0%</div>'+"</div>"},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){var t=this;function n(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}return t.state.on("change:value",function(e){n(e.value)}),n(t.state.get("value")),t._super()}}),fr=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},cr=_n.extend({Mixins:[qt],Defaults:{classes:"widget notification"},init:function(e){var t=this;if(t._super(e),t.maxWidth=e.maxWidth,e.text)t.text(e.text);if(e.icon)t.icon=e.icon;if(e.color)t.color=e.color;if(e.type)t.classes.add("notification-"+e.type);if(e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton)t.closeButton=false;else t.classes.add("has-close"),t.closeButton=true;if(e.progressBar)t.progressBar=new lr;t.on("click",function(e){if(-1!==e.target.className.indexOf(t.classPrefix+"close"))t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",r="",i="",o="";if(e.icon)n='<i class="'+t+"ico"+" "+t+"i-"+e.icon+'"></i>';if(o=' style="max-width: '+e.maxWidth+"px;"+(e.color?"background-color: "+e.color+';"':'"'),e.closeButton)r='<button type="button" class="'+t+'close" aria-hidden="true">×</button>';if(e.progressBar)i=e.progressBar.renderHtml();return'<div id="'+e._id+'" class="'+e.classes+'"'+o+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+i+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;"'+' aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div>'+"</div>"},postRender:function(){var e=this;return L.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),fr(e,e.state.get("text"))},100),e._super()},bindStates:function(){var t=this;if(t.state.on("change:text",function(e){t.getEl().firstChild.innerHTML=e.value,fr(t,e.value)}),t.progressBar)t.progressBar.bindStates(),t.progressBar.state.on("change:value",function(e){fr(t,t.state.get("text"))});return t._super()},close:function(){var e=this;if(!e.fire("close").isDefaultPrevented())e.remove();return e},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=65535-1}});function dr(r){var i=function(e){return e.inline?e.getElement():e.getContentAreaContainer()},o=function(){var e=i(r);return Ft.getSize(e).width},t=function(e){et.each(e,function(e){e.moveTo(0,0)})},n=function(n){if(n.length>0){var e=n.slice(0,1)[0],t=i(r);e.moveRel(t,"tc-tc"),et.each(n,function(e,t){if(t>0)e.moveRel(n[t-1].getEl(),"bc-tc")})}},e,a,s,u;return{open:function(e,t){var n=l.extend(e,{maxWidth:o()}),r=new cr(n);if((r.args=n).timeout>0)r.timer=setTimeout(function(){r.close(),t()},n.timeout);return r.on("close",function(){t()}),r.renderTo(),r},close:function(e){e.close()},reposition:function(e){t(e),n(e)},getArgs:function(e){return e.args}}}var mr=[],hr="";function pr(e){var t="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",n=It("meta[name=viewport]")[0],r;if(false===vt.overrideViewPort)return;if(!n)(n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n);if((r=n.getAttribute("content"))&&"undefined"!==typeof hr)hr=r;n.setAttribute("content",e?t:hr)}function gr(e,t){if(vr()&&false===t)It([document.documentElement,document.body]).removeClass(e+"fullscreen")}function vr(){for(var e=0;e<mr.length;e++)if(mr[e]._fullscreen)return true;return false}function br(){if(!vt.desktop){var n={w:window.innerWidth,h:window.innerHeight};L.setInterval(function(){var e=window.innerWidth,t=window.innerHeight;if(n.w!==e||n.h!==t)n={w:e,h:t},It(window).trigger("resize")},100)}function e(){var e,t=Ft.getWindowSize(),n;for(e=0;e<mr.length;e++)n=mr[e].layoutRect(),mr[e].moveTo(mr[e].settings.x||Math.max(0,t.w/2-n.w/2),mr[e].settings.y||Math.max(0,t.h/2-n.h/2))}It(window).on("resize",e)}var yr=Jn.extend({modal:true,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;if(n._super(e),n.isRtl())n.classes.add("rtl");if(n.classes.add("window"),n.bodyClasses.add("window-body"),n.state.set("fixed",true),e.buttons)n.statusbar=new Ln({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.classes.add("foot"),n.statusbar.parent(n);n.on("click",function(e){var t=n.classPrefix+"close";if(Ft.hasClass(e.target,t)||Ft.hasClass(e.target.parentNode,t))n.close()}),n.on("cancel",function(){n.close()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=false},recalc:function(){var e=this,t=e.statusbar,n,r,i,o;if(e._fullscreen)e.layoutRect(Ft.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH;if(e._super(),n=e.layoutRect(),e.settings.title&&!e._fullscreen)if((r=n.headerW)>n.w)i=n.x-Math.max(0,r/2),e.layoutRect({w:r,x:i}),o=true;if(t)if(t.layoutRect({w:e.layoutRect().innerW}).recalc(),(r=t.layoutRect().minW+n.deltaW)>n.w)i=n.x-Math.max(0,r-n.w),e.layoutRect({w:r,x:i}),o=true;if(o)e.recalc()},initLayoutRect:function(){var e=this,t=e._super(),n=0,r;if(e.settings.title&&!e._fullscreen){r=e.getEl("head");var i=Ft.getSize(r);t.headerW=i.width,t.headerH=i.height,n+=t.headerH}if(e.statusbar)n+=e.statusbar.layoutRect().h;t.deltaH+=n,t.minH+=n,t.h+=n;var o=Ft.getWindowSize();return t.x=e.settings.x||Math.max(0,o.w/2-t.w/2),t.y=e.settings.y||Math.max(0,o.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,i=e.settings,o="",a="",s=i.html;if(e.preRender(),t.preRender(e),i.title)o='<div id="'+n+'-head" class="'+r+'window-head">'+'<div id="'+n+'-title" class="'+r+'title">'+e.encode(i.title)+"</div>"+'<div id="'+n+'-dragh" class="'+r+'dragh"></div>'+'<button type="button" class="'+r+'close" aria-hidden="true">'+'<i class="mce-ico mce-i-remove"></i>'+"</button>"+"</div>";if(i.url)s='<iframe src="'+i.url+'" tabindex="-1"></iframe>';if("undefined"===typeof s)s=t.renderHtml(e);if(e.statusbar)a=e.statusbar.renderHtml();return'<div id="'+n+'" class="'+e.classes+'" hidefocus="1">'+'<div class="'+e.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div>"+"</div>"},fullscreen:function(e){var n=this,t=document.documentElement,r,i=n.classPrefix,o;if(e!==n._fullscreen)if(It(window).on("resize",function(){var e;if(n._fullscreen)if(!r){e=(new Date).getTime();var t=Ft.getWindowSize();if(n.moveTo(0,0).resizeTo(t.w,t.h),(new Date).getTime()-e>50)r=true}else if(!n._timer)n._timer=L.setTimeout(function(){var e=Ft.getWindowSize();n.moveTo(0,0).resizeTo(e.w,e.h),n._timer=0},50)}),o=n.layoutRect(),!(n._fullscreen=e))n.borderBox=Xt(n.settings.border),n.getEl("head").style.display="",o.deltaH+=o.headerH,It([t,document.body]).removeClass(i+"fullscreen"),n.classes.remove("fullscreen"),n.moveTo(n._initial.x,n._initial.y).resizeTo(n._initial.w,n._initial.h);else{n._initial={x:o.x,y:o.y,w:o.w,h:o.h},n.borderBox=Xt("0"),n.getEl("head").style.display="none",o.deltaH-=o.headerH+2,It([t,document.body]).addClass(i+"fullscreen"),n.classes.add("fullscreen");var a=Ft.getWindowSize();n.moveTo(0,0).resizeTo(a.w,a.h)}return n.reflow()},postRender:function(){var t=this,n;if(setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar)t.statusbar.postRender();t.focus(),this.dragHelper=new On(t._id+"-dragh",{start:function(){n={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(e){t.moveTo(n.x+e.deltaX,n.y+e.deltaY)}}),t.on("submit",function(e){if(!e.isDefaultPrevented())t.close()}),mr.push(t),pr(true)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t;if(e.dragHelper.destroy(),e._super(),e.statusbar)this.statusbar.remove();gr(e.classPrefix,false),t=mr.length;while(t--)if(mr[t]===e)mr.splice(t,1);pr(mr.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});br();var wr=yr.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:true,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:true,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){var t,r=e.callback||function(){};function n(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}switch(e.buttons){case wr.OK_CANCEL:t=[n("Ok",true,true),n("Cancel",false)];break;case wr.YES_NO:case wr.YES_NO_CANCEL:if(t=[n("Yes",1,true),n("No",0)],e.buttons===wr.YES_NO_CANCEL)t.push(n("Cancel",-1));break;default:t=[n("Ok",true,true)]}return new yr({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:t,title:e.title,role:"alertdialog",items:{type:"label",multiline:true,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){r(false)}}).renderTo(document.body).reflow()},alert:function(e,t){if("string"===typeof e)e={text:e};return e.callback=t,wr.msgBox(e)},confirm:function(e,t){if("string"===typeof e)e={text:e};return e.callback=t,e.buttons=wr.OK_CANCEL,wr.msgBox(e)}}});function xr(e){var t,n,r,i,o,a;return{open:function(n,e,t){var r;if(n.title=n.title||" ",n.url=n.url||n.file,n.url)n.width=parseInt(n.width||320,10),n.height=parseInt(n.height||240,10);if(n.body)n.items={defaults:n.defaults,type:n.bodyType||"form",items:n.body,data:n.data,callbacks:n.commands};if(!n.url&&!n.buttons)n.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}];if((r=new yr(n)).on("close",function(){t(r)}),n.data)r.on("postRender",function(){this.find("*").each(function(e){var t=e.name();if(t in n.data)e.value(n.data[t])})});return r.features=n||{},r.params=e||{},r=r.renderTo(document.body).reflow()},alert:function(e,t,n){var r;return(r=wr.alert(e,function(){t()})).on("close",function(){n(r)}),r},confirm:function(e,t,n){var r;return(r=wr.confirm(e,function(e){t(e)})).on("close",function(){n(r)}),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}var Cr,kr=function(n){var e,t,r,i,o;return{renderUI:function(e){return ar(n,this,e)},resizeTo:function(e,t){return pt(n,e,t)},resizeBy:function(e,t){return gt(n,e,t)},getNotificationManagerImpl:function(){return dr(n)},getWindowManagerImpl:function(){return xr(n)}}},Sr=Yt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=l.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n=this.settings,r,i,o,a;if(r=n.firstControlClass,i=n.lastControlClass,e.each(function(e){if(e.classes.remove(r).remove(i).add(n.controlClass),e.visible()){if(!o)o=e;a=e}}),o)o.classes.add(r);if(a)a.classes.add(i)},renderHtml:function(e){var t,n="";return this.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return false}}),Er=Sr.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;if(e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc)e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),Nr=ur.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this,n;if(t._super(e),e=t.settings,n=t.settings.size,t.on("click mousedown",function(e){e.preventDefault()}),t.on("touchstart",function(e){t.fire("click",e),e.preventDefault()}),e.subtype)t.classes.add(e.subtype);if(n)t.classes.add("btn-"+n);if(e.icon)t.icon(e.icon)},icon:function(e){if(!arguments.length)return this.state.get("icon");return this.state.set("icon",e),this},repaint:function(){var e=this.getEl().firstChild,t;if(e)(t=e.style).width=t.height="100%";this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("icon"),i,o=e.state.get("text"),a="",s,u=e.settings;if(i=u.image){if(r="none","string"!==typeof i)i=window.getSelection?i[0]:i[1];i=" style=\"background-image: url('"+i+"')\""}else i="";if(o)e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(o)+"</span>";return r=r?n+"ico "+n+"i-"+r:"",s="boolean"===typeof u.active?' aria-pressed="'+u.active+'"':"",'<div id="'+t+'" class="'+e.classes+'" tabindex="-1"'+s+">"+'<button id="'+t+'-button" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+a+"</button>"+"</div>"},bindStates:function(){var o=this,n=o.$,r=o.classPrefix+"txt";function a(e){var t=n("span."+r,o.getEl());if(e){if(!t[0])n("button:first",o.getEl()).append('<span class="'+r+'"></span>'),t=n("span."+r,o.getEl());t.html(o.encode(e))}else t.remove();o.classes.toggle("btn-has-text",!!e)}return o.state.on("change:text",function(e){a(e.value)}),o.state.on("change:icon",function(e){var t=e.value,n=o.classPrefix;t=(o.settings.icon=t)?n+"ico "+n+"i-"+o.settings.icon:"";var r=o.getEl().firstChild,i=r.getElementsByTagName("i")[0];if(t){if(!i||i!==r.firstChild)i=document.createElement("i"),r.insertBefore(i,r.firstChild);i.className=t}else if(i)r.removeChild(i);a(o.state.get("text"))}),o._super()}}),_r=Nr.extend({init:function(e){var t=this;if(e=l.extend({text:"Browse...",multiple:false,accept:null},e),t._super(e),t.classes.add("browsebutton"),e.multiple)t.classes.add("multiple")},postRender:function(){var n=this,t=Ft.create("input",{type:"file",id:n._id+"-browse",accept:n.settings.accept});n._super(),It(t).on("change",function(e){var t=e.target.files;if(n.value=function(){if(!t.length)return null;else if(n.settings.multiple)return t;else return t[0]},e.preventDefault(),t.length)n.fire("change",e)}),It(t).on("click",function(e){e.stopPropagation()}),It(n.getEl("button")).on("click",function(e){e.stopPropagation(),t.click()}),n.getEl().appendChild(t)},remove:function(){It(this.getEl("button")).off(),It(this.getEl("input")).off(),this._super()}}),Tr=Dn.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'">'+'<div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}}),Rr=ur.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:false},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){if(e.preventDefault(),!t.disabled())t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){if(!arguments.length)return this.state.get("checked");return this.state.set("checked",e),this},value:function(e){if(!arguments.length)return this.checked();return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1">'+'<i class="'+n+"ico "+n+'i-checkbox"></i>'+'<span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span>"+"</div>"},bindStates:function(){var o=this;function t(e){o.classes.toggle("checked",e),o.aria("checked",e)}if(o.state.on("change:text",function(e){o.getEl("al").firstChild.data=o.translate(e.value)}),o.state.on("change:checked change:value",function(e){o.fire("change"),t(e.value)}),o.state.on("change:icon",function(e){var t=e.value,n=o.classPrefix;if("undefined"===typeof t)return o.settings.icon;t=(o.settings.icon=t)?n+"ico "+n+"i-"+o.settings.icon:"";var r=o.getEl().firstChild,i=r.getElementsByTagName("i")[0];if(t){if(!i||i!==r.firstChild)i=document.createElement("i"),r.insertBefore(i,r.firstChild);i.className=t}else if(i)r.removeChild(i)}),o.state.get("checked"))t(true);return o._super()}}),Ar=tinymce.util.Tools.resolve("tinymce.util.VK"),Dr=ur.extend({init:function(r){var i=this;if(i._super(r),r=i.settings,i.classes.add("combobox"),i.subinput=true,i.ariaTarget="inp",r.menu=r.menu||r.values,r.menu)r.icon="caret";i.on("click",function(e){var t=e.target,n=i.getEl();if(!It.contains(n,t)&&t!==n)return;while(t&&t!==n){if(t.id&&-1!==t.id.indexOf("-open"))if(i.fire("action"),r.menu)if(i.showMenu(),e.aria)i.menu.items()[0].focus();t=t.parentNode}}),i.on("keydown",function(e){var t;if(13===e.keyCode&&"INPUT"===e.target.nodeName)e.preventDefault(),i.parents().reverse().each(function(e){if(e.toJSON)return t=e,false}),i.fire("submit",{data:t.toJSON()})}),i.on("keyup",function(e){if("INPUT"===e.target.nodeName){var t=i.state.get("value"),n=e.target.value;if(n!==t)i.state.set("value",n),i.fire("autocomplete",e)}}),i.on("mouseover",function(e){var t=i.tooltip().moveTo(-65535);if(i.statusLevel()&&-1!==e.target.className.indexOf(i.classPrefix+"status")){var n=i.statusMessage()||"Ok",r=t.text(n).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);t.classes.toggle("tooltip-n","bc-tc"===r),t.classes.toggle("tooltip-nw","bc-tl"===r),t.classes.toggle("tooltip-ne","bc-tr"===r),t.moveRel(e.target,r)}})},statusLevel:function(e){if(arguments.length>0)this.state.set("statusLevel",e);return this.state.get("statusLevel")},statusMessage:function(e){if(arguments.length>0)this.state.set("statusMessage",e);return this.state.get("statusMessage")},showMenu:function(){var t=this,e=t.settings,n;if(!t.menu){if((n=e.menu||[]).length)n={type:"menu",items:n};else n.type=n.type||"menu";t.menu=N.create(n).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){if(e.control===t.menu)t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){if("INPUT"===e.target.tagName.toUpperCase())t.menu.hide()}),t.aria("expanded",true)}t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,t=e.getEl(),n=e.getEl("open"),r=e.layoutRect(),i,o,a=0,s=t.firstChild;if(e.statusLevel()&&"none"!==e.statusLevel())a=parseInt(Ft.getRuntimeStyle(s,"padding-right"),10)-parseInt(Ft.getRuntimeStyle(s,"padding-left"),10);if(n)i=r.w-Ft.getSize(n).width-10;else i=r.w-10;var u=document;if(u.all&&(!u.documentMode||u.documentMode<=8))o=e.layoutRect().h-2+"px";return It(s).css({width:i-a,lineHeight:o}),e._super(),e},postRender:function(){var t=this;return It(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=e.state.get("value")||"",o,a,s="",u="",l="";if("spellcheck"in n)u+=' spellcheck="'+n.spellcheck+'"';if(n.maxLength)u+=' maxlength="'+n.maxLength+'"';if(n.size)u+=' size="'+n.size+'"';if(n.subtype)u+=' type="'+n.subtype+'"';if(l='<i id="'+t+'-status" class="mce-status mce-ico" style="display: none"></i>',e.disabled())u+=' disabled="disabled"';if((o=n.icon)&&"caret"!==o)o=r+"ico "+r+"i-"+n.icon;if(a=e.state.get("text"),o||a)s='<div id="'+t+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button">'+'<button id="'+t+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==o?'<i class="'+o+'"></i>':'<i class="'+r+'caret"></i>')+(a?(o?" ":"")+a:"")+"</button>"+"</div>",e.classes.add("has-open");return'<div id="'+t+'" class="'+e.classes+'">'+'<input id="'+t+'-inp" class="'+r+'textbox" value="'+e.encode(i,false)+'" hidefocus="1"'+u+' placeholder="'+e.encode(n.placeholder)+'" />'+l+s+"</div>"},value:function(e){if(arguments.length)return this.state.set("value",e),this;if(this.state.get("rendered"))this.state.set("value",this.getEl("inp").value);return this.state.get("value")},showAutoComplete:function(e,t){var n=this;if(0===e.length)return void n.hideMenu();var r=function(e,t){return function(){n.fire("selectitem",{title:t,value:e})}};if(n.menu)n.menu.items().remove();else n.menu=N.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo();l.each(e,function(e){n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:r(e.value,e.title)})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(e){if(e.control.parent()===n.menu)e.stopPropagation(),n.focus(),n.hideMenu()}),n.menu.on("select",function(){n.focus()});var i=n.layoutRect().w;n.menu.layoutRect({w:i,minW:0,maxW:i}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){if(this.menu)this.menu.hide()},bindStates:function(){var i=this;i.state.on("change:value",function(e){if(i.getEl("inp").value!==e.value)i.getEl("inp").value=e.value}),i.state.on("change:disabled",function(e){i.getEl("inp").disabled=e.value}),i.state.on("change:statusLevel",function(e){var t=i.getEl("status"),n=i.classPrefix,r=e.value;Ft.css(t,"display","none"===r?"none":""),Ft.toggleClass(t,n+"i-checkmark","ok"===r),Ft.toggleClass(t,n+"i-warning","warn"===r),Ft.toggleClass(t,n+"i-error","error"===r),i.classes.toggle("has-status","none"!==r),i.repaint()}),Ft.on(i.getEl("status"),"mouseleave",function(){i.tooltip().hide()}),i.on("cancel",function(e){if(i.menu&&i.menu.visible())e.stopPropagation(),i.hideMenu()});var n=function(e,t){if(t&&t.items().length>0)t.items().eq(e)[0].focus()};return i.on("keydown",function(e){var t=e.keyCode;if("INPUT"===e.target.nodeName)if(t===Ar.DOWN)e.preventDefault(),i.fire("autocomplete"),n(0,i.menu);else if(t===Ar.UP)e.preventDefault(),n(-1,i.menu)}),i._super()},remove:function(){if(It(this.getEl("inp")).off(),this.menu)this.menu.remove();this._super()}}),Pr=Dr.extend({init:function(e){var t=this;if(e.spellcheck=false,e.onaction)e.icon="none";t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){if(t.state.get("rendered"))t.repaintColor(e.value)}),t._super()}}),Br=Nr.extend({showPanel:function(){var t=this,e=t.settings;if(t.classes.add("opened"),!t.panel){var n=e.panel;if(n.type)n={layout:"grid",items:n};n.role=n.role||"dialog",n.popover=true,n.autohide=true,n.ariaRoot=true,t.panel=new Jn(n).on("hide",function(){t.classes.remove("opened")}).on("cancel",function(e){e.stopPropagation(),t.focus(),t.hidePanel()}).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow()}else t.panel.show();var r=t.panel.testMoveRel(t.getEl(),e.popoverAlign||(t.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl"]));t.panel.classes.toggle("start","bc-tl"===r),t.panel.classes.toggle("end","bc-tr"===r),t.panel.moveRel(t.getEl(),r)},hidePanel:function(){var e=this;if(e.panel)e.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",true),t.on("click",function(e){if(e.control===t)if(t.panel&&t.panel.visible())t.hidePanel();else t.showPanel(),t.panel.focus(!!e.aria)}),t._super()},remove:function(){if(this.panel)this.panel.remove(),this.panel=null;return this._super()}}),Or=E.DOM,Mr=Br.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){if(e)return this._color=e,this.getEl("preview").style.backgroundColor=e,this;return this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),i=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";if(r)e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>";return'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true">'+'<button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+"</button>"+'<button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var t=this,n=t.settings.onclick;return t.on("click",function(e){if(e.aria&&"down"===e.aria.key)return;if(e.control===t&&!Or.getParent(e.target,"."+t.classPrefix+"open"))e.stopImmediatePropagation(),n.call(t,e)}),delete t.settings.onclick,t._super()}}),Lr=tinymce.util.Tools.resolve("tinymce.util.Color"),Ir=ur.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var r=this,n=r.color(),i,o,a,s,u;function l(e,t){var n=Ft.getPos(e),r,i;return r=t.pageX-n.x,i=t.pageY-n.y,{x:r=Math.max(0,Math.min(r/e.clientWidth,1)),y:i=Math.max(0,Math.min(i/e.clientHeight,1))}}function f(e,t){var n=(360-e.h)/360;if(Ft.css(a,{top:100*n+"%"}),!t)Ft.css(u,{left:e.s+"%",top:100-e.v+"%"});s.style.background=Lr({s:100,v:100,h:e.h}).toHex(),r.color().parse({s:e.s,v:e.v,h:e.h})}function e(e){var t;t=l(s,e),i.s=100*t.x,i.v=100*(1-t.y),f(i),r.fire("change")}function t(e){var t;t=l(o,e),(i=n.toHsv()).h=360*(1-t.y),f(i,true),r.fire("change")}o=r.getEl("h"),a=r.getEl("hp"),s=r.getEl("sv"),u=r.getEl("svp"),r._repaint=function(){f(i=n.toHsv())},r._super(),r._svdraghelper=new On(r._id+"-sv",{start:e,drag:e}),r._hdraghelper=new On(r._id+"-h",{start:t,drag:t}),r._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;if(arguments.length){if(t.color().parse(e),t._rendered)t._repaint()}else return t.color().toHex()},color:function(){if(!this._color)this._color=Lr();return this._color},renderHtml:function(){var e=this,t=e._id,o=e.classPrefix,n,a="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",r;function i(){var e,t,n="",r,i;for(r="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",e=0,t=(i=a.split(",")).length-1;e<t;e++)n+='<div class="'+o+'colorpicker-h-chunk" style="'+"height:"+100/t+"%;"+r+i[e]+",endColorstr="+i[e+1]+");"+"-ms-"+r+i[e]+",endColorstr="+i[e+1]+")"+'"></div>';return n}return n='<div id="'+t+'-h" class="'+o+'colorpicker-h" style="'+("background: -ms-linear-gradient(top,"+a+");"+"background: linear-gradient(to bottom,"+a+");")+'">'+i()+'<div id="'+t+'-hp" class="'+o+'colorpicker-h-marker"></div>'+"</div>",'<div id="'+t+'" class="'+e.classes+'">'+'<div id="'+t+'-sv" class="'+o+'colorpicker-sv">'+'<div class="'+o+'colorpicker-overlay1">'+'<div class="'+o+'colorpicker-overlay2">'+'<div id="'+t+'-svp" class="'+o+'colorpicker-selector1">'+'<div class="'+o+'colorpicker-selector2"></div>'+"</div>"+"</div>"+"</div>"+"</div>"+n+"</div>"}}),Hr=ur.extend({init:function(e){var t=this;if(e=l.extend({height:100,text:"Drop an image here",multiple:false,accept:null},e),t._super(e),t.classes.add("dropzone"),e.multiple)t.classes.add("multiple")},renderHtml:function(){var e=this,t,n,r=e.settings;if(t={id:e._id,hidefocus:"1"},n=Ft.create("div",t,"<span>"+this.translate(r.text)+"</span>"),r.height)Ft.css(n,"height",r.height+"px");if(r.width)Ft.css(n,"width",r.width+"px");return n.className=e.classes,n.outerHTML},postRender:function(){var r=this,e=function(e){e.preventDefault(),r.classes.toggle("dragenter"),r.getEl().className=r.classes},n=function(e){var t=r.settings.accept;if("string"!==typeof t)return e;var n=new RegExp("("+t.split(/\s*,\s*/).join("|")+")$","i");return l.grep(e,function(e){return n.test(e.name)})};r._super(),r.$el.on("dragover",function(e){e.preventDefault()}),r.$el.on("dragenter",e),r.$el.on("dragleave",e),r.$el.on("drop",function(e){if(e.preventDefault(),r.state.get("disabled"))return;var t=n(e.dataTransfer.files);if(r.value=function(){if(!t.length)return null;else if(r.settings.multiple)return t;else return t[0]},t.length)r.fire("change",e)})},remove:function(){this.$el.off(),this._super()}}),Fr=ur.extend({init:function(e){var r=this;if(!e.delimiter)e.delimiter="»";r._super(e),r.classes.add("path"),r.canFocus=true,r.on("click",function(e){var t,n;if(t=e.target.getAttribute("data-index"))r.fire("select",{value:r.row()[t],index:t})}),r.row(r.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){if(!arguments.length)return this.state.get("row");return this.state.set("row",e),this},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(e){var t=this,n=e||[],r,i,o="",a=t.classPrefix;for(r=0,i=n.length;r<i;r++)o+=(r>0?'<div class="'+a+'divider" aria-hidden="true"> '+t.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(r===i-1?" "+a+"last":"")+'" data-index="'+r+'" tabindex="-1" id="'+t._id+"-"+r+'" aria-level="'+(r+1)+'">'+n[r].name+"</div>";if(!o)o='<div class="'+a+'path-item"> </div>';return o}}),zr=Fr.extend({postRender:function(){var o=this,a=o.settings.editor;function s(e){if(1===e.nodeType){if("BR"===e.nodeName||!!e.getAttribute("data-mce-bogus"))return true;if("bookmark"===e.getAttribute("data-mce-type"))return true}return false}if(false!==a.settings.elementpath)o.on("select",function(e){a.focus(),a.selection.select(this.row()[e.index].element),a.nodeChanged()}),a.on("nodeChange",function(e){var t=[],n=e.parents,r=n.length;while(r--)if(1===n[r].nodeType&&!s(n[r])){var i=a.fire("ResolveName",{name:n[r].nodeName.toLowerCase(),target:n[r]});if(!i.isDefaultPrevented())t.push({name:i.name,element:n[r]});if(i.isPropagationStopped())break}o.row(t)});return o._super()}}),Wr=Dn.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}}),Ur=Dn.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var r=this,e=r.items();if(!r.settings.formItemDefaults)r.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}};e.each(function(e){var t,n=e.settings.label;if(n){if((t=new Wr(l.extend({items:{type:"label",id:e._id+"-l",text:n,flex:0,forId:e._id,disabled:e.disabled()}},r.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),"undefined"===typeof e.settings.flex)e.settings.flex=1;r.replace(e,t),t.add(e)}})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){var o=this;function e(){var r=0,i=[],e,t,n;if(false===o.settings.labelGapCalc)return;if("children"===o.settings.labelGapCalc)n=o.find("formitem");else n=o.items();n.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=n>r?n:r,i.push(t)}),t=o.settings.labelGap||0,e=i.length;while(e--)i[e].settings.minWidth=r+t}o._super(),o.on("show",e),e()}}),jr=Ur.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</fieldset>"}}),Vr=0,$r,qr=function(e){var t,n=(new Date).getTime(),r;return e+"_"+Math.floor(1e9*Math.random())+ ++Vr+String(n)},Yr=function(e,t){var n,r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return Gr(r.childNodes[0])},Kr=function(e,t){var n,r=(t||document).createElement(e);return Gr(r)},Xr=function(e,t){var n,r=(t||document).createTextNode(e);return Gr(r)},Gr=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:G.constant(e)}},Jr,Qr={fromHtml:Yr,fromTag:Kr,fromText:Xr,fromDom:Gr,fromPoint:function(e,t,n){return re.from(e.dom().elementFromPoint(t,n)).map(Gr)}},Zr,ei=function(e){var t=false,n;return function(){if(!t)t=true,n=e.apply(null,arguments);return n}},ti=2,ni=4,ri=8,ii=9,oi=10,ai=11,si=1,ui=3,li=7,fi=5,ci=6,di=12,mi=function(e){var t;return e.dom().nodeName.toLowerCase()},hi=function(e){return e.dom().nodeType},pi=function(e){return e.dom().nodeValue},gi=function(t){return function(e){return hi(e)===t}},vi=function(e){return hi(e)===ri||"#comment"===mi(e)},bi=gi(si),yi=gi(ui),wi=gi(ii),xi={name:mi,type:hi,value:pi,isElement:bi,isText:yi,isDocument:wi,isComment:vi},Ci=function(e){var t=xi.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},ki=ei(function(){return Si(Qr.fromDom(document))}),Si=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Qr.fromDom(t)},Ei={body:ki,getBody:Si,inBody:Ci},Ni=function(e){if(null===e)return"null";var t=typeof e;if("object"===t&&Array.prototype.isPrototypeOf(e))return"array";if("object"===t&&String.prototype.isPrototypeOf(e))return"string";return t},_i=function(t){return function(e){return Ni(e)===t}},Ti={isString:_i("string"),isObject:_i("object"),isArray:_i("array"),isNull:_i("null"),isBoolean:_i("boolean"),isUndefined:_i("undefined"),isFunction:_i("function"),isNumber:_i("number")};function Ri(){var t=arguments;return function(){for(var n=new Array(arguments.length),e=0;e<n.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var r={};return et.each(t,function(e,t){r[e]=G.constant(n[t])}),r}}var Ai=void 0===(Di=Object.keys)?function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n))t.push(n);return t}:Di,Di,Pi,Bi=function(e,t){for(var n=Ai(e),r=0,i=n.length;r<i;r++){var o=n[r],a;t(e[o],o,e)}},Oi=function(e,r){return Mi(e,function(e,t,n){return{k:t,v:r(e,t,n)}})},Mi=function(r,i){var o={};return Bi(r,function(e,t){var n=i(e,t,r);o[n.k]=n.v}),o},Li,Ii=function(e,n){var r=[];return Bi(e,function(e,t){r.push(n(e,t))}),r},Hi,Fi=function(e){return Ii(e,function(e){return e})},zi,Wi={bifilter:function(e,r){var i={},o={};return Bi(e,function(e,t){var n;(r(e,t)?i:o)[t]=e}),{t:i,f:o}},each:Bi,map:Oi,mapToArray:Ii,tupleMap:Mi,find:function(e,t){for(var n=Ai(e),r=0,i=n.length;r<i;r++){var o=n[r],a=e[o];if(t(a,o,e))return re.some(a)}return re.none()},keys:Ai,values:Fi,size:function(e){return Fi(e).length}},Ui=function(e){return e.slice(0).sort()},ji,Vi,$i,qi,Yi,Ki={sort:Ui,reqMessage:function(e,t){throw new Error("All required keys ("+Ui(e).join(", ")+") were not specified. Specified keys were: "+Ui(t).join(", ")+".")},unsuppMessage:function(e){throw new Error("Unsupported keys for object: "+Ui(e).join(", "))},validateStrArr:function(t,e){if(!Ti.isArray(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");et.each(e,function(e){if(!Ti.isString(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+Ui(e).join(", ")+") were not.")},checkDupes:function(e){var n=Ui(e),t;et.find(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})}};function Xi(o,a){var s=o.concat(a);if(0===s.length)throw new Error("You must specify at least one required or optional field.");return Ki.validateStrArr("required",o),Ki.validateStrArr("optional",a),Ki.checkDupes(s),function(t){var n=Wi.keys(t),e;if(!et.forall(o,function(e){return et.contains(n,e)}))Ki.reqMessage(o,n);var r=et.filter(n,function(e){return!et.contains(s,e)});if(r.length>0)Ki.unsuppMessage(r);var i={};return et.each(o,function(e){i[e]=G.constant(t[e])}),et.each(a,function(e){i[e]=G.constant(Object.prototype.hasOwnProperty.call(t,e)?re.some(t[e]):re.none())}),i}}var Gi={immutable:Ri,immutableBag:Xi},Ji,Qi=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n},Zi="undefined"!==typeof window?window:Function("return this;")(),eo=function(e,t){for(var n=void 0!==t&&null!==t?t:Zi,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},to,no=function(e,t){if(void 0===e[t]||null===e[t])e[t]={};return e[t]},ro=function(e,t){for(var n=void 0!==t?t:Zi,r=0;r<e.length;++r)n=no(n,e[r]);return n},io,oo=eo,ao=function(e,t){var n=e.split(".");return eo(n,t)},so=ro,uo=function(e,t){var n=e.split(".");return ro(n,t)},lo=function(e,t){return ao(e,t)},fo,co=function(e,t){var n=lo(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},mo=function(){var e;return co("Node")},ho=function(e,t,n){return 0!==(e.compareDocumentPosition(t)&n)},po,go,vo=function(e,t){return ho(e,t,mo().DOCUMENT_POSITION_PRECEDING)},bo=function(e,t){return ho(e,t,mo().DOCUMENT_POSITION_CONTAINED_BY)},yo=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}return},wo=function(e,t){var n=yo(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return ko(r(1),r(2))},xo=function(e,t){var n=String(t).toLowerCase();if(0===e.length)return Co();return wo(e,n)},Co=function(){return ko(0,0)},ko=function(e,t){return{major:e,minor:t}},So={nu:ko,detect:xo,unknown:Co},Eo="Edge",No="Chrome",_o="IE",To="Opera",Ro="Firefox",Ao="Safari",Do=function(e,t){return function(){return t===e}},Po=function(){return Bo({current:void 0,version:So.unknown()})},Bo=function(e){var t=e.current,n;return{current:t,version:e.version,isEdge:Do(Eo,t),isChrome:Do(No,t),isIE:Do(_o,t),isOpera:Do(To,t),isFirefox:Do(Ro,t),isSafari:Do(Ao,t)}},Oo={unknown:Po,nu:Bo,edge:G.constant(Eo),chrome:G.constant(No),ie:G.constant(_o),opera:G.constant(To),firefox:G.constant(Ro),safari:G.constant(Ao)},Mo="Windows",Lo="iOS",Io="Android",Ho="Linux",Fo="OSX",zo="Solaris",Wo="FreeBSD",Uo=function(e,t){return function(){return t===e}},jo=function(){return Vo({current:void 0,version:So.unknown()})},Vo=function(e){var t=e.current,n;return{current:t,version:e.version,isWindows:Uo(Mo,t),isiOS:Uo(Lo,t),isAndroid:Uo(Io,t),isOSX:Uo(Fo,t),isLinux:Uo(Ho,t),isSolaris:Uo(zo,t),isFreeBSD:Uo(Wo,t)}},$o={unknown:jo,nu:Vo,windows:G.constant(Mo),ios:G.constant(Lo),android:G.constant(Io),linux:G.constant(Ho),osx:G.constant(Fo),solaris:G.constant(zo),freebsd:G.constant(Wo)};function qo(e,t,n){var r=e.isiOS()&&true===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&true===/mobile/i.test(n),u=e.isiOS()||e.isAndroid(),l=u&&!s,f=t.isSafari()&&e.isiOS()&&false===/safari/i.test(n);return{isiPad:G.constant(r),isiPhone:G.constant(i),isTablet:G.constant(s),isPhone:G.constant(l),isTouch:G.constant(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:G.constant(f)}}var Yo=function(e,t){var n=String(t).toLowerCase();return et.find(e,function(e){return e.search(n)})},Ko,Xo,Go=function(e,n){return Yo(e,n).map(function(e){var t=So.detect(e.versionRegexes,n);return{current:e.name,version:t}})},Jo=function(e,n){return Yo(e,n).map(function(e){var t=So.detect(e.versionRegexes,n);return{current:e.name,version:t}})},Qo,Zo,ea,ta,na=function(e,t){return t+e},ra=function(e,t){return e+t},ia=function(e,t){return e.substring(t)},oa=function(e,t){return e.substring(0,e.length-t)},aa,sa,ua,la,fa=function(e,t){return e.substr(0,t)},ca=function(e,t){return e.substr(e.length-t,e.length)},da=function(e){return""===e?re.none():re.some(e.substr(0,1))},ma=function(e){return""===e?re.none():re.some(e.substring(1))},ha=function(e,t,n){if(""===t)return true;if(e.length<t.length)return false;var r;return e.substr(n,n+t.length)===t},pa,ga=function(e,t){return Ca(e,t)?ia(e,t.length):e},va=function(e,t){return ka(e,t)?oa(e,t.length):e},ba=function(e,t){return Ca(e,t)?e:na(e,t)},ya=function(e,t){return ka(e,t)?e:ra(e,t)},wa,xa,Ca=function(e,t){return ha(e,t,0)},ka=function(e,t){return ha(e,t,e.length-t.length)},Sa,Ea,Na,_a=function(e,r){var i=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,t){var n=r[t];return i(n)?n:e})},Ta=Ca,Ra=ga,Aa=va,Da=ba,Pa=ya,Ba=ka,Oa=function(e,t){return-1!==e.indexOf(t)},Ma=function(e){return e.replace(/^\s+|\s+$/g,"")},La=function(e){return e.replace(/^\s+/g,"")},Ia=function(e){return e.replace(/\s+$/g,"")},Ha=function(e){return da(e).bind(function(t){return ma(e).map(function(e){return t.toUpperCase()+e})}).getOr(e)},Fa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,za=function(t){return function(e){return Oa(e,t)}},Wa=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){var t;return Oa(e,"edge/")&&Oa(e,"chrome")&&Oa(e,"safari")&&Oa(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fa],search:function(e){return Oa(e,"chrome")&&!Oa(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Oa(e,"msie")||Oa(e,"trident")}},{name:"Opera",versionRegexes:[Fa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:za("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:za("firefox")},{name:"Safari",versionRegexes:[Fa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Oa(e,"safari")||Oa(e,"mobile/"))&&Oa(e,"applewebkit")}}],Ua=[{name:"Windows",search:za("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Oa(e,"iphone")||Oa(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:za("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:za("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:za("linux"),versionRegexes:[]},{name:"Solaris",search:za("sunos"),versionRegexes:[]},{name:"FreeBSD",search:za("freebsd"),versionRegexes:[]}],ja={browsers:G.constant(Wa),oses:G.constant(Ua)},Va,$a=function(e){var t=ja.browsers(),n=ja.oses(),r=Go(t,e).fold(Oo.unknown,Oo.nu),i=Jo(n,e).fold($o.unknown,$o.nu),o;return{browser:r,os:i,deviceType:qo(i,r,e)}},qa=ei(function(){var e=navigator.userAgent;return $a(e)}),Ya,Ka=si,Xa=ii,Ga,Ja=function(e){return e.nodeType!==Ka&&e.nodeType!==Xa||0===e.childElementCount},Qa,Za,es={all:function(e,t){var n=void 0===t?document:t.dom();return Ja(n)?[]:et.map(n.querySelectorAll(e),Qr.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==Ka)return false;else if(void 0!==n.matches)return n.matches(t);else if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);else if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);else if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);else throw new Error("Browser lacks native selectors")},one:function(e,t){var n=void 0===t?document:t.dom();return Ja(n)?re.none():re.from(n.querySelector(e)).map(Qr.fromDom)}},ts=function(e,t){return e.dom()===t.dom()},ns=function(e,t){return e.dom().isEqualNode(t.dom())},rs=function(e,t){return et.exists(t,G.curry(ts,e))},is=function(e,t){var n=e.dom(),r=t.dom();return n===r?false:n.contains(r)},os=function(e,t){return bo(e.dom(),t.dom())},as,ss={detect:qa}.detect().browser.isIE()?os:is,us=ts,ls=ns,fs=rs,cs=ss,ds=es.is,ms=function(e){return Qr.fromDom(e.dom().ownerDocument)},hs=function(e){var t=ms(e);return Qr.fromDom(t.dom().documentElement)},ps=function(e){var t,n=e.dom().ownerDocument.defaultView;return Qr.fromDom(n)},gs=function(e){var t=e.dom();return re.from(t.parentNode).map(Qr.fromDom)},vs=function(n){return gs(n).bind(function(e){var t=Es(e);return et.findIndex(t,function(e){return us(n,e)})})},bs=function(e,t){var n=Ti.isFunction(t)?t:G.constant(false),r=e.dom(),i=[];while(null!==r.parentNode&&void 0!==r.parentNode){var o=r.parentNode,a=Qr.fromDom(o);if(i.push(a),true===n(a))break;else r=o}return i},ys=function(t){var e=function(e){return et.filter(e,function(e){return!us(t,e)})};return gs(t).map(Es).map(e).getOr([])},ws=function(e){var t=e.dom();return re.from(t.offsetParent).map(Qr.fromDom)},xs=function(e){var t=e.dom();return re.from(t.previousSibling).map(Qr.fromDom)},Cs=function(e){var t=e.dom();return re.from(t.nextSibling).map(Qr.fromDom)},ks=function(e){return et.reverse(Qi(e,xs))},Ss=function(e){return Qi(e,Cs)},Es=function(e){var t=e.dom();return et.map(t.childNodes,Qr.fromDom)},Ns=function(e,t){var n=e.dom().childNodes;return re.from(n[t]).map(Qr.fromDom)},_s=function(e){return Ns(e,0)},Ts=function(e){return Ns(e,e.dom().childNodes.length-1)},Rs=function(e){return e.dom().childNodes.length},As=function(e){return e.dom().hasChildNodes()},Ds=Gi.immutable("element","offset"),Ps,Bs={owner:ms,defaultView:ps,documentElement:hs,parent:gs,findIndex:vs,parents:bs,siblings:ys,prevSibling:xs,offsetParent:ws,prevSiblings:ks,nextSibling:Cs,nextSiblings:Ss,children:Es,child:Ns,firstChild:_s,lastChild:Ts,childNodesCount:Rs,hasChildNodes:As,leaf:function(e,t){var n=Es(e);return n.length>0&&t<n.length?Ds(n[t],0):Ds(e,t)}},Os=function(e){return Hs(Ei.body(),e)},Ms,Ls,Is,Hs=function(e,t){var n=[];return et.each(Bs.children(e),function(e){if(t(e))n=n.concat([e]);n=n.concat(Hs(e,t))}),n},Fs=Os,zs=function(e,t,n){return et.filter(Bs.parents(e,n),t)},Ws=function(e,t){return et.filter(Bs.siblings(e),t)},Us=function(e,t){return et.filter(Bs.children(e),t)},js=Hs,Vs,$s,qs,Ys,Ks,Xs=function(e){return es.all(e)},Gs=function(e,t,n){return zs(e,function(e){return es.is(e,t)},n)},Js=function(e,t){return Ws(e,function(e){return es.is(e,t)})},Qs=function(e,t){return Us(e,function(e){return es.is(e,t)})},Zs=function(e,t){return es.all(t,e)},eu=l.trim,tu=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return true;if(e.getAttribute("data-mce-contenteditable")===t)return true}return false}},nu=tu("true"),ru=tu("false"),iu=function(e,t,n,r,i){return{type:e,title:t,url:n,level:r,attach:i}},ou=function(e){while(e=e.parentNode){var t=e.contentEditable;if(t&&"inherit"!==t)return nu(e)}return false},au=function(e,t){return et.map(Zs(Qr.fromDom(t),e),function(e){return e.dom()})},su=function(e){return e.innerText||e.textContent},uu=function(e){return e.id?e.id:qr("h")},lu=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},fu=function(e){return lu(e)&&du(e)},cu=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},du=function(e){return ou(e)&&!ru(e)},mu=function(e){return cu(e)&&du(e)},hu=function(e){return cu(e)?parseInt(e.nodeName.substr(1),10):0},pu=function(e){var t=uu(e),n=function(){e.id=t};return iu("header",su(e),"#"+t,hu(e),n)},gu=function(e){var t=e.id||e.name,n=su(e);return iu("anchor",n?n:"#"+t,"#"+t,0,G.noop)},vu=function(e){return et.map(et.filter(e,mu),pu)},bu=function(e){return et.map(et.filter(e,fu),gu)},yu=function(e){var t;return au("h1,h2,h3,h4,h5,h6,a:not([href])",e)},wu=function(e){return eu(e.title).length>0},xu,Cu=function(e){var t=yu(e);return et.filter(vu(t).concat(bu(t)),wu)},ku=function(){return window.tinymce?window.tinymce.activeEditor:o.activeEditor},Su={},Eu=5,Nu=function(){Su={}},_u=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},Tu=function(e){return l.map(e,_u)},Ru=function(e,t){return{title:e,value:{title:e,url:t,attach:G.noop}}},Au=function(t,e){var n;return!et.exists(e,function(e){return e.url===t})},Du=function(e,t,n){var r=t in e?e[t]:n;return false===r?null:r},Pu=function(e,r,i,o){var a={title:"-"},t=function(e){var t=e.hasOwnProperty(i)?e[i]:[],n=et.filter(t,function(e){return Au(e,r)});return l.map(n,function(e){return{title:e,value:{title:e,url:e,attach:G.noop}}})},s=function(t){var e=et.filter(r,function(e){return e.type===t});return Tu(e)},n=function(){var e=s("anchor"),t=Du(o,"anchor_top","#top"),n=Du(o,"anchor_bottom","#bottom");if(null!==t)e.unshift(Ru("<top>",t));if(null!==n)e.push(Ru("<bottom>",n));return e},u=function(e){return et.foldl(e,function(e,t){var n;return 0===e.length||0===t.length?e.concat(t):e.concat(a,t)},[])};if(false===o.typeahead_urls)return[];return"file"===i?u([Ou(e,t(Su)),Ou(e,s("header")),Ou(e,n())]):Ou(e,t(Su))},Bu=function(e,t){var n=Su[t];if(!/^https?/.test(e))return;if(n){if(-1===et.indexOf(n,e))Su[t]=n.slice(0,Eu).concat(e)}else Su[t]=[e]},Ou=function(e,t){var n=e.toLowerCase(),r=l.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===r.length&&r[0].title===e?[]:r},Mu=function(e){var t=e.title;return t.raw?t.raw:t},Lu=function(r,i,o,a){var t=function(e){var t=Cu(o),n=Pu(e,t,a,i);r.showAutoComplete(n,e)};r.on("autocomplete",function(){t(r.value())}),r.on("selectitem",function(e){var t=e.value;r.value(t.url);var n=Mu(t);if("image"===a)r.fire("change",{meta:{alt:n,attach:t.attach}});else r.fire("change",{meta:{text:n,attach:t.attach}});r.focus()}),r.on("click",function(e){if(0===r.value().length&&"INPUT"===e.target.nodeName)t("")}),r.on("PostRender",function(){r.getRoot().on("submit",function(e){if(!e.isDefaultPrevented())Bu(r.value(),a)})})},Iu=function(e){var t=e.status,n=e.message;if("valid"===t)return{status:"ok",message:n};else if("unknown"===t)return{status:"warn",message:n};else if("invalid"===t)return{status:"warn",message:n};else return{status:"none",message:""}},Hu=function(n,e,t){var r=e.filepicker_validator_handler;if(r){var i=function(e){if(0===e.length)return void n.statusLevel("none");r({url:e,type:t},function(e){var t=Iu(e);n.statusMessage(t.message),n.statusLevel(t.status)})};n.state.on("change:value",function(e){i(e.value)})}},Fu=Dr.extend({Statics:{clearHistory:Nu},init:function(e){var n=this,t=ku(),r=t.settings,i,o,a,s=e.filetype;if(e.spellcheck=false,a=r.file_picker_types||r.file_browser_callback_types)a=l.makeMap(a,/[, ]/);if(!a||a[s])if((o=r.file_picker_callback)&&(!a||a[s]))i=function(){var e=n.fire("beforecall").meta;e=l.extend({filetype:s},e),o.call(t,function(e,t){n.value(e).fire("change",{meta:t})},n.value(),e)};else if((o=r.file_browser_callback)&&(!a||a[s]))i=function(){o(n.getEl("inp").id,n.value(),s,window)};if(i)e.icon="browse",e.onaction=i;n._super(e),n.classes.add("filepicker"),Lu(n,r,t.getBody(),s),Hu(n,r,s)}}),zu=Er.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){if(e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc)e.recalc()})}}),Wu=Er.extend({recalc:function(e){var t,n,r,i,o,a,s,u,l,f,c,d,m,h,p,g,v=[],b,y,w,x,C,k,S,E,N,_,T,R,A,D,P,B,O,M,L,I,H,F,z=Math.max,W=Math.min;if(r=e.items().filter(":visible"),i=e.layoutRect(),o=e.paddingBox,a=e.settings,d=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,u=e.isRtl()?a.pack||"end":a.pack,l=a.spacing||0,"row-reversed"===d||"column-reverse"===d)r=r.set(r.toArray().reverse()),d=d.split("-")[0];if("column"===d)N="y",S="h",E="minH",_="maxH",R="innerH",T="top",A="deltaH",D="contentH",L="left",O="w",P="x",B="innerW",M="minW",I="right",H="deltaW",F="contentW";else N="x",S="w",E="minW",_="maxW",R="innerW",T="left",A="deltaW",D="contentW",L="top",O="h",P="y",B="innerH",M="minH",I="bottom",H="deltaH",F="contentH";for(c=i[R]-o[T]-o[T],k=f=0,t=0,n=r.length;t<n;t++){if(h=(m=r[t]).layoutRect(),c-=t<n-1?l:0,(g=(p=m.settings).flex)>0){if(f+=g,h[_])v.push(m);h.flex=g}if(c-=h[E],(b=o[L]+h[M]+o[I])>k)k=b}if(x={},c<0)x[E]=i[E]-c+i[A];else x[E]=i[R]-c+i[A];if(x[M]=k+i[H],x[D]=i[R]-c,x[F]=k,x.minW=W(x.minW,i.maxW),x.minH=W(x.minH,i.maxH),x.minW=z(x.minW,i.startMinWidth),x.minH=z(x.minH,i.startMinHeight),i.autoResize&&(x.minW!==i.minW||x.minH!==i.minH)){if(x.w=x.minW,x.h=x.minH,e.layoutRect(x),this.recalc(e),null===e._lastRect){var U=e.parent();if(U)U._lastRect=null,U.recalc()}return}for(w=c/f,t=0,n=v.length;t<n;t++)if(y=(h=(m=v[t]).layoutRect())[_],(b=h[E]+h.flex*w)>y)c-=h[_]-h[E],f-=h.flex,h.flex=0,h.maxFlexSize=y;else h.maxFlexSize=0;if(w=c/f,C=o[T],x={},0===f)if("end"===u)C=c+o[T];else if("center"===u){if((C=Math.round(i[R]/2-(i[R]-c)/2)+o[T])<0)C=o[T]}else if("justify"===u)C=o[T],l=Math.floor(c/(r.length-1));for(x[P]=o[L],t=0,n=r.length;t<n;t++){if(b=(h=(m=r[t]).layoutRect()).maxFlexSize||h[E],"center"===s)x[P]=Math.round(i[B]/2-h[O]/2);else if("stretch"===s)x[O]=z(h[M]||0,i[B]-o[L]-o[I]),x[P]=o[L];else if("end"===s)x[P]=i[B]-h[O]-o.top;if(h.flex>0)b+=h.flex*w;if(x[S]=b,x[N]=C,m.layoutRect(x),m.recalc)m.recalc();C+=b+l}}}),Uu=Sr.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){if(e.recalc)e.recalc()})},isNative:function(){return true}});function ju(e,t,n,r,i){return e(n,r)?re.some(n):Ti.isFunction(i)&&i(n)?re.none():t(n,r,i)}var Vu=function(e){return Xu(Ei.body(),e)},$u=function(e,t,n){var r=e.dom(),i=Ti.isFunction(n)?n:G.constant(false);while(r.parentNode){r=r.parentNode;var o=Qr.fromDom(r);if(t(o))return re.some(o);else if(i(o))break}return re.none()},qu,Yu=function(t,n){var e=t.dom();if(!e.parentNode)return re.none();return Ku(Qr.fromDom(e.parentNode),function(e){return!us(t,e)&&n(e)})},Ku=function(e,t){var n;return et.find(e.dom().childNodes,G.compose(t,Qr.fromDom)).map(Qr.fromDom)},Xu=function(e,r){var i=function(e){for(var t=0;t<e.childNodes.length;t++){if(r(Qr.fromDom(e.childNodes[t])))return re.some(Qr.fromDom(e.childNodes[t]));var n=i(e.childNodes[t]);if(n.isSome())return n}return re.none()};return i(e.dom())},Gu={first:Vu,ancestor:$u,closest:function(e,t,n){var r;return ju(function(e){return t(e)},$u,e,t,n)},sibling:Yu,child:Ku,descendant:Xu},Ju,Qu=function(e,t,n){return Gu.ancestor(e,function(e){return es.is(e,t)},n)},Zu,el,tl,nl,rl=function(e){return es.one(e)},il=Qu,ol=function(e,t){return Gu.sibling(e,function(e){return es.is(e,t)})},al=function(e,t){return Gu.child(e,function(e){return es.is(e,t)})},sl=function(e,t){return es.one(t,e)},ul=function(e,t,n){return ju(es.is,Qu,e,t,n)},ll,fl,cl=function(e,t){return function(){e.execCommand("mceToggleFormat",false,t)}},dl=function(e,n){return function(){var t=this;if(e.formatter)e.formatter.formatChanged(n,function(e){t.active(e)});else e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})}},ml,hl=function(n){n.addMenuItem("align",{text:"Align",menu:[{text:"Left",icon:"alignleft",onclick:cl(n,"alignleft")},{text:"Center",icon:"aligncenter",onclick:cl(n,"aligncenter")},{text:"Right",icon:"alignright",onclick:cl(n,"alignright")},{text:"Justify",icon:"alignjustify",onclick:cl(n,"alignjustify")}]}),l.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,t){n.addButton(t,{active:false,tooltip:e[0],cmd:e[1],onPostRender:dl(n,t)})})},pl=function(e,t,n){while(n!==t){if(n.style[e]){var r=n.style[e];return""!==r?re.some(r):re.none()}n=n.parentNode}return re.none()},gl=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},vl=function(e,t){if(/[0-9.]+px$/.test(e))return gl(72*parseInt(e,10)/96,t||0)+"pt";return e},bl=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},yl=function(e,t){return re.from(E.DOM.getStyle(t,e,true))},wl=function(n){return function(t,e){return re.from(e).map(Qr.fromDom).filter(xi.isElement).bind(function(e){return pl(n,t,e.dom()).or(yl(n,e.dom()))}).getOr("")}},xl={getFontSize:wl("fontSize"),getFontFamily:G.compose(bl,wl("fontFamily")),toPt:vl},Cl=function(e){return e?e.split(",")[0]:""},kl=function(e,t){var n;return l.each(e,function(e){if(e.value.toLowerCase()===t.toLowerCase())n=e.value}),l.each(e,function(e){if(!n&&Cl(e.value).toLowerCase()===Cl(t).toLowerCase())n=e.value}),n},Sl=function(i,o){return function(){var r=this;i.on("init nodeChange",function(e){var t=xl.getFontFamily(i.getBody(),e.element),n=kl(o,t);if(r.value(n?n:null),!n&&t)r.text(Cl(t))})}},El=function(e){var t=(e=e.replace(/;$/,"").split(";")).length;while(t--)e[t]=e[t].split("=");return e},Nl=function(e){var t="Andale Mono=andale mono,monospace;"+"Arial=arial,helvetica,sans-serif;"+"Arial Black=arial black,sans-serif;"+"Book Antiqua=book antiqua,palatino,serif;"+"Comic Sans MS=comic sans ms,sans-serif;"+"Courier New=courier new,courier,monospace;"+"Georgia=georgia,palatino,serif;"+"Helvetica=helvetica,arial,sans-serif;"+"Impact=impact,sans-serif;"+"Symbol=symbol;"+"Tahoma=tahoma,arial,helvetica,sans-serif;"+"Terminal=terminal,monaco,monospace;"+"Times New Roman=times new roman,times,serif;"+"Trebuchet MS=trebuchet ms,geneva,sans-serif;"+"Verdana=verdana,geneva,sans-serif;"+"Webdings=webdings;"+"Wingdings=wingdings,zapf dingbats",n=El(e.settings.font_formats||t);return l.map(n,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})},_l=function(t){t.addButton("fontselect",function(){var e=Nl(t);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:true,onPostRender:Sl(t,e),onselect:function(e){if(e.control.settings.value)t.execCommand("FontName",false,e.control.settings.value)}}})},Tl,Rl=function(e){_l(e)},Al=function(e,t,n){var r;return l.each(e,function(e){if(e.value===n)r=n;else if(e.value===t)r=t}),r},Dl=function(a,s){return function(){var o=this;a.on("init nodeChange",function(e){var t,n,r,i;if(t=xl.getFontSize(a.getBody(),e.element))for(r=3;!i&&r>=0;r--)n=xl.toPt(t,r),i=Al(s,n,t);if(o.value(i?i:null),!i)o.text(n)})}},Pl=function(e){var t="8pt 10pt 12pt 14pt 18pt 24pt 36pt",n=e.settings.fontsize_formats||t;return l.map(n.split(" "),function(e){var t=e,n=e,r=e.split("=");if(r.length>1)t=r[0],n=r[1];return{text:t,value:n}})},Bl=function(t){t.addButton("fontsizeselect",function(){var e=Pl(t);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:true,onPostRender:Dl(t,e),onclick:function(e){if(e.control.settings.value)t.execCommand("FontSize",false,e.control.settings.value)}}})},Ol,Ml=function(e){Bl(e)},Ll=function(n,e){var r=e.length;return l.each(e,function(e){if(e.menu)e.hidden=0===Ll(n,e.menu);var t=e.format;if(t)e.hidden=!n.formatter.canApply(t);if(e.hidden)r--}),r},Il=function(n,e){var r=e.items().length;return e.items().each(function(e){if(e.menu)e.visible(Il(n,e.menu)>0);if(!e.menu&&e.settings.menu)e.visible(Ll(n,e.settings.menu)>0);var t=e.settings.format;if(t)e.visible(n.formatter.canApply(t));if(!e.visible())r--}),r},Hl=function(r){var i=0,o=[],t=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],a=function(e){var r=[];if(!e)return;return l.each(e,function(e){var t={text:e.title,icon:e.icon};if(e.items)t.menu=a(e.items);else{var n=e.format||"custom"+i++;if(!e.format)e.name=n,o.push(e);t.format=n,t.cmd=e.cmd}r.push(t)}),r},e=function(){var e;if(r.settings.style_formats_merge)if(r.settings.style_formats)e=a(t.concat(r.settings.style_formats));else e=a(t);else e=a(r.settings.style_formats||t);return e};return r.on("init",function(){l.each(o,function(e){r.formatter.register(e.name,e)})}),{type:"menu",items:e(),onPostRender:function(e){r.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:true,textStyle:function(){if(this.settings.format)return r.formatter.getCssText(this.settings.format)},onPostRender:function(){var n=this;n.parent().on("show",function(){var e,t;if(e=n.settings.format)n.disabled(!r.formatter.canApply(e)),n.active(r.formatter.match(e));if(t=n.settings.cmd)n.active(r.queryCommandState(t))})},onclick:function(){if(this.settings.format)cl(r,this.settings.format)();if(this.settings.cmd)r.execCommand(this.settings.cmd)}}}},Fl=function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})},zl=function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){if(e.settings.style_formats_autohide)Il(e,this.menu)}})},Wl,Ul=function(e){var t=Hl(e);Fl(e,t),zl(e,t)},jl="Paragraph=p;"+"Heading 1=h1;"+"Heading 2=h2;"+"Heading 3=h3;"+"Heading 4=h4;"+"Heading 5=h5;"+"Heading 6=h6;"+"Preformatted=pre",Vl=function(e){var t=(e=e.replace(/;$/,"").split(";")).length;while(t--)e[t]=e[t].split("=");return e},$l=function(i,o,a){return function(){var t=this;i.on("nodeChange",function(e){var n=i.formatter,r=null;l.each(e.parents,function(t){if(l.each(o,function(e){if(a){if(n.matchNode(t,a,{value:e.value}))r=e.value}else if(n.matchNode(t,e.value))r=e.value;if(r)return false}),r)return false}),t.value(r)})}},ql=function(n,e){return function(){var t=[];return l.each(e,function(e){t.push({text:e[0],value:e[1],textStyle:function(){return n.formatter.getCssText(e[1])}})}),{type:"listbox",text:e[0][0],values:t,fixedWidth:true,onselect:function(e){if(e.control){var t=e.control.value();cl(n,t)()}},onPostRender:$l(n,t)}}},Yl=function(t,e){return l.map(e,function(e){return{text:e[0],onclick:cl(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}})},Kl,Xl=function(e){var t=Vl(e.settings.block_formats||jl);e.addMenuItem("blockformats",{text:"Blocks",menu:Yl(e,t)}),e.addButton("formatselect",ql(e,t))},Gl=function(t,e){var n,r;if("string"===typeof e)r=e.split(" ");else if(l.isArray(e))return et.flatten(l.map(e,function(e){return Gl(t,e)}));return n=l.grep(r,function(e){return"|"===e||e in t.menuItems}),l.map(n,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})},Jl=function(e){return e&&"-"===e.text},Ql=function(e){var t=et.filter(e,function(e,t,n){return!Jl(e)||!Jl(n[t-1])});return et.filter(t,function(e,t,n){return!Jl(e)||t>0&&t<n.length-1})},Zl=function(e,t){var n=[{text:"-"}],r=l.grep(e.menuItems,function(e){return e.context===t});return l.each(r,function(e){if("before"===e.separator)n.push({text:"|"});if(e.prependToContext)n.unshift(e);else n.push(e);if("after"===e.separator)n.push({text:"|"})}),n},ef=function(e){var t=e.settings.insert_button_items;if(t)return Ql(Gl(e,t));else return Ql(Zl(e,"insert"))},tf=function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(ef(e)),this.menu.renderNew()}})},nf,rf=function(e){tf(e)},of=function(n){l.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,t){n.addButton(t,{active:false,tooltip:e,onPostRender:dl(n,t),onclick:cl(n,t)})})},af=function(n){l.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(e,t){n.addButton(t,{tooltip:e[0],cmd:e[1]})})},sf=function(n){l.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(e,t){n.addButton(t,{active:false,tooltip:e[0],cmd:e[1],onPostRender:dl(n,t)})})},uf=function(e){of(e),af(e),sf(e)},lf=function(n){l.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(e,t){n.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),n.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:cl(n,"code")})},ff,cf=function(e){uf(e),lf(e)},df=function(n,r){return function(){var e=this,t=function(){var e="redo"===r?"hasRedo":"hasUndo";return n.undoManager?n.undoManager[e]():false};e.disabled(!t()),n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){e.disabled(n.readonly||!t())})}},mf=function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:df(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:df(e,"redo"),cmd:"redo"})},hf=function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:df(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:df(e,"redo"),cmd:"redo"})},pf,gf=function(e){mf(e),hf(e)},vf=function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}},bf=function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:true,onPostRender:vf(e),cmd:"mceToggleVisualAid"})},yf,wf=function(e){bf(e)},xf=function(){ur.tooltips=!vt.iOS,_n.translate=function(e){return o.translate(e)}},Cf=function(e){if(e.settings.ui_container)vt.container=sl(Qr.fromDom(document.body),e.settings.ui_container).fold(G.constant(null),function(e){return e.dom()})},kf=function(e){if(e.rtl)_n.rtl=true},Sf=function(e){e.on("mousedown",function(){Jn.hideAll()})},Ef,Nf={setup:function(e){kf(e),Sf(e),Cf(e),xf(),Xl(e),hl(e),cf(e),gf(e),Ml(e),Rl(e),Ul(e),wf(e),rf(e)}},_f=Er.extend({recalc:function(e){var t,n,r,i,o,a,s,u,l,f,c,d,m,h,p,g,v,b,y,w,x,C,k,S=[],E=[],N,_,T,R,A,D,P;if(t=e.settings,i=e.items().filter(":visible"),o=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),b=t.spacingH||t.spacing||0,y=t.spacingV||t.spacing||0,w=t.alignH||t.align,x=t.alignV||t.align,g=e.paddingBox,A="reverseRows"in t?t.reverseRows:e.isRtl(),w&&"string"===typeof w)w=[w];if(x&&"string"===typeof x)x=[x];for(c=0;c<r;c++)S.push(0);for(d=0;d<n;d++)E.push(0);for(d=0;d<n;d++)for(c=0;c<r;c++){if(!(f=i[d*r+c]))break;N=(l=f.layoutRect()).minW,_=l.minH,S[c]=N>S[c]?N:S[c],E[d]=_>E[d]?_:E[d]}for(T=o.innerW-g.left-g.right,c=C=0;c<r;c++)C+=S[c]+(c>0?b:0),T-=(c>0?b:0)+S[c];for(R=o.innerH-g.top-g.bottom,d=k=0;d<n;d++)k+=E[d]+(d>0?y:0),R-=(d>0?y:0)+E[d];if(C+=g.left+g.right,k+=g.top+g.bottom,(u={}).minW=C+(o.w-o.innerW),u.minH=k+(o.h-o.innerH),u.contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH,u.minW=Math.min(u.minW,o.maxW),u.minH=Math.min(u.minH,o.maxH),u.minW=Math.max(u.minW,o.startMinWidth),u.minH=Math.max(u.minH,o.startMinHeight),o.autoResize&&(u.minW!==o.minW||u.minH!==o.minH)){if(u.w=u.minW,u.h=u.minH,e.layoutRect(u),this.recalc(e),null===e._lastRect){var B=e.parent();if(B)B._lastRect=null,B.recalc()}return}if(o.autoResize)(u=e.layoutRect(u)).contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH;if("start"===t.packV)P=0;else P=R>0?Math.floor(R/n):0;var O=0,M=t.flexWidths;if(M)for(c=0;c<M.length;c++)O+=M[c];else O=r;var L=T/O;for(c=0;c<r;c++)S[c]+=M?M[c]*L:L;for(h=g.top,d=0;d<n;d++){for(m=g.left,s=E[d]+P,c=0;c<r;c++){if(A)D=d*r+r-1-c;else D=d*r+c;if(!(f=i[D]))break;if(p=f.settings,l=f.layoutRect(),a=Math.max(S[c],l.startMinWidth),l.x=m,l.y=h,"center"===(v=p.alignH||(w?w[c]||w[0]:null)))l.x=m+a/2-l.w/2;else if("right"===v)l.x=m+a-l.w;else if("stretch"===v)l.w=a;if("center"===(v=p.alignV||(x?x[c]||x[0]:null)))l.y=h+s/2-l.h/2;else if("bottom"===v)l.y=h+s-l.h;else if("stretch"===v)l.h=s;if(f.layoutRect(l),m+=a+b,f.recalc)f.recalc()}h+=s+y}}}),Tf=ur.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=false,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;if(!r)L.setTimeout(function(){n.html(e)});else if(r.innerHTML=e,t)t();return this}}),Rf=ur.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=false},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'">'+'<div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1">'+'<i class="'+t+"ico "+t+'i-help"></i>'+"</button>"+"</div>"+"</div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){if(t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered"))t.updateLayoutRect()}),t.state.on("change:help",function(e){if(t.classes.toggle("has-help",e.value),t.state.get("rendered"))t.updateLayoutRect()}),t._super()}}),Af=ur.extend({init:function(e){var t=this;if(t._super(e),t.classes.add("widget").add("label"),t.canFocus=false,e.multiline)t.classes.add("autoscroll");if(e.strong)t.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();if(e.settings.multiline){var n;if(Ft.getSize(e.getEl()).width>t.maxW)t.minW=t.maxW,e.classes.add("multiline");e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,Ft.getSize(e.getEl()).height)}return t},repaint:function(){var e=this;if(!e.settings.multiline)e.getEl().style.lineHeight=e.layoutRect().h+"px";return e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e=this,t,n,r=e.settings.forId,i=e.settings.html?e.settings.html:e.encode(e.state.get("text"));if(!r&&(n=e.settings.forName))if(t=e.getRoot().find("#"+n)[0])r=t._id;if(r)return'<label id="'+e._id+'" class="'+e.classes+'"'+(r?' for="'+r+'"':"")+">"+i+"</label>";return'<span id="'+e._id+'" class="'+e.classes+'">'+i+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){if(t.innerHtml(t.encode(e.value)),t.state.get("rendered"))t.updateLayoutRect()}),t._super()}}),Df=Dn.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}}),Pf=Df.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:true,defaults:{type:"menubutton"}}});function Bf(e,t){while(e){if(t===e)return true;e=e.parentNode}return false}var Of=Nr.extend({init:function(e){var t=this;if(t._renderOpen=true,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth)t.classes.add("fixed-width");t.aria("haspopup",true),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var t=this,n;if(t.menu&&t.menu.visible()&&false!==e)return t.hideMenu();if(!t.menu){if(n=t.state.get("menu")||[],t.classes.add("opened"),n.length)n={type:"menu",animate:true,items:n};else n.type=n.type||"menu",n.animate=true;if(!n.renderTo)t.menu=N.create(n).parent(t).renderTo();else t.menu=n.parent(t).show().renderTo();t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){if(e.control.parent()===t.menu)e.stopPropagation(),t.focus(),t.hideMenu()}),t.menu.on("select",function(){t.focus()}),t.menu.on("show hide",function(e){if(e.control===t.menu)t.activeMenu("show"===e.type),t.classes.toggle("opened","show"===e.type);t.aria("expanded","show"===e.type)}).fire("show")}t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.repaint(),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),t.fire("showmenu")},hideMenu:function(){var e=this;if(e.menu)e.menu.items().each(function(e){if(e.hideMenu)e.hideMenu()}),e.menu.hide()},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,i,o=e.state.get("text"),a="";if(i=e.settings.image){if(r="none","string"!==typeof i)i=window.getSelection?i[0]:i[1];i=" style=\"background-image: url('"+i+"')\""}else i="";if(o)e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(o)+"</span>";return r=e.settings.icon?n+"ico "+n+"i-"+r:"",e.aria("role",e.parent()instanceof Pf?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'">'+'<button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+a+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var i=this;return i.on("click",function(e){if(e.control===i&&Bf(e.target,i.getEl()))if(i.focus(),i.showMenu(!e.aria),e.aria)i.menu.items().filter(":visible")[0].focus()}),i.on("mouseenter",function(e){var t=e.control,n=i.parent(),r;if(t&&n&&t instanceof Of&&t.parent()===n)if(n.items().filter("MenuButton").each(function(e){if(e.hideMenu&&e!==t){if(e.menu&&e.menu.visible())r=true;e.hideMenu()}}),r)t.focus(),t.showMenu()}),i._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){if(e.menu)e.menu.remove();e.menu=null}),e._super()},remove:function(){if(this._super(),this.menu)this.menu.remove()}}),Mf=Jn.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:true},init:function(e){var t=this;if(e.autohide=true,e.constrainToViewport=true,"function"===typeof e.items)e.itemsFactory=e.items,e.items=[];if(e.itemDefaults){var n=e.items,r=n.length;while(r--)n[r]=l.extend({},e.itemDefaults,n[r])}if(t._super(e),t.classes.add("menu"),e.animate&&11!==vt.ie)t.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",true),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){var t=this,n,e;function r(){if(t.throbber)t.throbber.hide(),t.throbber=null}if(!(e=t.settings.itemsFactory))return;if(!t.throbber){if(t.throbber=new nr(t.getEl("body"),true),0===t.items().length)t.throbber.show(),t.fire("loading");else t.throbber.show(100,function(){t.items().remove(),t.fire("loading")});t.on("hide close",r)}t.requestTime=n=(new Date).getTime(),t.settings.itemsFactory(function(e){if(0===e.length)return void t.hide();if(t.requestTime!==n)return;t.getEl().style.width="",t.getEl("body").style.width="",r(),t.items().remove(),t.getEl("body").innerHTML="",t.add(e),t.renderNew(),t.fire("loaded")})},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var n=this;if(n.items().each(function(e){var t=e.settings;if(t.icon||t.image||t.selectable)return n._hasIcons=true,false}),n.settings.itemsFactory)n.on("postrender",function(){if(n.settings.itemsFactory)n.load()});return n.on("show hide",function(e){if(e.control===n)if("show"===e.type)L.setTimeout(function(){n.classes.add("in")},0);else n.classes.remove("in")}),n._super()}}),Lf=Of.extend({init:function(n){var r=this,e,i,o,a;function s(e){for(var t=0;t<e.length;t++){if(i=e[t].selected||n.value===e[t].value)return o=o||e[t].text,r.state.set("value",e[t].value),true;if(e[t].menu)if(s(e[t].menu))return true}}if(r._super(n),n=r.settings,r._values=e=n.values,e){if("undefined"!==typeof n.value)s(e);if(!i&&e.length>0)o=e[0].text,r.state.set("value",e[0].value);r.state.set("menu",e)}r.state.set("text",n.text||o),r.classes.add("listbox"),r.on("select",function(e){var t=e.control;if(a)e.lastControl=a;if(n.multiple)t.active(!t.active());else r.value(e.control.value());a=t})},bindStates:function(){var n=this;function t(e,t){if(e instanceof Mf)e.items().each(function(e){if(!e.hasMenus())e.active(e.value()===t)})}function i(e,t){var n;if(!e)return;for(var r=0;r<e.length;r++){if(e[r].value===t)return e[r];if(e[r].menu)if(n=i(e[r].menu,t))return n}}return n.on("show",function(e){t(e.control,n.value())}),n.state.on("change:value",function(e){var t=i(n.state.get("menu"),e.value);if(t)n.text(t.text);else n.text(n.settings.text)}),n._super()}}),If=function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");if(r.setAttribute("style",n),t)r.style.color="",r.style.backgroundColor=""}},Hf=ur.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this,n;if(t._super(e),e=t.settings,t.classes.add("menu-item"),e.menu)t.classes.add("menu-item-expand");if(e.preview)t.classes.add("menu-item-preview");if("-"===(n=t.state.get("text"))||"|"===n)t.classes.add("menu-item-sep"),t.aria("role","separator"),t.state.set("text","-");if(e.selectable)t.aria("role","menuitemcheckbox"),t.classes.add("menu-item-checkbox"),e.icon="selected";if(!e.preview&&!e.selectable)t.classes.add("menu-item-normal");if(t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu)t.aria("haspopup",true)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t=this,e=t.settings,n,r=t.parent();if(r.items().each(function(e){if(e!==t)e.hideMenu()}),e.menu){if(!(n=t.menu)){if((n=e.menu).length)n={type:"menu",items:n};else n.type=n.type||"menu";if(r.settings.itemDefaults)n.itemDefaults=r.settings.itemDefaults;(n=t.menu=N.create(n).parent(t).renderTo()).reflow(),n.on("cancel",function(e){e.stopPropagation(),t.focus(),n.hide()}),n.on("show hide",function(e){if(e.control.items)e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),n.on("hide",function(e){if(e.control===n)t.classes.remove("selected")}),n.submenu=true}else n.show();n._parentMenu=r,n.classes.add("menu-sub");var i=n.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);n.moveRel(t.getEl(),i),i="menu-sub-"+(n.rel=i),n.classes.remove(n._lastRel).add(i),n._lastRel=i,t.classes.add("selected"),t.aria("expanded",true)}},hideMenu:function(){var e=this;if(e.menu)e.menu.items().each(function(e){if(e.hideMenu)e.hideMenu()}),e.menu.hide(),e.aria("expanded",false);return e},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=e.state.get("text"),o=e.settings.icon,a="",s=n.shortcut,u=e.encode(n.url),l="";function f(e){var t,n,r={};if(vt.mac)r={alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"};else r={meta:"Ctrl"};for(e=e.split("+"),t=0;t<e.length;t++)if(n=r[e[t].toLowerCase()])e[t]=n;return e.join("+")}function c(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function d(e){var t=n.match||"";return t?e.replace(new RegExp(c(t),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function m(e){return e.replace(new RegExp(c("!mce~match["),"g"),"<b>").replace(new RegExp(c("]mce~match!"),"g"),"</b>")}if(o)e.parent().classes.add("menu-has-icons");if(n.image)a=" style=\"background-image: url('"+n.image+"')\"";if(s)s=f(s);return o=r+"ico "+r+"i-"+(e.settings.icon||"none"),l="-"!==i?'<i class="'+o+'"'+a+"></i> ":"",i=m(e.encode(d(i))),u=m(e.encode(d(u))),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1">'+l+("-"!==i?'<span id="'+t+'-text" class="'+r+'text">'+i+"</span>":"")+(s?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+s+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(u?'<div class="'+r+'menu-item-link">'+u+"</div>":"")+"</div>"},postRender:function(){var t=this,n=t.settings,e=n.textStyle;if("function"===typeof e)e=e.call(this);if(e){var r=t.getEl("text");if(r)r.setAttribute("style",e),t._textStyle=e}return t.on("mouseenter click",function(e){if(e.control===t)if(!n.menu&&"click"===e.type)t.fire("select"),L.requestAnimationFrame(function(){t.parent().hideAll()});else if(t.showMenu(),e.aria)t.menu.focus(true)}),t._super(),t},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",true),e},active:function(e){if(If(this,e),"undefined"!==typeof e)this.aria("checked",e);return this._super(e)},remove:function(){if(this._super(),this.menu)this.menu.remove()}}),Ff=Rr.extend({Defaults:{classes:"radio",role:"radio"}}),zf=ur.extend({renderHtml:function(){var e=this,t=e.classPrefix;if(e.classes.add("resizehandle"),"both"===e.settings.direction)e.classes.add("resizehandle-both");return e.canFocus=false,'<div id="'+e._id+'" class="'+e.classes+'">'+'<i class="'+t+"ico "+t+'i-resize"></i>'+"</div>"},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new On(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){if("both"!==t.settings.direction)e.deltaX=0;t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){if(this.resizeDragHelper)this.resizeDragHelper.destroy();return this._super()}});function Wf(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}var Uf=ur.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var n=this;if(n._super(e),n.settings.size)n.size=n.settings.size;if(n.settings.options)n._options=n.settings.options;n.on("keydown",function(e){var t;if(13===e.keyCode)e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,false}),n.fire("submit",{data:t.toJSON()})})},options:function(e){if(!arguments.length)return this.state.get("options");return this.state.set("options",e),this},renderHtml:function(){var e=this,t,n="";if(t=Wf(e._options),e.size)n=' size = "'+e.size+'"';return'<select id="'+e._id+'" class="'+e.classes+'"'+n+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(e){t.getEl().innerHTML=Wf(e.value)}),t._super()}});function jf(e,t,n){if(e<t)e=t;if(e>n)e=n;return e}function Vf(e,t,n){e.setAttribute("aria-"+t,n)}function $f(e,t){var n,r,i,o,a,s;if("v"===e.settings.orientation)o="top",i="height",r="h";else o="left",i="width",r="w";s=e.getEl("handle"),a=(n=(e.layoutRect()[r]||100)-Ft.getSize(s)[i])*((t-e._minValue)/(e._maxValue-e._minValue))+"px",s.style[o]=a,s.style.height=e.layoutRect().h+"px",Vf(s,"valuenow",t),Vf(s,"valuetext",""+e.settings.previewFilter(t)),Vf(s,"valuemin",e._minValue),Vf(s,"valuemax",e._maxValue)}var qf=ur.extend({init:function(e){var t=this;if(!e.previewFilter)e.previewFilter=function(e){return Math.round(100*e)/100};if(t._super(e),t.classes.add("slider"),"v"===e.orientation)t.classes.add("vertical");t._minValue=Ti.isNumber(e.minValue)?e.minValue:0,t._maxValue=Ti.isNumber(e.maxValue)?e.maxValue:100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'">'+'<div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div>'+"</div>"},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var f=this,e,t,c,d,m,h;function i(e,t,n){return(n+e)/(t-e)}function o(e,t,n){return n*(t-e)-e}function n(n,r){function t(e){var t;t=f.value(),t=jf(t=o(n,r,i(n,r,t)+.05*e),n,r),f.value(t),f.fire("dragstart",{value:t}),f.fire("drag",{value:t}),f.fire("dragend",{value:t})}f.on("keydown",function(e){switch(e.keyCode){case 37:case 38:t(-1);break;case 39:case 40:t(1)}})}function r(n,r,i){var o,a,s,u,l;f._dragHelper=new On(f._id,{handle:f._id+"-handle",start:function(e){o=e[c],a=parseInt(f.getEl("handle").style[d],10),s=(f.layoutRect()[h]||100)-Ft.getSize(i)[m],f.fire("dragstart",{value:l})},drag:function(e){var t=e[c]-o;u=jf(a+t,0,s),i.style[d]=u+"px",l=n+u/s*(r-n),f.value(l),f.tooltip().text(""+f.settings.previewFilter(l)).show().moveRel(i,"bc tc"),f.fire("drag",{value:l})},stop:function(){f.tooltip().hide(),f.fire("dragend",{value:l})}})}if(e=f._minValue,t=f._maxValue,"v"===f.settings.orientation)c="screenY",d="top",m="height",h="h";else c="screenX",d="left",m="width",h="w";f._super(),n(e,t),r(e,t,f.getEl("handle"))},repaint:function(){this._super(),$f(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){$f(t,e.value)}),t._super()}}),Yf=ur.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=false,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}}),Kf=Of.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e=this,t=e.getEl(),n=e.layoutRect(),r,i;return e._super(),r=t.firstChild,i=t.lastChild,It(r).css({width:n.w-Ft.getSize(i).width,height:n.h-2}),It(i).css({height:n.h-2}),e},activeMenu:function(e){var t=this;It(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r,i=e.state.get("icon"),o=e.state.get("text"),a=e.settings,s="",u;if(r=a.image){if(i="none","string"!==typeof r)r=window.getSelection?r[0]:r[1];r=" style=\"background-image: url('"+r+"')\""}else r="";if(i=a.icon?n+"ico "+n+"i-"+i:"",o)e.classes.add("btn-has-text"),s='<span class="'+n+'txt">'+e.encode(o)+"</span>";return u="boolean"===typeof a.active?' aria-pressed="'+a.active+'"':"",'<div id="'+t+'" class="'+e.classes+'" role="button"'+u+' tabindex="-1">'+'<button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+r+"></i>":"")+s+"</button>"+'<button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(i?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,n=e.settings.onclick;return e.on("click",function(e){var t=e.target;if(e.control===this)while(t){if(e.aria&&"down"!==e.aria.key||"BUTTON"===t.nodeName&&-1===t.className.indexOf("open")){if(e.stopImmediatePropagation(),n)n.call(this,e);return}t=t.parentNode}}),delete e.settings.onclick,e._super()}}),Xf=Uu.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return true}}),Gf=Ln.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var e;if(this.activeTabId)e=this.getEl(this.activeTabId),It(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false");this.activeTabId="t"+n,(e=this.getEl("t"+n)).setAttribute("aria-selected","true"),It(e).addClass(this.classPrefix+"active"),this.items()[n].show().fire("showtab"),this.reflow(),this.items().each(function(e,t){if(n!==t)e.hide()})},renderHtml:function(){var r=this,e=r._layout,i="",o=r.classPrefix;return r.preRender(),e.preRender(r),r.items().each(function(e,t){var n=r._id+"-t"+t;e.aria("role","tabpanel"),e.aria("labelledby",n),i+='<div id="'+n+'" class="'+o+'tab" '+'unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+r.encode(e.settings.title)+"</div>"}),'<div id="'+r._id+'" class="'+r.classes+'" hidefocus="1" tabindex="-1">'+'<div id="'+r._id+'-head" class="'+o+'tabs" role="tablist">'+i+"</div>"+'<div id="'+r._id+'-body" class="'+r.bodyClasses+'">'+e.renderHtml(r)+"</div>"+"</div>"},postRender:function(){var r=this;r._super(),r.settings.activeTab=r.settings.activeTab||0,r.activateTab(r.settings.activeTab),this.on("click",function(e){var t=e.target.parentNode;if(t&&t.id===r._id+"-head"){var n=t.childNodes.length;while(n--)if(t.childNodes[n]===e.target)r.activateTab(n)}})},initLayoutRect:function(){var e=this,t,n,r;n=(n=Ft.getSize(e.getEl("head")).width)<0?0:n,r=0,e.items().each(function(e){n=Math.max(n,e.layoutRect().minW),r=Math.max(r,e.layoutRect().minH)}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=r,e.layoutRect({x:0,y:0,w:n,h:r})});var i=Ft.getSize(e.getEl("head")).height;return e.settings.minWidth=n,e.settings.minHeight=r+i,(t=e._super()).deltaH+=i,t.innerH=t.h-t.deltaH,t}}),Jf=ur.extend({init:function(e){var n=this;if(n._super(e),n.classes.add("textbox"),e.multiline)n.classes.add("multiline");else n.on("keydown",function(e){var t;if(13===e.keyCode)e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,false}),n.fire("submit",{data:t.toJSON()})}),n.on("keyup",function(e){n.state.set("value",e.target.value)})},repaint:function(){var e=this,t,n,r,i,o=0,a;t=e.getEl().style,n=e._layoutRect,a=e._lastRepaintRect||{};var s=document;if(!e.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8))t.lineHeight=n.h-o+"px";if(i=(r=e.borderBox).left+r.right+8,o=r.top+r.bottom+(e.settings.multiline?8:0),n.x!==a.x)t.left=n.x+"px",a.x=n.x;if(n.y!==a.y)t.top=n.y+"px",a.y=n.y;if(n.w!==a.w)t.width=n.w-i+"px",a.w=n.w;if(n.h!==a.h)t.height=n.h-o+"px",a.h=n.h;return e._lastRepaintRect=a,e.fire("repaint",{},false),e},renderHtml:function(){var e=this,t=e.settings,n,r;if(n={id:e._id,hidefocus:"1"},l.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){n[e]=t[e]}),e.disabled())n.disabled="disabled";if(t.subtype)n.type=t.subtype;return(r=Ft.create(t.multiline?"textarea":"input",n)).value=e.state.get("value"),r.className=e.classes,r.outerHTML},value:function(e){if(arguments.length)return this.state.set("value",e),this;if(this.state.get("rendered"))this.state.set("value",this.getEl().value);return this.state.get("value")},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){if(t.getEl().value!==e.value)t.getEl().value=e.value}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}}),Qf=function(){return{Selector:on,Collection:fn,ReflowQueue:bn,Control:_n,Factory:N,KeyboardNavigation:Rn,Container:Dn,DragHelper:On,Scrollable:Mn,Panel:Ln,Movable:qt,Resizable:In,FloatPanel:Jn,Window:yr,MessageBox:wr,Tooltip:sr,Widget:ur,Progress:lr,Notification:cr,Layout:Sr,AbsoluteLayout:Er,Button:Nr,ButtonGroup:Tr,Checkbox:Rr,ComboBox:Dr,ColorBox:Pr,PanelButton:Br,ColorButton:Mr,ColorPicker:Ir,Path:Fr,ElementPath:zr,FormItem:Wr,Form:Ur,FieldSet:jr,FilePicker:Fu,FitLayout:zu,FlexLayout:Wu,FlowLayout:Uu,FormatControls:Nf,GridLayout:_f,Iframe:Tf,InfoBox:Rf,Label:Af,Toolbar:Df,MenuBar:Pf,MenuButton:Of,MenuItem:Hf,Throbber:nr,Menu:Mf,ListBox:Lf,Radio:Ff,ResizeHandle:zf,SelectBox:Uf,Slider:qf,Spacer:Yf,SplitButton:Kf,StackLayout:Xf,TabPanel:Gf,TextBox:Jf,DropZone:Hr,BrowseButton:_r}},Zf,ec,tc=function(n){if(n.ui)l.each(Qf(),function(e,t){n.ui[t]=e});else n.ui=Qf()},nc;function rc(){}return function(){l.each(Qf(),function(e,t){N.add(t,e)})}(),tc(window.tinymce?window.tinymce:{}),e.add("modern",function(e){return Nf.setup(e),kr(e)}),rc}()}(),function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.Env"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),t,n,r,i,a,s,u,l,c,d=function(e){return e.getParam("media_scripts")},m=function(e){return e.getParam("audio_template_callback")},h=function(e){return e.getParam("video_template_callback")},p=function(e){return e.getParam("media_live_embeds",true)},g=function(e){return e.getParam("media_filter_html",true)},v=function(e){return e.getParam("media_url_resolver")},b=function(e){return e.getParam("media_alt_source",true)},y=function(e){return e.getParam("media_poster",true)},w=function(e){return e.getParam("media_dimensions",true)},x=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),C=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),k,S=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},E=function(e){return e.replace(/px$/,"")},N=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},_=function(t){return function(e){return e?E(e.style[t]):""}},T=function(n){return function(e,t){if(e)e.style[n]=N(t)}},R={getMaxWidth:_("maxWidth"),getMaxHeight:_("maxHeight"),setMaxWidth:T("maxWidth"),setMaxHeight:T("maxHeight")},A=C.DOM,D=function(e){return A.getAttrib(e,"data-ephox-embed-iri")},P=function(e){var t=A.createFragment(e);return""!==D(t.firstChild)},B=function(r,e){var i={};return x({validate:false,allow_conditional_comments:true,special:"script,noscript",start:function(e,t){if(!i.source1&&"param"===e)i.source1=t.map.movie;if("iframe"===e||"object"===e||"embed"===e||"video"===e||"audio"===e){if(!i.type)i.type=e;i=f.extend(t.map,i)}if("script"===e){var n=S(r,t.map.src);if(!n)return;i={type:"script",source1:t.map.src,width:n.width,height:n.height}}if("source"===e)if(!i.source1)i.source1=t.map.src;else if(!i.source2)i.source2=t.map.src;if("img"===e&&!i.poster)i.poster=t.map.src}}).parse(e),i.source1=i.source1||i.src||i.data,i.source2=i.source2||"",i.poster=i.poster||"",i},O=function(e){var t,n=A.createFragment(e).firstChild;return{type:"ephox-embed-iri",source1:D(n),source2:"",poster:"",width:R.getMaxWidth(n),height:R.getMaxHeight(n)}},M,L=function(e,t){return P(t)?O(t):B(e,t)},I=tinymce.util.Tools.resolve("tinymce.util.Promise"),H,F=function(e){var t,n,r={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return r?r:""},z=tinymce.util.Tools.resolve("tinymce.html.Writer"),W=tinymce.util.Tools.resolve("tinymce.html.Schema"),U=C.DOM,j=function(e,t){var n,r,i,o;for(n in t)if(i=""+t[n],e.map[n]){r=e.length;while(r--)if((o=e[r]).name===n)if(i)e.map[n]=i,o.value=i;else delete e.map[n],e.splice(r,1)}else if(i)e.push({name:n,value:i}),e.map[n]=i},V=function(e){var t=z(),n;return x(t).parse(e),t.getContent()},$=function(e,i,o){var a=z(),s=0,u;return x({validate:false,allow_conditional_comments:true,special:"script,noscript",comment:function(e){a.comment(e)},cdata:function(e){a.cdata(e)},text:function(e,t){a.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":if(void 0!==i.height&&void 0!==i.width)j(t,{width:i.width,height:i.height})}if(o)switch(e){case"video":if(j(t,{poster:i.poster,src:""}),i.source2)j(t,{src:""});break;case"iframe":j(t,{src:i.source1});break;case"source":if(++s<=2)if(j(t,{src:i["source"+s],type:i["source"+s+"mime"]}),!i["source"+s])return;break;case"img":if(!i.poster)return;u=true}a.start(e,t,n)},end:function(e){if("video"===e&&o)for(var t=1;t<=2;t++)if(i["source"+t]){var n=[];if(n.map={},s<t)j(n,{src:i["source"+t],type:i["source"+t+"mime"]}),a.start("source",n,true)}if(i.poster&&"object"===e&&o&&!u){var r=[];r.map={},j(r,{src:i.poster,width:i.width,height:i.height}),a.start("img",r,true)}a.end(e)}},W({})).parse(e),a.getContent()},q=function(e){var t=U.createFragment(e);return""!==U.getAttrib(t.firstChild,"data-ephox-embed-iri")},Y=function(e,t){var n,r=U.createFragment(e).firstChild;return R.setMaxWidth(r,t.width),R.setMaxHeight(r,t.height),V(r.outerHTML)},K,X=function(e,t,n){return q(e)?Y(e,t):$(e,t,n)},G,J=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:true},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2",allowFullscreen:true},{regex:/youtube.com\/embed\/([a-z0-9\-_]+(?:\?.+)?)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:true},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowfullscreen:true},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowfullscreen:true},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:false},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:true},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:true}],Q=function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"},Z=function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';if(e.poster)t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />';return t+="</object>"},ee=function(e,t){if(t)return t(e);else return'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"},te=function(e,t){if(t)return t(e);else return'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n'+'<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"},ne=function(e){return'<script src="'+e.source1+'"><\/script>'},re,ie=function(n,e){var i=f.extend({},e);if(!i.source1)if(f.extend(i,L(d(n),i.embed)),!i.source1)return"";if(!i.source2)i.source2="";if(!i.poster)i.poster="";if(i.source1=n.convertURL(i.source1,"source"),i.source2=n.convertURL(i.source2,"source"),i.source1mime=F(i.source1),i.source2mime=F(i.source2),i.poster=n.convertURL(i.poster,"poster"),f.each(J,function(e){var t,n,r=e.regex.exec(i.source1);if(r){for(n=e.url,t=0;r[t];t++)n=n.replace("$"+t,function(){return r[t]});i.source1=n,i.type=e.type,i.allowFullscreen=e.allowFullscreen,i.width=i.width||e.w,i.height=i.height||e.h}}),i.embed)return X(i.embed,i,true);else{var t=S(d(n),i.source1);if(t)i.type="script",i.width=t.width,i.height=t.height;var r=m(n),o=h(n);if(i.width=i.width||300,i.height=i.height||150,f.each(i,function(e,t){i[t]=n.dom.encode(e)}),"iframe"===i.type)return Q(i);else if("application/x-shockwave-flash"===i.source1mime)return Z(i);else if(-1!==i.source1mime.indexOf("audio"))return ee(i,r);else if("script"===i.type)return ne(i);else return te(i,o)}},oe={},ae=function(r,i,o){return new I(function(t,e){var n=function(e){if(e.html)oe[r.source1]=e;return t({url:r.source1,html:e.html?e.html:i(r)})};if(oe[r.source1])n(oe[r.source1]);else o({url:r.source1},n,e)})},se=function(t,n){return new I(function(e){e({html:n(t),url:t.source1})})},ue=function(t){return function(e){return ie(t,e)}},le,fe,ce=function(e,t){var n=v(e);return n?ae(t,ue(e),n):se(t,ue(e))},de=function(e){return oe.hasOwnProperty(e)},me=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},he=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],i=e.find("#constrain")[0];if(n&&r&&i)t(n,r,i.checked())},pe=function(e,t,n){var r=e.state.get("oldVal"),i=t.state.get("oldVal"),o=e.value(),a=t.value();if(n&&r&&i&&o&&a)if(o!==r){if(a=Math.round(o/r*a),!isNaN(a))t.value(a)}else if(o=Math.round(a/i*o),!isNaN(o))e.value(o);me(e,t)},ge,ve=function(e){he(e,pe)},be,ye=function(e){var t=function(){e(function(e){ve(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:true,text:"Constrain proportions"}]}},we=function(e){he(e,me)},xe=ve,Ce=o.ie&&o.ie<=8?"onChange":"onInput",ke=function(n){return function(e){var t=e&&e.msg?"Media embed handler error: "+e.msg:"Media embed handler threw unknown error.";n.notificationManager.open({type:"error",text:t})}},Se=function(e){var t=e.selection.getNode(),n=t.getAttribute("data-ephox-embed-iri");if(n)return{source1:n,"data-ephox-embed-iri":n,width:R.getMaxWidth(t),height:R.getMaxHeight(t)};return t.getAttribute("data-mce-object")?L(d(e),e.serializer.serialize(t,{selection:true})):{}},Ee=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},Ne=function(i,o){return function(e){var t=e.html,n=i.find("#embed")[0],r=f.extend(L(d(o),t),{source1:e.url});if(i.fromJSON(r),n)n.value(t),xe(i)}},_e=function(e,t){var n,r,i=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=i.length-1;r>=0;r--)if(t[n]===i[r])i.splice(r,1);e.selection.select(i[0])},Te=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),_e(e,n),e.nodeChanged()},Re=function(e,t){var n=e.toJSON();if(n.embed=X(n.embed,n),n.embed&&de(n.source1))Te(t,n.embed);else ce(t,n).then(function(e){Te(t,e.html)}).catch(ke(t))},Ae=function(n,e){f.each(e,function(e,t){n.find("#"+t).value(e)})},De,Pe=function(t){var n,r,e=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:true,label:"Source",onpaste:function(){setTimeout(function(){ce(t,n.toJSON()).then(Ne(n,t)).catch(ke(t))},1)},onchange:function(e){ce(t,n.toJSON()).then(Ne(n,t)).catch(ke(t)),Ae(n,e.meta)},onbeforecall:function(e){e.meta=n.toJSON()}}],i=[],o=function(e){e(n),r=n.toJSON(),n.find("#embed").value(X(r.embed,r))};if(b(t))i.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"});if(y(t))i.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"});if(w(t)){var a=ye(o);e.push(a)}r=Se(t);var s={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:Ee(t),multiline:true,rows:5,label:"Source"},u=function(){r=f.extend({},L(d(t),this.value())),this.parent().parent().fromJSON(r)};s[Ce]=u;var l=[{title:"General",type:"form",items:e},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},s]}];if(i.length>0)l.push({title:"Advanced",type:"form",items:i});n=t.windowManager.open({title:"Insert/edit media",data:r,bodyType:"tabpanel",body:l,onSubmit:function(){xe(n),Re(n,t)}}),we(n)},Be,Oe=function(e){var t;return{showDialog:function(){Pe(e)}}},Me,Le=function(e){var t=function(){Pe(e)};e.addCommand("mceMedia",t)},Ie=tinymce.util.Tools.resolve("tinymce.html.Node"),He,Fe=function(i,e){if(false===g(i))return e;var o=z(),a;return x({validate:false,allow_conditional_comments:false,special:"script,noscript",comment:function(e){o.comment(e)},cdata:function(e){o.cdata(e)},text:function(e,t){o.text(e,t)},start:function(e,t,n){if(a=true,"script"===e||"noscript"===e)return;for(var r=0;r<t.length;r++){if(0===t[r].name.indexOf("on"))return;if("style"===t[r].name)t[r].value=i.dom.serializeStyle(i.dom.parseStyle(t[r].value),e)}o.start(e,t,n),a=false},end:function(e){if(a)return;o.end(e)}},W({})).parse(e),o.getContent()},ze=function(e,t){var n,r=t.name;return(n=new Ie("img",1)).shortEnded=true,Ue(e,t,n),n.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===r?"30":"150"),style:t.attr("style"),src:o.transparentSrc,"data-mce-object":r,class:"mce-object mce-object-"+r}),n},We=function(e,t){var n,r,i,o=t.name;return(n=new Ie("span",1)).attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":o,class:"mce-preview-object mce-object-"+o}),Ue(e,t,n),(r=new Ie(o,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(i=new Ie("span",1)).attr("class","mce-shim"),n.append(r),n.append(i),n},Ue=function(e,t,n){var r,i,o,a,s;a=(o=t.attributes).length;while(a--)if(r=o[a].name,i=o[a].value,"width"!==r&&"height"!==r&&"style"!==r){if("data"===r||"src"===r)i=e.convertURL(i,r);n.attr("data-mce-p-"+r,i)}if(s=t.firstChild&&t.firstChild.value)n.attr("data-mce-html",escape(Fe(e,s))),n.firstChild=null},je=function(e){while(e=e.parent)if(e.attr("data-ephox-embed-iri"))return true;return false},Ve,$e=We,qe=ze,Ye=function(i){return function(e){var t=e.length,n,r;while(t--){if(!(n=e[t]).parent)continue;if(n.parent.attr("data-mce-object"))continue;if("script"===n.name)if(!(r=S(d(i),n.attr("src"))))continue;if(r){if(r.width)n.attr("width",r.width.toString());if(r.height)n.attr("height",r.height.toString())}if("iframe"===n.name&&p(i)&&o.ceFalse){if(!je(n))n.replace(We(i,n))}else if(!je(n))n.replace(ze(i,n))}}},Ke,Xe=function(d){d.on("preInit",function(){var t=d.schema.getSpecialElements();f.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var n=d.schema.getBoolAttrs();f.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),d.parser.addNodeFilter("iframe,video,audio,object,embed,script",Ye(d)),d.serializer.addAttributeFilter("data-mce-object",function(e,t){var n=e.length,r,i,o,a,s,u,l,f;while(n--){if(!(r=e[n]).parent)continue;if(l=r.attr(t),i=new Ie(l,1),"audio"!==l&&"script"!==l)if((f=r.attr("class"))&&-1!==f.indexOf("mce-preview-object"))i.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")});else i.attr({width:r.attr("width"),height:r.attr("height")});i.attr({style:r.attr("style")}),o=(a=r.attributes).length;while(o--){var c=a[o].name;if(0===c.indexOf("data-mce-p-"))i.attr(c.substr(11),a[o].value)}if("script"===l)i.attr("type","text/javascript");if(s=r.attr("data-mce-html"))(u=new Ie("#text",3)).raw=true,u.value=Fe(d,unescape(s)),i.append(u);r.replace(i)}})}),d.on("setContent",function(){d.$("span.mce-preview-object").each(function(e,t){var n=d.$(t);if(0===n.find("span.mce-shim",t).length)n.append('<span class="mce-shim"></span>')})})},Ge,Je=function(e){e.on("ResolveName",function(e){var t;if(1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object")))e.name=t})},Qe,Ze=function(t){t.on("click keyup",function(){var e=t.selection.getNode();if(e&&t.dom.hasClass(e,"mce-preview-object"))if(t.dom.getAttrib(e,"data-mce-selected"))e.setAttribute("data-mce-selected","2")}),t.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");if("audio"===t||"script"===t)e.preventDefault()}),t.on("objectResized",function(e){var t=e.target,n;if(t.getAttribute("data-mce-object"))if(n=t.getAttribute("data-mce-html"))n=unescape(n),t.setAttribute("data-mce-html",escape(X(n,{width:e.width,height:e.height})))})},et,tt=function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:true})};function nt(){}return e.add("media",function(e){return Le(e),tt(e),Je(e),Xe(e),Ze(e),Oe(e)}),nt}()}(),function(){var e=function(){"use strict";var o=function(e){var t=e,n=function(){return t},r,i;return{get:n,set:function(e){t=e},clone:function(){return o(n())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e,i=function(e){if(/(^|[ ,])powerpaste([, ]|$)/.test(e.settings.plugins)&&t.get("powerpaste")){if("undefined"!==typeof window.console&&window.console.log)window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.");return true}else return false},n,a=function(e,t){return{clipboard:e,quirks:t}},r,s,u,l,f=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},c=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},d=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},h=function(e,t){return e.fire("paste",{ieFake:t})},m,p,g,v,b,y,w,x,C,k,S,E,N,_,T,R={shouldPlainTextInform:function(e){return e.getParam("paste_plaintext_inform",true)},shouldBlockDrop:function(e){return e.getParam("paste_block_drop",false)},shouldPasteDataImages:function(e){return e.getParam("paste_data_images",false)},shouldFilterDrop:function(e){return e.getParam("paste_filter_drop",true)},getPreProcess:function(e){return e.getParam("paste_preprocess")},getPostProcess:function(e){return e.getParam("paste_postprocess")},getWebkitStyles:function(e){return e.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(e){return e.getParam("paste_remove_styles_if_webkit",true)},shouldMergeFormats:function(e){return e.getParam("paste_merge_formats",true)},isSmartPasteEnabled:function(e){return e.getParam("smart_paste",true)},isPasteAsTextEnabled:function(e){return e.getParam("paste_as_text",false)},getRetainStyleProps:function(e){return e.getParam("paste_retain_style_properties")},getWordValidElements:function(e){var t="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,"+"-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,"+"td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return e.getParam("paste_word_valid_elements",t)},shouldConvertWordFakeLists:function(e){return e.getParam("paste_convert_word_fake_lists",true)},shouldUseDefaultFilters:function(e){return e.getParam("paste_enable_default_filters",true)}},A=function(e,t){return false===t.get()&&R.shouldPlainTextInform(e)},D=function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})},P,B=function(e,t,n){if("text"===t.pasteFormat)t.pasteFormat="html",d(e,false);else if(t.pasteFormat="text",d(e,true),A(e,n))D(e,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),n.set(true);e.focus()},O,M=function(e,n,t){e.addCommand("mceTogglePlainTextPaste",function(){B(e,n,t)}),e.addCommand("mceInsertClipboardContent",function(e,t){if(t.content)n.pasteHtml(t.content,t.internal);if(t.text)n.pasteText(t.text)})},L=tinymce.util.Tools.resolve("tinymce.Env"),I=tinymce.util.Tools.resolve("tinymce.util.Delay"),H=tinymce.util.Tools.resolve("tinymce.util.Tools"),F=tinymce.util.Tools.resolve("tinymce.util.VK"),z="x-tinymce/html",W="\x3c!-- "+z+" --\x3e",U,j,V,$={mark:function(e){return W+e},unmark:function(e){return e.replace(W,"")},isMarked:function(e){return-1!==e.indexOf(W)},internalHtmlMime:function(){return z}},q=tinymce.util.Tools.resolve("tinymce.html.Entities"),Y,K=function(e){return e.replace(/\r?\n/g,"<br>")},X=function(e,t){var n,r=[],i="<"+e;if("object"===typeof t){for(n in t)if(t.hasOwnProperty(n))r.push(n+'="'+q.encodeAllRaw(t[n])+'"');if(r.length)i+=" "+r.join(" ")}return i+">"},G=function(e,t,n){var r=e.split(/\n\n/),i=X(t,n),o="</"+t+">",a=H.map(r,function(e){return e.split(/\n/).join("<br />")}),s=function(e){return i+e+o};return 1===a.length?a[0]:H.map(a,s).join("")},J,Q={isPlainText:function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},convert:function(e,t,n){return t?G(e,t,n):K(e)},toBRs:K,toBlockElements:G},Z=tinymce.util.Tools.resolve("tinymce.html.DomParser"),ee=tinymce.util.Tools.resolve("tinymce.html.Node"),te=tinymce.util.Tools.resolve("tinymce.html.Schema"),ne=tinymce.util.Tools.resolve("tinymce.html.Serializer");function re(t,e){return H.each(e,function(e){if(e.constructor===RegExp)t=t.replace(e,"");else t=t.replace(e[0],e[1])}),t}function ie(e){var t=te(),n=Z({},t),r="",i=t.getShortEndedElements(),o=H.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements();function s(e){var t=e.name,n=e;if("br"===t)return void(r+="\n");if(i[t])r+=" ";if(o[t])return void(r+=" ");if(3===e.type)r+=e.value;if(!e.shortEnded)if(e=e.firstChild)do{s(e)}while(e=e.next);if(a[t]&&n.next)if(r+="\n","p"===t)r+="\n"}return e=re(e,[/<!\[[^\]]+\]>/g]),s(n.parse(e)),r}function oe(e){function t(e,t,n){if(!t&&!n)return" ";return" "}return e=re(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function ae(e){var t=0;return function(){return e+t++}}var se,ue={filter:re,innerText:ie,trimHtml:oe,createIdGenerator:ae,isMsEdge:function(){return-1!==navigator.userAgent.indexOf(" Edge/")}};function le(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function fe(t){var n,e;return e=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),H.each(e,function(e){if(e.test(t))return n=true,false}),n}function ce(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function de(e){var i,o,a=1;function n(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=n(e)}while(e=e.next);return t}function s(e,t){if(3===e.type)if(t.test(e.value))return e.value=e.value.replace(t,""),false;if(e=e.firstChild)do{if(!s(e,t))return false}while(e=e.next);return true}function u(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do{u(e)}while(e=e.next)}function t(e,t,n){var r=e._listLevel||a;if(r!==a)if(r<a){if(i)i=i.parent.parent}else o=i,i=null;if(!i||i.name!==t){if(o=o||i,i=new ee(t,1),n>1)i.attr("start",""+n);e.wrap(i)}else i.append(e);if(e.name="li",r>a&&o)o.lastChild.append(i);a=r,u(e),s(e,/^\u00a0+/),s(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),s(e,/^\u00a0+/)}var r=[],l=e.firstChild;while("undefined"!==typeof l&&null!==l)if(r.push(l),null!==(l=l.walk()))while("undefined"!==typeof l&&l.parent!==e)l=l.walk();for(var f=0;f<r.length;f++)if("p"===(e=r[f]).name&&e.firstChild){var c=n(e);if(ce(c)){t(e,"ul");continue}if(fe(c)){var d=/([0-9]+)\./.exec(c),m=1;if(d)m=parseInt(d[1],10);t(e,"ol",m);continue}if(e._listLevel){t(e,"ul",1);continue}i=null}else o=i,i=null}function me(n,r,i,o){var a={},s,e=n.dom.parseStyle(o);if(H.each(e,function(e,t){switch(t){case"mso-list":if(s=/\w+ \w+([0-9]+)/i.exec(o))i._listLevel=parseInt(s[1],10);if(/Ignore/i.test(e)&&i.firstChild)i._listIgnore=true,i.firstChild._listIgnore=true;break;case"horiz-align":t="text-align";break;case"vert-align":t="vertical-align";break;case"font-color":case"mso-foreground":t="color";break;case"mso-background":case"mso-highlight":t="background";break;case"font-weight":case"font-style":if("normal"!==e)a[t]=e;return;case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void i.remove()}if(0===t.indexOf("mso-comment"))return void i.remove();if(0===t.indexOf("mso-"))return;if("all"===R.getRetainStyleProps(n)||r&&r[t])a[t]=e}),/(bold)/i.test(a["font-weight"]))delete a["font-weight"],i.wrap(new ee("b",1));if(/(italic)/i.test(a["font-style"]))delete a["font-style"],i.wrap(new ee("i",1));if(a=n.dom.serializeStyle(a,i.name))return a;return null}var he=function(r,e){var t,i;if(t=R.getRetainStyleProps(r))i=H.makeMap(t.split(/[, ]/));e=ue.filter(e,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var n=R.getWordValidElements(r),o=te({valid_elements:n,valid_children:"-li[p]"});H.each(o.elements,function(e){if(!e.attributes.class)e.attributes.class={},e.attributesOrder.push("class");if(!e.attributes.style)e.attributes.style={},e.attributesOrder.push("style")});var a=Z({},o);a.addAttributeFilter("style",function(e){var t=e.length,n;while(t--)if((n=e[t]).attr("style",me(r,i,n,n.attr("style"))),"span"===n.name&&n.parent&&!n.attributes.length)n.unwrap()}),a.addAttributeFilter("class",function(e){var t=e.length,n,r;while(t--){if(r=(n=e[t]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(r))n.remove();n.attr("class",null)}}),a.addNodeFilter("del",function(e){var t=e.length;while(t--)e[t].remove()}),a.addNodeFilter("a",function(e){var t=e.length,n,r,i;while(t--){if(r=(n=e[t]).attr("href"),i=n.attr("name"),r&&-1!==r.indexOf("#_msocom_")){n.remove();continue}if(r&&0===r.indexOf("file://"))if(r=r.split("#")[1])r="#"+r;if(!r&&!i)n.unwrap();else{if(i&&!/^_?(?:toc|edn|ftn)/i.test(i)){n.unwrap();continue}n.attr({href:r,name:i})}}});var s=a.parse(e);if(R.shouldConvertWordFakeLists(r))de(s);return e=ne({validate:r.settings.validate},o).serialize(s)},pe,ge={preProcess:function(e,t){return R.shouldUseDefaultFilters(e)?he(e,t):t},isWordContent:le},ve=function(e,t){return{content:e,cancelled:t}},be=function(e,t,n,r){var i=e.dom.create("div",{style:"display:none"},t),o=c(e,i,n,r);return ve(o.node.innerHTML,o.isDefaultPrevented())},ye=function(e,t,n,r){var i=f(e,t,n,r);if(e.hasEventListeners("PastePostProcess")&&!i.isDefaultPrevented())return be(e,i.content,n,r);else return ve(i.content,i.isDefaultPrevented())},we,xe=function(e,t,n){var r=ge.isWordContent(t),i=r?ge.preProcess(e,t):t;return ye(e,i,n,r)},Ce=function(e,t){return e.insertContent(t,{merge:R.shouldMergeFormats(e),paste:true}),true},ke=function(e){return/^https?:\/\/[\w\?\-\/+=.;&%@~#]+$/i.test(e)},Se,Ee=function(t,n,e){return t.undoManager.extra(function(){e(t,n)},function(){var e={target:"_blank",rel:null,class:null,title:null,href:n};t.execCommand("mceInsertLink",false,e)}),true},Ne=function(e,t,n){return false===e.selection.isCollapsed()&&ke(t)?Ee(e,t,n):false},_e=function(e,t,n){return false},Te=function(t,n){H.each([Ne,_e,Ce],function(e){return true!==e(t,n,Ce)})},Re,Ae=function(e){return ke(e)&&/.(gif|jpe?g|png)$/.test(e)},De=ke,Pe=function(e,t){if(false===R.isSmartPasteEnabled(e))Ce(e,t);else Te(e,t)},Be=function(e,t,n){var r=n?n:$.isMarked(t),i=xe(e,$.unmark(t),r);if(false===i.cancelled)Pe(e,i.content)},Oe=function(e,t){t=Me(e,t),Be(e,t,false)},Me=function(e,t){return t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=Q.convert(t,e.settings.forced_root_block,e.settings.forced_root_block_attrs)},Le=function(e){var t={},n="data:text/mce-internal,";if(e){if(e.getData){var r=e.getData("Text");if(r&&r.length>0)if(-1===r.indexOf(n))t["text/plain"]=r}if(e.types)for(var i=0;i<e.types.length;i++){var o=e.types[i];try{t[o]=e.getData(o)}catch(e){t[o]=""}}}return t},Ie=function(e,t){var n=Le(t.clipboardData||e.getDoc().dataTransfer);return ue.isMsEdge()?H.extend(n,{"text/html":""}):n},He=function(e,t){return t in e&&e[t].length>0},Fe=function(e){return He(e,"text/html")||He(e,"text/plain")},ze=function(e){var t;if(-1!==(t=e.indexOf(",")))return e.substr(t+1);return null},We=function(e,t){return e.images_dataimg_filter?e.images_dataimg_filter(t):true},Ue=function(e,t){var n=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return n?e.dom.encode(n[1]):null},je=function(e,t,n,r){var i=ue.createIdGenerator("mceclip");if(t)e.selection.setRng(t),t=null;var o=n.result,a=ze(o),s=i(),u=e.settings.images_reuse_filename&&r.name?Ue(e,r.name):s,l=new Image;if(l.src=o,We(e.settings,l)){var f=e.editorUpload.blobCache,c=void 0,d=void 0;if(!(d=f.findFirst(function(e){return e.base64()===a})))c=f.create(s,r,a,u),f.add(c);else c=d;Be(e,'<img src="'+c.blobUri()+'">',false)}else Be(e,'<img src="'+o+'">',false)},Ve=function(e){return"paste"===e.type},$e=function(a,s,u){var e=Ve(s)?s.clipboardData:s.dataTransfer;function t(e){var t,n,r,i=false;if(e)for(t=0;t<e.length;t++)if(n=e[t],/^image\/(jpeg|png|gif|bmp)$/.test(n.type)){var o=n.getAsFile?n.getAsFile():n;(r=new window.FileReader).onload=je.bind(null,a,u,r,o),r.readAsDataURL(o),s.preventDefault(),i=true}return i}if(a.settings.paste_data_images&&e)return t(e.items)||t(e.files)},qe=function(e){var t=e.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length},Ye=function(e){return F.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},Ke=function(s,u,l){var f=0,c;function d(e,t,n,r){var i,o;if(He(e,"text/html"))i=e["text/html"];else if(i=u.getHtml(),r=r?r:$.isMarked(i),u.isDefaultContent(i))n=true;if(i=ue.trimHtml(i),u.remove(),o=false===r&&Q.isPlainText(i),!i.length||o)n=true;if(n)if(He(e,"text/plain")&&o)i=e["text/plain"];else i=ue.innerText(i);if(s.fire("onBeforePaste",{content:i}).isDefaultPrevented())return;if(u.isDefaultContent(i)){if(!t)s.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}if(n)Oe(s,i);else Be(s,i,r)}s.on("keydown",function(e){function t(e){if(Ye(e)&&!e.isDefaultPrevented())u.remove()}if(Ye(e)&&!e.isDefaultPrevented()){if((c=e.shiftKey&&86===e.keyCode)&&L.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),f=(new Date).getTime(),L.ie&&c)return e.preventDefault(),void h(s,true);u.remove(),u.create(),s.once("keyup",t),s.once("paste",function(){s.off("keyup",t)})}});var m=function(){return u.getLastRng()||s.selection.getRng()};s.on("paste",function(e){var t=(new Date).getTime(),n=Ie(s,e),r=(new Date).getTime()-t,i=(new Date).getTime()-f-r<1e3,o="text"===l||c,a=He(n,$.internalHtmlMime());if(c=false,e.isDefaultPrevented()||qe(e))return void u.remove();if(!Fe(n)&&$e(s,e,m()))return void u.remove();if(!i)e.preventDefault();if(L.ie&&(!i||e.ieFake)&&!He(n,"text/html"))u.create(),s.dom.bind(u.getEl(),"paste",function(e){e.stopPropagation()}),s.getDoc().execCommand("Paste",false,null),n["text/html"]=u.getHtml();if(He(n,"text/html")){if(e.preventDefault(),!a)a=$.isMarked(n["text/html"]);d(n,i,o,a)}else I.setEditorTimeout(s,function(){d(n,i,o,a)},0)})},Xe=function(u,e,t){var l;Ke(u,e,t),u.parser.addNodeFilter("img",function(e,t,n){var r=function(e){return e.data&&true===e.data.paste},i=function(e){if(!e.attr("data-mce-object")&&l!==L.transparentSrc)e.remove()},o=function(e){return 0===e.indexOf("webkit-fake-url")},a=function(e){return 0===e.indexOf("data:")};if(!u.settings.paste_data_images&&r(n)){var s=e.length;while(s--){if(!(l=e[s].attributes.map.src))continue;if(o(l))i(e[s]);else if(!u.settings.allow_html_data_urls&&a(l))i(e[s])}}})},Ge=function(e,t,n){var o=e.dom,r=e.getBody(),i,a=e.dom.getViewPort(e.getWin()).y,s=20,u,l;t.set(e.selection.getRng());var f=t.get();if(e.inline)if((l=e.selection.getScrollContainer())&&l.scrollTop>0)a=l.scrollTop;function c(e){var t,n,r,i=e.startContainer;if((t=e.getClientRects()).length)return t[0];if(!e.collapsed||1!==i.nodeType)return;r=i.childNodes[f.startOffset];while(r&&3===r.nodeType&&!r.data.length)r=r.nextSibling;if(!r)return;if("BR"===r.tagName)n=o.doc.createTextNode("\ufeff"),r.parentNode.insertBefore(n,r),(e=o.createRng()).setStartBefore(n),e.setEndAfter(n),t=e.getClientRects(),o.remove(n);if(t.length)return t[0]}if(f.getClientRects){var d=c(f);if(d)s=a+(d.top-o.getPos(r).y);else{s=a;var m=f.startContainer;if(m){if(3===m.nodeType&&m.parentNode!==r)m=m.parentNode;if(1===m.nodeType)s=o.getPos(m,l||r).y}}}if(u=e.dom.add(e.getBody(),"div",{id:"mcepastebin",contentEditable:true,"data-mce-bogus":"all",style:"position: absolute; top: "+s+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n),L.ie||L.gecko)o.setStyle(u,"left","rtl"===o.getStyle(r,"direction",true)?65535:-65535);o.bind(u,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),u.focus(),e.selection.select(u,true)},Je=function(e,t){if(Qe(e)){var n=void 0,r=t.get();while(n=e.dom.get("mcepastebin"))e.dom.remove(n),e.dom.unbind(n);if(r)e.selection.setRng(r)}t.set(null)},Qe=function(e){return e.dom.get("mcepastebin")},Ze=function(n){var t,e,r,i,o,a=function(e,t){e.appendChild(t),n.dom.remove(t,true)};for(e=H.grep(n.getBody().childNodes,function(e){return"mcepastebin"===e.id}),t=e.shift(),H.each(e,function(e){a(t,e)}),r=(i=n.dom.select("div[id=mcepastebin]",t)).length-1;r>=0;r--)o=n.dom.create("div"),t.insertBefore(o,i[r]),a(o,i[r]);return t?t.innerHTML:""},et=function(e){return e.get()},tt=function(e,t){return t===e},nt=function(e){return e&&"mcepastebin"===e.id},rt=function(e,t){var n=Qe(e);return nt(n)&&tt(t,n.innerHTML)},it=function(e){var t=o(null),n="%MCEPASTEBIN%";return{create:function(){return Ge(e,t,n)},remove:function(){return Je(e,t)},getEl:function(){return Qe(e)},getHtml:function(){return Ze(e)},getLastRng:function(){return et(t)},isDefault:function(){return rt(e,n)},isDefaultContent:function(e){return tt(n,e)}}},ot=function(n){var e=it(n),t=R.isPasteAsTextEnabled(n)?"text":"html";return n.on("preInit",function(){return Xe(n,e,t)}),{pasteFormat:t,pasteHtml:function(e,t){return Be(n,e,t)},pasteText:function(e){return Oe(n,e)},pasteImageData:function(e,t){return $e(n,e,t)},getDataTransferItems:Le,hasHtmlOrText:Fe,hasContentType:He,prepareTextBeforePaste:Me}},at=function(){},st=function(e){return false===L.iOS&&void 0!==e&&"function"===typeof e.setData&&true!==ue.isMsEdge()},ut=function(e,t,n){if(st(e))try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData($.internalHtmlMime(),t),true}catch(e){return false}else return false},lt=function(e,t,n,r){if(ut(e.clipboardData,t.html,t.text))e.preventDefault(),r();else n(t.html,r)},ft=function(s){return function(e,t){var n=$.mark(e),r=s.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=s.dom.create("div",{contenteditable:"true"},n);s.dom.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),s.dom.add(s.getBody(),r);var o=s.selection.getRng();i.focus();var a=s.dom.createRng();a.selectNodeContents(i),s.selection.setRng(a),setTimeout(function(){s.selection.setRng(o),r.parentNode.removeChild(r),t()},0)}},ct=function(e){var t=e.selection,n=t.getRng(),r=t.getContent({format:"text"});return r=(r=(L.webkit||L.ie)&&-1!==navigator.userAgent.search(/\bwindows\b/i)?r.replace(/\n/gi,"\r\n"):r).replace(/\u00A0/gi," "),{html:0===n.startOffset&&3===n.commonAncestorContainer.nodeType&&n.endOffset===n.commonAncestorContainer.nodeValue.length&&!t.dom.isBlock(t.getNode())?t.dom.getOuterHTML(t.getNode()):t.getContent({contextual:true}),text:r}},dt=function(t){return function(e){if(false===t.selection.isCollapsed())lt(e,ct(t),ft(t),function(){setTimeout(function(){t.execCommand("Delete")},0)})}},mt=function(t){return function(e){if(false===t.selection.isCollapsed())lt(e,ct(t),ft(t),at)}},ht,pt=function(e){e.on("cut",dt(e)),e.on("copy",mt(e))},gt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),vt=function(e,t){return gt.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},bt=function(e){var t=e["text/plain"];return t?0===t.indexOf("file://"):false},yt=function(e,t){e.focus(),e.selection.setRng(t)},wt,xt=function(o,a,s){if(R.shouldBlockDrop(o))o.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()});if(!R.shouldPasteDataImages(o))o.on("drop",function(e){var t=e.dataTransfer;if(t&&t.files&&t.files.length>0)e.preventDefault()});o.on("drop",function(e){var t,n;if(n=vt(o,e),e.isDefaultPrevented()||s.get())return;t=a.getDataTransferItems(e.dataTransfer);var r=a.hasContentType(t,$.internalHtmlMime());if((!a.hasHtmlOrText(t)||bt(t))&&a.pasteImageData(e,n))return;if(n&&R.shouldFilterDrop(o)){var i=t["mce-internal"]||t["text/html"]||t["text/plain"];if(i)e.preventDefault(),I.setEditorTimeout(o,function(){o.undoManager.transact(function(){if(t["mce-internal"])o.execCommand("Delete");if(yt(o,n),i=ue.trimHtml(i),!t["text/html"])a.pasteText(i);else a.pasteHtml(i,r)})})}}),o.on("dragstart",function(e){s.set(true)}),o.on("dragover dragend",function(e){if(R.shouldPasteDataImages(o)&&false===s.get())e.preventDefault(),yt(o,vt(o,e));if("dragend"===e.type)s.set(false)})},Ct,kt=function(e){var t=e.plugins.paste,n=R.getPreProcess(e);if(n)e.on("PastePreProcess",function(e){n.call(t,t,e)});var r=R.getPostProcess(e);if(r)e.on("PastePostProcess",function(e){r.call(t,t,e)})};function St(t,n){t.on("PastePreProcess",function(e){e.content=n(t,e.content,e.internal,e.wordContent)})}function Et(t,n){t.on("PastePostProcess",function(e){n(t,e.node)})}function Nt(e,t){if(!ge.isWordContent(t))return t;var n=[];H.each(e.schema.getBlockElements(),function(e,t){n.push(t)});var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return t=ue.filter(t,[[r,"$1"]]),t=ue.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function _t(e,t,n,r){if(r||n)return t;var i=R.getWebkitStyles(e),l;if(false===R.shouldRemoveWebKitStyles(e)||"all"===i)return t;if(i)l=i.split(/[, ]/);if(l){var f=e.dom,c=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var i=f.parseStyle(f.decode(n),"span"),o={};if("none"===l)return t+r;for(var a=0;a<l.length;a++){var s=i[l[a]],u=f.getStyle(c,l[a],true);if(/color/.test(l[a]))s=f.toHex(s),u=f.toHex(u);if(u!==s)o[l[a]]=s}if(o=f.serializeStyle(o,"span"))return t+' style="'+o+'"'+r;return t+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function Tt(n,e){n.$("a",e).find("font,u").each(function(e,t){n.dom.remove(t,true)})}var Rt,At=function(e){if(L.webkit)St(e,_t);if(L.ie)St(e,Nt),Et(e,Tt)},Dt=function(){},Pt=function(e){return function(){return e()}},Bt=function(e,t){return function(){return e(t.apply(null,arguments))}},Ot=function(e){return function(){return e}},Mt=function(e){return e},Lt=function(e,t){return e===t},It=function(r){for(var i=new Array(arguments.length-1),e=1;e<arguments.length;e++)i[e-1]=arguments[e];return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];var n=i.concat(e);return r.apply(null,n)}},Ht=function(e){return function(){return!e.apply(null,arguments)}},Ft=function(e){return function(){throw new Error(e)}},zt=function(e){return e()},Wt=function(e){e()},Ut=Ot(false),jt=Ot(true),Vt=Dt,$t=Pt,qt=Bt,Yt=Ot,Kt=Mt,Xt=Lt,Gt=It,Jt=Ht,Qt=Ft,Zt=zt,en=Wt,tn=Ut,nn=jt,rn=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat),e.on("PastePlainTextToggle",function(e){r.active(e.state)})},on,an=function(e,t){var n=Gt(rn,e,t);e.addButton("pastetext",{active:false,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:true,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})},sn=o(false);function un(){}return t.add("paste",function(e){if(false===i(e)){var t=ot(e),n=At(e),r=o(false);return an(e,t),M(e,t,sn),kt(e),pt(e),xt(e,t,r),a(t,n)}}),un}()}(),function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),l=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),f=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r,i,o,a,s=function(e){return e&&"BR"===e.nodeName},d,m,h,p,g,v,b,y=function(e){return e&&3===e.nodeType},w=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},x=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},C=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},k=s,S=function(e){return e.parentNode.firstChild===e},E=function(e){return e.parentNode.lastChild===e},N=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},_=function(e,t){return e&&e.nodeName in t},T=function(e,t){if(!s(t))return false;if(e.isBlock(t.nextSibling)&&!s(t.previousSibling))return true;return false},R=function(e,t,n){var r=e.isEmpty(t);if(n&&e.select("span[data-mce-type=bookmark]",t).length>0)return false;return r},A=function(e,t){return e.isChildOf(t,e.getRoot())},D=function(e,t){var n=u.getNode(e,t);if(x(e)&&y(n)){var r;return{container:n,offset:t>=e.childNodes.length?n.data.length:0}}return{container:e,offset:t}},P,B=D,O=function(e){var t=e.cloneRange(),n=D(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=D(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},M=t.DOM,L,I,H=function(i){var o={},e=function(e){var t,n,r;if(n=i[e?"startContainer":"endContainer"],r=i[e?"startOffset":"endOffset"],1===n.nodeType){if(t=M.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes())if(r=Math.min(r,n.childNodes.length-1),e)n.insertBefore(t,n.childNodes[r]);else M.insertAfter(t,n.childNodes[r]);else n.appendChild(t);n=t,r=0}o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r};if(e(true),!i.collapsed)e();return o},F=function(o){function e(e){var t,n,r,i=function(e){var t=e.parentNode.firstChild,n=0;while(t){if(t===e)return n;if(1!==t.nodeType||"bookmark"!==t.getAttribute("data-mce-type"))n++;t=t.nextSibling}return-1};if(t=r=o[e?"startContainer":"endContainer"],n=o[e?"startOffset":"endOffset"],!t)return;if(1===t.nodeType)if(n=i(t),t=t.parentNode,M.remove(r),!t.hasChildNodes()&&M.isBlock(t))t.appendChild(M.create("br"));o[e?"startContainer":"endContainer"]=t,o[e?"startOffset":"endOffset"]=n}e(true),e();var t=M.createRng();if(t.setStart(o.startContainer,o.startOffset),o.endContainer)t.setEnd(o.endContainer,o.endOffset);return O(t)},z=t.DOM,W=function(e,t){var n,r=t.parentNode;if("LI"===r.nodeName&&r.firstChild===t)if((n=r.previousSibling)&&"LI"===n.nodeName){if(n.appendChild(t),R(e,r))z.remove(r)}else z.setStyle(r,"listStyleType","none");if(w(r))if((n=r.previousSibling)&&"LI"===n.nodeName)n.appendChild(t)},U,j=W,V=function(t,e){c.each(c.grep(t.select("ol,ul",e)),function(e){W(t,e)})},$=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),q=function(e){var t=e.selection.getStart(true);return e.dom.getParent(t,"OL,UL,DL",Q(e,t))},Y=function(e,t){return e&&1===t.length&&t[0]===e},K=function(e){return c.grep(e.querySelectorAll("ol,ul,dl"),function(e){return w(e)})},X,G=function(n,e){var t=c.map(e,function(e){var t=n.dom.getParent(e,"li,dd,dt",Q(n,e));return t?t:e});return $.unique(t)},J,Q=function(e,t){var n=e.dom.getParents(t,"TD,TH"),r;return n.length>0?n[0]:e.getBody()},Z={getParentList:q,getSelectedSubLists:function(e){var t=q(e),n=e.selection.getSelectedBlocks();if(Y(t,n))return K(t);else return c.grep(n,function(e){return w(e)&&t!==e})},getSelectedListItems:function(e){var t=e.selection.getSelectedBlocks();return c.grep(G(e,t),function(e){return x(e)})},getClosestListRootElm:Q},ee=tinymce.util.Tools.resolve("tinymce.Env"),te=t.DOM,ne,re=function(e,t,n){var r,i,o=te.createFragment(),a,s=e.schema.getBlockElements();if(e.settings.forced_root_block)n=n||e.settings.forced_root_block;if(n){if((i=te.create(n)).tagName===e.settings.forced_root_block)te.setAttribs(i,e.settings.forced_root_block_attrs);if(!_(t.firstChild,s))o.appendChild(i)}if(t)while(r=t.firstChild){var u=r.nodeName;if(!a&&("SPAN"!==u||"bookmark"!==r.getAttribute("data-mce-type")))a=true;if(_(r,s))o.appendChild(r),i=null;else if(n){if(!i)i=te.create(n),o.appendChild(i);i.appendChild(r)}else o.appendChild(r)}if(!e.settings.forced_root_block)o.appendChild(te.create("br"));else if(!a&&(!ee.ie||ee.ie>10))i.appendChild(te.create("br",{"data-mce-bogus":"1"}));return o},ie=t.DOM,oe,ae=function(e,t,n,r){var i,o,a,s,u=function(t){c.each(a,function(e){t.parentNode.insertBefore(e,n.parentNode)}),ie.remove(t)};for(a=ie.select('span[data-mce-type="bookmark"]',t),r=r||re(e,n),(i=ie.createRng()).setStartAfter(n),i.setEndAfter(t),s=(o=i.extractContents()).firstChild;s;s=s.firstChild)if("LI"===s.nodeName&&e.dom.isEmpty(s)){ie.remove(s);break}if(!e.dom.isEmpty(o))ie.insertAfter(o,t);if(ie.insertAfter(r,t),R(e.dom,n.parentNode))u(n.parentNode);if(ie.remove(n),R(e.dom,t))ie.remove(t)},se=t.DOM,ue=function(e,t){if(R(e,t))se.remove(t)},le=function(e,t){var n=t.parentNode,r=n.parentNode,i;if(n===e.getBody())return true;if("DD"===t.nodeName)return se.rename(t,"DT"),true;if(S(t)&&E(t)){if("LI"===r.nodeName)se.insertAfter(t,r),ue(e.dom,r),se.remove(n);else if(w(r))se.remove(n,true);else r.insertBefore(re(e,t),n),se.remove(n);return true}else if(S(t)){if("LI"===r.nodeName)se.insertAfter(t,r),t.appendChild(n),ue(e.dom,r);else if(w(r))r.insertBefore(t,n);else r.insertBefore(re(e,t),n),se.remove(t);return true}else if(E(t)){if("LI"===r.nodeName)se.insertAfter(t,r);else if(w(r))se.insertAfter(t,n);else se.insertAfter(re(e,t),n),se.remove(t);return true}if("LI"===r.nodeName)n=r,i=re(e,t,"LI");else if(w(r))i=re(e,t,"LI");else i=re(e,t);return ae(e,n,t,i),V(e.dom,n.parentNode),true},fe,ce=le,de=function(e){var t=Z.getSelectedListItems(e);if(t.length){var n=H(e.selection.getRng(true)),r=void 0,i=void 0,o=Z.getClosestListRootElm(e,e.selection.getStart(true));r=t.length;while(r--){var a=t[r].parentNode;while(a&&a!==o){i=t.length;while(i--)if(t[i]===a){t.splice(r,1);break}a=a.parentNode}}for(r=0;r<t.length;r++)if(!le(e,t[r])&&0===r)break;return e.selection.setRng(F(n)),e.nodeChanged(),true}},me=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},he=function(n,e){c.each(e,function(e,t){n.setAttribute(t,e)})},pe=function(e,t,n){he(t,n["list-attributes"]),c.each(e.select("li",t),function(e){he(e,n["list-item-attributes"])})},ge=function(e,t,n){me(e,t,n),pe(e,t,n)},ve=function(n,r,e){c.each(e,function(e){return n.setStyle(r,((t={})[e]="",t));var t})},be=function(e,t,n,r){var i,o;if(i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===i.nodeType)i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i;if(!n&&k(i.nextSibling))i=i.nextSibling;while(i.parentNode!==r){if(N(e,i))return i;if(/^(TD|TH)$/.test(i.parentNode.nodeName))return i;i=i.parentNode}return i},ye=function(n,e,r){for(var i=[],o=n.dom,t=be(n,e,true,r),a=be(n,e,false,r),s,u=[],l=t;l;l=l.nextSibling)if(u.push(l),l===a)break;return c.each(u,function(e){if(N(n,e))return i.push(e),void(s=null);if(o.isBlock(e)||k(e)){if(k(e))o.remove(e);return void(s=null)}var t=e.nextSibling;if(f.isBookmarkNode(e))if(N(n,t)||!t&&e.parentNode===r)return void(s=null);if(!s)s=o.create("p"),e.parentNode.insertBefore(s,e),i.push(s);s.appendChild(e)}),i},we=function(e,t,n){var r=e.getStyle(t,"list-style-type"),i=n?n["list-style-type"]:"";return r===(i=null===i?"":i)},xe=function(r,i,o){if(void 0===o)o={};var e=r.selection.getRng(true),t,a="LI",n=Z.getClosestListRootElm(r,r.selection.getStart(true)),s=r.dom;if("false"===s.getContentEditable(r.selection.getNode()))return;if("DL"===(i=i.toUpperCase()))a="DT";t=H(e),c.each(ye(r,e,n),function(e){var t,n;if((n=e.previousSibling)&&w(n)&&n.nodeName===i&&we(s,n,o))t=n,e=s.rename(e,a),n.appendChild(e);else t=s.create(i),e.parentNode.insertBefore(t,e),t.appendChild(e),e=s.rename(e,a);ve(s,e,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ge(s,t,o),_e(r.dom,t)}),r.selection.setRng(F(t))},Ce=function(r){var e=H(r.selection.getRng(true)),i=Z.getClosestListRootElm(r,r.selection.getStart(true)),t=Z.getSelectedListItems(r),n=c.grep(t,function(e){return r.dom.isEmpty(e)});t=c.grep(t,function(e){return!r.dom.isEmpty(e)}),c.each(n,function(e){if(R(r.dom,e))return void ce(r,e)}),c.each(t,function(e){var t,n;if(e.parentNode===r.getBody())return;for(t=e;t&&t!==i;t=t.parentNode)if(w(t))n=t;ae(r,n,e),V(r.dom,n.parentNode)}),r.selection.setRng(F(e))},ke=function(e,t){return e&&t&&w(e)&&e.nodeName===t.nodeName},Se=function(e,t,n){var r,i;return e.getStyle(t,"list-style-type",true)===e.getStyle(n,"list-style-type",true)},Ee=function(e,t){return e.className===t.className},Ne=function(e,t,n){return ke(t,n)&&Se(e,t,n)&&Ee(t,n)},_e=function(e,t){var n,r;if(n=t.nextSibling,Ne(e,t,n)){while(r=n.firstChild)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,Ne(e,t,n)){while(r=n.lastChild)t.insertBefore(r,t.firstChild);e.remove(n)}},Te=function(e,t,n,r){if(t.nodeName!==n){var i=e.rename(t,n);ge(e,i,r)}else ge(e,t,r)},Re=function(t,e,n,r,i){if(e.nodeName===r&&!Ae(i))Ce(t);else{var o=H(t.selection.getRng(true));c.each([e].concat(n),function(e){Te(t.dom,e,r,i)}),t.selection.setRng(F(o))}},Ae=function(e){return"list-style-type"in e},De=function(e,t,n,r){if(t===e.getBody())return;if(t)if(t.nodeName===n&&!Ae(r))Ce(e);else{var i=H(e.selection.getRng(true));ge(e.dom,t,r),_e(e.dom,e.dom.rename(t,n)),e.selection.setRng(F(i))}else xe(e,n,r)},Pe,Be={toggleList:function(e,t,n){var r=Z.getParentList(e),i=Z.getSelectedSubLists(e);if(n=n?n:{},r&&i.length>0)Re(e,r,i,t,n);else De(e,r,t,n)},removeList:Ce,mergeWithAdjacentLists:_e},Oe=function(e,t,n,r){var i=t.startContainer,o=t.startOffset,a,s;if(3===i.nodeType&&(n?o<i.data.length:o>0))return i;if(a=e.schema.getNonEmptyElements(),1===i.nodeType)i=u.getNode(i,o);if(s=new l(i,r),n)if(T(e.dom,i))s.next();while(i=s[n?"next":"prev2"]()){if("LI"===i.nodeName&&!i.hasChildNodes())return i;if(a[i.nodeName])return i;if(3===i.nodeType&&i.data.length>0)return i}},Me=function(e,t){var n=t.childNodes;return 1===n.length&&!w(n[0])&&e.isBlock(n[0])},Le=function(e,t){if(Me(e,t))e.remove(t.firstChild,true)},Ie=function(e,t,n){var r,i;if(i=Me(e,n)?n.firstChild:n,Le(e,t),!R(e,t,true))while(r=t.firstChild)i.appendChild(r)},He=function(e,t,n){var r,i,o=t.parentNode;if(!A(e,t)||!A(e,n))return;if(w(n.lastChild))i=n.lastChild;if(o===n.lastChild)if(k(o.previousSibling))e.remove(o.previousSibling);if((r=n.lastChild)&&k(r)&&t.hasChildNodes())e.remove(r);if(R(e,n,true))e.$(n).empty();if(Ie(e,t,n),i)n.appendChild(i);if(e.remove(t),R(e,o)&&o!==e.getRoot())e.remove(o)},Fe=function(e,t,n){e.dom.$(n).empty(),He(e.dom,t,n),e.selection.setCursorLocation(n)},ze=function(e,t,n,r){var i=e.dom;if(i.isEmpty(r))Fe(e,n,r);else{var o=H(t);He(i,n,r),e.selection.setRng(F(o))}},We=function(e,t,n,r){var i=H(t);He(e.dom,n,r);var o=F(i);e.selection.setRng(o)},Ue=function(e,t){var n=e.dom,r=e.selection,i=r.getStart(),o=Z.getClosestListRootElm(e,i),a=n.getParent(r.getStart(),"LI",o),s,u,l;if(a){if((s=a.parentNode)===e.getBody()&&R(n,s))return true;if(u=O(r.getRng(true)),(l=n.getParent(Oe(e,u,t,o),"LI",o))&&l!==a){if(t)ze(e,u,l,a);else We(e,u,a,l);return true}else if(!l)if(!t&&Be.removeList(e))return true}return false},je=function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);if(e.remove(t),r&&e.isEmpty(r))e.remove(r)},Ve=function(e,t){var n=e.dom,r=e.selection.getStart(),i=Z.getClosestListRootElm(e,r),o=n.getParent(r,n.isBlock,i);if(o&&n.isEmpty(o)){var a=O(e.selection.getRng(true)),s=n.getParent(Oe(e,a,t,i),"LI",i);if(s)return e.undoManager.transact(function(){je(n,o,i),Be.mergeWithAdjacentLists(n,s.parentNode),e.selection.select(s,true),e.selection.collapse(t)}),true}return false},$e=function(e,t){return Ue(e,t)||Ve(e,t)},qe=function(e){var t=e.selection.getStart(),n=Z.getClosestListRootElm(e,t),r;if(e.dom.getParent(t,"LI,DT,DD",n)||Z.getSelectedListItems(e).length>0)return e.undoManager.transact(function(){e.execCommand("Delete"),V(e.dom,e.getBody())}),true;return false},Ye=function(e,t){return e.selection.isCollapsed()?$e(e,t):qe(e)},Ke,Xe=function(t){t.on("keydown",function(e){if(e.keyCode===n.BACKSPACE){if(Ye(t,false))e.preventDefault()}else if(e.keyCode===n.DELETE)if(Ye(t,true))e.preventDefault()})},Ge=Ye,Je,Qe=function(t){return{backspaceDelete:function(e){Ge(t,e)}}},Ze=t.DOM,et=function(e,t){var n;if(w(e)){while(n=e.firstChild)t.appendChild(n);Ze.remove(e)}},tt=function(e){var t,n,r;if("DT"===e.nodeName)return Ze.rename(e,"DD"),true;if((t=e.previousSibling)&&w(t))return t.appendChild(e),true;if(t&&"LI"===t.nodeName&&w(t.lastChild))return t.lastChild.appendChild(e),et(e.lastChild,t.lastChild),true;if((t=e.nextSibling)&&w(t))return t.insertBefore(e,t.firstChild),true;if((t=e.previousSibling)&&"LI"===t.nodeName){if(n=Ze.create(e.parentNode.nodeName),r=Ze.getStyle(e.parentNode,"listStyleType"))Ze.setStyle(n,"listStyleType",r);return t.appendChild(n),n.appendChild(e),et(e.lastChild,n),true}return false},nt,rt=function(e){var t=Z.getSelectedListItems(e);if(t.length){for(var n=H(e.selection.getRng(true)),r=0;r<t.length;r++)if(!tt(t[r])&&0===r)break;return e.selection.setRng(F(n)),e.nodeChanged(),true}},it=function(t,n){return function(){var e=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===n}},ot,at=function(r){r.on("BeforeExecCommand",function(e){var t=e.command.toLowerCase(),n;if("indent"===t){if(rt(r))n=true}else if("outdent"===t)if(de(r))n=true;if(n)return r.fire("ExecCommand",{command:e.command}),e.preventDefault(),true}),r.addCommand("InsertUnorderedList",function(e,t){Be.toggleList(r,"UL",t)}),r.addCommand("InsertOrderedList",function(e,t){Be.toggleList(r,"OL",t)}),r.addCommand("InsertDefinitionList",function(e,t){Be.toggleList(r,"DL",t)}),r.addQueryStateHandler("InsertUnorderedList",it(r,"UL")),r.addQueryStateHandler("InsertOrderedList",it(r,"OL")),r.addQueryStateHandler("InsertDefinitionList",it(r,"DL"))},st,ut=function(e){return e.getParam("lists_indent_on_tab",true)},lt=function(t){t.on("keydown",function(e){if(e.keyCode!==n.TAB||n.metaKeyPressed(e))return;if(t.dom.getParent(t.selection.getStart(),"LI,DT,DD"))if(e.preventDefault(),e.shiftKey)de(t);else rt(t)})},ft,ct=function(e){if(ut(e))lt(e);Xe(e)},dt=function(e,t){for(var n=0;n<e.length;n++){var r;if(t(e[n]))return n}return-1},mt=function(t,o){return function(e){var i=e.control;t.on("NodeChange",function(e){var t=dt(e.parents,C),n=-1!==t?e.parents.slice(0,t):e.parents,r=c.grep(n,w);i.active(r.length>0&&r[0].nodeName===o)})}},ht=function(r){return function(e){var n=e.control;r.on("nodechange",function(){var e=Z.getSelectedListItems(r),t=e.length>0&&S(e[0]);n.disabled(t)})}},pt,gt=function(e){var t;if(!function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return-1!==c.inArray(n.split(/[ ,]/),t)}(e,"advlist"))e.addButton("numlist",{active:false,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:mt(e,"OL")}),e.addButton("bullist",{active:false,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:mt(e,"UL")});e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:ht(e)})};function vt(){}return e.add("lists",function(e){return ct(e),gt(e),at(e),Qe(e)}),vt}()}(),function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),t,n,r,u=function(e){return e.getParam("noneditable_noneditable_class","mceNonEditable")},l=function(e){return e.getParam("noneditable_editable_class","mceEditable")},f=function(e){var t=e.getParam("noneditable_regexp",[]);if(t&&t.constructor===RegExp)return[t];else return t},c=function(t){return function(e){return-1!==(" "+e.attr("class")+" ").indexOf(t)}},o=function(a,s,u){return function(e){var t=arguments,n=t[t.length-2],r=n>0?s.charAt(n-1):"";if('"'===r)return e;if(">"===r){var i=s.lastIndexOf("<",n);if(-1!==i){var o;if(-1!==s.substring(i,n).indexOf('contenteditable="false"'))return e}}return'<span class="'+u+'" data-mce-content="'+a.dom.encode(t[0])+'">'+a.dom.encode("string"===typeof t[1]?t[1]:t[0])+"</span>"}},d=function(e,t,n){var r=t.length,i=n.content;if("raw"===n.format)return;while(r--)i=i.replace(t[r],o(e,i,u(e)));n.content=i},i,a=function(t){var e,n,r="contenteditable";e=" "+s.trim(l(t))+" ",n=" "+s.trim(u(t))+" ";var i=c(e),o=c(n),a=f(t);t.on("PreInit",function(){if(a.length>0)t.on("BeforeSetContent",function(e){d(t,a,e)});t.parser.addAttributeFilter("class",function(e){var t=e.length,n;while(t--)if(n=e[t],i(n))n.attr(r,"true");else if(o(n))n.attr(r,"false")}),t.serializer.addAttributeFilter(r,function(e){var t=e.length,n;while(t--){if(n=e[t],!i(n)&&!o(n))continue;if(a.length>0&&n.attr("data-mce-content"))n.name="#text",n.type=3,n.raw=true,n.value=n.attr("data-mce-content");else n.attr(r,null)}})})};function m(){}return e.add("noneditable",function(e){a(e)}),m}()}(),function(){var e=function(){"use strict";var o=function(e){var t=e,n=function(){return t},r,i;return{get:n,set:function(e){t=e},clone:function(){return o(n())}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),t,n,r,a,s=function(e){return e.settings.codesample_content_css},u=function(e){return e.settings.codesample_languages},l=function(e){return Math.min(i.DOM.getViewPort().w,e.getParam("codesample_dialog_width",800))},f=function(e){return Math.min(i.DOM.getViewPort().w,e.getParam("codesample_dialog_height",650))},c={},d="undefined"!==typeof c?c:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},m=function(){var l=/\blang(?:uage)?-(?!\*)(\w+)\b/i,S=d.Prism={util:{encode:function(e){if(e instanceof s)return new s(e.type,S.util.encode(e.content),e.alias);else if("Array"===S.util.type(e))return e.map(S.util.encode);else return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var t;switch(S.util.type(e)){case"Object":var n={};for(var r in e)if(e.hasOwnProperty(r))n[r]=S.util.clone(e[r]);return n;case"Array":return e.map&&e.map(function(e){return S.util.clone(e)})}return e}},languages:{extend:function(e,t){var n=S.util.clone(S.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(n,e,t,r){var i=(r=r||S.languages)[n];if(2===arguments.length){for(var o in t=e)if(t.hasOwnProperty(o))i[o]=t[o];return i}var a={};for(var s in i)if(i.hasOwnProperty(s)){if(s===e)for(var o in t)if(t.hasOwnProperty(o))a[o]=t[o];a[s]=i[s]}return S.languages.DFS(S.languages,function(e,t){if(t===r[n]&&e!==n)this[e]=a}),r[n]=a},DFS:function(e,t,n){for(var r in e)if(e.hasOwnProperty(r))if(t.call(e,r,e[r],n||r),"Object"===S.util.type(e[r]))S.languages.DFS(e[r],t);else if("Array"===S.util.type(e[r]))S.languages.DFS(e[r],t,r)}},plugins:{},highlightAll:function(e,t){for(var n=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),r=0,i=void 0;i=n[r++];)S.highlightElement(i,true===e,t)},highlightElement:function(e,t,n){var r,i,o=e;while(o&&!l.test(o.className))o=o.parentNode;if(o)r=(o.className.match(l)||[,""])[1],i=S.languages[r];if(e.className=e.className.replace(l,"").replace(/\s+/g," ")+" language-"+r,o=e.parentNode,/pre/i.test(o.nodeName))o.className=o.className.replace(l,"").replace(/\s+/g," ")+" language-"+r;var a=e.textContent,s={element:e,language:r,grammar:i,code:a};if(!a||!i)return void S.hooks.run("complete",s);if(S.hooks.run("before-highlight",s),t&&d.Worker){var u=new Worker(S.filename);u.onmessage=function(e){if(s.highlightedCode=e.data,S.hooks.run("before-insert",s),s.element.innerHTML=s.highlightedCode,n)n.call(s.element);S.hooks.run("after-highlight",s),S.hooks.run("complete",s)},u.postMessage(JSON.stringify({language:s.language,code:s.code,immediateClose:true}))}else{if(s.highlightedCode=S.highlight(s.code,s.grammar,s.language),S.hooks.run("before-insert",s),s.element.innerHTML=s.highlightedCode,n)n.call(e);S.hooks.run("after-highlight",s),S.hooks.run("complete",s)}},highlight:function(e,t,n){var r=S.tokenize(e,t);return s.stringify(S.util.encode(r),n)},tokenize:function(e,t,n){var r=S.Token,i=[e],o=t.rest;if(o){for(var a in o)t[a]=o[a];delete t.rest}e:for(var a in t){if(!t.hasOwnProperty(a)||!t[a])continue;var s=t[a];s="Array"===S.util.type(s)?s:[s];for(var u=0;u<s.length;++u){var l=s[u],f=l.inside,c=!!l.lookbehind,d=0,m=l.alias;l=l.pattern||l;for(var h=0;h<i.length;h++){var p=i[h];if(i.length>e.length)break e;if(p instanceof r)continue;l.lastIndex=0;var g=l.exec(p);if(g){if(c)d=g[1].length;var v=g.index-1+d,b,y=v+(g=g[0].slice(d)).length,w=p.slice(0,v+1),x=p.slice(y+1),C=[h,1];if(w)C.push(w);var k=new r(a,f?S.tokenize(g,f):g,m);if(C.push(k),x)C.push(x);Array.prototype.splice.apply(i,C)}}}}return i},hooks:{all:{},add:function(e,t){var n=S.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=S.hooks.all[e];if(!n||!n.length)return;for(var r=0,i=void 0;i=n[r++];)i(t)}}},s=S.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(s.stringify=function(t,n,e){if("string"===typeof t)return t;if("Array"===S.util.type(t))return t.map(function(e){return s.stringify(e,n,t)}).join("");var r={type:t.type,content:s.stringify(t.content,n,e),tag:"span",classes:["token",t.type],attributes:{},language:n,parent:e};if("comment"===r.type)r.attributes.spellcheck="true";if(t.alias){var i="Array"===S.util.type(t.alias)?t.alias:[t.alias];Array.prototype.push.apply(r.classes,i)}S.hooks.run("wrap",r);var o="";for(var a in r.attributes)o+=(o?" ":"")+a+'="'+(r.attributes[a]||"")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'" '+o+">"+r.content+"</"+r.tag+">"},!d.document){if(!d.addEventListener)return d.Prism;return d.addEventListener("message",function(e){var t=JSON.parse(e.data),n=t.language,r=t.code,i=t.immediateClose;if(d.postMessage(S.highlight(r,S.languages[n],n)),i)d.close()},false),d.Prism}}();if("undefined"!==typeof module&&module.exports)module.exports=m;if("undefined"!==typeof global)global.Prism=m;if(m.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},m.hooks.add("wrap",function(e){if("entity"===e.type)e.attributes.title=e.content.replace(/&amp;/,"&")}),m.languages.xml=m.languages.markup,m.languages.html=m.languages.markup,m.languages.mathml=m.languages.markup,m.languages.svg=m.languages.markup,m.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},m.languages.css.atrule.inside.rest=m.util.clone(m.languages.css),m.languages.markup)m.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:m.languages.markup.tag.inside},rest:m.languages.css},alias:"language-css"}}),m.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:m.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:m.languages.css}},alias:"language-css"}},m.languages.markup.tag);if(m.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:true},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:true}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:true,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},m.languages.javascript=m.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),m.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:true}}),m.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:m.languages.javascript}},string:/[\s\S]+/}}}),m.languages.markup)m.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:m.languages.markup.tag.inside},rest:m.languages.javascript},alias:"language-javascript"}});if(m.languages.js=m.languages.javascript,m.languages.c=m.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),m.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:true,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:true}}}}),delete m.languages.c["class-name"],delete m.languages.c.boolean,m.languages.csharp=m.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),m.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:true}}),m.languages.cpp=m.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),m.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:true}}),m.languages.java=m.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:true}}),m.languages.php=m.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:true}}),m.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:true,alias:"comment"}}),m.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:true,inside:{punctuation:/\\/}}}),m.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:true}}),m.languages.markup)m.hooks.add("before-highlight",function(t){if("php"!==t.language)return;t.tokenStack=[],t.backupCode=t.code,t.code=t.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(e){return t.tokenStack.push(e),"{{{PHP"+t.tokenStack.length+"}}}"})}),m.hooks.add("before-insert",function(e){if("php"===e.language)e.code=e.backupCode,delete e.backupCode}),m.hooks.add("after-highlight",function(e){if("php"!==e.language)return;for(var t=0,n=void 0;n=e.tokenStack[t];t++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(t+1)+"}}}",m.highlight(n,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}),m.hooks.add("wrap",function(e){if("php"===e.language&&"markup"===e.type)e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>')}),m.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:m.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/});function h(e){return e&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-")}function p(n){return function(e,t){return n(t)}}m.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:true},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:true},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:true},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:true}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(m);var g={isCodeSample:h,trimArg:p},v=function(e){var t=e.selection.getNode();if(g.isCodeSample(t))return t;return null},b,y,w={getSelectedCodeSample:v,insertCodeSample:function(t,n,r){t.undoManager.transact(function(){var e=v(t);if(r=i.DOM.encode(r),e)t.dom.setAttrib(e,"class","language-"+n),e.innerHTML=r,m.highlightElement(e),t.selection.select(e);else t.insertContent('<pre id="__new" class="language-'+n+'">'+r+"</pre>"),t.selection.select(t.$("#__new").removeAttr("id")[0])})},getCurrentCode:function(e){var t=v(e);if(t)return t.textContent;return""}},x,C,k=function(e){var t=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],n=u(e);return n?n:t},S=function(e){var t,n=w.getSelectedCodeSample(e);if(n)return(t=n.className.match(/language-(\w+)/))?t[1]:"";return""},E=function(t){var e=l(t),n=f(t),r=S(t),i=k(t),o=w.getCurrentCode(t);t.windowManager.open({title:"Insert/Edit code sample",minWidth:e,minHeight:n,layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:r,values:i},{type:"textbox",name:"code",multiline:true,spellcheck:false,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:o,autofocus:true}],onSubmit:function(e){w.insertCodeSample(t,e.data.language,e.data.code)}})},N,_=function(t){t.addCommand("codesample",function(){var e=t.selection.getNode();if(t.selection.isCollapsed()||g.isCodeSample(e))E(t);else t.formatter.toggle("code")})},T,R=function(n){var i=n.$;n.on("PreProcess",function(e){i("pre[contenteditable=false]",e.node).filter(g.trimArg(g.isCodeSample)).each(function(e,t){var n=i(t),r=t.textContent;n.attr("class",i.trim(n.attr("class"))),n.removeAttr("contentEditable"),n.empty().append(i("<code></code>").each(function(){this.textContent=r}))})}),n.on("SetContent",function(){var e=i("pre").filter(g.trimArg(g.isCodeSample)).filter(function(e,t){return"false"!==t.contentEditable});if(e.length)n.undoManager.transact(function(){e.each(function(e,t){i(t).find("br").each(function(e,t){t.parentNode.replaceChild(n.getDoc().createTextNode("\n"),t)}),t.contentEditable=false,t.innerHTML=n.dom.encode(t.textContent),m.highlightElement(t),t.className=i.trim(t.className)})})})},A,D=function(e,t,n,r){var i,o=s(e);if(e.inline&&n.get())return;if(!e.inline&&r.get())return;if(e.inline)n.set(true);else r.set(true);if(false!==o)i=e.dom.create("link",{rel:"stylesheet",href:o?o:t+"/css/prism.css"}),e.getDoc().getElementsByTagName("head")[0].appendChild(i)},P,B=function(e){e.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),e.addMenuItem("codesample",{cmd:"codesample",text:"Code sample",icon:"codesample"})},O=o(false);function M(){}return e.add("codesample",function(t,e){var n=o(false);return R(t),B(t),_(t),t.on("init",function(){D(t,e,O,n)}),t.on("dblclick",function(e){if(g.isCodeSample(e.target))E(t)}),w}),M}()}();
