<div>
    <component data-component="SBIS3.CONTROLS.FilterButton">
        <opt name="name" value="filterButton" />

        <!--
            это свойство "на выход" - для удобного получения фильтра.
            снаружи его ставить не надо, чтобы не было противоречия с filterStructure.
            снаружи фильтр надо ставить через filterStructure  / или всё же ставить, но тогда он изменит и filterStructure ???
            так лучше, наверное. а filterStructure изменит его при установке - то есть они оба меняют внутр. переменную filter
        -->
        <opt name="filter"></opt>

        <opt name="resetLinkText">Нужно отобрать?</opt>

        <opts name="filterStructure" type="array">
            <opts>
                <!-- По умолчанию будет NDS, если не указано - тоже NDS -->
                <opt name="internalValueField">NDS</opt>

                <!-- По умолчанию будет NDS -->
                <opt name="internalCaptionField">NDSText</opt>
                <opt name="internalVisibilityField">ndsVisibility</opt>

                <!-- По умолчанию будет "ничего" - если по привязке нет, и тут нет -->
                <opt name="caption" bind="filterDescr/NDS"></opt>

                <opt name="value" bind="filter/NDS"></opt>

                <opt name="resetValue" type="string">1</opt>
                <opt name="resetCaption">Без НДС</opt>
            </opts>
            <opts>
                <opt name="internalValueField">clientName</opt>

                <opt name="caption" bind="filterDescr/clientName"></opt>

                <opt name="value" bind="filter/clientName"></opt>

                <opt name="resetValue"></opt>
            </opts>
            <opts>
                <opt name="internalValueField">selling</opt>

                <opt name="internalCaptionField">sellingText</opt>

                <opt name="internalVisibilityField">comboBox1</opt>
                <opt name="resetVisibilityValue" type="boolean">false</opt>

                <opt name="caption" bind="filterDescr/selling"></opt>

                <opt name="value" bind="filter/selling"></opt>

                <opt name="resetValue"></opt>
            </opts>
            <opts>
                <opt name="internalValueField">using</opt>
                <opt name="internalCaptionField">usingText</opt>
                <opt name="internalVisibilityField">usingVisibility</opt>
                <opt name="resetVisibilityValue" type="boolean">false</opt>
                <opt name="caption" bind="filterDescr/using"></opt>
                <opt name="value" bind="filter/using">1</opt>
                <opt name="resetValue">1</opt>
            </opts>

            <opts>
                <opt name="internalValueField">title</opt>
                <opt name="internalCaptionField">titleText</opt>
                <opt name="internalVisibilityField">titleVisibility</opt>
                <opt name="resetVisibilityValue" type="boolean">false</opt>
                <opt name="caption" bind="filterDescr/title"></opt>
                <opt name="value" bind="filter/title"></opt>
                <opt name="resetValue" type="null"></opt>
            </opts>

            <opts>
                <opt name="internalValueField">filterAuthor</opt>
                <opt name="internalCaptionField">filterAuthorText</opt>
                <opt name="internalVisibilityField">filterAuthorVisibility</opt>
                <opt name="resetVisibilityValue" type="boolean">false</opt>
                <opt name="caption" bind="filterDescr/user"></opt>
                <opt name="value" bind="filter/user"></opt>
                <opt name="resetValue" type="1"></opt>
            </opts>

            <opts>
                <opt name="internalValueField">filterSelect</opt>
                <opt name="internalCaptionField">filterSelectText</opt>
                <opt name="internalVisibilityField">filterSelectVisibility</opt>
                <opt name="caption" bind="filterDescr/filterSelectText"></opt>
                <opt name="value" bind="filter/filterSelect" nonexistent="resetKeyStr"></opt>
                <opt name="resetValue" value="resetKeyStr"></opt>
            </opts>
        </opts>

        <opt name="additionalFilterParamsTemplate">
            <component data-component="SBIS3.CONTROLS.Demo.AdditionalFilterTemplate"></component>
        </opt>

        <opt name="template">
            <component data-component="SBIS3.CONTROLS.Demo.FilterButtonFilterContentFull"></component>
        </opt>
    </component>

    <div data-bind="{html: 'filterJSON'}"></div>
    <div data-bind="{html: 'filterDescrJSON'}"></div>

    <component data-component="SBIS3.CONTROLS.DataGridView" style="width: 800px; position: relative;">
        <opt name="filter" bind="filter"></opt>
        <opt name="name" value="MyDataGrid"></opt>
        <options name="columns" type="array">
            <options>
                <option name="title">Заголовок</option>
                <option name="width" type="string">100</option>
                <option name="field">title</option>
            </options>
            <options>
                <option name="title">NDS</option>
                <option name="width" type="string">100</option>
                <option name="field">NDSText</option>
            </options>
            <options>
                <option name="title">selling</option>
                <option name="width" type="string">250</option>
                <option name="field">sellingText</option>
            </options>
            <options>
                <option name="title">using</option>
                <option name="width" type="string">150</option>
                <option name="field">usingText</option>
            </options>
           <options>
              <option name="title">Пользователь</option>
              <option name="width" type="string">150</option>
              <option name="field">user</option>
           </options>
            <options>
                <option name="title">Статус заказа</option>
                <option name="width" type="string">150</option>
                <option name="field">filterSelectText</option>
            </options>
        </options>
        <option name="emptyHTML">Нет записей</option>
        <options name="items" type="array">

            <options>
                <option name="title" type="string">Один</option>

                <option name="NDSText" type="string">Без НДС</option>
                <option name="sellingText">Все (для продажи и нет)</option>
                <option name="usingText">Используемые</option>

                <option name="NDS" type="string">1</option>
                <option name="selling">1</option>
                <option name="using">1</option>

               <option name="user" type="string">Пушкин</option>
               <option name="filterSelect">1</option>
               <option name="filterSelectText" type="string">Оплаченный</option>
            </options>

            <options>
                <option name="title" type="string">Два</option>
                <option name="NDSText" type="string">Без НДС</option>
                <option name="sellingText">Все (для продажи и нет)</option>
                <option name="usingText">Используемые</option>

                <option name="NDS" type="string">1</option>
                <option name="selling">1</option>
                <option name="using">1</option>

               <option name="user" type="string">Лермонтов</option>
                <option name="filterSelect">2</option>
                <option name="filterSelectText" type="string">Оплаченный частично</option>
            </options>

            <options>
                <option name="title" type="string">Три</option>

                <option name="NDSText" type="string">Без НДС</option>
                <option name="sellingText">Все (для продажи и нет)</option>
                <option name="usingText">Используемые</option>

                <option name="NDS" type="string">1</option>
                <option name="selling">1</option>
                <option name="using">1</option>

               <option name="user" type="string">Толстой</option>
                <option name="filterSelect">1</option>
                <option name="filterSelectText" type="string">Оплаченный</option>
            </options>
           <options>
              <option name="title" type="string">Четыре</option>

              <option name="NDSText" type="string">С НДС</option>
              <option name="sellingText">Все (для продажи и нет)</option>
              <option name="usingText">Используемые</option>

              <option name="NDS" type="string">2</option>
              <option name="selling">2</option>
              <option name="using">1</option>

              <option name="user" type="string">Бродский</option>
               <option name="filterSelect">1</option>
               <option name="filterSelectText" type="string">Оплаченный</option>
           </options>
           <options>
              <option name="title" type="string">Пять</option>

              <option name="NDSText" type="string">С НДС</option>
              <option name="sellingText">Все (для продажи и нет)</option>
              <option name="usingText">Неиспользуемые</option>

              <option name="NDS" type="string">2</option>
              <option name="selling">2</option>
              <option name="using">1</option>
              <option name="user" type="string">Пушкин</option>
               <option name="filterSelect">3</option>
               <option name="filterSelectText" type="string">Неоплаченный</option>
           </options>
        </options>
        <options name="selectedKeys" type="array">
            <option type="string">1</option>
            <option type="string">2</option>
            <option type="string">5</option>
        </options>
        <option name="multiselect">true</option>
    </component>
</div>